!function(e){function n(n){for(var r,c,u=n[0],a=n[1],s=n[2],l=0,d=[];l<u.length;l++)c=u[l],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(f&&f(n);d.length;)d.shift()();return i.push.apply(i,s||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,u=1;u<t.length;u++){var a=t[u];0!==o[a]&&(r=!1)}r&&(i.splice(n--,1),e=c(c.s=t[0]))}return e}var r={},o={43:0},i=[];function c(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=r,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)c.d(t,r,function(n){return e[n]}.bind(null,r));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="";var u=window.webpackJsonp=window.webpackJsonp||[],a=u.push.bind(u);u.push=n,u=u.slice();for(var s=0;s<u.length;s++)n(u[s]);var f=a;i.push([1194,2]),t()}({1194:function(e,n,t){e.exports=t(1195)},1195:function(e,n,t){"use strict";t.r(n);var r=t(36);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,n){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function a(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=l(e);if(n){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return s(this,t)}}function s(e,n){if(n&&("object"===o(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var p=window.__APP__.createModule,h=["SchEngine:documentZoom","SchEngine:documentMove","SchEngine:documentClick","SchEngine:resetDocumentView"];e=p({type:"View",name:"SCHViewModule",description:"My Awesome Module",create:function(e){return new(function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&u(e,n)}(l,e);var n,t,o,s=a(l);function l(){var e;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,l),d(f(e=s.call(this,{name:"SCHView",displayName:"SCH",comment:"",description:"Schematic SVG main view",order:1,dependencies:["sch"]})),"canBeSelect",(function(n){if(n){if(Object.getOwnPropertyDescriptor(n,"schDocId")&&Object.getOwnPropertyDescriptor(n,"schId"))return!0;if(Object.getOwnPropertyDescriptor(n,"primitives")&&n.primitives&&n.primitives.find((function(n){return e.canBeSelect(window.__CORE__.response.metadata.primitives[n])})))return!0}return!1})),d(f(e),"onKeyDown",(function(n){e.active&&(!n||82!==n.keyCode&&"KeyR"!==n.code||setTimeout((function(){e.Core.engines.SchEngine.resetView()}),1))})),e.logger=window.__CORE__.createLogger("SCHView"),e.renderDocumentData=null,e}return n=l,(t=[{key:"events",get:function(){return["SCHView:documentChanged","SCHView:documents","SCHView:showDocument","SCHView:renderDocumentData","SCHView:shown","SCHView:hidden","SCHView:enableSelection","SCHView:zoomToFit","SCHView:documentInfo"]}},{key:"hidden",get:function(){return!this.engine||0===this.engine.allDocuments.length}},{key:"setup",value:function(e){var n=this;return new Promise((function(t){n.Core=e,n.engine=n.Core.engines.SchEngine,n.engine?(window.addEventListener("keydown",n.onKeyDown),n.logger.LogDebug("Setup SCH view"),n.Core.bus.emit("SCHView:documents",n.engine.allDocuments),n.Core.bus.on("SCHView:zoomToFit",(function(e){return n.Core.bus.emit("SchEngine:zoomToFit",e)})),n.Core.bus.on("SchEngine:didDocumentAttachError",(function(e){var t=e.error,r=e.documentId;n.renderDocumentData=null,n.updateLoader("error",t.message),n.Core.bus.emit("SCHView:documentChanged",r),n.Core.bus.emit("Document:open-error",{name:"SCH",message:t.message,error:t})})),n.Core.bus.on("select",(function(e){return n.engine.onSelect(e).catch((function(e){n.checkError(e)}))})),n.Core.bus.on("SchEngine:didDocumentAttach",(function(e){n.renderDocumentData=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){d(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e),n.updateLoader(),n.Core.bus.emit("SCHView:documentChanged",e.documentId)})),n.Core.bus.on("SchEngine:beforeDocumentLoad",(function(e){return n.onSchDocumentLoad(e)})),n.Core.bus.on("SchEngine:afterDocumentLoad",(function(){return n.onSchDocumentDidLoad()})),n.Core.bus.on("SCHView:showDocument",(function(e){e&&n.engine.showDocument(e).catch((function(e){n.checkError(e)}))})),n.Core.bus.on("SCHView:enableSelection",(function(e){n.engine.enableSelection(e)})),n.Core.bus.on("SCHView:renderDocumentData",(function(e){e.renderDocumentData=n.renderDocumentData})),n.Core.bus.on("SCHView:documentInfo",(function(e){var t;if(e){var r;if(e.id)r=n.engine.allDocuments.find((function(n){return n.id===e.id}));else{var o=n.engine.activeDocumentIndex;r=n.engine.allDocuments[o],e.id=r.id}r&&(e.name=null!==(t=r.displayName)&&void 0!==t?t:r.name)}})),h.forEach((function(e){return n.Core.bus.on(e,(function(e){n.Core.bus.emit("sceneInteracted",e)}))}))):n.logger.LogError("Schematic engine has not found."),t()}))}},{key:"hasControls",value:function(e){e.push({type:"select"}),e.push({type:"zoom"}),e.push({type:"pan"}),e.push({type:"reset"})}},{key:"activate",value:function(e){var n=this;this.logger.LogDebug("Activate SCH view"),this.active=!0,this.div=e,this.engine?this.engine.showView(e).then((function(t){return new Promise((function(t,r){n.Core.bus.emit("SCHView:shown",e),n.error&&r(n.error),!n.loaded&&n.engine.loadAllDocuments(20).then((function(){n.error=null,t()})).catch((function(e){n.error=e,r(e)})).finally((function(){return n.loaded=!0}))}))})).catch((function(e){n.checkError(e)})):this.updateLoader("error","Schematic engine has not found.")}},{key:"deactivate",value:function(){this.logger.LogDebug("Deactivate SCH view"),this.active=!1,this.engine&&(this.engine.hideView(),this.Core.bus.emit("SCHView:hidden")),this.updateLoader()}},{key:"onSchDocumentLoad",value:function(e){if(this.active){if(this.error)return this.checkError(this.error);this.updateLoader("large","Processing document"),this.preview||(this.preview=window.__APP__.preview(this.div,e.previewUrl))}}},{key:"onSchDocumentDidLoad",value:function(){this.preview&&(this.preview.destroy(),this.preview=null),this.updateLoader()}},{key:"updateLoader",value:function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"large";if(this.loader&&(this.loader.destroy(),this.loader=null),this.div&&e&&n){var o={message:n,type:e,size:r};t&&(o.icon=t),this.loader=window.__APP__.loader(this.div,o)}}},{key:"checkError",value:function(e){var n;(null==e||null===(n=e.innerError)||void 0===n?void 0:n.code)===r.a.StoreExpired||e.code===r.a.StoreExpired?this.updateLoader("error",e.message,"info-16","small"):this.updateLoader("error",e.message)}}])&&c(n.prototype,t),o&&c(n,o),Object.defineProperty(n,"prototype",{writable:!1}),l}(e))}});window.__CORE__&&window.__CORE__.addModule(e)}});