(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(t,e,n){"use strict";function r(t,e,n,r,o,i,a,s){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:u}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n(2);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=function(t){return t?"is-".concat(t,"-theme"):"is-dark-theme"},a=function(t,e){return"".concat(t,"__").concat(e)},s=function(t,e){var n;return o(n={},"".concat(t,"_radius-tl"),-1!==e.indexOf(r.d.tl)),o(n,"".concat(t,"_radius-tr"),-1!==e.indexOf(r.d.tr)),o(n,"".concat(t,"_radius-bl"),-1!==e.indexOf(r.d.bl)),o(n,"".concat(t,"_radius-br"),-1!==e.indexOf(r.d.br)),n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return a}));var r={isNotouch:"is-notouch",isTouch:"is-touch",isOpened:"is-opened",isActive:"is-active",isSelected:"is-selected",isError:"is-error"},o=(window,function(t){return"function"==typeof t}),i={tl:"top-left",tr:"top-right",bl:"bottom-left",br:"bottom-right"},a={set:function(t){var e=t.id,n=t.component;window.__afsComponents||(window.__afsComponents={}),window.__afsComponents[e]=n},get:function(t){return window.__afsComponents&&window.__afsComponents[t]},delete:function(t){!window.__afsComponents||window.__afsComponents&&!window.__afsComponents[t]||delete window.__afsComponents[t]}};Object.freeze({SM:"sm",MD:"md",LG:"lg"})},function(t,e,n){"use strict";e.a=function(t){return t.$afsConfig?t.$afsConfig:t.$data&&t.$data.afsConfig?t.$data.afsConfig:window.__APP__&&window.__APP__.afsConfig?window.__APP__.afsConfig:{}}},function(t,e,n){"use strict";var r=n(24);e.a=r.a},function(t,e,n){"use strict";var r=function(){var t=this;return(0,t._self._c)(t.componentType,t._g(t._b({tag:"component",staticClass:"afs-typography",class:[t.typeClass,t.textEllipsisClass]},"component",t.$attrs,!1),t.$listeners),[t._t("default",null,{getBEMClass:t.getBEMClass})],2)};r._withStripped=!0;var o=n(1),i=["large title","medium title","title","paragraph","single line","hint","tooltip","group","sticker","text"],a={name:"AfsText",props:{type:{type:String,default:"paragraph",validator:function(t){return i.includes(t)}},inline:{type:Boolean,default:!1},ellipsis:{type:Boolean,default:!1},tag:{type:String,default:""}},computed:{checkType:function(){return{isLargeTitle:"large title"===this.type,isMediumTitle:"medium title"===this.type,isTitle:"title"===this.type,isParagraph:"paragraph"===this.type,isSingleLine:"single line"===this.type,isHint:"hint"===this.type,isTooltip:"tooltip"===this.type,isGroup:"group"===this.type,isSticker:"sticker"===this.type,isText:"text"===this.type}},textEllipsisClass:function(){return{"afs-typography_ellipsis":this.checkType.isSingleLine||this.ellipsis}},typeClass:function(){var t=this.checkType,e="afs-typography_";return t.isLargeTitle?e+"large-title":t.isMediumTitle?e+"medium-title":t.isTitle?e+"title":t.isSingleLine?e+"single-line":t.isHint||t.isTooltip?e+"hint-tooltip":t.isGroup?e+"group":t.isSticker?e+"sticker":t.isText?e+"text":e+"paragraph"},componentType:function(){return this.tag?this.tag:this.inline?"span":"div"}},methods:{getBEMClass:function(t){return Object(o.a)("afs-typography",t)}}},s=(n(49),n(0)),c=Object(s.a)(a,r,[],!1,null,null,null).exports;e.a=c},function(t,e,n){"use strict";n.d(e,"t",(function(){return c})),n.d(e,"p",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return f})),n.d(e,"F",(function(){return d})),n.d(e,"q",(function(){return h})),n.d(e,"z",(function(){return p})),n.d(e,"i",(function(){return y})),n.d(e,"f",(function(){return g})),n.d(e,"c",(function(){return b})),n.d(e,"D",(function(){return w})),n.d(e,"d",(function(){return _})),n.d(e,"y",(function(){return O})),n.d(e,"e",(function(){return S})),n.d(e,"J",(function(){return x})),n.d(e,"u",(function(){return C})),n.d(e,"x",(function(){return E})),n.d(e,"k",(function(){return k})),n.d(e,"H",(function(){return T})),n.d(e,"m",(function(){return P})),n.d(e,"I",(function(){return L})),n.d(e,"C",(function(){return I})),n.d(e,"v",(function(){return D})),n.d(e,"w",(function(){return R})),n.d(e,"A",(function(){return N})),n.d(e,"b",(function(){return B})),n.d(e,"l",(function(){return F})),n.d(e,"n",(function(){return U})),n.d(e,"j",(function(){return $})),n.d(e,"a",(function(){return G})),n.d(e,"o",(function(){return V})),n.d(e,"r",(function(){return z})),n.d(e,"B",(function(){return H})),n.d(e,"s",(function(){return W})),n.d(e,"G",(function(){return Y})),n.d(e,"E",(function(){return q}));var r,o,i=n(10),a=window.__CORE__,s=Object(i.c)("data-subject-guid",""),c=!1,u=!1,l=Object(i.c)("data-project-src",""),f=Object(i.c)("data-project-guid",""),d=Object(i.c)("data-snapshot-vcs-revision",""),h=!!d,p=Object(i.c)("data-project-name",""),m="true"===Object(i.c)("data-is-local-debug","").toLowerCase(),v=Object(i.c)("data-service-base-url",""),y=Object(i.c)("data-release-guid",""),g=Object(i.c)("data-page-url",""),b=Object(i.c)("data-analytics-subject",""),w=Object(i.c)("data-session-id","").trim(),_=Object(i.c)("data-comment-session-id",""),O=f||s||(null===(r=a.response)||void 0===r||null===(o=r.designId)||void 0===o?void 0:o.toUpperCase())||"",S=Object(i.c)("data-comment-cloud-url",""),x=Object(i.c)("data-user-name",""),C=Object(i.c)("data-is-user-admin",!1),E=Object(i.c)("data-local-user-id",""),k=Object(i.c)("data-global-user-id",""),T=Object(i.c)("data-user-avatar",""),P=Object(i.c)("data-ids-cloud-url",""),j=Object(i.c)("data-ids-service-url",""),A=Object(i.c)("data-push-service-url",""),M=Object(i.c)("data-push-cloud-url",""),L=Object(i.c)("data-user-avatar-template",""),I=Object(i.c)("data-saveto-url","").trim(),D="True"===Object(i.c)("data-is-wip-sharing-mode","True"),R=c?P:m?j:"/ids/?cls=soap",N=c?M:m?A:"".concat(v,"/websocket/WebService.asmx"),B=Object(i.c)("data-allow-comments-without-thread-group",!1),F=Object(i.c)("data-hide-fabrication-comments",!1),U=(Object(i.c)("data-is-external-user",!1),Object(i.c)("data-is-anonymous",!1)),$=Object(i.c)("data-enabled-sharing",!1),G=Object(i.c)("data-active-thread",""),V=Object(i.c)("data-is-ccv",""),z=(Object(i.c)("data-can-download",!0),"gerber"===Object(i.c)("data-active-view","")),H=Object(i.c)("data-register-url",""),W=Object(i.c)("data-comment-panel-hide",""),Y=Object(i.c)("data-suggestions-context-guid",""),q=!D&&!c&&!h},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e),e.default=function(){return["","","-","-","-","-","","",""].reduce((function(t,e){return t+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+e}))}}])},function(t,e,n){"use strict";var r=function(){var t=this._self._c;return t("transition",{attrs:{name:"fade","enter-class":"afs-context-menu_enter","leave-to-class":"afs-context-menu_leave-to","enter-active-class":"afs-context-menu_enter-active","leave-active-class":"afs-context-menu_leave-active"}},[this.isOpened&&this.isExist?t("div",{directives:[{name:"inject",rawName:"v-inject"}],staticClass:"afs-context-menu",class:this.classes,style:this.style,attrs:{"data-id":this.id}},[t("div",{staticClass:"afs-context-menu__inner"},[this._t("default",null,{getBEMClass:this.getBEMClass})],2)]):this._e()])};r._withStripped=!0;var o=n(1),i=n(3),a=n(2),s=n(13);n(40);function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l={y:["top","bottom","end","start","center"],x:["left","right","end","start","center"]},f={control:"control",auto:"auto"},d="top-left top-right bottom-right bottom-left",h={name:"AfsContextMenu",directives:{inject:s.a},props:{type:{type:String,default:"",required:!0,validator:function(t){return["dropdown","hint","tooltip"].some((function(e){return e===t}))}},modifiers:{type:Object,default:function(){return{y:"bottom",x:"right"}},validator:function(t){if(Object.is(t))return!1;var e=t.x,n=t.y,r=l.y.some((function(t){return t===n})),o=l.x.some((function(t){return t===e}));return r&&o}},id:{type:[String,Number],default:"context-menu"},offsetY:{type:[Number,String],default:0,validator:function(t){return isFinite(+t)}},offsetX:{type:[Number,String],default:0,validator:function(t){return isFinite(+t)}},viewboxOffsetY:{type:[Number,String],default:20,validator:function(t){return isFinite(+t)}},viewboxOffsetX:{type:[Number,String],default:20,validator:function(t){return isFinite(+t)}},borderRadius:{type:String,default:d,validator:function(t){var e=d.split(" ");return t.split(" ").every((function(t){return e.includes(t)}))}},width:{type:[Number,String],default:"auto",validator:function(t){return isFinite(+t)||!!f[t]}},maxWidth:{type:[Number,String],default:null,validator:function(t){return isFinite(+t)}},minWidth:{type:[Number,String],default:0,validator:function(t){return isFinite(+t)}},height:{type:[Number,String],default:"auto",validator:function(t){return isFinite(+t)||!!f[t]}},maxHeight:{type:[Number,String],default:null,validator:function(t){return isFinite(+t)}},minHeight:{type:[Number,String],default:0,validator:function(t){return isFinite(+t)}},hasArrow:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isExist:{type:Boolean,default:!0}},data:function(){return{control:null,top:0,left:0,sizes:{width:null,maxWidth:null,minWidth:null,height:null,maxHeight:null,minHeight:null},isOpened:!1,showToBottom:null,showToRight:null}},computed:{classes:function(){var t=this.showToBottom,e=this.showToRight,n={left:"afs-context-menu_left",right:"afs-context-menu_right",start:"afs-context-menu_x-start",end:"afs-context-menu_x-end",center:"afs-context-menu_x-center"},r={top:"afs-context-menu_top",bottom:"afs-context-menu_bottom",start:"afs-context-menu_y-start",end:"afs-context-menu_y-end",center:"afs-context-menu_y-center"},o=null,i=null;return this.direction.y.top||this.direction.y.bottom?o=t?r.bottom:r.top:this.direction.y.start||this.direction.y.end?o=t?r.start:r.end:this.direction.y.center&&(o=r.center),this.direction.x.right||this.direction.x.left?i=e?n.right:n.left:this.direction.x.start||this.direction.x.end?i=t?n.start:n.end:this.direction.x.center&&(i=n.center),[this.themeClass,o,i,{"afs-context-menu_arrow":this.hasArrow,"afs-context-menu_error":this.isError},"afs-context-menu_".concat(this.type)].concat(c(this.borderRadius.split(" ").map((function(t){return"afs-context-menu_border-".concat(t,"-radius")}))))},themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)},style:function(){return{top:"".concat(this.top,"px"),left:"".concat(this.left,"px"),width:this.sizes.width&&"".concat(this.sizes.width,"px"),height:this.sizes.height&&"".concat(this.sizes.height,"px")}},direction:function(){return{y:{top:"top"===this.modifiers.y,bottom:"bottom"===this.modifiers.y,start:"start"===this.modifiers.y,end:"end"===this.modifiers.y,center:"center"===this.modifiers.y},x:{left:"left"===this.modifiers.x,right:"right"===this.modifiers.x,start:"start"===this.modifiers.x,end:"end"===this.modifiers.x,center:"center"===this.modifiers.x}}},isDropdown:function(){return"dropdown"===this.type},isHint:function(){return"hint"===this.type},isTooltip:function(){return"tooltip"===this.type},toBottom:function(){return this.direction.y.bottom||this.direction.y.start},toRight:function(){return this.direction.x.right||this.direction.x.start}},watch:{isOpened:{immediate:!0,handler:function(t){t?(!this.isHint&&document.addEventListener("click",this.handleDocumentClick,!0),window.addEventListener("resize",this.handleWindowResize)):(!this.isHint&&document.removeEventListener("click",this.handleDocumentClick,!0),window.removeEventListener("resize",this.handleWindowResize))}},toBottom:function(){this.showToBottom=this.toBottom},toRight:function(){this.showToRight=this.toRight}},mounted:function(){a.b.set({id:this.id,component:this})},beforeDestroy:function(){a.b.delete(this.id)},methods:{getBEMClass:function(t){return Object(o.a)("afs-context-menu",t)},showByElement:function(t){this._open(),this.setPositionByElement(t)},recalc:function(){this.isOpened&&(this._reset(),this.setPositionByElement(this.control))},setPositionByElement:function(t){var e=this,n=t.getBoundingClientRect();this.top=-99999,this.left=-99999,this.$nextTick((function(){if(e.$el.getBoundingClientRect){var r=e.getViewbox(),o=e.$el.getBoundingClientRect(),i={width:Math.max(e.minWidth,f.control===e.width?n.width:f.auto===e.width?o.width:e.width),height:Math.max(e.minHeight,f.control===e.height?n.height:f.auto===e.height?o.height:e.height)},a=e.getContainerPositionAndMaxSize({direction:e.modifiers.y,viewbox:r.y,offset:+e.offsetY,control:{size:n.height,position:n.top},container:{size:null!==e.maxHeight&&+e.maxHeight<i.height?+e.maxHeight:i.height}}),s=e.getContainerPositionAndMaxSize({direction:e.modifiers.x,viewbox:r.x,offset:+e.offsetX,control:{size:n.width,position:n.left},container:{size:null!==e.maxWidth&&+e.maxWidth<i.width?+e.maxWidth:i.width}}),c=e.maxWidth&&+e.maxWidth<s.maxSize?+e.maxWidth:s.maxSize,u=e.maxHeight&&+e.maxHeight<a.maxSize?+e.maxHeight:a.maxSize;e.top=a.position,e.left=s.position,e.sizes.width=Math.min(i.width,c),e.sizes.height=Math.min(i.height,u)}else e.setPositionByElement(t)}))},getContainerPositionAndMaxSize:function(t){var e=t.direction,n=t.viewbox,r=t.offset,o=t.control,i=t.container,a="center"===e,s="start"===e,c="end"===e,u="top"===e||"left"===e,l=a?o.position+o.size/2-i.size/2:s?o.position+r:c?o.position+o.size-i.size-r:u?o.position-i.size-r:o.position+o.size+r;return{position:c||u?Math.max(l,n.min):l,maxSize:a?n.size:c||u?i.size-(n.min-l):n.max-l}},getViewbox:function(){var t=+this.viewboxOffsetY,e=+this.viewboxOffsetX;return{y:{min:t,max:window.innerHeight-t,size:window.innerHeight-2*t},x:{min:e,max:window.innerWidth-e,size:window.innerWidth-2*e}}},handleWindowResize:function(){this._close()},handleDocumentClick:function(t){var e=this;t.path.some((function(t){return t===e.$el}))||t.path.some((function(t){return t.dataset&&t.dataset.afsDropdownControl===e.id}))||this._close()},_reset:function(){this.sizes.width=null,this.sizes.height=null},_open:function(){this.isOpened||(this.isOpened=!0,this.$emit("open"))},_close:function(){this.isOpened&&(this.isOpened=!1,this._reset(),this.$emit("close"))},toggle:function(t){this.isOpened?this.close():this.open(t)},open:function(t){!this.isOpened&&t&&this.isExist&&(this.control=t,this.showByElement(t))},close:function(){this.isOpened&&this.isExist&&this._close()}}},p=n(0),m=(Object(p.a)(h,r,[],!1,null,null,null).exports,function(){var t=this,e=t._self._c;return e(t.tag,{tag:"component",staticClass:"afs-context-menu__section"},[t.items.length?t._l(t.items,(function(n){return e(t.itemTag,{key:n.id,tag:"component",staticClass:"afs-context-menu__item"},[t._t("item",null,{data:n})],2)})):t._e(),t._v(" "),t._t("default")],2)});m._withStripped=!0;var v={ul:"li",div:"div"},y={name:"AfsContextMenuSection",props:{tag:{type:String,default:"ul",validator:function(t){return!!v[t]}},items:{type:Array,default:function(){return[]}}},computed:{itemTag:function(){return v[this.tag]}}},g=(Object(p.a)(y,m,[],!1,null,null,null).exports,function(){var t=this._self._c;return t("button",{staticClass:"afs-context-menu__item-in afs-context-menu__item-clickable",class:{"afs-context-menu__item-in_icon":this.hasIcon},attrs:{type:this.type,disabled:this.disabled}},[this.hasIcon?t("Icon",{staticClass:"afs-context-menu__item-icon",attrs:{name:this.icon}}):this._e(),this._v(" "),t("AfsText",{attrs:{type:"single line",inline:""}},[this._t("default")],2)],1)});g._withStripped=!0;var b=n(4),w=n(5),_={name:"AfsContextMenuButton",components:{Icon:b.a,AfsText:w.a},props:{type:{type:String,default:"button"},icon:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{hasIcon:function(){return!!this.icon.length}}},O=(Object(p.a)(_,g,[],!1,null,null,null).exports,function(){var t=this._self._c;return t("div",{staticClass:"afs-context-menu__head"},[t("AfsText",{attrs:{type:"medium title"}},[this._t("default")],2),this._v(" "),t("button",{staticClass:"afs-context-menu__btn-close",on:{click:this.onClose}},[t("Icon",{staticClass:"afs-context-menu__icon-close",attrs:{name:"close-8"}})],1)],1)});O._withStripped=!0;var S={name:"Head",components:{Icon:b.a,AfsText:w.a},methods:{onClose:function(){var t=document.querySelector("body");t&&t.click(),this.$emit("close")}}},x=(Object(p.a)(S,O,[],!1,null,null,null).exports,function(){return(0,this._self._c)("div",{staticClass:"afs-context-menu__footer",style:{"justify-content":this.justify}},[this._t("default")],2)});x._withStripped=!0;var C={name:"Head",props:{justify:{type:String,default:""}}},E=(Object(p.a)(C,x,[],!1,null,null,null).exports,function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade","enter-class":"afs-context-menu_enter","leave-to-class":"afs-context-menu_leave-to","enter-active-class":"afs-context-menu_enter-active","leave-active-class":"afs-context-menu_leave-active"}},[t.isOpened&&t.isExist?e("div",{directives:[{name:"inject",rawName:"v-inject:[parentContainerId]",arg:t.parentContainerId}],staticClass:"afs-context-menu",class:t.classes,style:t.style,attrs:{"data-locator":t.dataLocator,"data-id":t.id}},[t.isInfotooltip?e("div",{staticClass:"afs-context-menu__connector"}):t._e(),t._v(" "),e("div",{staticClass:"afs-context-menu__inner"},[t._t("default",(function(){return[t.text?e("span",[t._v(t._s(t.text))]):t._e()]}),{getBEMClass:t.getBEMClass})],2)]):t._e()])});function k(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}E._withStripped=!0;var P={y:["top","bottom","end","start","center"],x:["left","right","end","start","center"]},j={name:"AfsContextMenu",directives:{inject:s.a},props:{type:{type:String,default:"",required:!0,validator:function(t){return["dropdown","hint","tooltip","infotooltip"].some((function(e){return e===t}))}},modifiers:{type:Object,default:function(){return{y:"bottom",x:"center"}},validator:function(t){if(Object.is(t))return!1;var e=t.x,n=t.y,r=P.y.some((function(t){return t===n})),o=P.x.some((function(t){return t===e}));return r&&o}},id:{type:[String,Number],default:"context-menu"},borderRadius:{type:String,default:"top-left top-right bottom-right bottom-left",validator:function(t){var e="top-left top-right bottom-right bottom-left".split(" ");return t.split(" ").every((function(t){return e.includes(t)}))}},dataLocator:{type:String,default:"context-menu"},isSticky:{type:Boolean,default:!1},showAtCursor:{type:Boolean,default:!1},offset:{type:Number,default:4},viewboxOffset:{type:Number,default:20},arrow:{type:Boolean,default:!1},wide:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},initWidth:{type:[Number,String],default:0},error:{type:Boolean,default:!1},isExist:{type:Boolean,default:!0},maxHeightLimit:{type:Number,default:Number.MAX_SAFE_INTEGER},maxWidthLimit:{type:Number,default:Number.MAX_SAFE_INTEGER},parentContainerId:{type:String,default:""},closeOnIframeClick:{type:Boolean,default:!1},closeOnEsc:{type:Boolean,default:!1}},data:function(){return{parent:null,top:0,left:0,width:null,maxWidth:null,minWidth:null,maxHeight:null,isOpened:!1,showToBottom:null,showToRight:null,text:""}},computed:{classes:function(){var t=this.showToBottom,e=this.showToRight,n={left:"afs-context-menu_left",right:"afs-context-menu_right",start:"afs-context-menu_x-start",end:"afs-context-menu_x-end",center:"afs-context-menu_x-center"},r={top:"afs-context-menu_top",bottom:"afs-context-menu_bottom",start:"afs-context-menu_y-start",end:"afs-context-menu_y-end",center:"afs-context-menu_y-center"},o=null,i=null;return this.direction.y.top||this.direction.y.bottom?o=t?r.bottom:r.top:this.direction.y.start||this.direction.y.end?o=t?r.start:r.end:this.direction.y.center&&(o=r.center),this.direction.x.right||this.direction.x.left?i=e?n.right:n.left:this.direction.x.start||this.direction.x.end?i=t?n.start:n.end:this.direction.x.center&&(i=n.center),[this.themeClass,o,i,{"afs-context-menu_arrow":this.arrow,"afs-context-menu_error":this.error},"afs-context-menu_".concat(this.type)].concat(k(this.borderRadius.split(" ").map((function(t){return"afs-context-menu_border-".concat(t,"-radius")}))))},themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)},style:function(){return{top:"".concat(this.top,"px"),left:"".concat(this.left,"px"),width:this.fullWidth&&this.width&&"".concat(this.width,"px")||!!this.initWidth&&"".concat(this.initWidth,"px"),"min-width":this.wide&&this.minWidth&&"".concat(this.minWidth,"px"),"max-width":this.maxWidth&&"".concat(this.maxWidth,"px"),"max-height":this.maxHeight&&"".concat(this.maxHeight,"px")}},direction:function(){return{y:{top:"top"===this.modifiers.y,bottom:"bottom"===this.modifiers.y,start:"start"===this.modifiers.y,end:"end"===this.modifiers.y,center:"center"===this.modifiers.y},x:{left:"left"===this.modifiers.x,right:"right"===this.modifiers.x,start:"start"===this.modifiers.x,end:"end"===this.modifiers.x,center:"center"===this.modifiers.x}}},isDropdown:function(){return"dropdown"===this.type},isHint:function(){return"hint"===this.type},isTooltip:function(){return"tooltip"===this.type},isInfotooltip:function(){return"infotooltip"===this.type},toBottom:function(){return this.direction.y.bottom||this.direction.y.start},toRight:function(){return this.direction.x.right||this.direction.x.start},api:function(){var t=this;return{open:this.open,close:this.close,setText:this.setText,toggle:this.toggle,showImmediately:function(){return t.isSticky&&t.isOpened},on:function(e,n){return t.$on(e,n)},off:function(e,n){return t.$off(e,n)}}}},watch:{isOpened:{immediate:!0,handler:function(t){t?(this.isHint||(document.addEventListener("click",this.handleDocumentClick,!0),this.closeOnIframeClick&&(window.focus(),window.addEventListener("blur",this.handleIframeClick,!0)),this.closeOnEsc&&window.addEventListener("keydown",this.handleEsc,!0)),window.addEventListener("resize",this.handleWindowResize)):(this.isHint||(document.removeEventListener("click",this.handleDocumentClick,!0),this.closeOnIframeClick&&window.removeEventListener("blur",this.handleIframeClick,!0),this.closeOnEsc&&window.removeEventListener("keydown",this.handleEsc,!0)),window.removeEventListener("resize",this.handleWindowResize))}},toBottom:function(){this.showToBottom=this.toBottom},toRight:function(){this.showToRight=this.toRight}},mounted:function(){a.b.set({id:this.id,component:this.api})},beforeDestroy:function(){a.b.delete(this.id)},methods:{setText:function(t){this.text=t},getBEMClass:function(t){return Object(o.a)("afs-context-menu",t)},showByCoordinates:function(t){var e=t.x,n=t.y;this._open(),this.setPositionByCoordinates({x:e,y:n})},showByElement:function(t,e){this._open(),this.setPositionByElement(t,e)},setPositionByElement:function(t,e){var n=this,r=this.direction,o=t.getBoundingClientRect();this.top=-99999,this.left=-99999,this.$nextTick((function(){if(n.$el.getBoundingClientRect){var i=n.getViewbox(),a=n.$el.getBoundingClientRect(),s=n.getContainerPositionAndMaxSize({direction:{primary:r.y.bottom,secondary:r.y.top,start:r.y.start,end:r.y.end,center:r.y.center},controlSize:e&&e.controlSize?e.controlSize:o.height,controlPosition:e&&e.y?e.y:o.top,containerSize:Math.min(a.height,n.maxHeightLimit),viewbox:i.y}),c=n.getContainerPositionAndMaxSize({direction:{primary:r.x.right,secondary:r.x.left,start:r.x.start,end:r.x.end,center:r.x.center},controlSize:e&&e.controlSize?e.controlSize:o.width,controlPosition:e&&e.x?e.x:o.left,containerSize:Math.min(a.width,n.maxWidthLimit),viewbox:i.x});n.top=s.position,n.left=c.position,n.maxHeight=n.isHint?null:Math.min(s.maxSize||Number.MAX_SAFE_INTEGER,n.maxHeightLimit),n.maxWidth=Math.min(c.maxSize||Number.MAX_SAFE_INTEGER,n.maxWidthLimit),n.showToBottom=(r.y.bottom||r.y.start)&&s.primary!==s.secondary||(r.y.top||r.y.end)&&(s.primary===s.secondary||s.primary===i.y.min),n.showToRight=(r.x.left||r.x.end)&&(c.primary===c.secondary||c.primary===i.x.min)||(r.x.right||r.x.start)&&c.primary!==c.secondary}else n.setPositionByElement(t,e)}))},getContainerPositionAndMaxSize:function(t){var e=t.direction,n=t.controlSize,r=t.controlPosition,o=t.containerSize,i=t.viewbox,a=this.offset,s=e.primary||e.start,c=e.secondary||e.end,u=0,l=0,f=null,d={size:i.size<o};return s?(e.primary?(u=r+n+a,l=r-o-a):e.start&&(u=r,l=r+n-o),d.primaryMin=u<i.min,d.primaryMax=u+o>i.max,d.secondaryMin=l<i.min,d.secondaryMax=l+o>i.max,d.size?(u=i.min,f=i.size):d.primaryMin&&!d.size?u=i.min:d.primaryMax&&(d.secondaryMin||d.secondaryMax)&&!d.size?u=i.max-o:!d.primaryMax||d.secondaryMin||d.secondaryMax||d.size||(u=l)):c?(e.secondary?(u=r-a-o,l=r+n+a):e.end&&(u=r+n-o,l=r),d.primaryMin=u<i.min,d.primaryMax=u+o>i.max,d.secondaryMin=l<i.min,d.secondaryMax=l+o>i.max,d.size?(u=i.min,f=i.size):d.primaryMax&&!d.size?u=i.max-o:d.primaryMin&&(d.secondaryMin||d.secondaryMax)&&!d.size?u=i.min:!d.primaryMin||d.secondaryMin||d.secondaryMax||d.size||(u=l)):e.center&&(u=r+n/2-o/2,d.min=i.min>u,d.max=i.max<u+o,!d.min||d.max||d.size?d.min||!d.max||d.size?d.size&&(u=i.min,f=i.size):u=i.max-o:u=i.min),{position:u,maxSize:f,primary:u,secondary:l}},setPositionByCoordinates:function(t){var e=this,n=t.x,r=t.y,o=this.direction;this.top=0,this.left=0;var i=r,a=n;this.$nextTick((function(){if(e.$el.getBoundingClientRect){var t=e.getViewbox(),n=e.$el.getBoundingClientRect(),r=e.getContainerPositionAndMaxSize({direction:{primary:o.y.bottom,secondary:o.y.top,start:o.y.start,end:o.y.end,center:o.y.center},controlSize:0,controlPosition:i,containerSize:n.height,viewbox:t.y}),s=e.getContainerPositionAndMaxSize({direction:{primary:o.x.right,secondary:o.x.left,start:o.x.start,end:o.x.end,center:o.x.center},controlSize:0,controlPosition:a,containerSize:n.width,viewbox:t.x});e.top=r.position,e.left=s.position,e.maxHeight=r.maxSize,e.maxWidth=s.maxSize}else e.setPositionByCoordinates({x:a,y:i})}))},handleWindowResize:function(){this._close()},handleDocumentClick:function(t){var e=this;t.path.some((function(t){return t===e.$el}))||t.path.some((function(t){return t.dataset&&t.dataset.afsDropdownControl===e.id}))||this._close(t)},getViewbox:function(){var t=this.viewboxOffset;return{y:{min:t,max:window.innerHeight-t,size:window.innerHeight-2*t},x:{min:t,max:window.innerWidth-t,size:window.innerWidth-2*t}}},_open:function(){this.isOpened||(this.isOpened=!0,this.$emit("open"))},_close:function(t){this.isOpened&&(this.isOpened=!1,this.parent=null,this.maxWidth=null,this.maxHeight=null,this.$emit("close",t))},isOpenedOnSameParent:function(t){return this.isOpened&&this.parent===t},toggle:function(t){this.isOpenedOnSameParent(t)?this.close():this.open(t)},open:function(t,e){if("$el"in t&&(t=t.$el),t&&this.isExist){this.parent!==t&&(this.parent=t);var n=t.getBoundingClientRect().width;this.width=n,this.minWidth=n,this.showByElement(t,this.showAtCursor||this.isSticky?{x:e.clientX,y:e.clientY,controlSize:1}:null)}},close:function(){this.isOpened&&this.isExist&&this._close()},handleIframeClick:function(){document.activeElement===document.querySelector("iframe")&&this.close()},handleEsc:function(t){27===t.keyCode&&this.close()}}},A=(n(63),Object(p.a)(j,E,[],!1,null,null,null).exports);e.a=A},function(t,e,n){"use strict";var r,o;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),function(t){t[t.Unknown=0]="Unknown",t[t.Copper=1]="Copper",t[t.Plated=2]="Plated",t[t.NonPlated=3]="NonPlated",t[t.Profile=4]="Profile",t[t.Soldermask=5]="Soldermask",t[t.Legend=6]="Legend",t[t.Paste=7]="Paste",t[t.Glue=8]="Glue",t[t.Carbonmask=9]="Carbonmask",t[t.Goldmask=10]="Goldmask",t[t.Heatsinkmask=11]="Heatsinkmask",t[t.Peelablemask=12]="Peelablemask",t[t.Silvermask=13]="Silvermask",t[t.Tinmask=14]="Tinmask",t[t.Depthrout=15]="Depthrout",t[t.Vcut=16]="Vcut",t[t.Viafill=17]="Viafill",t[t.ArrayDrawing=18]="ArrayDrawing",t[t.AssemblyDrawing=19]="AssemblyDrawing",t[t.Drillmap=20]="Drillmap",t[t.FabricationDrawing=21]="FabricationDrawing",t[t.Vcutmap=22]="Vcutmap",t[t.OtherDrawing=23]="OtherDrawing",t[t.Pads=24]="Pads",t[t.Other=25]="Other",t[t.Drawing=26]="Drawing",t[t.KeepOut=27]="KeepOut",t[t.NcDrill=28]="NcDrill"}(r||(r={})),function(t){t[t.Top=0]="Top",t[t.Inr=1]="Inr",t[t.Bot=2]="Bot",t[t.Pth=3]="Pth",t[t.Blind=4]="Blind",t[t.Buried=5]="Buried",t[t.Npth=6]="Npth",t[t.P=7]="P",t[t.Np=8]="Np"}(o||(o={}))},function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"g",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"i",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"k",(function(){return d})),n.d(e,"j",(function(){return h}));var r=function(t){return"string"==typeof t&&t.length},o=function(t){return"function"==typeof t},i=function(t){return"number"==typeof t},a={isRequired:function(t){return'"'.concat(t,'" is required')}},s={0:"mm",1:"mil"},c=function(t,e){var n={value:null};return window.__CORE__.tryGetAttributeValue(t,n)?n.value:e},u=function(t,e){return window.__CORE__.setAttributeValue(t,e)},l={1:"Arc",2:"Pad",3:"Via",4:"Track",6:"Fill",10:"Polygon",11:"Region",21:"Embedded Board Array"},f={voltage:1,currentDensity:2},d={voltage:"V",currentDensity:"A/m^2"},h={voltage:"V",currentDensity:"A/mm^2"}},function(t,e,n){var r=n(57),o=n(89),i=n(142),a=n(123),s=n(155),c=function(t,e,n){var u,l,f,d,h=t&c.F,p=t&c.G,m=t&c.S,v=t&c.P,y=t&c.B,g=p?r:m?r[e]||(r[e]={}):(r[e]||{}).prototype,b=p?o:o[e]||(o[e]={}),w=b.prototype||(b.prototype={});for(u in p&&(n=e),n)f=((l=!h&&g&&void 0!==g[u])?g:n)[u],d=y&&l?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,g&&a(g,u,f,t&c.U),b[u]!=f&&i(b,u,d),v&&w[u]!=f&&(w[u]=f)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o={};window.addEventListener("message",(function(t){var e;null!=t&&null!==(e=t.data)&&void 0!==e&&e.message&&o[t.data.message]&&o[t.data.message].forEach((function(e){return e(t.data)}))})),e.a={emit:function(t,e){return"object"===r(e)&&(e=JSON.parse(JSON.stringify(e))),window.parent!==window&&window.parent.postMessage({message:t,data:e,id:window.__iframeId},"*"),this},on:function(t,e){return o[t]?o[t].push(e):o[t]=[e],this},once:function(t,e){var n=this,r=function r(o){n.off(t,r),e(o)};return o[t]?o[t].push(r):o[t]=[r],this},off:function(t,e){return o[t]&&(o[t]=o[t].filter((function(t){return t!==e}))),o[t]&&!o[t].length&&delete o[t],this}}},function(t,e,n){"use strict";var r=n(37);e.a={inserted:function(t,e,n){var o=e.arg,i=void 0===o?void 0:o,a=e.value,s=void 0===a?void 0:a,c=n.context,u=void 0===c?void 0:c;(i||s?document.getElementById(i||s):document.body).appendChild(t);try{u.$on("hook:beforeDestroy",(function(){Object(r.a)(this.$parent.$el)&&this.$parent.$el.appendChild(this.$el)}))}catch(t){}},unmounted:function(t){var e;null==t||null===(e=t.parentNode)||void 0===e||e.removeChild(t)}}},function(t,e,n){"use strict";var r=n(10),o=JSON.parse(Object(r.c)("data-license-features","[]"));e.a={names:{schCompare:"Altium_AFS_CompareSCH",pcbCompare:"Altium_AFS_ComparePCB",bomCompare:"Altium_AFS_CompareBOM",resharing:"KillSwitch_RequestReshare",killSwitchDraftsmanView:"KillSwitch_Draftsman_View",draftsmanComment:"Altium_AFS_Draftsman_Comment",bomComment:"Altium_AFS_BOM_Comment",lightWeightTasks:"Altium_AFS_Tasks_Basic",killSwitch_Simulation_Download_Edb:"KillSwitch_Simulation_Download_EDB",killSwitchCompareBomView:"KillSwitch_CompareBOM_View",KillSwitchObjectVisibilityView:"KillSwitch_ObjectVisibility_View",tags:"KillSwitch_DesignTags",multiplePcb:"KillSwitch_MultiplePCB_View",multiboardGeneration:"KillSwitch_Multiboard_Generation",killSwitchMbsView:"KillSwitch_Mbs_View",killSwitchMbaView:"KillSwitch_Mba_View",killSwitchMbaHierarchyView:"KillSwitch_Mba_Hierarchy_View",killSwitchMbaTransparencyView:"KillSwitch_Mba_Transparency_View",commentsImages:"KillSwitch_Comments_Images"},getLicenseDetails:function(t){var e,n=o.find((function(e){return(e.includes(".")?e.split(".")[0]:e)===t}));return{isEnabled:!!n,label:null==n||null===(e=n.split("."))||void 0===e?void 0:e[1]}}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return ct})),n.d(e,"i",(function(){return ut})),n.d(e,"n",(function(){return lt})),n.d(e,"l",(function(){return ft})),n.d(e,"f",(function(){return dt})),n.d(e,"g",(function(){return ht})),n.d(e,"h",(function(){return pt})),n.d(e,"o",(function(){return mt})),n.d(e,"p",(function(){return vt})),n.d(e,"s",(function(){return yt})),n.d(e,"e",(function(){return gt})),n.d(e,"k",(function(){return bt})),n.d(e,"v",(function(){return wt})),n.d(e,"d",(function(){return _t})),n.d(e,"a",(function(){return Ot})),n.d(e,"m",(function(){return St})),n.d(e,"u",(function(){return xt})),n.d(e,"r",(function(){return Ct})),n.d(e,"q",(function(){return Et})),n.d(e,"t",(function(){return kt})),n.d(e,"j",(function(){return Tt}));var r=n(220),o=n(92);function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={threads:function(t){return Object(o.c)(t.threads)},threadById:function(t,e){return function(t){return e.threads.find((function(e){return e.id===t}))}},users:function(t){return Object(o.d)(t.users)},usersDictionary:function(t,e){return Object(r.makeDictionary)(e.users)},groupsDictionary:function(t){return Object(r.makeDictionary)(t.groups)},teamUsers:function(t){return Array.isArray(t.teamUsers)?Object(o.f)(t.teamUsers):[]},activeThreadId:function(t){return t.activeThreadId},activeThread:function(t,e){return e.activeThreadId&&(e.threads.find((function(t){return t.id===e.activeThreadId}))||e.lwTasks.find((function(t){return t.id===e.activeThreadId})))},createNewThread:function(t){return t.createNewThread},activeGraphicsComment:function(t){return t.activeGraphicsComment},currentDocId:function(t){return t.currentDocId},documents:function(t){return t.documents},lwTasks:function(t){return Object(o.a)(t.lwTasks)},otherDocuments:function(t){return t.otherDocuments},tooltip:function(t){return t.tooltip},filters:function(t){return t.filters},projectDetails:function(t){return t.projectDetails},tags:function(t){return Object(o.b)(t.tags)},commentControls:function(t){return t.activeCommentControl?t.commentControls.map((function(e){return c(c({},e),{},{isSelected:t.activeCommentControl.id===e.id})})):t.commentControls.map((function(t){return c(c({},t),{},{isSelected:!1})}))},activeFilters:function(t){var e=t.filters;return[].concat(i(e.radios.reduce((function(t,e){return e.isSelected&&t.push(c(c({},e),{},{user:e.users&&e.users.length?e.users.find((function(t){return t.isSelected})):null})),t}),[])),i(e.checkboxes.reduce((function(t,e){return(e.isSelected||"assignedto"===e.id)&&t.push(c(c({},e),{},{users:e.users&&e.users.length?e.users.filter((function(t){return t.isSelected})):[]})),t}),[])))},accessListUsersMap:function(t){var e=new Map;return t.accessListUsers.forEach((function(t){e.set(String(t.username||t.email||t.id).toLowerCase(),t)})),e},activeThreadProperties:function(t){var e;return t.activeThreadId&&(null===(e=t.threads.find((function(e){return e.Guid===t.activeThreadId})))||void 0===e?void 0:e.Properties)},isActiveThreadDetached:function(t,e){var n=e.activeThreadProperties;if(!n||"BOM"!==n.DocumentType)return!1;var r={commentBinding:{catalogItemUniqueId:n.BomCatalogItemUniqueId||null,designator:JSON.parse(n.BomDesignator||"[]"),uniqueId:JSON.parse(n.BomSchPartUniqueId||"[]")},rowId:null};return window.__CORE__.bus.emit("FBOM:findRowForCommentThread",r),null===r.rowId},detachedThreadTooltip:function(t,e){var n,r,o=e.activeThreadProperties,i=o.BomDesignator,a=o.BomParameter_Comment,s=o.BomParameter_Quantity;return{designator:null!==(n=null===(r=JSON.parse(i||"[]"))||void 0===r?void 0:r.join(","))&&void 0!==n?n:"",comment:a||"",quantity:s||""}},revisionTags:function(t){return i(new Set(t.threads.flatMap((function(t){return t.Properties})).map((function(t){return t.VcsRevision})).filter(Boolean)))}},f=n(6);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={setThreads:function(t,e){t.threads=e},setActiveThreadId:function(t,e){t.activeThreadId=e},setUsers:function(t,e){t.users=e},setGroups:function(t,e){t.groups=e},setTeamUsers:function(t,e){t.teamUsers=e},setActiveCommentControl:function(t,e){t.activeCommentControl=e},setCreateNewThread:function(t,e){t.createNewThread=e},setActiveGraphicsComment:function(t,e){t.activeGraphicsComment=e},setCurrentDocId:function(t,e){t.currentDocId=e},setDocuments:function(t,e){t.documents=e},setDocumentsState:function(t,e){t.documentState[e.key]=e.value},setOtherDocuments:function(t,e){t.otherDocuments=e},setTooltip:function(t,e){t.tooltip=e},setFilters:function(t,e){t.filters=e},setLoading:function(t,e){t.isLoading=e},setSortedThreads:function(t,e){t.sortedThreads=e},setActiveCommentPosition:function(t,e){t.activeCommentPosition=e},setUserSettings:function(t,e){t.userSettings=e},setIsDrawing:function(t,e){t.isDrawing=e},setUpdatePostedThread:function(t,e){e?t.updatePostedThread.push(e):t.updatePostedThread=[]},setActiveViewTabs:function(t,e){t.activeViewTabs=e},setUpdateViewTabs:function(t,e){t.updateViewTabs=e},setAccessListUsers:function(t,e){t.accessListUsers=e},setProjectDetails:function(t,e){t.projectDetails=e},setReleases:function(t,e){t.releases=e},setLightWeightTasks:function(t,e){t.lwTasks=e},setTags:function(t,e){t.tags=e},closeAllModal:function(t){t.forOpenModal.length&&(t.forOpenModal.forEach((function(t){return t.close()})),t.forOpenModal=[])},setOpenModal:function(t,e){t.forOpenModal.push(e)},removeOpenModal:function(t,e){t.forOpenModal.length&&(t.forOpenModal=t.forOpenModal.filter((function(t){return t!==e}))||[])},setSelectedUserSettings:function(t){if(Object.keys(t.userSettings).length){var e=function(e){t.filters[e].forEach((function(n){var r=t.userSettings[n.name];if(r){var o;if("checkboxes"===e&&(n.isSelected=!!parseInt(r.Value)),"radios"===e){var i,a=JSON.parse(r.Value);if(n.isSelected=!(!a||a.id!==n.id),a.userId&&null!==(i=n.users)&&void 0!==i&&i.length)n.users.reduce((function(t,e){return e.isSelected=a.userId===e.id,e.isSelected||t}),!1)||(n.user[0].isSelected=!0)}"AssignedTo"===n.name&&null!==(o=r.Value)&&void 0!==o&&o.length&&n.users.forEach((function(t){var e;t.isSelected=null===(e=r.Value)||void 0===e?void 0:e.includes(t.id)}))}}))};for(var n in t.filters)e(n)}window.__CORE__.bus.emit("CommentPanel:filterChange")},generalTaskMessageUpdate:function(t,e){var n=this.state.lwTasks.findIndex((function(t){return t.guid===e.taskId})),r=this.state.lwTasks[n];if(r){this.state.lwTasks[n].messages||(this.state.lwTasks[n].messages=[]);var o=r.messages.findIndex((function(t){return t.guid===e.message.guid}));-1===o?this.state.lwTasks[n].messages.push(e.message):this.state.lwTasks[n].messages.splice(o,1,e.message)}},generalTaskSetMessages:function(t,e){var n=e.taskId,r=e.messages,o=this.state.lwTasks.findIndex((function(t){return t.guid===n}));if(-1!==o){var i=this.state.lwTasks[o];this.state.lwTasks.splice(o,1,h(h({},i),{},{messages:r||[]}))}},generalTaskUpdate:function(t,e){var n=e.taskId,r=e.task,o=this.state.lwTasks.findIndex((function(t){return t.guid===n})),i=this.state.lwTasks[o],a=!!t.threads.find((function(t){return t.Guid===r.threadGuid})),s=f.c.includes("Release"),c=r.threadGuid&&s;a||c||(-1===o?this.state.lwTasks.push(r):this.state.lwTasks.splice(o,1,h(h({},i),r)))},generalTaskRemoveTask:function(t,e){var n=e.taskId,r=this.state.lwTasks.findIndex((function(t){return t.guid===n}));-1!==r&&this.state.lwTasks.splice(r,1)},generalTaskRemoveMessage:function(t,e){var n=e.taskId,r=e.messageId,o=this.state.lwTasks.findIndex((function(t){return t.guid===n})),i=this.state.lwTasks[o];if(i){this.state.lwTasks[o].messages||(this.state.lwTasks[o].messages=[]);var a=i.messages.findIndex((function(t){return t.guid===r}));-1!==a&&this.state.lwTasks[o].messages.splice(a,1)}}},v=n(7),y=n.n(v),g=n(317),b=n(68),w=n.n(b),_=n(62),O=n.n(_),S=n(20),x=n(139),C=n(10),E=n(171),k=Object(E.a)(Object(C.c)("data-is-ccv","")),T=n(154),P=n(216),j=function(t){var e=(new DOMParser).parseFromString(t,"text/xml").querySelector("GetChannelUrlResult");return e?e.innerHTML:null},A=function(t){for(var e=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("item"),n=[],r=0;r<e.length;r++){var o=e.item(r),i=M(o);i&&n.push(i)}return n},M=function(t){if(!t.hasChildNodes()||t.childNodes.length<3)return null;for(var e=t.childNodes,n={},r={UserId:"UserId",FullName:"FullName",UserName:"UserName",FirstName:"FirstName",LastName:"LastName",Email:"Email"},o=0;o<e.length;o++){var i=e.item(o);if(r[i.nodeName])n[i.nodeName]=i.textContent;else if("Parameters"===i.nodeName&&i.childNodes[0]){var a=L(i.childNodes[0].childNodes);n.ProfilePicture=a.ProfilePicture,n.GlobalUserId=a.GlobalUserId}}return!n.FullName&&n.FirstName&&n.LastName&&(n.FullName="".concat(n.FirstName," ").concat(n.LastName)),n.UserId?n:null},L=function(t){if(!t||!t.length)return null;for(var e={},n=0;n<t.length;n++){var r=t.item(n).childNodes;if(2===r.length){var o=r.item(0),i=r.item(1);"Name"===o.nodeName&&"Value"===i.nodeName&&("ProfilePicture"===o.textContent?e.ProfilePicture=i.textContent:"GlobalUserGUID"===o.textContent&&(e.GlobalUserId=i.textContent))}}return e};function I(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Set;return t.ModifiedBy&&n.add(t.ModifiedBy),t.AssignedTo&&n.add(t.AssignedTo),t.CreatedBy&&n.add(t.CreatedBy),t.Comments.forEach((function(t){n.add(t.ModifiedBy),t.Mentions&&t.Mentions.forEach((function(t){return n.add(t.MentionGuid)}))})),e.forEach((function(t){n.has(t.UserId)&&n.delete(t.UserId),n.has(t.GlobalUserId)&&n.delete(t.GlobalUserId)})),I(n)},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Set;return t.lastModifiedBy&&n.add(t.lastModifiedBy.id),t.assignee&&n.add(t.assignee.id),t.createdBy&&n.add(t.createdBy.id),e.forEach((function(t){n.has(t.UserId)&&n.delete(t.UserId),n.has(t.GlobalUserId)&&n.delete(t.GlobalUserId)})),I(n)},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=t.reduce((function(t,n){return t[n[e]]=n,t}),{});return Object.values(n)},F=n(12),U=n(14);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */G=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==$(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function V(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function z(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){V(i,r,o,a,s,"next",t)}function s(t){V(i,r,o,a,s,"throw",t)}a(void 0)}))}}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){Y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(t){return function(t){if(Array.isArray(t))return X(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Z=window.__CORE__,K=window.__APP__.analytics,J={},Q=null,tt=function(t){return!Array.isArray(t)||!t.length},et=function(){var t=f.c.includes("MfgPackage"),e=f.c.includes("Release"),n=f.c.includes("Web.Upload");return U.a.getLicenseDetails(U.a.names.lightWeightTasks).isEnabled&&!t&&!f.q&&!e&&!n},nt=function(t){var e,n,r=f.c.includes("Release"),o=(null==t||null===(e=t.Properties)||void 0===e?void 0:e.ReleaseGuid)===f.i,i=(null==t||null===(n=t.Properties)||void 0===n?void 0:n.VcsRevision)===f.F;return!r&&!f.q||r&&o||f.q&&i},rt={setActiveThreadId:function(t,e){(0,t.commit)("setActiveThreadId",e)},setActiveThreadTaskStatus:function(t,e){var n=t.commit,r=t.getters,o=t.state,i=o.threads.findIndex((function(t){return t.Guid===r.activeThreadId})),a=q(o.threads);i>=0&&(a[i]=W(W({},o.threads[i]),{},{Properties:W(W({},o.threads[i].Properties),{},{LwTaskStatus:e})})),n("setThreads",a)},setActiveThreadAssignee:function(t,e){var n=t.commit,r=t.getters;n("setThreads",t.state.threads.map((function(t){return t.Guid===r.activeThreadId?W(W({},t),{},{AssignedTo:e}):t})))},setActiveCommentControl:function(t,e){var n=t.commit,r=t.state;if(r.activeGraphicsComment){var o=r.activeGraphicsComment.guid;n("setActiveGraphicsComment",null),Z.bus.emit("CommentsDrawingEngine:remove",o)}else Z.bus.emit("CommentsDrawingEngine:remove",null);var i=r.activeCommentControl;!e||i&&e.id===i.id?(n("setActiveCommentControl",null),n("setCreateNewThread",!1)):(this.dispatch("setActiveThreadId",null),Z.bus.emit("CommentsDrawingEngine:activate",{id:null,zoomToFit:!1}),n("setActiveCommentControl",e),Z.bus.emit("CommentsDrawingEngine:create",e.id,r.threads.length+1))},setCreateNewThread:function(t,e){(0,t.commit)("setCreateNewThread",e),e||this.dispatch("setActiveCommentControl",null)},setDocuments:function(t){var e=t.commit,n=Z.response.metadata;if(n){var r=[],o=n.schDocuments&&Object(T.a)(n.schDocuments)||[];r=r.concat(o);var i=n.pcbDocuments&&Object(T.a)(n.pcbDocuments)||[];r=r.concat(i);var a=Z.response.storage;if(a){var s=a.files.find((function(t){return"Lsm"===t.fileType}));if(s){var c={id:s.fileType,name:"Stackup",order:0};r.push(c)}}e("setDocuments",r)}},updateDocuments:function(t,e){var n=t.commit,r=t.state;e&&n("setDocuments",q(new Set([].concat(q(r.documents),q(Object(T.a)(e))))))},setOtherDocuments:function(t,e){var n=t.commit;e&&n("setOtherDocuments",Object(T.a)(e))},setTooltip:function(t,e){var n=t.commit,r=t.state,o=null;if(e){var i=r.threads.find((function(t){return t.Guid===e.id}));if(i){var a,s,c,u=null===(a=i.Comments)||void 0===a?void 0:a[0],l=i.AssignedTo&&r.users.find((function(t){return t.UserId===i.AssignedTo}));o=W(W({},e),{},{author:null==u||null===(s=u.Author)||void 0===s?void 0:s.FullName,text:null==u?void 0:u.Text,number:i.ThreadNumber,assignedTo:null==l?void 0:l.FullName,task:null===(c=i.Properties)||void 0===c?void 0:c.LwTaskHrid})}}n("setTooltip",o)},requestAllGroups:function(t){return z(G().mark((function e(){var n,r,o,i,a,s,c;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.commit,f.p&&!f.v){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(S.k)();case 5:null!=(i=e.sent)&&null!==(n=i.data)&&void 0!==n&&null!==(r=n.Items)&&void 0!==r&&r.length&&(a=i.data.Items.map((function(t){return{id:t.GroupId,name:t.GroupName,mentionType:w.a.group}})),s=a.find((function(t){return"Administrators"===t.name})),c=a.filter((function(t){return"Administrators"!==t.name})),s&&c.push(s),o("setGroups",c));case 7:case"end":return e.stop()}}),e)})))()},requestGetAllReleases:function(t){return z(G().mark((function e(){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.commit,"Project"===f.c){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Object(S.m)();case 6:r=e.sent,tt(r.data)||n("setReleases",r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},requestLightweightTasks:function(){return z(G().mark((function t(){var e,n;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!et()){t.next=12;break}return t.prev=1,t.next=4,Object(S.d)();case 4:return e=t.sent,n=e.data,t.abrupt("return",n.map((function(t){var e=W(W({},t),t.task);return delete e.task,e}))||[]);case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},requestTags:function(t){return z(G().mark((function e(){var n,r,o,i,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.commit,r=t.getters,o=r.revisionTags,Array.isArray(o)&&null!=o&&o.length){e.next=4;break}return e.abrupt("return",[]);case 4:return e.prev=4,e.next=7,Object(S.g)(o);case 7:return i=e.sent,a=i.data,n("setTags",a),e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))()},updateTags:function(t,e){return z(G().mark((function n(){var r,o,i,a;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.getters,i=t.dispatch,a=o.revisionTags,Array.isArray(a)&&null!=a&&a.length&&null!=e&&null!==(r=e.Properties)&&void 0!==r&&r.VcsRevision){n.next=4;break}return n.abrupt("return");case 4:a.find((function(t){var n;return t.VcsRevision===(null==e||null===(n=e.Properties)||void 0===n?void 0:n.VcsRevision)}))||f.E&&i("requestTags");case 5:case"end":return n.stop()}}),n)})))()},requestNewLightweightTasks:function(t){var e=this;return z(G().mark((function n(){var r,o,i,a;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.state,o=t.commit,!et()){n.next=14;break}return n.next=4,e.dispatch("requestLightweightTasks");case 4:if(null==(i=n.sent)||!i.length){n.next=14;break}if(a=new Set,i.forEach((function(t){var e,n;null!==(e=t.assignee)&&void 0!==e&&e.id&&(a.add(null===(n=t.assignee)||void 0===n?void 0:n.id),a.add(t.createdBy.id))})),r.users.forEach((function(t){a.has(t.UserId)&&a.delete(t.UserId),a.has(t.GlobalUserId)&&a.delete(t.GlobalUserId)})),!a.size){n.next=13;break}return n.next=12,e.dispatch("requestUsers",q(a));case 12:e.dispatch("updateFilters",{users:r.users});case 13:o("setLightWeightTasks",i);case 14:case"end":return n.stop()}}),n)})))()},requestAllThreads:function(t){var e=this;return z(G().mark((function n(){var r,o,i,a,s,c,u,l;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,o=t.state,n.prev=1,e.dispatch("requestAllGroups"),n.next=5,e.dispatch("requestGetAllReleases");case 5:return n.next=7,e.dispatch("requestLightweightTasks");case 7:return i=n.sent,a=f.c.includes("Release"),n.next=11,Object(S.C)();case 11:if(s=n.sent,c=[],u=new Set,tt(s.data)||(f.q?s.data.filter((function(t){var e;return(null==t||null===(e=t.Properties)||void 0===e?void 0:e.VcsRevision)===f.F})):a?s.data.filter((function(t){var e;return(null==t||null===(e=t.Properties)||void 0===e?void 0:e.ReleaseGuid)===f.i})):s.data).forEach((function(t){c.push(t),t.AssignedTo&&u.add(t.AssignedTo),t.CreatedBy&&u.add(t.CreatedBy),t.ModifiedBy&&u.add(t.ModifiedBy),tt(t.Comments)||t.Comments.forEach((function(t){u.add(t.ModifiedBy),t.Mentions&&t.Mentions.forEach((function(t){return u.add(t.MentionGuid)}))}))})),i&&i.forEach((function(t){var e,n;null!==(e=t.assignee)&&void 0!==e&&e.id&&(u.add(null===(n=t.assignee)||void 0===n?void 0:n.id),u.add(t.createdBy.id));t.messages.forEach((function(t){var e;u.add(t.lastModifiedBy.id),null!==(e=t.metadata)&&void 0!==e&&e.mentions&&t.metadata.mentions.forEach((function(t){return u.add(t.user.id)}))}))})),n.prev=16,u.size){n.next=19;break}return n.abrupt("return");case 19:return n.next=21,e.dispatch("requestUsers",q(u));case 21:l=q(o.users),c.forEach((function(t){Array.isArray(t.Comments)&&t.Comments.length&&t.Comments.forEach((function(t){var e=l.find((function(e){return e.UserId===t.ModifiedBy}));e&&(t.Author=e),t.Text=Object(g.encodeHtml)(t.Text)}))}));case 23:return n.prev=23,r("setThreads",c),i&&r("setLightWeightTasks",i),c.forEach((function(t){Z.bus.emit("CommentsDrawingEngine:add",t)})),e.dispatch("updateFilters",{users:o.users}),f.E&&e.dispatch("requestTags"),n.finish(23);case 30:n.next=35;break;case 32:n.prev=32,n.t0=n.catch(1),console.log(n.t0);case 35:case"end":return n.stop()}}),n,null,[[1,32],[16,,23,30]])})))()},requestAnonymousAllThreads:function(t){var e=this;return z(G().mark((function n(){var r,o,i,a;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,o=t.state,n.prev=1,n.next=4,Object(S.s)();case 4:if(i=n.sent,a=i.data,!tt(a.Threads)){n.next=8;break}return n.abrupt("return");case 8:if(a.Threads.forEach((function(t){Z.bus.emit("CommentsDrawingEngine:add",t),Array.isArray(t.Comments)&&t.Comments.length&&t.Comments.forEach((function(t){var e=a.Users.find((function(e){return e.UserId===t.ModifiedBy}));e&&(t.Author=e),t.Text=Object(g.encodeHtml)(t.Text)}))})),r("setThreads",a.Threads),e.dispatch("updateFilters",{users:a.Users}),r("setUserSettings",{UnresolvedOnly:{Name:"UnresolvedOnly",Value:1}}),r("setSelectedUserSettings"),!tt(a.Users)){n.next=15;break}return n.abrupt("return");case 15:r("setUsers",[].concat(q(o.users),q(a.Users))),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(1),console.log(n.t0);case 21:case"end":return n.stop()}}),n,null,[[1,18]])})))()},requestAddThread:function(t,e){var n=this;return z(G().mark((function r(){var o,i,a,s,c,u;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.state,r.prev=1,r.prev=2,i=o.activeGraphicsComment,a=o.documentState.layers,s=W(W({},e),{},{type:i.type,data:i.serializedData,drawing:i.serializedDrawingData,documentName:i.documentName,documentType:i.documentType,objectType:i.objectType,properties:o.activeGraphicsComment.dataStore.properties||void 0,locationConfiguration:JSON.stringify(o.documentState.location),layersConfiguration:a?JSON.stringify(W(W({},a),{},{flipped:o.documentState.flipped})):""}),K.dispatchMetricEventStart("Performance.Place.Comment.Post"),r.next=9,Object(S.A)(s);case 9:c=r.sent,K.dispatchMetricEventEnd("Performance.Place.Comment.Post"),(u=J["requestNewThread-".concat(c.data.Guid)])&&u.cancel("The new thread was got"),n.dispatch("displayNewThread",{thread:c.data}),F.a.emit("CommentPanel:triggerUpdateAllThreads");case 15:return r.prev=15,n.dispatch("setCreateNewThread",!1),r.finish(15);case 18:r.next=23;break;case 20:r.prev=20,r.t0=r.catch(1),console.log(r.t0);case 23:case"end":return r.stop()}}),r,null,[[1,20],[2,,15,18]])})))()},displayNewThread:function(t,e){var n=this;return z(G().mark((function r(){var o,i,a,s,c,u,l,d;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.commit,i=t.state,a=e.thread,s=e.isWS,c="displayNewThread-".concat(a.Guid),!J[c]&&!i.threads.find((function(t){return t.Guid===a.Guid}))){r.next=5;break}return r.abrupt("return");case 5:if(J[c]=!0,r.prev=6,!(u=R(a,i.users)).length){r.next=11;break}return r.next=11,n.dispatch("requestUsers",u);case 11:(l=i.users.find((function(t){return t.UserId===a.ModifiedBy})))?(d=i.users.find((function(t){return t.UserId===a.ModifiedBy})))&&(a.Comments[0].Author=d):a.Comments[0].Author=l,nt(a)&&(Z.bus.emit("CommentsDrawingEngine:add",a),i.threads.find((function(t){return t.Guid===a.Guid}))||o("setThreads",[].concat(q(i.threads),[a])),!s&&o("setActiveThreadId",a.Guid),!s&&setTimeout((function(){Z.bus.emit("CommentsDrawingEngine:activate",{id:a.Guid,zoomToFit:!1})}),100)),n.dispatch("updateFilters",{users:i.users}),f.E&&n.dispatch("updateTags",a),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(6),console.log(r.t0);case 21:return r.prev=21,delete J[c],r.finish(21);case 24:case"end":return r.stop()}}),r,null,[[6,18,21,24]])})))()},requestNewThread:function(t){var e=arguments,n=this;return z(G().mark((function r(){var o,i,a,s,c;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.commit,o=t.state,i=e.length>1&&void 0!==e[1]?e[1]:{},a="requestNewThread-".concat(i.threadId),!J[a]&&!o.threads.find((function(t){return t.Guid===i.threadId}))){r.next=5;break}return r.abrupt("return");case 5:return s=Object(S.w)(i.threadId),J[a]=s,r.prev=7,r.next=10,s.call();case 10:c=r.sent,n.dispatch("displayNewThread",{thread:c.data,isWS:i.isWS}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(7),!O.a.isCancel(r.t0)&&console.log(r.t0);case 17:return r.prev=17,delete J[a],r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[7,14,17,20]])})))()},requestThreadRemove:function(t){var e=arguments,n=this;return z(G().mark((function r(){var o,i,a;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.commit,t.state,i=e.length>1&&void 0!==e[1]?e[1]:{},a=i.threadId,r.prev=3,r.next=6,Object(S.B)(i);case 6:if(204!==r.sent.status){r.next=13;break}o("setActiveThreadId",null),n.dispatch("setRemoveThread",{threadId:a}),F.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=14;break;case 13:throw new Error("Cannot remove the thread.");case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),console.log(r.t0);case 19:case"end":return r.stop()}}),r,null,[[3,16]])})))()},setRemoveThread:function(t){var e=t.commit,n=t.state,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.threadId,i=n.threads.filter((function(t){return t.Guid!==o}));i.length!==n.threads.length&&(Z.bus.emit("CommentsDrawingEngine:remove",o),e("setThreads",i),this.dispatch("updateFilters",{users:n.users}))},requestResolveThread:function(t){var e=arguments,n=this;return z(G().mark((function r(){var o,i,a,s;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.commit,o=t.state,i=e.length>1&&void 0!==e[1]?e[1]:{},a=i.threadId,r.prev=3,r.next=6,Object(S.G)(i);case 6:if(200!==r.sent.status){r.next=15;break}return s=o.threads.find((function(t){return t.Guid===a})),Z.bus.emit("CommentsDrawingEngine:resolve",s),r.next=12,n.dispatch("requestChangedThread",{threadId:a});case 12:F.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=16;break;case 15:throw new Error("Cannot resolve the thread.");case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(3),console.log(r.t0);case 21:case"end":return r.stop()}}),r,null,[[3,18]])})))()},requestChangedThread:function(t){var e=arguments,n=this;return z(G().mark((function r(){var o,i,a,s,c,u;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.commit,t.state,i=e.length>1&&void 0!==e[1]?e[1]:{},o("setLoading",!0),a="requestChangedThread-".concat(i.threadId),!J[a]){r.next=6;break}return r.abrupt("return");case 6:return s=Object(S.w)(i.threadId),J[a]=s,r.prev=8,r.next=11,s.call();case 11:return c=r.sent,u=c.data,r.next=15,n.dispatch("updateChangedThread",u);case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(8),!O.a.isCancel(r.t0)&&console.log(r.t0);case 20:return r.prev=20,o("setLoading",!1),delete J[a],r.finish(20);case 24:case"end":return r.stop()}}),r,null,[[8,17,20,24]])})))()},updateChangedThread:function(t,e){var n=this;return z(G().mark((function r(){var o,i,a,s,c,u;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.commit,i=t.state,a="updateChangedThread-".concat(e.Guid),!J[a]){r.next=4;break}return r.abrupt("return");case 4:if(J[a]=!0,r.prev=5,!(s=R(e,i.users)).length){r.next=10;break}return r.next=10,n.dispatch("requestUsers",s);case 10:e=W(W({},e),{},{Comments:e.Comments.map((function(t){var e=i.users.find((function(e){return e.UserId===t.ModifiedBy}));return e?W(W({},t),{},{Author:e}):t}))}),nt(e)&&(c=q(i.threads),-1!==(u=c.findIndex((function(t){return t.Guid===e.Guid})))?c.splice(u,1,e):c.push(e),o("setThreads",c)),n.dispatch("updateFilters",{users:i.users}),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(5),console.log(r.t0);case 18:return r.prev=18,delete J[a],r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[5,15,18,21]])})))()},updateChangedTasksThread:function(t,e){var n=this;return z(G().mark((function r(){var o,i,a;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.commit,o=t.state,i="updateChangedTaskThread-".concat(e.guid),!J[i]){r.next=4;break}return r.abrupt("return");case 4:if(J[i]=!0,r.prev=5,!(a=N(e,o.users)).length){r.next=10;break}return r.next=10,n.dispatch("requestUsers",a);case 10:n.dispatch("updateFilters",{users:o.users}),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(5),console.log(r.t0);case 16:return r.prev=16,delete J[i],r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[5,13,16,19]])})))()},requestAddComment:function(t){var e=arguments,n=this;return z(G().mark((function r(){var o,i,a,s,c,u;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.commit,o=t.state,i=e.length>1&&void 0!==e[1]?e[1]:{},r.prev=2,r.next=5,Object(S.o)(i);case 5:if(a=r.sent,s=a.data,c=o.threads.find((function(t){return t.Guid===i.threadId}))){r.next=11;break}return n.dispatch("requestChangedThread",i),r.abrupt("return");case 11:if((u=J["requestChangedThread-".concat(i.threadId)])&&u.cancel("The thread was updated"),F.a.emit("CommentPanel:triggerUpdateAllThreads"),!c.Comments.find((function(t){return t.Guid===s.Guid}))){r.next=16;break}return r.abrupt("return");case 16:c.Comments.push(s),n.dispatch("updateChangedThread",c),r.next=23;break;case 20:r.prev=20,r.t0=r.catch(2),console.log(r.t0);case 23:case"end":return r.stop()}}),r,null,[[2,20]])})))()},requestAddTaskMessage:function(t){var e=arguments,n=this;return z(G().mark((function r(){var i,a,s;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.commit,t.state,i=e.length>1&&void 0!==e[1]?e[1]:{},r.prev=2,r.next=5,Object(S.r)(W(W({},i),{},{payload:Object(o.h)(i)}));case 5:200===(a=r.sent).status&&((s=a.data)&&n.commit("generalTaskMessageUpdate",{taskId:i.threadId,message:s}),F.a.emit("CommentPanel:triggerUpdateAllThreads")),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},requestModifyThread:function(t){var e=arguments;return z(G().mark((function n(){var r,o;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.state,r=e.length>1&&void 0!==e[1]?e[1]:{},n.prev=2,r.value=[].concat(q(r.updateThread),[{op:"replace",path:"/AssignedTo",value:r.value.AssignedTo}]),n.next=6,Object(S.p)(r);case 6:if(o=n.sent,F.a.emit("CommentPanel:triggerUpdateAllThreads"),200===o.status){n.next=10;break}throw new Error("Cannot modify thread.");case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))()},requestModifyComment:function(t){var e=arguments,n=this;return z(G().mark((function r(){var o,i;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.commit,t.state,o=e.length>1&&void 0!==e[1]?e[1]:{},i=o.threadId,r.prev=3,r.next=6,Object(S.q)(o);case 6:if(204!==r.sent.status){r.next=13;break}return r.next=10,n.dispatch("requestChangedThread",{threadId:i});case 10:F.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=14;break;case 13:throw new Error("Cannot modify comment.");case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),console.log(r.t0);case 19:case"end":return r.stop()}}),r,null,[[3,16]])})))()},requestModifyTaskMessage:function(t){var e=arguments,n=this;return z(G().mark((function r(){var i,a,s;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.commit,t.state,i=e.length>1&&void 0!==e[1]?e[1]:{},r.prev=2,r.next=5,Object(S.y)(W(W({},i),{},{payload:Object(o.h)(i)}));case 5:if(200!==(a=r.sent).status){r.next=12;break}(s=a.data)&&n.commit("generalTaskMessageUpdate",{taskId:i.threadId,message:s}),F.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=13;break;case 12:throw new Error("Cannot modify message.");case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(2),console.log(r.t0);case 18:case"end":return r.stop()}}),r,null,[[2,15]])})))()},requestRemoveComment:function(t,e){var n=this;return z(G().mark((function r(){var o,i,a,s;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.state,r.prev=1,r.next=4,Object(S.z)(e);case 4:if(204!==r.sent.status){r.next=19;break}if((i=o.threads.find((function(t){return t.Guid===e.threadId})))&&i.Comments&&!(i.Comments.length<2)){r.next=9;break}return r.abrupt("return");case 9:if(-1!==(a=i.Comments.findIndex((function(t){return t.Guid===e.commentId})))){r.next=12;break}return r.abrupt("return");case 12:(s=J["requestChangedThread-".concat(e.threadId)])&&s.cancel("The thread was updated"),i.Comments.splice(a,1),n.dispatch("updateChangedThread",i),F.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=20;break;case 19:throw new Error("Cannot remove the comment.");case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(1),console.log(r.t0);case 25:case"end":return r.stop()}}),r,null,[[1,22]])})))()},requestRemoveTask:function(t,e){return z(G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.state,r=t.commit,n.prev=1,n.next=4,Object(S.t)(e);case 4:200===n.sent.status&&(r("generalTaskRemoveTask",{taskId:e.taskId}),F.a.emit("CommentPanel:triggerUpdateAllThreads")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},requestRemoveTaskMessage:function(t,e){return z(G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.state,r=t.commit,n.prev=1,n.next=4,Object(S.u)(e);case 4:200===n.sent.status&&(r("generalTaskRemoveMessage",{taskId:e.taskId,messageId:e.messageId}),F.a.emit("CommentPanel:triggerUpdateAllThreads")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},requestUsers:function(t,e){return z(G().mark((function n(){var r,o,i,a,s,c,u,l;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,o=t.state,n.prev=1,n.next=4,Object(S.E)(e);case 4:return i=n.sent,a=A(i.data),s=null,c=[],n.next=10,f=z(G().mark((function t(){var n,r,o;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.map((function(t){return t.GlobalUserId})),t.next=3,Object(S.x)([].concat(q(o),q(e)));case 3:s=t.sent,c=(null===(n=s)||void 0===n?void 0:n.data)&&A(null===(r=s)||void 0===r?void 0:r.data);case 5:case"end":return t.stop()}}),t)}))),d=null,h=void 0,"function"==typeof(h=k?f:d)?h():h;case 10:if(a=a.map((function(t){if(!t.GlobalUserId)return t;var e=c.find((function(e){var n=e.UserId;return t.GlobalUserId===n}));return e&&e.ProfilePicture?W(W({},t),{},{ProfilePicture:e.ProfilePicture}):t})),u=[],c.forEach((function(t){a.some((function(e){return e.GlobalUserId===t.UserId}))||u.push(t)})),a=[].concat(q(a),u),l=o.users,a.filter((function(t){var e=t.UserId;return!l.some((function(t){return t.UserId===e}))})),a.forEach((function(t){return t.MentionType=w.a.user})),!tt(a)){n.next=19;break}return n.abrupt("return");case 19:return r("setUsers",[].concat(q(o.users),q(a))),n.abrupt("return",Promise.resolve());case 23:n.prev=23,n.t0=n.catch(1),console.log(n.t0);case 26:case"end":return n.stop()}var f,d,h}),n,null,[[1,23]])})))()},initWebSocket:function(t){var e=this;return z(G().mark((function n(){var r,o,i,a;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.commit,r=t.state,n.prev=1,n.next=4,Object(S.F)();case 4:200===(o=n.sent).status&&(i=j(o.data),a=f.D?"?sessionId=".concat(f.D,"&clientId=WebUI-").concat(y()()):"",(Q=new WebSocket(i+a)).binaryType="arraybuffer",Q.onopen=function(){Q.send(JSON.stringify({ChannelName:f.y,Data:"",Operation:"Subscribe"})),et()&&Q.send(JSON.stringify({ChannelName:"LwTasks.Dashboard."+f.y,Data:"",Operation:"Subscribe"}))},Q.onmessage=function(t){try{var n=JSON.parse(t.data);if("LwTasks.Dashboard"===(null==n?void 0:n.type)&&(null==n?void 0:n.guid)===f.y){if("GeneralTaskMessageUpdated"===n.event){var o=null==n?void 0:n.taskEvent;if("MessagesUpdated"===o.event){var i=o.messageEventType;"Added"===i||"Updated"===i?e.commit("generalTaskMessageUpdate",{taskId:o.guid,message:o.message}):"Deleted"===i&&e.commit("generalTaskRemoveMessage",{taskId:o.guid,messageId:o.message.guid})}}else if("Updated"===n.event){var a=null==n?void 0:n.taskEvent;"TaskCreated"===a.event?(e.commit("generalTaskUpdate",{taskId:a.task.guid,task:a.task}),e.dispatch("requestTaskMessages",{taskId:a.task.guid})):"TaskDeleted"===a.event?e.commit("generalTaskRemoveTask",{taskId:a.guid}):a.event.includes("Updated")&&e.commit("generalTaskUpdate",{taskId:a.guid,task:a.task});var s=r.lwTasks.find((function(t){return t.Guid===a.task.threadGuid}));s&&e.dispatch("updateChangedTasksThread",s)}}else{var c,u,l=null==n||null===(c=n.Data)||void 0===c?void 0:c.ThreadGUID;if(f.y!==(null==n||null===(u=n.Data)||void 0===u?void 0:u.ProjectGUID)||!l)return;switch(n.Action){case"CommentThreadAdded":e.dispatch("requestNewThread",{threadId:l,isWS:!0});break;case"CommentThreadChanged":e.dispatch("requestChangedThread",{threadId:l});break;case"CommentAdded":e.dispatch("requestNewThread",{threadId:l,isWS:!0});break;case"CommentChanged":e.dispatch("requestChangedThread",{threadId:l});break;case"CommentThreadDeleted":e.dispatch("setRemoveThread",{threadId:l})}}}catch(t){console.error(t)}},Q.onerror=function(t){console.log("Error websocket",t)}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},updateFilters:function(t,e){var n=t.commit,r=t.state;if(!r.threads.length&&e.user)return r.filters.radios.forEach((function(t){t.users&&(t.users=[])})),void r.filters.checkboxes.forEach((function(t){t.users&&(t.users=[])}));if(e.name){var o=r.filters.radios.map((function(t){return W(W({},t),{},{isSelected:e.name===t.text})}));n("setFilters",W(W({},r.filters),{},{radios:o}))}if(void 0!==e.isSelected){var i=r.filters.checkboxes.map((function(t){return W(W({},t),{},{isSelected:e.item.id===t.id?e.isSelected:t.isSelected})}));n("setFilters",W(W({},r.filters),{},{checkboxes:i}))}if(e.user){var a=r.filters.radios.map((function(t){if(!t.users)return t;var n=t.users.map((function(t){return W(W({},t),{},{isSelected:t.id===e.user.id})}));return W(W({},t),{},{users:n})}));n("setFilters",W(W({},r.filters),{},{radios:a}))}if(e.itemUser){var s=r.filters.checkboxes.map((function(t){if(!t.users)return t;var n=t.users.map((function(t){return W(W({},t),{},{isSelected:t.id===e.itemUser.id?e.isItemUserSelected:t.isSelected})}));return W(W({},t),{},{users:n})}));n("setFilters",W(W({},r.filters),{},{checkboxes:s}))}if(e.users&&Array.isArray(e.users)){var c=e.users.filter((function(t){return!(t.UserId===f.x||t.UserId===f.k)&&(r.threads.some((function(e){return e.Comments.some((function(e){return e.CreatedBy===t.UserId}))}))||r.lwTasks.some((function(e){return e.createdBy.id===t.UserId})))})),u=r.filters.radios.map((function(t){if(!t.users)return t;var e=t.users.find((function(t){return t.isSelected})),n=c.reduce((function(t,n){return t.push(W(W({},n),{},{img:n.ProfilePicture?Object(x.a)(n.ProfilePicture):"",id:n.UserId,name:n.FullName,isSelected:e?e.id===n.UserId:0===t.length})),t}),[]),r=B(n);return r.length&&!r.some((function(t){return t.isSelected}))&&(r[0].isSelected=!0),W(W({},t),{},{users:r})})),l=e.users.filter((function(t){return!(t.UserId===f.x||t.GlobalUserId===f.k)&&r.threads.some((function(e){return e.AssignedTo===t.UserId}))||r.lwTasks.some((function(e){var n;return(null===(n=e.assignee)||void 0===n?void 0:n.id)===t.UserId}))})).sort(Object(P.a)("FullName"));l.unshift({FullName:f.J,UserId:f.x,GlobalUserId:f.k,avatarUrl:f.H});var d=r.filters.checkboxes.map((function(t){if(!t.users)return t;var e=t.users.filter((function(t){return t.isSelected})),n=l.reduce((function(t,n){return t.push(W(W({},n),{},{img:n.avatarUrl?n.avatarUrl:n.ProfilePicture?Object(x.a)(n.ProfilePicture):"",id:n.UserId,name:n.FullName,isSelected:!(null==e||!e.length)&&e.some((function(t){return t.id===n.UserId}))})),t}),[]),r=B(n);return W(W({},t),{},{users:r})}));n("setFilters",W(W({},r.filters),{},{radios:u,checkboxes:d}))}},clearFilters:function(t){var e=t.commit,n={"Tasks only":{Name:"Tasks only",Value:0},AssignedTo:{Name:"AssignedTo",Value:"[]"}};Object(S.j)([n["Tasks only"],n.AssignedTo]),e("setUserSettings",n),e("setSelectedUserSettings")},requestGetUserSettings:function(t){return z(G().mark((function e(){var n,r,o,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,Object(S.i)();case 4:if(r=e.sent,o=r.data,Array.isArray(o)){e.next=8;break}return e.abrupt("return");case 8:i={},o.length&&o.some((function(t){return"UnresolvedOnly"===t.Name}))||(i.UnresolvedOnly={Name:"UnresolvedOnly",Value:1},Object(S.j)([i.UnresolvedOnly])),o.length&&o.forEach((function(t){if("AssignedTo"===t.Name)try{i[t.Name]={Name:t.Name,Value:JSON.parse(t.Value)}}catch(t){console.error(t)}else i[t.Name]=t})),n("setUserSettings",i),n("setSelectedUserSettings"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),n("setSelectedUserSettings"),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))()},requestGetAccessListUser:function(t){return z(G().mark((function e(){var n,r,o,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.commit,e.prev=1,!(r={Upload:S.h,Project_CM:S.h,MfgPackage:function(){return Object(S.f)(f.y)}})[f.c]){e.next=9;break}return e.next=6,r[f.c]();case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:null!=(o=e.t0)&&o.data&&(i=o.data.map((function(t){return{id:t.TrusteeGuid||t.EntityGuid,avatarUrl:t.TrusteeUserPic?Object(x.a)(t.TrusteeUserPic):"",entityGuid:t.EntityGuid,trusteeGuid:t.TrusteeGuid,mentionType:w.a.user,username:t.TrusteeUserName,name:"".concat(t.TrusteeFirstName," ").concat(t.TrusteeLastName),email:t.TrusteeUserName}})),n("setAccessListUsers",i)),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(1),console.error(e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))()},requestProjectDetails:function(t){return z(G().mark((function e(){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,Object(S.e)(f.y);case 4:null!=(r=e.sent)&&r.data&&n("setProjectDetails",r.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},requestTaskMessages:function(t,e){return z(G().mark((function n(){var r,o,i;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,n.prev=1,n.next=4,Object(S.v)(e);case 4:o=n.sent,(i=o.data)&&r("generalTaskSetMessages",{taskId:e.taskId,messages:i}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()}};function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var it,at=function(){return U.a.getLicenseDetails(U.a.names.lightWeightTasks).isEnabled},st=new(0,window.__APP__.library.Vuex.Store)({state:{threads:[],sortedThreads:[],users:[],groups:[],mentionsDictionary:{nameToEmail:{},emailToName:{},userName:{}},teamUsers:[],currentDocId:null,documents:[],otherDocuments:[],updatePostedThread:[],userSettings:{},activeThreadId:null,activeViewTabs:null,updateViewTabs:[],activeCommentPosition:null,isLoading:!1,isDrawing:!1,forOpenModal:[],releases:[],accessListUsers:[],projectDetails:{},lwTasks:[],commentControls:[{id:"pin",icon:"comment-pin",isSelected:!1},{id:"area",icon:"comment-area",isSelected:!1},{id:"draw",icon:"comment-draw",isSelected:!1}],tags:[],activeCommentControl:null,createNewThread:!1,activeGraphicsComment:null,tooltip:null,docIdGerber:"DEFAULT_GERBER",documentState:{location:"",layers:"",flipped:!1},filters:{radios:at()?[]:[{id:"all",text:"All",name:"UserFrom",isSelected:!0},{id:"my",text:"My",description:"(you are involved in)",name:"UserFrom",isSelected:!1},{id:"from",text:"From",isSelected:!1,name:"UserFrom",users:[]}],checkboxes:[{id:"unresolved",group:"group2",text:"Unresolved only",name:"UnresolvedOnly",isSelected:!1},{id:"current",group:"group2",text:"Current document only",name:"CurrentDocumentOnly",isSelected:!1}].concat((it=at()?[{id:"tasksonly",group:"group1",text:"Tasks only",isSelected:!1,name:"Tasks only"},{id:"assignedto",group:"group1",text:"AssignedTo",isSelected:!1,name:"AssignedTo",users:[]}]:[],function(t){if(Array.isArray(t))return ot(t)}(it)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(it)||function(t,e){if(t){if("string"==typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}(it)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}},mutations:m,getters:l,actions:rt}),ct=function(){return st.state.threads.length},ut=function(t){return st.dispatch("setActiveCommentControl",t)},lt=function(t){return st.dispatch("setCreateNewThread",t)},ft=function(t){return st.dispatch("setActiveThreadId",t)},dt=function(){return st.dispatch("requestAllThreads")},ht=function(){return st.dispatch("requestAnonymousAllThreads")},pt=function(){return st.dispatch("requestGetUserSettings")},mt=function(t){return st.commit("setCurrentDocId",t)},vt=function(){return st.dispatch("setDocuments")},yt=function(t){return st.dispatch("setOtherDocuments",t)},gt=function(){return st.dispatch("initWebSocket")},bt=function(t){return st.commit("setActiveGraphicsComment",t)},wt=function(t){return st.dispatch("setTooltip",t)},_t=function(){return st.dispatch("setTooltip",null)},Ot=function(){return st.commit("closeAllModal")},St=function(t){return st.commit("setActiveViewTabs",t)},xt=function(t){return st.commit("setUpdateViewTabs",t)},Ct=function(t){return st.commit("setIsDrawing",t)},Et=function(t){return st.commit("setDocumentsState",t)},kt=function(t){return st.commit("setUpdatePostedThread",t)},Tt=function(t){return st.commit("setActiveCommentPosition",t)};e.b=st},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?(t.exports=r=function(t){return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},t.exports.default=t.exports,t.exports.__esModule=!0),r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=(window,function(t){return"function"==typeof t}),a=function(t){return window.__afsComponents&&window.__afsComponents[t]};Object.freeze({SM:"sm",MD:"md",LG:"lg"}),e.default={inserted:function(t,e){var n=e.arg,r=e.value,s="object"===o()(r)&&null!==r&&!Array.isArray(r),c="ontouchstart"in window,u=!(s&&i(r.shouldBeInserted))||r.shouldBeInserted(t);if(!c&&u){var l=s?r.id:n,f=null;t&&t.dataset&&(t.dataset.afsHintControl=l);var d=function(e){var n=a(l);if(n){var o=s&&i(r.onOpen);o&&n.on&&n.on("open",r.onOpen),document.contains(t)&&n.open(t,e),o&&n.off&&n.off("open",r.onOpen)}};null==t||t.addEventListener("mousemove",(function(t){f&&clearTimeout(f);var e=a(l);!s||r.noDelay||e&&(!e||e.showImmediately())?d(t):f=setTimeout((function(){return d(t)}),r.delay||1e3)}),!1),null==t||t.addEventListener("mouseleave",(function(e){f&&clearTimeout(f);var n=a(l);if(n){var o=s&&i(r.onClose);o&&n.on&&n.on("close",r.onClose),n.close(t),o&&n.off&&n.off("close",r.onClose)}}),!1)}}}}])},function(t,e,n){"use strict";e.a=function(){return["","","-","-","-","-","","",""].reduce((function(t,e){return t+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+e}))}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return f}));var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(u,t);var e,n,r,s=a(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),l(c(n=s.call(this)),"state",void 0),l(c(n),"prevstate_",void 0),l(c(n),"scheme",void 0),l(c(n),"dataTransfer",void 0),n.state=t,n.prevstate_=t,n.scheme=e,n.dataTransfer={},n.on(u.TRANSITION_EVENT,(function(t){return n.emit(n.state,t)})),n.on(u.ERROR_EVENT,(function(t){return n.emit(n.state,t)})),n}return e=u,(n=[{key:"isFsm",get:function(){return!0}},{key:"isActive",get:function(){return this.state in this.scheme}},{key:"getState",value:function(){return this.state}},{key:"prevstate",get:function(){return this.prevstate_}},{key:"setDataTransfer",value:function(t){this.dataTransfer=Object.assign(this.dataTransfer,t)}},{key:"clearDataTransfer",value:function(){this.dataTransfer={}}},{key:"dispatch",value:function(t){var e=this;if(this.isActive){var n=this.scheme[this.state].find((function(n){return n.where(Object.assign(t,e.dataTransfer)).every((function(t){return t}))}));return!!n&&(this.prevstate_=this.state,this.state=n.to,n.error?this.emit(u.ERROR_EVENT,t):this.emit(u.TRANSITION_EVENT,t),!0)}return!1}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(n(30).a);l(f,"TRANSITION_EVENT","#Transition"),l(f,"ERROR_EVENT","#Error")},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=window.__CORE__},function(t,e,n){"use strict";n.d(e,"m",(function(){return A})),n.d(e,"n",(function(){return M})),n.d(e,"l",(function(){return L})),n.d(e,"k",(function(){return I})),n.d(e,"C",(function(){return D})),n.d(e,"s",(function(){return R})),n.d(e,"w",(function(){return N})),n.d(e,"A",(function(){return B})),n.d(e,"G",(function(){return F})),n.d(e,"a",(function(){return U})),n.d(e,"p",(function(){return $})),n.d(e,"z",(function(){return G})),n.d(e,"B",(function(){return V})),n.d(e,"q",(function(){return z})),n.d(e,"o",(function(){return H})),n.d(e,"E",(function(){return W})),n.d(e,"x",(function(){return Y})),n.d(e,"F",(function(){return q})),n.d(e,"i",(function(){return X})),n.d(e,"j",(function(){return Z})),n.d(e,"h",(function(){return K})),n.d(e,"f",(function(){return J})),n.d(e,"e",(function(){return Q})),n.d(e,"c",(function(){return tt})),n.d(e,"d",(function(){return et})),n.d(e,"b",(function(){return nt})),n.d(e,"v",(function(){return rt})),n.d(e,"r",(function(){return ot})),n.d(e,"t",(function(){return it})),n.d(e,"D",(function(){return at})),n.d(e,"u",(function(){return st})),n.d(e,"y",(function(){return ct})),n.d(e,"g",(function(){return ut}));var r,o,i=n(297),a=n(88),s=n(62),c=n.n(s),u=n(6),l=n(118);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=Object(i.a)(a.a,{afsConfig:(null===(r=window)||void 0===r||null===(o=r.__APP__)||void 0===o?void 0:o.afsConfig)||{}}),m=c.a.CancelToken,v=window.__CORE__,y="project",g=function(t,e,n){return'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Header><SessionID xmlns="http://tempuri.org/">'.concat(n,'</SessionID></SOAP-ENV:Header><SOAP-ENV:Body><QueryUsersDetails xmlns="http://tempuri.org/"><Filter><UserName/><FullName/><EMail/><Organisation/><AccountId/><Exact>false</Exact><UserIds>').concat(t,"</UserIds><GetExtraData>false</GetExtraData></Filter><BatchSize>").concat(e,"</BatchSize><RecordLocator/></QueryUsersDetails></SOAP-ENV:Body></SOAP-ENV:Envelope>")},b=function(t){return t.reduce((function(t,e){return t.concat("","<item>".concat(e,"</item>"))}),"")},w={json:"application/json",stream:"application/octet-stream",form:"application/x-www-form-urlencoded"};function _(t){Object(l.a)(t),t.interceptors.response.use((function(t){return t}),(function(t){var e,n,r,o;if(c.a.isCancel(t))return t.isCancel=!0,Promise.reject(t);var i="string"==typeof(null==t||null===(e=t.response)||void 0===e?void 0:e.data)?t.response.data:null==t||null===(n=t.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message;switch(null==t||null===(o=t.response)||void 0===o?void 0:o.status){case 401:v.bus.emit("unAuthorized");break;case 400:case 500:"string"==typeof i&&"function"==typeof i.includes&&i.includes("Access denied! User login required for this service")&&v.bus.emit("unAuthorized")}return Promise.reject(t)}))}var O=function(t){var e=t.baseURL,n=t.type,r=t.credentials,o={"Content-Type":w[n||"form"],Accept:"*/*",Authorization:"AFSSessionID ".concat(u.D),PageType:u.c};u.e||(o.projectid=u.y);var i=c.a.create({baseURL:e,withCredentials:r||!1,headers:o});return _(i),i},S=O({baseURL:"".concat(u.e||"/comments","/v1.0/"),type:"json"}),x=O({baseURL:"".concat(u.f,"/team/api/")}),C=O({baseURL:"".concat(u.f,"/ManufacturingPortal/api/")}),E=O({baseURL:"".concat(u.f,"/"),credentials:!0}),k=(O({baseURL:"/designs/api/",type:"json"}),O({baseURL:"/designs/api/",type:"json"})),T=O({baseURL:"".concat(u.f,"/lwtasks/api/v1.0"),type:"json"}),P=O({baseURL:"".concat(u.f,"/projecthistory/api"),type:"json"}),j=function(){var t=c.a.create();return _(t),t},A=function(){return C.get(u.v?"/SharedManufacturing/GetReleasesByProjectId?projectId=".concat(u.y):"/manufacturing/GetReleasesByProjectId/".concat(u.y))},M=function(t){var e=t.query,n=t.projectGuid,r=t.subjectGuid,o=t.getWorkspaceUsersSuggestions,i=void 0===o||o,a=t.getWorkspaceGroupsSuggestions,s=void 0===a||a,c=m.source(),u={query:e,getWorkspaceUsersSuggestions:i,getWorkspaceGroupsSuggestions:s};return n&&(u.projectGuid=n),r&&(u.subjectGuid=r),{call:function(){return E.get("team/api/suggestions",{params:u,cancelToken:c.token})},cancel:function(){return c.cancel("irrelevant request: suggestions?query=".concat(e))}}},L=function(t){var e=m.source();return{call:function(){return x.get("users/GetTokenizedUsers?q=".concat(t,"&isDefault=true&includeCloud=true"),{cancelToken:e.token})},cancel:function(){return e.cancel("irrelevant request: GetTokenizedUsers?q=".concat(t))}}},I=function(){return x.get("/roles?groupName=&pageSize=500&offset=0")},D=function(){return p(S.get("".concat(u.y,"/threads")))},R=function(){return p(E.get("files/api/comments/".concat(u.y,"/threads")))},N=function(t){var e=m.source();return{call:function(){return S.get("".concat(u.y,"/threads/").concat(t),{cancelToken:e.token})},cancel:function(n){e.cancel("".concat(n,": ").concat(u.y,"/threads/").concat(t))}}},B=function(t){var e;return p(S.post("".concat(u.y,"/threads"),JSON.stringify({Data:t.data,Properties:d({Activity:null,AutogeneratedComments:"",TaskId:"00000000-0000-0000-0000-000000000000",Type:t.type,DocumentName:t.documentName,DocumentType:t.documentType,ObjectType:t.objectType,ReleaseGuid:u.i,VcsRevision:u.F,LocationConfiguration:t.locationConfiguration,LayersConfiguration:t.layersConfiguration,PageId:(null===(e=t.data.split("|").find((function(t){return t.includes("PageUniqueID")})))||void 0===e?void 0:e.replace("PageUniqueID=",""))||void 0},t.properties||{}),Text:t.Text,Drawing:t.drawing||null,Mentions:t.Mentions,AssignedTo:t.AssignedTo,Screenshot:t.screen,Images:t.Images})))},F=function(t){return p(S.patch("".concat(u.y,"/threads/").concat(t.threadId),JSON.stringify([{op:"replace",path:"/Status",value:t.resolve?"0":"1"}])))},U=function(t){return p(S.patch("".concat(u.y,"/threads/").concat(t.threadId),JSON.stringify([{op:"replace",path:"/AssignedTo",value:t.userGuid}])))},$=function(t){return p(S.patch("".concat(u.y,"/threads/").concat(t.threadId),JSON.stringify(t.value)))},G=function(t){return p(S.delete("".concat(u.y,"/threads/").concat(t.threadId,"/comments/").concat(t.commentId)))},V=function(t){return p(S.delete("".concat(u.y,"/threads/").concat(t.threadId)))},z=function(t){return p(S.put("".concat(u.y,"/threads/").concat(t.threadId,"/comments/").concat(t.commentId),JSON.stringify(d({},t.value))))},H=function(t){return p(S.post("".concat(u.y,"/threads/").concat(t.threadId,"/comments"),JSON.stringify(d({},t.value))))},W=function(t){return p(j().post(u.w,g(b(t),50,u.D),{headers:{"Content-Type":"text/xml",SOAPAction:"QueryUsersDetails"}},(function(t){console.log(t)})))},Y=function(t){return p(j().post(u.m,g(b(t),50,u.d),{headers:{"Content-Type":"text/xml",SOAPAction:"QueryUsersDetails"}},(function(t){console.log(t)})))},q=function(){return c.a.post(u.A,'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope">\n<SOAP-ENV:Body><GetChannelUrl xmlns="http://tempuri.org/"><SessionId>'.concat(u.D,"</SessionId><ChannelName>AltiumDesigner-DxpServerManager</ChannelName></GetChannelUrl></SOAP-ENV:Body></SOAP-ENV:Envelope>"),{headers:{"Content-Type":"text/xml",Action:"http://tempuri.org/GetChannelURL"}},(function(t){console.log(t)}))},X=function(){return p(S.get("".concat(u.y,"/userSettings")))},Z=function(t){p(S.post("".concat(u.y,"/userSettings"),JSON.stringify(t)))},K=function(){return p(E.get("files/api/SubjectAcl/GetAccessList/".concat(u.h)))},J=function(t){return p(E.get("sharedwithme/api/SubjectAcl/GetAccessList/".concat(t)))},Q=function(t){return p(E.get("/sharedwithme/api/subject/subject/".concat(t)))},tt=function(t){return k.post("shares/checkuserspermissions",t,{_withVerification:!0})},et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.y,n=arguments.length>2?arguments[2]:void 0;return p(T.get("".concat(t,"/").concat(e,"/task/generaltasks?includeMessages=true"),{params:n}))},nt=function(t,e,n){return p(T.patch("/".concat(y,"/").concat(t,"/task/").concat(e),JSON.stringify([{op:"replace",path:"/status",value:n}])))},rt=function(t){var e=t.taskId;return p(T.get("/".concat(y,"/").concat(u.y,"/message/").concat(e)))},ot=function(t){return p(T.post("/".concat(y,"/").concat(u.y,"/message/").concat(t.threadId),t.payload))},it=function(t){var e=t.taskId;return p(T.delete("/".concat(y,"/").concat(u.y,"/task/").concat(e)))},at=function(t){var e=t.taskId,n=t.fieldName,r=t.value;return p(T.patch("/".concat(y,"/").concat(u.y,"/task/").concat(e),JSON.stringify([{op:"replace",path:"/".concat(n),value:r}])))},st=function(t){var e=t.taskId,n=t.messageId;return p(T.delete("/".concat(y,"/").concat(u.y,"/message/").concat(e,"/").concat(n)))},ct=function(t){return p(T.put("/".concat(y,"/").concat(u.y,"/message/").concat(t.threadId),JSON.stringify(t.payload)))},ut=function(t){return p(P.post("v1.0/revisions/".concat(u.y),{revisionIds:t}))}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var o,i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"BoardShape",get:function(){return"Board Shape"}},{key:"Background",get:function(){return"Background"}},{key:"BackgroundLayer",get:function(){return"Background Layer"}},{key:"MultiLayer",get:function(){return"Multi-Layer"}},{key:"TopOverlayLayer",get:function(){return"Top Overlay"}},{key:"BottomOverlayLayer",get:function(){return"Bottom Overlay"}},{key:"TopLayer",get:function(){return"Top Layer"}},{key:"BottomLayer",get:function(){return"Bottom Layer"}},{key:"MidLayer",get:function(){return"Mid-Layer"}},{key:"TopPasteLayer",get:function(){return"Top Paste"}},{key:"BottomPasteLayer",get:function(){return"Bottom Paste"}},{key:"TopSolderLayer",get:function(){return"Top Solder"}},{key:"BottomSolderLayer",get:function(){return"Bottom Solder"}},{key:"InternalPlaneLayer",get:function(){return"Internal Plane"}},{key:"PadHolesLayer",get:function(){return"Pad Holes"}},{key:"ViaHolesLayer",get:function(){return"Via Holes"}},{key:"DrillGuideLayer",get:function(){return"Drill Guide"}},{key:"KeepOutLayer",get:function(){return"Keep-Out Layer"}},{key:"MechanicalLayer",get:function(){return"Mechanical"}},{key:"DrillDrawingLayer",get:function(){return"Drill Drawing"}},{key:"SelectionsLayer",get:function(){return"Selections"}},{key:"ConnectionsLayer",get:function(){return"Connections"}},{key:"DielectricLayer",get:function(){return"Dielectric"}}],(n=null)&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();!function(t){t[t.None=0]="None",t[t.Signal=1]="Signal",t[t.Plane=2]="Plane",t[t.Mechanical=4]="Mechanical",t[t.System=8]="System",t[t.Dielectric=16]="Dielectric",t[t.Other=32]="Other",t[t.LayerPair=64]="LayerPair",t[t.Top=128]="Top",t[t.Bottom=256]="Bottom",t[t.Solder=512]="Solder",t[t.Overlay=1024]="Overlay",t[t.Paste=2048]="Paste"}(o||(o={}))},function(t,e,n){"use strict";var r=n(127),o=Object.prototype.toString;function i(t){return Array.isArray(t)}function a(t){return void 0===t}function s(t){return"[object ArrayBuffer]"===o.call(t)}function c(t){return null!==t&&"object"==typeof t}function u(t){if("[object Object]"!==o.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function l(t){return"[object Function]"===o.call(t)}function f(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),i(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:i,isArrayBuffer:s,isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"[object FormData]"===o.call(t)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&s(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:c,isPlainObject:u,isUndefined:a,isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:l,isStream:function(t){return c(t)&&l(t.pipe)},isURLSearchParams:function(t){return"[object URLSearchParams]"===o.call(t)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:f,merge:function t(){var e={};function n(n,r){u(e[r])&&u(n)?e[r]=t(e[r],n):u(n)?e[r]=t({},n):i(n)?e[r]=n.slice():e[r]=n}for(var r=0,o=arguments.length;r<o;r++)f(arguments[r],n);return e},extend:function(t,e,n){return f(e,(function(e,o){t[o]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,n){"use strict";var r=n(50);e.a=r.a},function(t,e,n){"use strict";var r=function(){var t=this._self._c;return t("svg",this._g({class:this.classList},this.$listeners),[t("use",{attrs:{"xlink:href":this.href}})])};r._withStripped=!0;var o=n(3),i={name:"AfsIcon",props:{name:{type:String,default:""},filled:{type:Boolean,default:!1}},computed:{classList:function(){return"icon icon-".concat(this.name)},href:function(){var t=Object(o.a)(this.$root),e=t.assets?"/"===t.assets.slice(-1)?t.assets.slice(0,-1):t.assets:"/assets";return this.filled?"".concat(e,"/images/afs-svg-sprite-filled.svg#").concat(this.name):"".concat(e,"/images/afs-svg-sprite.svg#").concat(this.name)}}},a=(n(45),n(0)),s=Object(a.a)(i,r,[],!1,null,null,null);e.a=s.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return i}));var r,o,i,a=window.__CORE__,s=new Map([["PCBView","PcbEngine"],["GerberView","GerberEngine"],["GerberCompareView","GerberComparisonEngine"],["GerberCompareSourceView","GerberComparisonEngine"],["GerberCompareTargetView","GerberComparisonEngine"]]);!function(t){t[t.None=0]="None",t[t.Cross=1]="Cross",t[t.Circle=2]="Circle",t[t.Box=3]="Box",t[t.Triangle=4]="Triangle",t[t.Wait=5]="Wait",t[t.Default=6]="Default"}(r||(r={})),function(t){t[t.Free=0]="Free",t[t.PointToPoint=1]="PointToPoint",t[t.ObjectToObject=2]="ObjectToObject"}(o||(o={})),function(t){t[t.mm=0]="mm",t[t.mil=1]="mil"}(i||(i={}))},function(t,e,n){"use strict";var r=n(46);e.a=r.a},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e),n.d(e,"hasOwnProperty",(function(){return o})),n.d(e,"isObject",(function(){return i})),n.d(e,"isEmptyObject",(function(){return a})),n.d(e,"isEmptyArray",(function(){return s})),n.d(e,"hasRequiredProperties",(function(){return c})),n.d(e,"percentage",(function(){return u}));var o=function(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)},i=function(t){return"object"===r(t)&&null!==t&&!Array.isArray(t)},a=function(t){return!("object"===r(t)&&null!==t&&!Array.isArray(t)&&Object.keys(t).length)},s=function(t){return Array.isArray(t)&&!t.length},c=function(t,e){return e.every((function(e){return o(t,e)}))},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="(\\d+(\\.\\d+)?|\\.\\d+) ?%";return t.exact?new RegExp("^"+e+"$","i"):new RegExp(e,"ig")}},function(t,e,n){"use strict";var r=n(2);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a={inserted:function(t,e){var n=e.arg,i=e.value,a="object"===o(i)&&null!==i&&!Array.isArray(i),s="ontouchstart"in window,c=!(a&&Object(r.c)(i.shouldBeInserted))||i.shouldBeInserted(t);if(!s&&c){var u=a?i.id:n,l=null;t&&t.dataset&&(t.dataset.afsHintControl=u);var f=function(e){var n=r.b.get(u);if(n){var o=a&&Object(r.c)(i.onOpen);o&&n.on&&n.on("open",i.onOpen),document.contains(t)&&n.open(t,e),o&&n.off&&n.off("open",i.onOpen)}};null==t||t.addEventListener("mousemove",(function(t){l&&clearTimeout(l);var e=r.b.get(u);!a||i.noDelay||e&&(!e||e.showImmediately())?f(t):l=setTimeout((function(){return f(t)}),i.delay||1e3)}),!1),null==t||t.addEventListener("mouseleave",(function(e){l&&clearTimeout(l);var n=r.b.get(u);if(n){var o=a&&Object(r.c)(i.onClose);o&&n.on&&n.on("close",i.onClose),n.close(t),o&&n.off&&n.off("close",i.onClose)}}),!1)}}}},function(t,e,n){},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"listeners",void 0),o(this,"on",this.addListener),o(this,"off",this.removeListener),this.listeners={}}var e,n,i;return e=t,(n=[{key:"addListener",value:function(t,e){return t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e],this}},{key:"removeListener",value:function(t,e){if(t in this.listeners){var n=this.listeners[t].indexOf(e);n>-1&&this.listeners[t].splice(n,1)}return this}},{key:"removeAllListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t?delete this.listeners[t]:this.listeners={}}},{key:"once",value:function(t,e){var n=this;return this.addListener(t,(function r(){e.apply(void 0,arguments),n.removeListener(t,r)})),this}},{key:"prependListener",value:function(t,e){return t in this.listeners?this.listeners[t].unshift(e):this.listeners[t]=[e],this}},{key:"prependOnceListener",value:function(t,e){var n=this;return this.prependListener(t,(function r(){e.apply(void 0,arguments),n.removeListener(t,r)})),this}},{key:"eventNames",value:function(){return Object.getOwnPropertyNames(this.listeners)}},{key:"listenerCount",value:function(t){return t in this.listeners?this.listeners[t].length:0}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t in this.listeners&&(this.listeners[t].slice().forEach((function(t){return t.apply(void 0,n)})),!0)}}])&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n(74)},function(t,e,n){},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return r}));var r,o=window.__CORE__,i="No_Variant_Unique_Id";!function(t){t[t.IDLE=0]="IDLE",t[t.LOAD=1]="LOAD",t[t.READY=2]="READY"}(r||(r={}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return o}));var o=function(){function t(e,n,r,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=e,this.direction=n,this.size=r,this.radius=o,this.material=i,this.z=a}var e,n,o;return e=t,o=[{key:"createLine",value:function(e,n,r,o,i,a,s){s=s||"butt";var c=Math.sqrt((r-e)*(r-e)+(o-n)*(o-n)),u=c?(r-e)/c:0,l=c?(o-n)/c:0,f=[u,l],d=0,h=[0,0],p=[0,0];if("round"===s||"square"===s){var m=e-(d=i/2)*u,v=n-d*l,y=d*u+r,g=d*l+o;h=[.5*(m+y),.5*(v+g)],p=[c=Math.sqrt((y-m)*(y-m)+(g-v)*(g-v)),i],"square"===s&&(d=0)}else h=[.5*(e+r),.5*(n+o)],p=[c,i];return new t(h,f,p,d,a,[0,0])}},{key:"createRoundedSegmentFill",value:function(e,n,r,o,i,a){var s=2*a,c=Math.sqrt((r-e)*(r-e)+(o-n)*(o-n));return new t([.5*(e+r),.5*(n+o)],[(r-e)/c,(o-n)/c],[c+=s,s],a,i,[0,0])}},{key:"createRectangle",value:function(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,0],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[0,0],u=[e,n],l=a,f=[r,o],d=s;return new t(u,l,f,d,i,c)}},{key:"createStrokedRectangle",value:function(t,e,n,r,o,i,a){var s=o/2;return[this.createLine(t-s,e,t+n+s,e,o,i,a),this.createLine(t+n,e+s,t+n,e-r-s,o,i,a),this.createLine(t-s,e-r,t+n+s,e-r,o,i,a),this.createLine(t,e+s,t,e-r-s,o,i,a)]}},{key:"createRotatedRect",value:function(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;s=s||0;var c=[r,o];if(0===(a=a||0))return new t([e+r/2,n-o/2],[1,0],c,s,i,[0,0]);var u=Math.cos(a),l=Math.sin(a),f=[u,-l],d=[e+(u*=.5)*r-(l*=.5)*o,n-l*r-u*o];return new t(d,f,c,s,i,[0,0])}},{key:"createRoundRect",value:function(e,n,r,o,i,a){var s={x:0,y:0},c={x:0,y:0};e<r?n>o?(s.x=e,s.y=n,c.x=r,c.y=o):(s.x=e,s.y=o,c.x=r,c.y=n):n>o?(s.x=r,s.y=n,c.x=e,c.y=o):(s.x=r,s.y=o,c.x=e,c.y=n);var u=c.x-s.x,l=s.y-c.y;return new t([s.x+u/2,s.y-l/2],[1,0],[u,l],a,i,[0,0])}}],(n=[{key:"isFailed",value:function(){return isNaN(this.direction[0])||isNaN(this.direction[1])||isNaN(this.position[0])||isNaN(this.position[1])}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"NO_VARIATIONS",(function(){return r})),n.d(e,"TABLE_TYPE",(function(){return o})),n.d(e,"COMPONENT_FILTER",(function(){return i})),n.d(e,"COMPONENT_FILTER_ALL_SELECTED",(function(){return a}));var r="[No Variations]",o={FBOM:"TABLE_FBOM",LEFT:"TABLE_COMPARE_LEFT",RIGHT:"TABLE_COMPARE_RIGHT",DIFF:"TABLE_COMPARE_DIFF"},i={NONE:0,REMOVED:1,ADDED:2,MODIFIED:3},a=1<<i.NONE|1<<i.REMOVED|1<<i.ADDED|1<<i.MODIFIED}])},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function c(t){var e=h();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){var e="function"==typeof Map?new Map:void 0;return(f=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return d(t,arguments,m(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,t)})(t)}function d(t,e,n){return(d=h()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&p(o,n.prototype),o}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y;n.d(e,"a",(function(){return y})),n.d(e,"c",(function(){return w})),n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return S})),n.d(e,"b",(function(){return x})),function(t){t.ArgumentNull="ARGUMENT_NULL",t.FileDataDocumentLoad="FILE_DATA_DOCUMENT_LOAD",t.ScriptLoad="SCRIPT_LOAD",t.StoreExpired="STORAGE_EXPIRED",t.WebGLNotSupported="WEBGL_NOT_SUPPORTED",t.WebGLNotSupportedExtension="WEBGL_NOT_SUPPORTED_EXTENSION",t.ImportPCBError="IMPORT_PCB_ERROR"}(y||(y={}));var g='%{"title": "New visualization is available"}% %{"name": "Refresh Page", "eventName": "reloadPage", "link":"#"}%',b='WebGL is not supported by your browser. You can follow %{"name": "Troubleshooting Guide", "link": "https://www.altium.com/documentation/altium-designer/altium-365-viewers-troubleshooting-guide"}% to make it work',w=function(t){s(n,t);var e=c(n);function n(t,r){var i,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0;o(this,n),(i=e.call(this,t)).code=r,i.isManaged=a,v(l(i),"innerError",void 0);var c=n.define(s);return c&&(s=c),i}return a(n,null,[{key:"define",value:function(t){if(void 0!==t){if(t instanceof Error)return t;if("string"==typeof t||t instanceof String)return new Error(t);if(t&&t.stack&&t.message)return t}}}]),n}(f(Error)),_=function(t){s(n,t);var e=c(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return o(this,n),e.call(this,t,y.StoreExpired,!0)}return a(n)}(w),O=function(t){s(n,t);var e=c(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return o(this,n),e.call(this,t,y.WebGLNotSupported,!0)}return a(n)}(w),S=function(t){s(n,t);var e=c(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,i=arguments.length>1?arguments[1]:void 0;return o(this,n),v(l(t=e.call(this,r,y.WebGLNotSupportedExtension,!0)),"extensionsList",void 0),t.extensionsList=i,t}return a(n)}(w),x=function(t){s(n,t);var e=c(n);function n(t,r,i){var a;return o(this,n),v(l(a=e.call(this,t,y.ImportPCBError,!1)),"sendDetails",void 0),v(l(a),"dataSize",void 0),a.sendDetails=i,a.dataSize=r,a}return a(n)}(w)},function(t,e,n){"use strict";e.a=function(t){return t instanceof Element}},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e(t.tag,t._g(t._b({ref:"root",tag:"component",staticClass:"afs-btn",class:t.classes,attrs:{type:t.buttonType,disabled:t.isDisabled,"data-locator":t.dataLocator}},"component",t.$attrs,!1),t.$listeners),[t.hasIcon?e("Icon",{staticClass:"afs-btn__icon",attrs:{name:t.icon,filled:t.filled}}):t._e(),t._v(" "),t._t("customIcon",null,{getBEMClass:t.getBEMClass}),t._v(" "),e("span",{staticClass:"afs-btn__text"},[t._t("default",null,{getBEMClass:t.getBEMClass})],2),t._v(" "),e("Loader",{staticClass:"afs-btn__loader"})],2)};r._withStripped=!0;var o=n(2),i=n(1),a=n(3),s=n(54),c=n(4);var u={name:"AfsButton",components:{Loader:s.a,Icon:c.a},props:{tag:{type:String,default:"button",validator:function(t){return["button","a","span","label"].includes(t)}},radius:{type:String,default:"".concat(o.d.tl," ").concat(o.d.tr," ").concat(o.d.bl," ").concat(o.d.br)},wide:{type:Boolean,default:!1},icon:{type:String,default:""},primary:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1},accent:{type:Boolean,default:!1},combinedPrimary:{type:Boolean,default:!1},combinedSecondary:{type:Boolean,default:!1},filled:{type:Boolean,default:!1},type:{type:String,default:"button",validator:function(t){return["button","submit"].includes(t)}},justify:{type:String,default:"center",validator:function(t){return["left","center","right","space-between"].includes(t)}},hasArrow:{type:Boolean,default:!1},isValid:{type:Boolean,default:!0},isSelected:{type:Boolean,default:!1},isBusy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String,default:"md",validator:function(t){return["xl","lg","md","sm","xs"].includes(t)}},dataLocator:{type:String,default:"button"}},computed:{classes:function(){return[this.themeClass,Object(i.b)("afs-btn",this.radius),"afs-btn_justify-".concat(this.justify),"afs-btn_".concat(this.size),(t={"afs-btn_arrow":this.hasArrow,"afs-btn_wide":this.wide,"afs-btn_primary":this.primary,"afs-btn_secondary":this.secondary,"afs-btn_accent":this.accent,"afs-btn_combinedPrimary":this.combinedPrimary,"afs-btn_combinedSecondary":this.combinedSecondary,"afs-btn_default":!this.primary&&!this.secondary,"afs-btn_selected":this.isSelected,"is-busy":this.isBusy,"afs-btn_transparent":this.transparent},e=o.a.isError,n=!this.isValid,e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t)];var t,e,n},themeClass:function(){var t=Object(a.a)(this.$root);return Object(i.c)(t.theme)},isDisabled:function(){return this.disabled||this.isBusy},hasIcon:function(){return!(!this.icon||!this.icon.length)},buttonType:function(){return["button","input"].includes(this.tag)?this.type:null}},methods:{getBEMClass:function(t){return Object(i.a)("afs-btn",t)}}},l=(n(161),n(0)),f=Object(l.a)(u,r,[],!1,null,null,null).exports;e.a=f},function(t,e,n){"use strict";var r,o;function i(t){return 255&t}function a(t){switch(t){case r.Arc:return"Arc";case r.Pad:return"Pad";case r.Via:return"Via";case r.Track:return"Track";case r.Text:return"Text";case r.Fill:return"Fill";case r.Connection:return"Connection";case r.Net:return"Net";case r.Component:return"Component";case r.Poly:return"Poly";case r.Region:return"Region";case r.ComponentBody:return"ComponentBody";case r.Dimension:return"Dimension";case r.Coordinate:return"Coordinate";case r.Class:return"Class";case r.Rule:return"Rule";case r.FromTo:return"FromTo";case r.DifferentialPair:return"DifferentialPair";case r.Violation:return"Violation";case r.Embedded:return"Embedded";case r.EmbeddedBoard:return"EmbeddedBoard";case r.SplitPlane:return"SplitPlane";case r.Trace:return"Trace";case r.SpareVia:return"SpareVia";case r.Board:return"Board";case r.BoardOutline:return"BoardOutline";case r.Last:return"Last";default:return"None"}}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),function(t){t[t.None=0]="None",t[t.Arc=1]="Arc",t[t.Pad=2]="Pad",t[t.Via=3]="Via",t[t.Track=4]="Track",t[t.Text=5]="Text",t[t.Fill=6]="Fill",t[t.Connection=7]="Connection",t[t.Net=8]="Net",t[t.Component=9]="Component",t[t.Poly=10]="Poly",t[t.Region=11]="Region",t[t.ComponentBody=12]="ComponentBody",t[t.Dimension=13]="Dimension",t[t.Coordinate=14]="Coordinate",t[t.Class=15]="Class",t[t.Rule=16]="Rule",t[t.FromTo=17]="FromTo",t[t.DifferentialPair=18]="DifferentialPair",t[t.Violation=19]="Violation",t[t.Embedded=20]="Embedded",t[t.EmbeddedBoard=21]="EmbeddedBoard",t[t.SplitPlane=22]="SplitPlane",t[t.Trace=23]="Trace",t[t.SpareVia=24]="SpareVia",t[t.Board=25]="Board",t[t.BoardOutline=26]="BoardOutline",t[t.Last=27]="Last"}(r||(r={})),function(t){t[t.eNoShape=0]="eNoShape",t[t.eRounded=1]="eRounded",t[t.eRectangular=2]="eRectangular",t[t.eOctagonal=3]="eOctagonal",t[t.eCircleShape=4]="eCircleShape",t[t.eArcShape=5]="eArcShape",t[t.eTerminator=6]="eTerminator",t[t.eRoundRectShape=7]="eRoundRectShape",t[t.eRotatedRectShape=8]="eRotatedRectShape",t[t.eRoundedRectangular=9]="eRoundedRectangular"}(o||(o={}))},function(t,e){"path"in Event.prototype||Object.defineProperty(Event.prototype,"path",{get:function(){for(var t=[],e=this.target;e;)t.push(e),e=e.parentElement;return-1===t.indexOf(window)&&-1===t.indexOf(document)&&t.push(document),-1===t.indexOf(window)&&t.push(window),t}})},function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return u}));var r=function(t){var e=t.toString().split(".");return e[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(2===e.length?"."+e[1]:"")},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.toString().split(".").length>1;return r(e&&n?t.toFixed(e):t)},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"==typeof t){var r=e?(parseFloat(t)/.0254).toFixed(e):parseFloat(t)/.0254;return n?o(r):r}},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("number"==typeof t)return e?(.0254*parseFloat(t)).toFixed(e):.0254*parseFloat(t)},s=function(t,e){return u(t/1e6,e)},c=function(t,e){return u(1e3*t,e)},u=function(t,e){return 0!==t?"".concat(t.toFixed(3)," ").concat(e):"".concat(t," ").concat(e)}},function(t,e,n){},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t[t.Left=0]="Left",t[t.Wheel=1]="Wheel",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward"}(r||(r={})),e.b=r},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,h(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,t)})(t)}function l(t,e,n){return(l=f()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&d(o,n.prototype),o}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return v}));var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(i,t);var e,n,r=(e=i,n=f(),function(){var t,r=h(e);if(n){var o=h(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return s(this,t)});function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return o(this,i),p(c(e=r.call(this,t)),"type",void 0),p(c(e),"innerError",void 0),e.type="Error",e.innerError=n,e}return a(i,[{key:"toString",value:function(){return this.message}}]),i}(u(Error)),v=a((function t(e,n){o(this,t),p(this,"type",void 0),p(this,"payload",void 0),this.type=e,this.payload=n||{}}))},function(t,e,n){"use strict";n(29)},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e(t.tag,t._g(t._b({tag:"component",staticClass:"afs-link",class:t.classes,attrs:{"data-locator":t.dataLocator}},"component",t.$attrs,!1),t.$listeners),[t.hasIcon&&t.icon?e("Icon",{attrs:{name:t.icon}}):t._e(),t._v(" "),t._t("default",null,{getBEMClass:t.getBEMClass})],2)};r._withStripped=!0;var o=n(1),i=n(3),a={name:"AfsLink",components:{Icon:n(4).a},props:{dataLocator:{type:String,default:"link"},tag:{type:String,default:"a"},primary:{type:Boolean,default:!0},primaryOnAccent:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1},icon:{type:String,default:""},hasIcon:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{classes:function(){return[this.themeClass,{"is-primary":this.primary,"is-accent":this.primaryOnAccent,"is-secondary":this.secondary,"is-disabled":this.disabled,"has-icon":this.hasIcon&&this.icon}]},themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)}},methods:{getBEMClass:function(t){return Object(o.a)("afs-link",t)}}},s=(n(71),n(0)),c=Object(s.a)(a,r,[],!1,null,null,null);e.a=c.exports},function(t,e,n){},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e);window;var r=function(t){return window.__afsComponents&&window.__afsComponents[t]},o=(Object.freeze({SM:"sm",MD:"md",LG:"lg"}),function(t){return t instanceof Element}),i=function t(e,n){if(!o(e))return n;var r=function t(e){if(!o(e)){var n=document.querySelector("html");return n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight?window:null}var r=window.getComputedStyle(e).getPropertyValue("overflow"),i=r&&r.split(" ").some((function(t){return"auto"===t||"scroll"===t}));return(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&i?e:t(e.parentNode)}(e);return r?(n.push(r),t(r.parentNode,n)):n},a=function(t){var e=[];return i(t.parentNode,e),e},s=function(t){var e=a(t).map((function(t){return function(t){var e={x:0,y:0},n=function(t){return t.currentTarget===window?window.scrollTo(e.x,e.y):(t.currentTarget.scrollTop=e.y,t.currentTarget.scrollLeft=e.x),t.preventDefault(),!1};return{enable:function(){return t.removeEventListener("scroll",n)},disable:function(){e.y=t.scrollTop,e.x=t.scrollLeft,t.addEventListener("scroll",n)}}}(t)}));return e.length?{disable:function(){e.forEach((function(t){return t.disable()}))},enable:function(){e.forEach((function(t){return t.enable()}))}}:null},c={inserted:function(t,e,n){var o=e.arg,i=e.modifiers,a=n.context;if(!t.dataset.afsDropdownControl){t.dataset.afsDropdownControl=o;var c=i.open,u=i.close,l=function(){var e=r(o);if(e){var n=s(t),i=function t(){null==e||e.close(),window.removeEventListener("scroll",t)};c?null==e||e.open(t):u?null==e||e.close():null==e||e.toggle(t),n?window.addEventListener("scroll",i):window.removeEventListener("scroll",i)}};t.removeEventListener("click",l,!0),t.addEventListener("click",l,!0);try{a.$on("hook:beforeDestroy",(function(){var t=r(o);t&&(null==t||t.close())}))}catch(t){}}},beforeUnmount:function(t,e){var n=e.arg;if(n){var o=r(n);null==o||o.close()}}};e.default=c}])},function(t,e,n){"use strict";n(32)},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e(t.tag,t._g(t._b({tag:"component",staticClass:"afs-btn-icon",class:t.classes,attrs:{type:t.buttonType,"data-locator":t.dataLocator}},"component",t.$attrs,!1),t.$listeners),[e("Icon",{staticClass:"afs-btn-icon__figure",attrs:{name:t.social||t.icon,filled:t.filled}})],1)};r._withStripped=!0;var o=n(4),i=n(2),a=n(1),s=n(3),c={name:"AfsButtonIcon",components:{Icon:o.a},inheritAttrs:!1,props:{dataLocator:{type:String,default:"button-icon"},tag:{type:String,default:"button",validator:function(t){return["button","a"].includes(t)}},type:{type:String,default:"button",validator:function(t){return["button","submit"].includes(t)}},radius:{type:String,default:"".concat(i.d.tl," ").concat(i.d.tr," ").concat(i.d.bl," ").concat(i.d.br)},icon:{type:String,default:""},isSelected:{type:Boolean,default:!1},filled:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},semitransparent:{type:Boolean,default:!1},gallery:{type:Boolean,default:!1},primary:{type:Boolean,default:!1},accent:{type:Boolean,default:!1},size:{type:String,default:"md",validator:function(t){return["xl","lg","md","sm","xs"].includes(t)}},social:{type:String,default:"",validator:function(t){return!t.length||["facebook","google-plus","linkedin"].includes(t)}}},computed:{classes:function(){return[this.themeClass,this.radiusClass,{"afs-btn-icon_transparent":this.transparent,"afs-btn-icon_semitransparent":this.semitransparent,"afs-btn-icon_rounded":this.rounded,"afs-btn-icon_social":!!this.social.length,"afs-btn-icon_gallery":this.gallery,"afs-btn-icon_primary":this.primary,"afs-btn-icon_accent":this.accent,"is-selected":this.isSelected},"afs-btn-icon_".concat(this.size),this.social.length?"afs-btn-icon_".concat(this.social):null]},themeClass:function(){var t=Object(s.a)(this.$root);return Object(a.c)(t.theme)},radiusClass:function(){return Object(a.b)("afs-btn-icon",this.radius)},buttonType:function(){return["button","input"].includes(this.tag)?this.type:null}},methods:{getBEMClass:function(t){return Object(a.a)("afs-btn-icon",t)}}},u=(n(80),n(0)),l=Object(u.a)(c,r,[],!1,null,null,null);e.a=l.exports},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t[t.Render2D=2]="Render2D",t[t.Render3D=3]="Render3D"}(r||(r={})),e.b=r},,function(t,e,n){},function(t,e,n){"use strict";var r=function(){var t=this._self._c;return t("span",{staticClass:"afs-loader",class:this.classes,attrs:{"data-locator":this.dataLocator}},[t("span",{staticClass:"afs-loader__content"},[t("span",{staticClass:"afs-loader__icon"},this._l(12,(function(e){return t("span",{key:e,staticClass:"afs-loader__icon-line"})})),0),this._v(" "),this.hasText?t("span",{staticClass:"afs-loader__text"},[this._t("default",null,{getBEMClass:this.getBEMClass})],2):this._e()])])};r._withStripped=!0;var o=n(1),i=n(3);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={icon:"icon",overlay:"overlay",smallOverlay:"small-overlay",viewportOverlay:"viewport-overlay",smallViewportOverlay:"small-viewport-overlay"},c={small:"",middle:"middle",large:"large"},u={row:"",column:"column"},l={name:"AfsLoader",props:{dataLocator:{type:String,default:"loader"},hasText:{type:Boolean,default:!1},type:{type:String,default:s.icon,validator:function(t){return Object.values(s).includes(t)}},size:{type:String,default:c.small,validator:function(t){return!t.length||Object.keys(c).includes(t)}},direction:{type:String,default:u.row,validator:function(t){return!t.length||Object.keys(u).includes(t)}},checkFonts:{type:Boolean,default:!1}},data:function(){return{checkFontsClass:!1}},computed:{classes:function(){return[this.themeClass,a({},"afs-loader_".concat(this.type),!!this.type),{"afs-loader_icon-text":this.type===s.icon&&this.hasText},a({},"afs-loader_".concat(this.size),!!this.size),a({},"afs-loader_".concat(this.direction),!!this.direction),{"afs-loader_check-fonts":this.checkFontsClass}]},themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)}},created:function(){var t=this,e=this.$watch("checkFonts",(function(n){n&&(e&&e(),t.checkFontsClass=!0,document.fonts.ready.then((function(){t.checkFontsClass=!document.fonts.check("1em Inter")})))}),{immediate:!0})},methods:{getBEMClass:function(t){return Object(o.a)("afs-loader",t)}}},f=(n(125),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null).exports;e.a=d},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return i}));var r,o,i,a=n(39),s=window.__CORE__,c=new Map([["PCBView","PcbEngine"],["GerberView","GerberEngine"]]),u=new Set([a.a.Arc,a.a.Pad,a.a.Via,a.a.Track,a.a.Poly,a.a.Region,a.a.Fill,a.a.EmbeddedBoard]);!function(t){t[t.None=0]="None",t[t.Cross=1]="Cross",t[t.Circle=2]="Circle",t[t.Box=3]="Box",t[t.Triangle=4]="Triangle",t[t.Wait=5]="Wait",t[t.Default=6]="Default"}(r||(r={})),function(t){t[t.Free=0]="Free",t[t.PointToPoint=1]="PointToPoint",t[t.ObjectToObject=2]="ObjectToObject"}(o||(o={})),function(t){t[t.mm=0]="mm",t[t.mil=1]="mil"}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return S}));var r=function(){return(0,this._self._c)(this.tag,this._g(this._b({tag:"component",staticClass:"afs-grid-container",class:this.classes,attrs:{"data-locator":this.dataLocator}},"component",this.$attrs,!1),this.$listeners),[this._t("default")],2)};function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}r._withStripped=!0;var a=function(t,e){return t.join(" ".concat(e,"_")).replace(/^\s+|\s+$/g,"")},s=function(t,e){var n,r=t&&(n=t,Array.isArray(n))&&t.length,i=t&&function(t){return"string"==typeof t}(t)&&t.length;return r?a([""].concat(o(t)),e):i?a([""].concat(o(t.split(" "))),e):""},c={name:"AfsGridContainer",inheritAttrs:!1,props:{dataLocator:{type:String,default:"grid-container"},tag:{type:String,default:"div"},type:{type:String,default:"",validator:function(t){return!t.length||["sidebar"].includes(t)}},size:{type:String,default:"",validator:function(t){return!t.length||["auto","fullscreen","remain"].includes(t)}},direction:{type:String,default:"row",validator:function(t){return["row","row-reverse","column","column-reverse"].includes(t)}},modifiers:{type:String,default:""},centerContent:{type:Boolean,default:!1},searchData:{type:String,default:""}},computed:{classes:function(){return[this.computedModifiers,this.size.length?"afs-grid-container_".concat(this.size):null,this.type.length?"afs-grid-container_".concat(this.type):null,{"afs-grid-container_center-content":this.centerContent},"afs-grid-container_direction-".concat(this.direction)]},computedModifiers:function(){return s(this.modifiers,"afs-grid-container")}}},u=(n(31),n(0)),l=Object(u.a)(c,r,[],!1,null,null,null).exports,f=function(){return(0,this._self._c)("div",{staticClass:"afs-grid-row",class:this.classes,attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};f._withStripped=!0;var d={name:"AfsGridRow",props:{dataLocator:{type:String,default:"grid-row"},paddingSize:{type:String,default:"lg",validator:function(t){return["xl","lg","md","sm","xs"].some((function(e){return t===e}))}},flexWrap:{type:String,default:"wrap",validator:function(t){return["nowrap","wrap","wrap-reverse"].includes(t)}}},computed:{classes:function(){return[this.paddingSizeClass,"afs-grid-row_".concat(this.flexWrap)]},paddingSizeClass:function(){return"afs-grid-row_".concat(this.paddingSize)}}},h=(Object(u.a)(d,f,[],!1,null,null,null).exports,function(){return(0,this._self._c)("div",{staticClass:"afs-grid-column",class:[this.modifiers,this.paddingSizeClass],attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)});h._withStripped=!0;var p=function(t){return"number"==typeof t&&!isNaN(+t)},m={name:"AfsGridColumn",props:{dataLocator:{type:String,default:"grid-column"},xl:{type:[Number,String],default:null,validation:p},lg:{type:[Number,String],default:null,validation:p},md:{type:[Number,String],default:null,validation:p},sm:{type:[Number,String],default:null,validation:p},xs:{type:[Number,String],default:null,validation:p},size:{type:[Number,String],default:12,validation:p},paddingSize:{type:String,default:"lg",validator:function(t){return["xl","lg","md","sm","xs"].some((function(e){return t===e}))}},flex:{type:Boolean,default:!1}},computed:{modifiers:function(){return[this.xl&&"afs-grid-column_xl-".concat(this.xl),this.lg&&"afs-grid-column_lg-".concat(this.lg),this.md&&"afs-grid-column_md-".concat(this.md),this.sm&&"afs-grid-column_sm-".concat(this.sm),(this.xs||this.size)&&"afs-grid-column_xs-".concat(this.xs||this.size),{"afs-grid-column_flex":this.flex}]},paddingSizeClass:function(){return"afs-grid-column_".concat(this.paddingSize)}}},v=Object(u.a)(m,h,[],!1,null,null,null).exports,y=function(){return(0,this._self._c)("div",{staticClass:"afs-grid-sidebar",attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};y._withStripped=!0;var g={name:"AfsGridSidebar",props:{dataLocator:{type:String,default:"grid-sidebar"}}},b=(Object(u.a)(g,y,[],!1,null,null,null).exports,function(){return(0,this._self._c)("div",{staticClass:"afs-grid-workplace",attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)});b._withStripped=!0;var w={name:"AfsGridWorkplace",props:{dataLocator:{type:String,default:"grid-workplace"}}},_=(Object(u.a)(w,b,[],!1,null,null,null).exports,function(){return(0,this._self._c)(this.tag,this._g(this._b({tag:"component",staticClass:"afs-grid-section",class:this.classes,attrs:{"data-locator":this.dataLocator}},"component",this.$attrs,!1),this.$listeners),[this._t("default")],2)});_._withStripped=!0;var O={name:"AfsGridSection",inheritAttrs:!1,props:{dataLocator:{type:String,default:"grid-section"},tag:{type:String,default:"div"},paddingSize:{type:String,default:"lg",validator:function(t){return["xl","lg","md","sm","xs"].includes(t)}}},computed:{classes:function(){return"afs-grid-section_".concat(this.paddingSize)}}},S=Object(u.a)(O,_,[],!1,null,null,null).exports},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(60);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var r;function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function a(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,c(t,e,"get"))}function s(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,c(t,e,"set"),n),n}function c(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}n.d(e,"a",(function(){return h}));var u=new WeakMap,l=new WeakMap,f=new WeakMap,d=new WeakMap;r=Symbol.iterator;var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,u,{writable:!0,value:new Set}),i(this,l,{writable:!0,value:null}),i(this,f,{writable:!0,value:null}),i(this,d,{writable:!0,value:null})}var e,n,c;return e=t,(n=[{key:"push",value:function(t){return s(this,l,null),void 0!==t&&a(this,u).add(t),this}},{key:"anyValue",value:function(){return a(this,u).values().next().value}},{key:"firstValue",value:function(){return a(this,d)?Array.from(a(this,u)).sort(a(this,d))[0]:this.anyValue()}},{key:"setSort",value:function(t){return s(this,l,null),s(this,d,t),this}},{key:"toString",value:function(){return null===a(this,l)&&s(this,l,this.toArray().join(", ")),a(this,l)}},{key:"toArray",value:function(){return null===a(this,f)&&(null!==a(this,d)?s(this,f,Array.from(a(this,u)).sort(a(this,d))):s(this,f,Array.from(a(this,u)))),a(this,f)}},{key:"has",value:function(t){return a(this,u).has(t)}},{key:r,get:function(){return a(this,u).values()}}])&&o(e.prototype,n),c&&o(e,c),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){t.exports=n(190)},function(t,e,n){"use strict";n(42)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("label",{staticClass:"afs-checkbox",class:[t.themeClass,t.classes],attrs:{"data-locator":t.dataLocator}},[e("input",t._g({staticClass:"afs-checkbox__input",attrs:{type:"checkbox",disabled:t.disabled,"data-locator":"".concat(t.dataLocator,"-control")},domProps:{checked:t.modelValue}},t.listeners)),t._v(" "),e("span",{staticClass:"afs-checkbox__figure"},[t.isIndefinite?e("span",{staticClass:"afs-checkbox__figure-square"}):e("Icon",{staticClass:"afs-checkbox__figure-icon",attrs:{name:"checkmark"}})],1),t._v(" "),t.hasText?e("span",{staticClass:"afs-checkbox__text"},[t._t("default",null,{getBEMClass:t.getBEMClass})],2):t._e()])};r._withStripped=!0;var o=n(1),i=n(3);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={name:"AfsCheckbox",components:{Icon:n(4).a},model:{prop:"modelValue",event:"model-changed"},props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{type:String,default:"",validator:function(t){return["indefinite",""].includes(t)}},dataLocator:{type:String,default:"checkbox"}},computed:{themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)},classes:function(){return{"is-checked":this.modelValue,"is-disabled":this.disabled}},isIndefinite:function(){return"indefinite"===this.type},hasText:function(){return this.$slots.default},listeners:function(){var t=this;return s(s({},this.$listeners),{},{change:function(e){t.$emit("change",e),t.$emit("model-changed",e.target.checked)}})}},methods:{getBEMClass:function(t){return Object(o.a)("afs-checkbox",t)}}},l=(n(145),n(0)),f=Object(l.a)(u,r,[],!1,null,null,null).exports;e.a=f},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(61);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function h(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function p(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,m(t,e,"set"),n),n}function m(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var v=new WeakMap,y=new WeakMap,g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,t);var e,n,r,o=c(u);function u(){var t;i(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(l(t=o.call.apply(o,[this].concat(n))),v,{writable:!0,value:void 0}),d(l(t),y,{writable:!0,value:void 0}),t}return e=u,(n=[{key:"setUrl",value:function(t){return p(this,v,t),this}},{key:"url",get:function(){return h(this,v)}},{key:"setStatusName",value:function(t){return p(this,y,t),this}},{key:"statusName",get:function(){return h(this,y)}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(r.a)},function(t,e,n){"use strict";e.a=function(t){return new Promise((function(e){return setTimeout((function(n){t&&t(),e()}),0)}))}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"mentionStrings",(function(){return r})),e.default={user:1,group:2,system:3};var r={user:"User",group:"Group",system:"System"}}])},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"afs-subheader",class:[t.themeClass,t.radiusClass,t.centerClass],attrs:{"data-locator":t.dataLocator}},[t.hasIcon?e("ButtonIcon",{staticClass:"afs-subheader__icon",attrs:{icon:t.icon,transparent:!0,"data-locator":"".concat(t.dataLocator,"-button")},on:{click:function(e){return t.$emit("icon-click")}}}):t._e(),t._v(" "),e("AfsText",{class:t.titleClass,attrs:{type:"title"}},[t._t("default",null,{getBEMClass:t.getBEMClass})],2)],1)};r._withStripped=!0;var o=n(23),i=n(5),a=n(1),s=n(3),c={name:"AfsSubheader",components:{ButtonIcon:o.a,AfsText:i.a},props:{dataLocator:{type:String,default:"subheader"},center:{type:Boolean,default:!0},radius:{type:String,default:""},icon:{type:String,default:""},mode:{type:String,default:"multi-line",validator:function(t){return["multi-line","single-line"].includes(t)}}},computed:{themeClass:function(){var t=Object(s.a)(this.$root);return Object(a.c)(t.theme)},titleClass:function(){return["afs-subheader__title","afs-subheader__title_".concat(this.mode)]},radiusClass:function(){return Object(a.b)("afs-subheader",this.radius)},centerClass:function(){return{"afs-subheader_center":this.center}},hasIcon:function(){return this.icon}},methods:{getBEMClass:function(t){return Object(a.a)("afs-subheader",t)}}},u=(n(144),n(0)),l=Object(u.a)(c,r,[],!1,null,null,null).exports;e.a=l},function(t,e,n){var r=n(320)("wks"),o=n(228),i=n(57).Symbol,a="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}).store=r},function(t,e,n){"use strict";n(47)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r,o=n(35);!function(t){t[t.none=o.COMPONENT_FILTER.NONE]="none",t[t.removed=o.COMPONENT_FILTER.REMOVED]="removed",t[t.added=o.COMPONENT_FILTER.ADDED]="added",t[t.changed=o.COMPONENT_FILTER.MODIFIED]="changed"}(r||(r={}));var i=["None","Removed","Added","Modified"]},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(r||(r={}))},function(t,e,n){},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e(t.tag,{tag:"component",staticClass:"afs-search",class:[t.themeClass,t.classes],attrs:{"data-locator":t.dataLocator},on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("ButtonIcon",{staticClass:"afs-search__icon",attrs:{icon:t.icon,size:"lg",transparent:!0,"data-locator":"".concat(t.dataLocator,"-btn")},on:{click:t.handleSubmit}}),t._v(" "),e("Input",t._g({ref:"control",attrs:{"model-value":t.modelValue,placeholder:t.placeholder,"control-class":"afs-search__control",radius:t.radius,"data-locator":"".concat(t.dataLocator,"-control")},on:{"model-changed":t.handleModelChanged,focus:function(e){return t.toggleFocus(!0)},blur:function(e){return t.toggleFocus(!1)}}},t.$listeners)),t._v(" "),e("ButtonIcon",{directives:[{name:"show",rawName:"v-show",value:t.toggleClearBtn,expression:"toggleClearBtn"}],staticClass:"afs-search__remove-icon",attrs:{icon:"close-16",size:"lg",transparent:!0,"data-locator":"".concat(t.dataLocator,"-clear")},on:{click:t.handleClearSearch}})],1)};r._withStripped=!0;var o=n(23),i=n(110),a=n(1),s=n(3),c=n(2);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function h(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==u(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,s(b,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function f(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var d={name:"AfsSearch",components:{ButtonIcon:o.a,Input:i.a},model:{prop:"modelValue",event:"model-changed"},props:{dataLocator:{type:String,default:"search"},tag:{type:String,default:"form"},icon:{type:String,default:"search-16"},modelValue:{type:String,default:""},placeholder:{type:String,default:"Search"},radius:{type:String,default:"".concat(c.d.tl," ").concat(c.d.tr," ").concat(c.d.bl," ").concat(c.d.br)},hasRemoveBtn:{type:Boolean,default:!0},alwaysShowRemoveBtn:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{isFocusInput:!1}},computed:{themeClass:function(){var t=Object(s.a)(this.$root);return Object(a.c)(t.theme)},toggleClearBtn:function(){return!!this.alwaysShowRemoveBtn||!!this.hasRemoveBtn&&(!!this.modelValue||this.isFocusInput)},classes:function(){return{"is-disabled":this.disabled}}},methods:{getBEMClass:function(t){return Object(a.a)("afs-search",t)},handleSubmit:function(){this.$emit("submit",this.modelValue)},handleModelChanged:function(t){this.$emit("model-changed",t)},handleClearSearch:function(){this.handleModelChanged(""),this.$emit("submit",""),this.$emit("clear","")},toggleFocus:function(t){this.isFocusInput=t},focus:function(){var t,e=this;return(t=l().mark((function t(){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:(n=e.$refs.control.$refs.input)&&n.focus();case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){f(i,r,o,a,s,"next",t)}function s(t){f(i,r,o,a,s,"throw",t)}a(void 0)}))})()}}},h=(n(177),n(0)),p=Object(h.a)(d,r,[],!1,null,null,null).exports;e.a=p},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"d",(function(){return s}));var r={id:"num",text:"",width:64,minWidth:64,visible:!0},o=[{id:"Comment",text:"Name",width:"22%",minWidth:100,sorted:!0,visible:!0},{id:"Description",text:"Description",width:"34%",minWidth:100,sorted:!0,visible:!0},{id:"Designator",text:"Designator",width:"22%",minWidth:100,sorted:!0,visible:!0},{id:"part",text:"Part Number",width:"15%",minWidth:100,sorted:!0,visible:!0},{id:"Price",text:"Price",width:60,minWidth:60,sorted:!0,visible:!0,money:!0},{id:"Quantity",text:"Qty",width:60,minWidth:48,sorted:!0,visible:!0}],i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{id:t.name,text:t.name,width:t.width,minWidth:Math.min(t.width,e?100:60),sorted:!0,visible:e,money:a(t.name)}},a=function(t){var e=t.toLowerCase();return e.startsWith("supplier subtotal")||e.startsWith("supplier unit price")||e.startsWith("price")},s=function(t){return t.split("").reduce((function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t}),0).toString()}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var r=/^Manufacturer Part Number [1-9]\d?$/,o=/^Supplier Part Number [1-9]\d?$/,i=/^Manufacturer Lifecycle [1-9]\d?$/},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return s}));var a=new Uint8Array([0,0,0,255]),s=function(){function t(e,n,o){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r(this,t),i(this,"Diffuse",void 0),i(this,"Hatching",void 0),i(this,"Bordered",void 0),i(this,"OnTop",void 0),i(this,"GrayscaleMesh",void 0),i(this,"Offset2D",void 0),this.Diffuse=e||a,this.Hatching=n||0,this.Bordered=o||!1,this.OnTop=s,this.GrayscaleMesh=c,this.Offset2D=0}var e,n,s;return e=t,s=[{key:"Clone",value:function(e){return new t(e.Diffuse,e.Hatching,e.Bordered)}},{key:"create",value:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new t(e,n,r,o,i)}},{key:"toArrayMaterials",value:function(e){for(var n=[],r=e.GetMaterialsCount(),o=0;o<r;o++){var i=t.Clone(e.GetMaterial(o));n[o]=i}return n}}],(n=null)&&o(e.prototype,n),s&&o(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){var r=n(157),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){"use strict";n(53)},function(t,e,n){"use strict";window.__viewerOpenedComponents=[],e.a={add:function(t){window.__viewerOpenedComponents.push(t)},remove:function(t){window.__viewerOpenedComponents=window.__viewerOpenedComponents.filter((function(e){return e!==t}))},isLast:function(t){return window.__viewerOpenedComponents[window.__viewerOpenedComponents.length-1]===t},getAll:function(){return window.__viewerOpenedComponents}}},function(t,e,n){"use strict";(function(e){var r=n(22),o=n(195),i=n(129),a={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(c=n(130)),c),transformRequest:[function(t,e){return o(e,"Accept"),o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)||e&&"application/json"===e["Content-Type"]?(s(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||u.transitional,n=e&&e.silentJSONParsing,o=e&&e.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||o&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(a){if("SyntaxError"===t.name)throw i(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(a)})),t.exports=u}).call(this,n(114))},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?(t.exports=r=function(t){return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},t.exports.default=t.exports,t.exports.__esModule=!0),r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=(window,function(t){return window.__afsComponents&&window.__afsComponents[t]});Object.freeze({SM:"sm",MD:"md",LG:"lg"}),e.default={inserted:function(t,e){var n=e.value;if("object"===o()(n)&&null!==n&&!Array.isArray(n)){var r=null,a=(null==n?void 0:n.id)||"app-trimmed-text-hint",s=function(){var e=i(a);if(e){var r=function(){return e.setText(n.hint)};e.on&&e.on("open",r),e.open&&e.open(t),e.off&&e.off("open",r)}};t.addEventListener("mouseenter",(function(e){var o=t.cloneNode(!0);o.style.width="auto",o.style.display="inline",o.style.overflow="hidden",o.visibility="hidden",document.body.appendChild(o);var i=o.offsetWidth;o.remove(),i<t.scrollWidth||(n.noDelay?s():r=setTimeout(s,n.delay||1e3))}),!1),t.addEventListener("mouseleave",(function(e){r&&clearTimeout(r);var n=i(a);if(n){var o=function(){return n.setText(null)};n.on&&n.on("close",o),n.close&&n.close(t),n.off&&n.off("close",o)}}),!1)}}}}])},function(t,e,n){"use strict";var r,o,i,a;n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),function(t){t[t.Wire=19]="Wire",t[t.Component=26]="Component",t[t.Pin=37]="Pin",t[t.Port=38]="Port",t[t.Power=39]="Power",t[t.SheetEntry=40]="SheetEntry",t[t.SheetSymbol=41]="SheetSymbol"}(r||(r={})),function(t){t[t.Pad=2]="Pad"}(o||(o={})),function(t){t[t.Fitted=0]="Fitted",t[t.NotFitted=1]="NotFitted",t[t.Alternate=2]="Alternate"}(i||(i={})),function(t){t[t.Other=0]="Other",t[t.Pcb=1]="Pcb",t[t.Sch=2]="Sch",t[t.Camtastic=3]="Camtastic",t[t.Draftsman=4]="Draftsman",t[t.ActiveBom=5]="ActiveBom",t[t.Pdf=6]="Pdf",t[t.Mbs=7]="Mbs",t[t.Mba=8]="Mba"}(a||(a={}))},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade","enter-class":"afs-modal_enter","enter-active-class":"afs-modal_enter-active","leave-to-class":"afs-modal_leave-to","leave-active-class":"afs-modal_leave-active"},on:{"after-leave":function(e){return t.$emit("after-close")}}},[t.isOpened?e("div",{directives:[{name:"inject",rawName:"v-inject:[parentContainerId]",arg:t.parentContainerId}],staticClass:"afs-modal",class:[t.themeClass,t.sizeClass,t.levelClass,t.typeClass],attrs:{"data-afs-modal":t.id,"data-locator":t.dataLocator},on:{"!click":function(e){return t.handleOutsideClick.apply(null,arguments)},mousedown:t.handleOutsideStart}},[e("div",{ref:"container",staticClass:"afs-modal__container",attrs:{"data-locator":"".concat(t.dataLocator,"-container")}},[t.hasClose?e("ButtonIcon",{staticClass:"afs-modal__close",attrs:{icon:t.closeIcon,transparent:!0,filled:t.closeIconFilled,gallery:t.isGallery(),"data-locator":"".concat(t.dataLocator,"-close")},on:{click:function(e){return e.preventDefault(),t.close.apply(null,arguments)}}}):t._e(),t._v(" "),t.hasHeader?e("Subheader",{staticClass:"afs-modal__header",class:{"afs-modal__header_center":t.headerCenter},attrs:{center:t.headerCenter,radius:"top-left top-right"}},[t._t("header",null,{getBEMClass:t.getBEMClass})],2):t._e(),t._v(" "),e("div",{staticClass:"afs-modal__body"},[t._t("default",null,{getBEMClass:t.getBEMClass})],2)],1)]):t._e()])};r._withStripped=!0;var o=n(69),i=n(23),a=n(1),s=n(3),c=n(2),u=n(13),l=(n(40),{name:"AfsModal",directives:{inject:u.a},components:{Subheader:o.a,ButtonIcon:i.a},props:{dataLocator:{type:String,default:"modal"},level:{type:[String,Number],default:1,validator:function(t){return+t>0&&+t<5}},id:{type:[String,Number],default:"",required:!0},size:{type:String,default:"lg",validator:function(t){return["xxl","lg","md","mdl","mdh","sm"].includes(t)}},type:{type:String,default:"simple",validator:function(t){return["gallery","simple"].includes(t)}},hasClose:{type:Boolean,default:!0},hasOutsideClose:{type:Boolean,default:!0},headerCenter:{type:Boolean,default:!1},parentContainerId:{type:String,default:""},closeByEsc:{type:Boolean,default:!0}},data:function(){return{isOpened:!1,clickedElement:null}},computed:{themeClass:function(){var t=Object(s.a)(this.$root);return Object(a.c)(t.theme)},sizeClass:function(){return"afs-modal_".concat(this.size)},typeClass:function(){return"afs-modal_".concat(this.type)},hasHeader:function(){return this.$slots.header},levelClass:function(){return"afs-modal_".concat(this.level)},closeIcon:function(){return this.isGallery()?"close-bw-16":"close-8"},closeIconFilled:function(){return!!this.isGallery()}},watch:{isOpened:{immediate:!0,handler:function(t){t?this.closeByEsc&&document.addEventListener("keyup",this.handleKeyUp,!0):this.closeByEsc&&document.removeEventListener("keyup",this.handleKeyUp,!0)}}},mounted:function(){c.b.set({id:this.id,component:this})},beforeDestroy:function(){c.b.delete(this.id)},methods:{getBEMClass:function(t){return Object(a.a)("afs-modal",t)},handleOutsideClick:function(t){var e=this;!this.hasOutsideClose||t.target!==this.clickedElement||t.path.some((function(t){return t===e.$refs.container}))||t.path.some((function(t){return t.dataset&&t.dataset.afsModalTarget===e.id}))||this.close()},handleOutsideStart:function(t){this.clickedElement=t.target},toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.show(),this.$emit("open")},close:function(){this.hide(),this.$emit("close")},show:function(){this.isOpened||(this.isOpened=!0)},hide:function(){this.isOpened&&(this.isOpened=!1)},handleKeyUp:function(t){var e=document.querySelectorAll(".afs-modal");27===t.keyCode&&e[e.length-1]===this.$el&&this.close()},isGallery:function(){return"gallery"===this.type}}}),f=(n(333),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null).exports;e.a=d},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"getJSTime",(function(){return l})),n.d(e,"formatDate",(function(){return f}));var r=/\d\d(:\d\d){1,2}/,o=/[+-]\d\d:\d\d/,i=[{long:"January",short:"Jan"},{long:"February",short:"Feb"},{long:"March",short:"Mar"},{long:"April",short:"Apr"},{long:"May",short:"May"},{long:"June",short:"Jun"},{long:"July",short:"Jul"},{long:"August",short:"Aug"},{long:"September",short:"Sept"},{long:"October",short:"Oct"},{long:"November",short:"Nov"},{long:"December",short:"Dec"}],a=function(t,e){var n=t.getHours(),r=t.getMinutes();return{years:t.getFullYear(),month:e[t.getMonth()].short,days:t.getDate(),hours:0===n||12===n||24===n?12:n%12,minutes:r<10?"0"+r:r,postfix:n<12?"AM":"PM"}},s={second:"just now",seconds:"1 minute %s",minute:"minute %s",minutes:"%s minutes %s",hour:"an hour %s",hours:"%s hours %s",yesterday:"Yesterday"},c=function(){var t=new Date,e=t.toLocaleDateString(void 0),n=t.toLocaleDateString(void 0,{timeZoneName:"short"}),r=n.indexOf(e);return r>=0?(n.substring(0,r)+n.substring(r+e.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):n},u=function(t){var e=r.test(t);return o.test(t)?t.replace(o,"+00:00"):e?t+"+00:00":t},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.ignoreTimeZone||0===e.timeZoneOffset)&&(t=u(t)),new Date(t).getTime()},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(e.ignoreTimeZone||0===e.timeZoneOffset)&&(t=u(t));var n=new Date(t).getTime(),r=new Date(n),o=c(),s=a(r,i),l=s.years,f=s.month,d=s.days,h=s.hours,p=s.minutes,m=s.postfix,v="".concat(f," ").concat(d);return e.skipCurrentYear&&l===(new Date).getFullYear()||(v+=" ".concat(l)),v+=", ".concat(h,":").concat(p," ").concat(m),e.skipTimeZoneSuffix||(v+=" ".concat(o)),v};e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(e.ignoreTimeZone||0===e.timeZoneOffset)&&(t=u(t));var n=e.afterSuffix||"later",r=e.beforeSuffix||"ago",o=e.messages||s,c=e.months||i,l=new Date(t).getTime(),f=new Date,d=f.getFullYear(),h=new Date(l),p=f.getTime()-h.getTime(),m=Math.floor,v=1e3,y=60*v,g=60*y,b=24*g,w=365*b,_=p>0;p=p<0?v-p:p;var O=o.yesterday,S=a(h,c),x=S.years,C=S.month,E=S.days,k=S.hours,T=S.minutes,P=S.postfix,j=p<20*v?o.second:p<y?o.seconds:p<2*y?o.minute:p<g?o.minutes.replace("%s",m(p/y)):p<2*g?o.hour:p<b?o.hours.replace("%s",m(p/g)):p<2*b&&_?"".concat(O,", ").concat(k,":").concat(T," ").concat(P):p<w&&x===d?"".concat(C," ").concat(E,", ").concat(k,":").concat(T," ").concat(P):"".concat(C," ").concat(E," ").concat(x,", ").concat(k,":").concat(T," ").concat(P);return j.replace("%s",_?r:n)}}])},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return qn})),n.d(e,"b",(function(){return ln}));
/*!
 * Vue.js v2.7.8
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var o=Object.freeze({}),i=Array.isArray;function a(t){return null==t}function s(t){return null!=t}function c(t){return!0===t}function u(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function l(t){return"function"==typeof t}function f(t){return null!==t&&"object"==typeof t}var d=Object.prototype.toString;function h(t){return"[object Object]"===d.call(t)}function p(t){return"[object RegExp]"===d.call(t)}function m(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function v(t){return s(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function y(t){return null==t?"":Array.isArray(t)||h(t)&&t.toString===d?JSON.stringify(t,null,2):String(t)}function g(t){var e=parseFloat(t);return isNaN(e)?t:e}function b(t,e){for(var n=Object.create(null),r=t.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}var w=b("slot,component",!0),_=b("key,ref,slot,slot-scope,is");function O(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var S=Object.prototype.hasOwnProperty;function x(t,e){return S.call(t,e)}function C(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var E=/-(\w)/g,k=C((function(t){return t.replace(E,(function(t,e){return e?e.toUpperCase():""}))})),T=C((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),P=/\B([A-Z])/g,j=C((function(t){return t.replace(P,"-$1").toLowerCase()}));var A=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function M(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function L(t,e){for(var n in e)t[n]=e[n];return t}function I(t){for(var e={},n=0;n<t.length;n++)t[n]&&L(e,t[n]);return e}function D(t,e,n){}var R=function(t,e,n){return!1},N=function(t){return t};function B(t,e){if(t===e)return!0;var n=f(t),r=f(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var o=Array.isArray(t),i=Array.isArray(e);if(o&&i)return t.length===e.length&&t.every((function(t,n){return B(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(o||i)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every((function(n){return B(t[n],e[n])}))}catch(t){return!1}}function F(t,e){for(var n=0;n<t.length;n++)if(B(t[n],e))return n;return-1}function U(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function $(t,e){return t===e?0===t&&1/t!=1/e:t==t||e==e}var G=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],z={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:D,parsePlatformTagName:N,mustUseProp:R,async:!0,_lifecycleHooks:V},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function W(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function Y(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var q=new RegExp("[^".concat(H.source,".$_\\d]"));var X="__proto__"in{},Z="undefined"!=typeof window,K=Z&&window.navigator.userAgent.toLowerCase(),J=K&&/msie|trident/.test(K),Q=K&&K.indexOf("msie 9.0")>0,tt=K&&K.indexOf("edge/")>0;K&&K.indexOf("android");var et=K&&/iphone|ipad|ipod|ios/.test(K);K&&/chrome\/\d+/.test(K),K&&/phantomjs/.test(K);var nt,rt=K&&K.match(/firefox\/(\d+)/),ot={}.watch,it=!1;if(Z)try{var at={};Object.defineProperty(at,"passive",{get:function(){it=!0}}),window.addEventListener("test-passive",null,at)}catch(t){}var st=function(){return void 0===nt&&(nt=!Z&&void 0!==t&&(t.process&&"server"===t.process.env.VUE_ENV)),nt},ct=Z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ut(t){return"function"==typeof t&&/native code/.test(t.toString())}var lt,ft="undefined"!=typeof Symbol&&ut(Symbol)&&"undefined"!=typeof Reflect&&ut(Reflect.ownKeys);lt="undefined"!=typeof Set&&ut(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var dt=null;function ht(t){void 0===t&&(t=null),t||dt&&dt._scope.off(),dt=t,t&&t._scope.on()}var pt=function(){function t(t,e,n,r,o,i,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),mt=function(t){void 0===t&&(t="");var e=new pt;return e.text=t,e.isComment=!0,e};function vt(t){return new pt(void 0,void 0,void 0,String(t))}function yt(t){var e=new pt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var gt=0,bt=function(){function t(){this.id=gt++,this.subs=[]}return t.prototype.addSub=function(t){this.subs.push(t)},t.prototype.removeSub=function(t){O(this.subs,t)},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(t){var e=this.subs.slice();for(var n=0,r=e.length;n<r;n++){e[n].update()}},t}();bt.target=null;var wt=[];function _t(t){wt.push(t),bt.target=t}function Ot(){wt.pop(),bt.target=wt[wt.length-1]}var St=Array.prototype,xt=Object.create(St);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=St[t];Y(xt,t,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o,i=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2)}return o&&a.observeArray(o),a.dep.notify(),i}))}));var Ct=Object.getOwnPropertyNames(xt),Et={},kt=!0;function Tt(t){kt=t}var Pt={notify:D,depend:D,addSub:D,removeSub:D},jt=function(){function t(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.value=t,this.shallow=e,this.mock=n,this.dep=n?Pt:new bt,this.vmCount=0,Y(t,"__ob__",this),i(t)){if(!n)if(X)t.__proto__=xt;else for(var r=0,o=Ct.length;r<o;r++){Y(t,s=Ct[r],xt[s])}e||this.observeArray(t)}else{var a=Object.keys(t);for(r=0;r<a.length;r++){var s;Mt(t,s=a[r],Et,void 0,e,n)}}}return t.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)At(t[e],!1,this.mock)},t}();function At(t,e,n){var r;if(!(!f(t)||Ft(t)||t instanceof pt))return x(t,"__ob__")&&t.__ob__ instanceof jt?r=t.__ob__:!kt||!n&&st()||!i(t)&&!h(t)||!Object.isExtensible(t)||t.__v_skip||(r=new jt(t,e,n)),r}function Mt(t,e,n,r,o,a){var s=new bt,c=Object.getOwnPropertyDescriptor(t,e);if(!c||!1!==c.configurable){var u=c&&c.get,l=c&&c.set;u&&!l||n!==Et&&2!==arguments.length||(n=t[e]);var f=!o&&At(n,!1,a);return Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=u?u.call(t):n;return bt.target&&(s.depend(),f&&(f.dep.depend(),i(e)&&Dt(e))),Ft(e)&&!o?e.value:e},set:function(e){var r=u?u.call(t):n;if($(r,e)){if(l)l.call(t,e);else{if(u)return;if(!o&&Ft(r)&&!Ft(e))return void(r.value=e);n=e}f=!o&&At(e,!1,a),s.notify()}}}),s}}function Lt(t,e,n){if(!Bt(t)){var r=t.__ob__;return i(t)&&m(e)?(t.length=Math.max(t.length,e),t.splice(e,1,n),r&&!r.shallow&&r.mock&&At(n,!1,!0),n):e in t&&!(e in Object.prototype)?(t[e]=n,n):t._isVue||r&&r.vmCount?n:r?(Mt(r.value,e,n,void 0,r.shallow,r.mock),r.dep.notify(),n):(t[e]=n,n)}}function It(t,e){if(i(t)&&m(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||Bt(t)||x(t,e)&&(delete t[e],n&&n.dep.notify())}}function Dt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),i(e)&&Dt(e)}function Rt(t){return Nt(t,!0),Y(t,"__v_isShallow",!0),t}function Nt(t,e){if(!Bt(t)){At(t,e,st());0}}function Bt(t){return!(!t||!t.__v_isReadonly)}function Ft(t){return!(!t||!0!==t.__v_isRef)}function Ut(t,e,n){Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){var t=e[n];if(Ft(t))return t.value;var r=t&&t.__ob__;return r&&r.dep.depend(),t},set:function(t){var r=e[n];Ft(r)&&!Ft(t)?r.value=t:e[n]=t}})}var $t=C((function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=r?t.slice(1):t,once:n,capture:r,passive:e}}));function Gt(t,e){function n(){var t=n.fns;if(!i(t))return Xe(t,null,arguments,e,"v-on handler");for(var r=t.slice(),o=0;o<r.length;o++)Xe(r[o],null,arguments,e,"v-on handler")}return n.fns=t,n}function Vt(t,e,n,r,o,i){var s,u,l,f;for(s in t)u=t[s],l=e[s],f=$t(s),a(u)||(a(l)?(a(u.fns)&&(u=t[s]=Gt(u,i)),c(f.once)&&(u=t[s]=o(f.name,u,f.capture)),n(f.name,u,f.capture,f.passive,f.params)):u!==l&&(l.fns=u,t[s]=l));for(s in e)a(t[s])&&r((f=$t(s)).name,e[s],f.capture)}function zt(t,e,n){var r;t instanceof pt&&(t=t.data.hook||(t.data.hook={}));var o=t[e];function i(){n.apply(this,arguments),O(r.fns,i)}a(o)?r=Gt([i]):s(o.fns)&&c(o.merged)?(r=o).fns.push(i):r=Gt([o,i]),r.merged=!0,t[e]=r}function Ht(t,e,n,r,o){if(s(e)){if(x(e,n))return t[n]=e[n],o||delete e[n],!0;if(x(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function Wt(t){return u(t)?[vt(t)]:i(t)?function t(e,n){var r,o,l,f,d=[];for(r=0;r<e.length;r++)a(o=e[r])||"boolean"==typeof o||(l=d.length-1,f=d[l],i(o)?o.length>0&&(Yt((o=t(o,"".concat(n||"","_").concat(r)))[0])&&Yt(f)&&(d[l]=vt(f.text+o[0].text),o.shift()),d.push.apply(d,o)):u(o)?Yt(f)?d[l]=vt(f.text+o):""!==o&&d.push(vt(o)):Yt(o)&&Yt(f)?d[l]=vt(f.text+o.text):(c(e._isVList)&&s(o.tag)&&a(o.key)&&s(n)&&(o.key="__vlist".concat(n,"_").concat(r,"__")),d.push(o)));return d}(t):void 0}function Yt(t){return s(t)&&s(t.text)&&!1===t.isComment}function qt(t,e,n,r,o,d){return(i(n)||u(n))&&(o=r,r=n,n=void 0),c(d)&&(o=2),function(t,e,n,r,o){if(s(n)&&s(n.__ob__))return mt();s(n)&&s(n.is)&&(e=n.is);if(!e)return mt();0;i(r)&&l(r[0])&&((n=n||{}).scopedSlots={default:r[0]},r.length=0);2===o?r=Wt(r):1===o&&(r=function(t){for(var e=0;e<t.length;e++)if(i(t[e]))return Array.prototype.concat.apply([],t);return t}(r));var u,d;if("string"==typeof e){var h=void 0;d=t.$vnode&&t.$vnode.ns||z.getTagNamespace(e),u=z.isReservedTag(e)?new pt(z.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!s(h=Gn(t.$options,"components",e))?new pt(e,n,r,void 0,void 0,t):Mn(h,n,t,r,e)}else u=Mn(e,n,t,r);return i(u)?u:s(u)?(s(d)&&function t(e,n,r){e.ns=n,"foreignObject"===e.tag&&(n=void 0,r=!0);if(s(e.children))for(var o=0,i=e.children.length;o<i;o++){var u=e.children[o];s(u.tag)&&(a(u.ns)||c(r)&&"svg"!==u.tag)&&t(u,n,r)}}(u,d),s(n)&&function(t){f(t.style)&&dn(t.style);f(t.class)&&dn(t.class)}(n),u):mt()}(t,e,n,r,o)}function Xt(t,e){var n,r,o,a,c=null;if(i(t)||"string"==typeof t)for(c=new Array(t.length),n=0,r=t.length;n<r;n++)c[n]=e(t[n],n);else if("number"==typeof t)for(c=new Array(t),n=0;n<t;n++)c[n]=e(n+1,n);else if(f(t))if(ft&&t[Symbol.iterator]){c=[];for(var u=t[Symbol.iterator](),l=u.next();!l.done;)c.push(e(l.value,c.length)),l=u.next()}else for(o=Object.keys(t),c=new Array(o.length),n=0,r=o.length;n<r;n++)a=o[n],c[n]=e(t[a],a,n);return s(c)||(c=[]),c._isVList=!0,c}function Zt(t,e,n,r){var o,i=this.$scopedSlots[t];i?(n=n||{},r&&(n=L(L({},r),n)),o=i(n)||(l(e)?e():e)):o=this.$slots[t]||(l(e)?e():e);var a=n&&n.slot;return a?this.$createElement("template",{slot:a},o):o}function Kt(t){return Gn(this.$options,"filters",t,!0)||N}function Jt(t,e){return i(t)?-1===t.indexOf(e):t!==e}function Qt(t,e,n,r,o){var i=z.keyCodes[e]||n;return o&&r&&!z.keyCodes[e]?Jt(o,r):i?Jt(i,t):r?j(r)!==e:void 0===t}function te(t,e,n,r,o){if(n)if(f(n)){i(n)&&(n=I(n));var a=void 0,s=function(i){if("class"===i||"style"===i||_(i))a=t;else{var s=t.attrs&&t.attrs.type;a=r||z.mustUseProp(e,s,i)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var c=k(i),u=j(i);c in a||u in a||(a[i]=n[i],o&&((t.on||(t.on={}))["update:".concat(i)]=function(t){n[i]=t}))};for(var c in n)s(c)}else;return t}function ee(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||re(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),"__static__".concat(t),!1),r}function ne(t,e,n){return re(t,"__once__".concat(e).concat(n?"_".concat(n):""),!0),t}function re(t,e,n){if(i(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&oe(t[r],"".concat(e,"_").concat(r),n);else oe(t,e,n)}function oe(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function ie(t,e){if(e)if(h(e)){var n=t.on=t.on?L({},t.on):{};for(var r in e){var o=n[r],i=e[r];n[r]=o?[].concat(o,i):i}}else;return t}function ae(t,e,n,r){e=e||{$stable:!n};for(var o=0;o<t.length;o++){var a=t[o];i(a)?ae(a,e,n):a&&(a.proxy&&(a.fn.proxy=!0),e[a.key]=a.fn)}return r&&(e.$key=r),e}function se(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"==typeof r&&r&&(t[e[n]]=e[n+1])}return t}function ce(t,e){return"string"==typeof t?e+t:t}function ue(t){t._o=ne,t._n=g,t._s=y,t._l=Xt,t._t=Zt,t._q=B,t._i=F,t._m=ee,t._f=Kt,t._k=Qt,t._b=te,t._v=vt,t._e=mt,t._u=ae,t._g=ie,t._d=se,t._p=ce}function le(t,e){if(!t||!t.length)return{};for(var n={},r=0,o=t.length;r<o;r++){var i=t[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==e&&i.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(i);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var u in n)n[u].every(fe)&&delete n[u];return n}function fe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function de(t){return t.isComment&&t.asyncFactory}function he(t,e,n,r){var i,a=Object.keys(n).length>0,s=e?!!e.$stable:!a,c=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&r&&r!==o&&c===r.$key&&!a&&!r.$hasNormal)return r;for(var u in i={},e)e[u]&&"$"!==u[0]&&(i[u]=pe(t,n,u,e[u]))}else i={};for(var l in n)l in i||(i[l]=me(n,l));return e&&Object.isExtensible(e)&&(e._normalized=i),Y(i,"$stable",s),Y(i,"$key",c),Y(i,"$hasNormal",a),i}function pe(t,e,n,r){var o=function(){var e=dt;ht(t);var n=arguments.length?r.apply(null,arguments):r({}),o=(n=n&&"object"==typeof n&&!i(n)?[n]:Wt(n))&&n[0];return ht(e),n&&(!o||1===n.length&&o.isComment&&!de(o))?void 0:n};return r.proxy&&Object.defineProperty(e,n,{get:o,enumerable:!0,configurable:!0}),o}function me(t,e){return function(){return t[e]}}function ve(t){return{get attrs(){if(!t._attrsProxy){var e=t._attrsProxy={};Y(e,"_v_attr_proxy",!0),ye(e,t.$attrs,o,t,"$attrs")}return t._attrsProxy},get listeners(){t._listenersProxy||ye(t._listenersProxy={},t.$listeners,o,t,"$listeners");return t._listenersProxy},get slots(){return function(t){t._slotsProxy||be(t._slotsProxy={},t.$scopedSlots);return t._slotsProxy}(t)},emit:A(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach((function(n){return Ut(t,e,n)}))}}}function ye(t,e,n,r,o){var i=!1;for(var a in e)a in t?e[a]!==n[a]&&(i=!0):(i=!0,ge(t,a,r,o));for(var a in t)a in e||(i=!0,delete t[a]);return i}function ge(t,e,n,r){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return n[r][e]}})}function be(t,e){for(var n in e)t[n]=e[n];for(var n in t)n in e||delete t[n]}var we,_e=null;function Oe(t,e){return(t.__esModule||ft&&"Module"===t[Symbol.toStringTag])&&(t=t.default),f(t)?e.extend(t):t}function Se(t){if(i(t))for(var e=0;e<t.length;e++){var n=t[e];if(s(n)&&(s(n.componentOptions)||de(n)))return n}}function xe(t,e){we.$on(t,e)}function Ce(t,e){we.$off(t,e)}function Ee(t,e){var n=we;return function r(){var o=e.apply(null,arguments);null!==o&&n.$off(t,r)}}function ke(t,e,n){we=t,Vt(e,n||{},xe,Ce,Ee,t),we=void 0}var Te=null;function Pe(t){var e=Te;return Te=t,function(){Te=e}}function je(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Ae(t,e){if(e){if(t._directInactive=!1,je(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Ae(t.$children[n]);Me(t,"activated")}}function Me(t,e,n,r){void 0===r&&(r=!0),_t();var o=dt;r&&ht(t);var i=t.$options[e],a="".concat(e," hook");if(i)for(var s=0,c=i.length;s<c;s++)Xe(i[s],t,n||null,t,a);t._hasHookEvent&&t.$emit("hook:"+e),r&&ht(o),Ot()}var Le=[],Ie=[],De={},Re=!1,Ne=!1,Be=0;var Fe=0,Ue=Date.now;if(Z&&!J){var $e=window.performance;$e&&"function"==typeof $e.now&&Ue()>document.createEvent("Event").timeStamp&&(Ue=function(){return $e.now()})}var Ge=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function Ve(){var t,e;for(Fe=Ue(),Ne=!0,Le.sort(Ge),Be=0;Be<Le.length;Be++)(t=Le[Be]).before&&t.before(),e=t.id,De[e]=null,t.run();var n=Ie.slice(),r=Le.slice();Be=Le.length=Ie.length=0,De={},Re=Ne=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ae(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],r=n.vm;r&&r._watcher===n&&r._isMounted&&!r._isDestroyed&&Me(r,"updated")}}(r),ct&&z.devtools&&ct.emit("flush")}function ze(t){var e=t.id;if(null==De[e]&&(t!==bt.target||!t.noRecurse)){if(De[e]=!0,Ne){for(var n=Le.length-1;n>Be&&Le[n].id>t.id;)n--;Le.splice(n+1,0,t)}else Le.push(t);Re||(Re=!0,cn(Ve))}}"".concat("watcher"," callback"),"".concat("watcher"," getter"),"".concat("watcher"," cleanup");var He;var We=function(){function t(t){void 0===t&&(t=!1),this.active=!0,this.effects=[],this.cleanups=[],!t&&He&&(this.parent=He,this.index=(He.scopes||(He.scopes=[])).push(this)-1)}return t.prototype.run=function(t){if(this.active){var e=He;try{return He=this,t()}finally{He=e}}else 0},t.prototype.on=function(){He=this},t.prototype.off=function(){He=this.parent},t.prototype.stop=function(t){if(this.active){var e=void 0,n=void 0;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].teardown();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(this.parent&&!t){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}},t}();function Ye(t){var e=t._provided,n=t.$parent&&t.$parent._provided;return n===e?t._provided=Object.create(n):e}function qe(t,e,n){_t();try{if(e)for(var r=e;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{if(!1===o[i].call(r,t,e,n))return}catch(t){Ze(t,r,"errorCaptured hook")}}Ze(t,e,n)}finally{Ot()}}function Xe(t,e,n,r,o){var i;try{(i=n?t.apply(e,n):t.call(e))&&!i._isVue&&v(i)&&!i._handled&&(i.catch((function(t){return qe(t,r,o+" (Promise/async)")})),i._handled=!0)}catch(t){qe(t,r,o)}return i}function Ze(t,e,n){if(z.errorHandler)try{return z.errorHandler.call(null,t,e,n)}catch(e){e!==t&&Ke(e,null,"config.errorHandler")}Ke(t,e,n)}function Ke(t,e,n){if(!Z||"undefined"==typeof console)throw t;console.error(t)}var Je,Qe=!1,tn=[],en=!1;function nn(){en=!1;var t=tn.slice(0);tn.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&ut(Promise)){var rn=Promise.resolve();Je=function(){rn.then(nn),et&&setTimeout(D)},Qe=!0}else if(J||"undefined"==typeof MutationObserver||!ut(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Je=void 0!==r&&ut(r)?function(){r(nn)}:function(){setTimeout(nn,0)};else{var on=1,an=new MutationObserver(nn),sn=document.createTextNode(String(on));an.observe(sn,{characterData:!0}),Je=function(){on=(on+1)%2,sn.data=String(on)},Qe=!0}function cn(t,e){var n;if(tn.push((function(){if(t)try{t.call(e)}catch(t){qe(t,e,"nextTick")}else n&&n(e)})),en||(en=!0,Je()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){n=t}))}function un(t){return function(e,n){if(void 0===n&&(n=dt),n)return function(t,e,n){var r=t.$options;r[e]=Bn(r[e],n)}(n,t,e)}}un("beforeMount"),un("mounted"),un("beforeUpdate"),un("updated"),un("beforeDestroy"),un("destroyed"),un("errorCaptured"),un("activated"),un("deactivated"),un("serverPrefetch"),un("renderTracked"),un("renderTriggered");function ln(t){return t}var fn=new lt;function dn(t){return function t(e,n){var r,o,a=i(e);if(!a&&!f(e)||Object.isFrozen(e)||e instanceof pt)return;if(e.__ob__){var s=e.__ob__.dep.id;if(n.has(s))return;n.add(s)}if(a)for(r=e.length;r--;)t(e[r],n);else if(Ft(e))t(e.value,n);else for(o=Object.keys(e),r=o.length;r--;)t(e[o[r]],n)}(t,fn),fn.clear(),t}var hn=0,pn=function(){function t(t,e,n,r,o){var i,a;i=this,void 0===(a=He||(t?t._scope:void 0))&&(a=He),a&&a.active&&a.effects.push(i),(this.vm=t)&&o&&(t._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++hn,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new lt,this.newDepIds=new lt,this.expression="",l(e)?this.getter=e:(this.getter=function(t){if(!q.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=D)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){var t;_t(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;qe(t,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&dn(t),Ot(),this.cleanupDeps()}return t},t.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},t.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ze(this)},t.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||f(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'.concat(this.expression,'"');Xe(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&O(this.vm._scope.effects,this),this.active){for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}(),mn={enumerable:!0,configurable:!0,get:D,set:D};function vn(t,e,n){mn.get=function(){return this[e][n]},mn.set=function(t){this[e][n]=t},Object.defineProperty(t,n,mn)}function yn(t){var e=t.$options;if(e.props&&function(t,e){var n=t.$options.propsData||{},r=t._props=Rt({}),o=t.$options._propKeys=[];t.$parent&&Tt(!1);var i=function(i){o.push(i);var a=Vn(i,e,n,t);Mt(r,i,a),i in t||vn(t,"_props",i)};for(var a in e)i(a);Tt(!0)}(t,e.props),function(t){var e=t.$options,n=e.setup;if(n){var r=t._setupContext=ve(t);ht(t),_t();var o=Xe(n,null,[t._props||Rt({}),r],t,"setup");if(Ot(),ht(),l(o))e.render=o;else if(f(o))if(t._setupState=o,o.__sfc){var i=t._setupProxy={};for(var a in o)"__sfc"!==a&&Ut(i,o,a)}else for(var a in o)W(a)||Ut(t,o,a);else 0}}(t),e.methods&&function(t,e){t.$options.props;for(var n in e)t[n]="function"!=typeof e[n]?D:A(e[n],t)}(t,e.methods),e.data)!function(t){var e=t.$options.data;h(e=t._data=l(e)?function(t,e){_t();try{return t.call(e,e)}catch(t){return qe(t,e,"data()"),{}}finally{Ot()}}(e,t):e||{})||(e={});var n=Object.keys(e),r=t.$options.props,o=(t.$options.methods,n.length);for(;o--;){var i=n[o];0,r&&x(r,i)||W(i)||vn(t,"_data",i)}var a=At(e);a&&a.vmCount++}(t);else{var n=At(t._data={});n&&n.vmCount++}e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),r=st();for(var o in e){var i=e[o],a=l(i)?i:i.get;0,r||(n[o]=new pn(t,a||D,D,gn)),o in t||bn(t,o,i)}}(t,e.computed),e.watch&&e.watch!==ot&&function(t,e){for(var n in e){var r=e[n];if(i(r))for(var o=0;o<r.length;o++)On(t,n,r[o]);else On(t,n,r)}}(t,e.watch)}var gn={lazy:!0};function bn(t,e,n){var r=!st();l(n)?(mn.get=r?wn(e):_n(n),mn.set=D):(mn.get=n.get?r&&!1!==n.cache?wn(e):_n(n.get):D,mn.set=n.set||D),Object.defineProperty(t,e,mn)}function wn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),bt.target&&e.depend(),e.value}}function _n(t){return function(){return t.call(this,this)}}function On(t,e,n,r){return h(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function Sn(t,e){if(t){for(var n=Object.create(null),r=ft?Reflect.ownKeys(t):Object.keys(t),o=0;o<r.length;o++){var i=r[o];if("__ob__"!==i){var a=t[i].from;if(a in e._provided)n[i]=e._provided[a];else if("default"in t[i]){var s=t[i].default;n[i]=l(s)?s.call(e):s}else 0}}return n}}var xn=0;function Cn(t){var e=t.options;if(t.super){var n=Cn(t.super);if(n!==t.superOptions){t.superOptions=n;var r=function(t){var e,n=t.options,r=t.sealedOptions;for(var o in n)n[o]!==r[o]&&(e||(e={}),e[o]=n[o]);return e}(t);r&&L(t.extendOptions,r),(e=t.options=$n(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function En(t,e,n,r,a){var s,u=this,l=a.options;x(r,"_uid")?(s=Object.create(r))._original=r:(s=r,r=r._original);var f=c(l._compiled),d=!f;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||o,this.injections=Sn(l.inject,r),this.slots=function(){return u.$slots||he(r,t.scopedSlots,u.$slots=le(n,r)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return he(r,t.scopedSlots,this.slots())}}),f&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=he(r,t.scopedSlots,this.$slots)),l._scopeId?this._c=function(t,e,n,o){var a=qt(s,t,e,n,o,d);return a&&!i(a)&&(a.fnScopeId=l._scopeId,a.fnContext=r),a}:this._c=function(t,e,n,r){return qt(s,t,e,n,r,d)}}function kn(t,e,n,r,o){var i=yt(t);return i.fnContext=n,i.fnOptions=r,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function Tn(t,e){for(var n in e)t[k(n)]=e[n]}function Pn(t){return t.name||t.__name||t._componentTag}ue(En.prototype);var jn={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;jn.prepatch(n,n)}else{(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;s(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns);return new t.componentOptions.Ctor(n)}(t,Te)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,r,i){var a=r.data.scopedSlots,s=t.$scopedSlots,c=!!(a&&!a.$stable||s!==o&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key||!a&&t.$scopedSlots.$key),u=!!(i||t.$options._renderChildren||c),l=t.$vnode;t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=i;var f=r.data.attrs||o;t._attrsProxy&&ye(t._attrsProxy,f,l.data&&l.data.attrs||o,t,"$attrs")&&(u=!0),t.$attrs=f,n=n||o;var d=t.$options._parentListeners;if(t._listenersProxy&&ye(t._listenersProxy,n,d||o,t,"$listeners"),t.$listeners=t.$options._parentListeners=n,ke(t,n,d),e&&t.$options.props){Tt(!1);for(var h=t._props,p=t.$options._propKeys||[],m=0;m<p.length;m++){var v=p[m],y=t.$options.props;h[v]=Vn(v,y,e,t)}Tt(!0),t.$options.propsData=e}u&&(t.$slots=le(i,r.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,n=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,Me(r,"mounted")),t.data.keepAlive&&(n._isMounted?((e=r)._inactive=!1,Ie.push(e)):Ae(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,n){if(!(n&&(e._directInactive=!0,je(e))||e._inactive)){e._inactive=!0;for(var r=0;r<e.$children.length;r++)t(e.$children[r]);Me(e,"deactivated")}}(e,!0):e.$destroy())}},An=Object.keys(jn);function Mn(t,e,n,r,u){if(!a(t)){var l=n.$options._base;if(f(t)&&(t=l.extend(t)),"function"==typeof t){var d;if(a(t.cid)&&void 0===(t=function(t,e){if(c(t.error)&&s(t.errorComp))return t.errorComp;if(s(t.resolved))return t.resolved;var n=_e;if(n&&s(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),c(t.loading)&&s(t.loadingComp))return t.loadingComp;if(n&&!s(t.owners)){var r=t.owners=[n],o=!0,i=null,u=null;n.$on("hook:destroyed",(function(){return O(r,n)}));var l=function(t){for(var e=0,n=r.length;e<n;e++)r[e].$forceUpdate();t&&(r.length=0,null!==i&&(clearTimeout(i),i=null),null!==u&&(clearTimeout(u),u=null))},d=U((function(n){t.resolved=Oe(n,e),o?r.length=0:l(!0)})),h=U((function(e){s(t.errorComp)&&(t.error=!0,l(!0))})),p=t(d,h);return f(p)&&(v(p)?a(t.resolved)&&p.then(d,h):v(p.component)&&(p.component.then(d,h),s(p.error)&&(t.errorComp=Oe(p.error,e)),s(p.loading)&&(t.loadingComp=Oe(p.loading,e),0===p.delay?t.loading=!0:i=setTimeout((function(){i=null,a(t.resolved)&&a(t.error)&&(t.loading=!0,l(!1))}),p.delay||200)),s(p.timeout)&&(u=setTimeout((function(){u=null,a(t.resolved)&&h(null)}),p.timeout)))),o=!1,t.loading?t.loadingComp:t.resolved}}(d=t,l)))return function(t,e,n,r,o){var i=mt();return i.asyncFactory=t,i.asyncMeta={data:e,context:n,children:r,tag:o},i}(d,e,n,r,u);e=e||{},Cn(t),s(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[r],c=e.model.callback;s(a)?(i(a)?-1===a.indexOf(c):a!==c)&&(o[r]=[c].concat(a)):o[r]=c}(t.options,e);var h=function(t,e,n){var r=e.options.props;if(!a(r)){var o={},i=t.attrs,c=t.props;if(s(i)||s(c))for(var u in r){var l=j(u);Ht(o,c,u,l,!0)||Ht(o,i,u,l,!1)}return o}}(e,t);if(c(t.options.functional))return function(t,e,n,r,a){var c=t.options,u={},l=c.props;if(s(l))for(var f in l)u[f]=Vn(f,l,e||o);else s(n.attrs)&&Tn(u,n.attrs),s(n.props)&&Tn(u,n.props);var d=new En(n,u,a,r,t),h=c.render.call(null,d._c,d);if(h instanceof pt)return kn(h,n,d.parent,c,d);if(i(h)){for(var p=Wt(h)||[],m=new Array(p.length),v=0;v<p.length;v++)m[v]=kn(p[v],n,d.parent,c,d);return m}}(t,h,e,n,r);var p=e.on;if(e.on=e.nativeOn,c(t.options.abstract)){var m=e.slot;e={},m&&(e.slot=m)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<An.length;n++){var r=An[n],o=e[r],i=jn[r];o===i||o&&o._merged||(e[r]=o?Ln(i,o):i)}}(e);var y=Pn(t.options)||u;return new pt("vue-component-".concat(t.cid).concat(y?"-".concat(y):""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:h,listeners:p,tag:u,children:r},d)}}}function Ln(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}var In=D,Dn=z.optionMergeStrategies;function Rn(t,e){if(!e)return t;for(var n,r,o,i=ft?Reflect.ownKeys(e):Object.keys(e),a=0;a<i.length;a++)"__ob__"!==(n=i[a])&&(r=t[n],o=e[n],x(t,n)?r!==o&&h(r)&&h(o)&&Rn(r,o):Lt(t,n,o));return t}function Nn(t,e,n){return n?function(){var r=l(e)?e.call(n,n):e,o=l(t)?t.call(n,n):t;return r?Rn(r,o):o}:e?t?function(){return Rn(l(e)?e.call(this,this):e,l(t)?t.call(this,this):t)}:e:t}function Bn(t,e){var n=e?t?t.concat(e):i(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function Fn(t,e,n,r){var o=Object.create(t||null);return e?L(o,e):o}Dn.data=function(t,e,n){return n?Nn(t,e,n):e&&"function"!=typeof e?t:Nn(t,e)},V.forEach((function(t){Dn[t]=Bn})),G.forEach((function(t){Dn[t+"s"]=Fn})),Dn.watch=function(t,e,n,r){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var o={};for(var a in L(o,t),e){var s=o[a],c=e[a];s&&!i(s)&&(s=[s]),o[a]=s?s.concat(c):i(c)?c:[c]}return o},Dn.props=Dn.methods=Dn.inject=Dn.computed=function(t,e,n,r){if(!t)return e;var o=Object.create(null);return L(o,t),e&&L(o,e),o},Dn.provide=Nn;var Un=function(t,e){return void 0===e?t:e};function $n(t,e,n){if(l(e)&&(e=e.options),function(t,e){var n=t.props;if(n){var r,o,a={};if(i(n))for(r=n.length;r--;)"string"==typeof(o=n[r])&&(a[k(o)]={type:null});else if(h(n))for(var s in n)o=n[s],a[k(s)]=h(o)?o:{type:o};else 0;t.props=a}}(e),function(t,e){var n=t.inject;if(n){var r=t.inject={};if(i(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(h(n))for(var a in n){var s=n[a];r[a]=h(s)?L({from:a},s):{from:s}}else 0}}(e),function(t){var e=t.directives;if(e)for(var n in e){var r=e[n];l(r)&&(e[n]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(t=$n(t,e.extends,n)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)t=$n(t,e.mixins[r],n);var a,s={};for(a in t)c(a);for(a in e)x(t,a)||c(a);function c(r){var o=Dn[r]||Un;s[r]=o(t[r],e[r],n,r)}return s}function Gn(t,e,n,r){if("string"==typeof n){var o=t[e];if(x(o,n))return o[n];var i=k(n);if(x(o,i))return o[i];var a=T(i);return x(o,a)?o[a]:o[n]||o[i]||o[a]}}function Vn(t,e,n,r){var o=e[t],i=!x(n,t),a=n[t],s=Yn(Boolean,o.type);if(s>-1)if(i&&!x(o,"default"))a=!1;else if(""===a||a===j(t)){var c=Yn(String,o.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=function(t,e,n){if(!x(e,"default"))return;var r=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return l(r)&&"Function"!==Hn(e.type)?r.call(t):r}(r,o,t);var u=kt;Tt(!0),At(a),Tt(u)}return a}var zn=/^\s*function (\w+)/;function Hn(t){var e=t&&t.toString().match(zn);return e?e[1]:""}function Wn(t,e){return Hn(t)===Hn(e)}function Yn(t,e){if(!i(e))return Wn(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Wn(e[n],t))return n;return-1}function qn(t){this._init(t)}function Xn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,o=t._Ctor||(t._Ctor={});if(o[r])return o[r];var i=Pn(t)||Pn(n.options);var a=function(t){this._init(t)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=e++,a.options=$n(n.options,t),a.super=n,a.options.props&&function(t){var e=t.options.props;for(var n in e)vn(t.prototype,"_props",n)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var n in e)bn(t.prototype,n,e[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,G.forEach((function(t){a[t]=n[t]})),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=L({},a.options),o[r]=a,a}}function Zn(t){return t&&(Pn(t.Ctor.options)||t.tag)}function Kn(t,e){return i(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!p(t)&&t.test(e)}function Jn(t,e){var n=t.cache,r=t.keys,o=t._vnode;for(var i in n){var a=n[i];if(a){var s=a.name;s&&!e(s)&&Qn(n,i,r,o)}}}function Qn(t,e,n,r){var o=t[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),t[e]=null,O(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=xn++,e._isVue=!0,e.__v_skip=!0,e._scope=new We(!0),t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=$n(Cn(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._provided=n?n._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&ke(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=le(e._renderChildren,r),t.$scopedSlots=n?he(t.$parent,n.data.scopedSlots,t.$slots):o,t._c=function(e,n,r,o){return qt(t,e,n,r,o,!1)},t.$createElement=function(e,n,r,o){return qt(t,e,n,r,o,!0)};var i=n&&n.data;Mt(t,"$attrs",i&&i.attrs||o,null,!0),Mt(t,"$listeners",e._parentListeners||o,null,!0)}(e),Me(e,"beforeCreate",void 0,!1),function(t){var e=Sn(t.$options.inject,t);e&&(Tt(!1),Object.keys(e).forEach((function(n){Mt(t,n,e[n])})),Tt(!0))}(e),yn(e),function(t){var e=t.$options.provide;if(e){var n=l(e)?e.call(t):e;if(!f(n))return;for(var r=Ye(t),o=ft?Reflect.ownKeys(n):Object.keys(n),i=0;i<o.length;i++){var a=o[i];Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))}}}(e),Me(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(qn),function(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Lt,t.prototype.$delete=It,t.prototype.$watch=function(t,e,n){if(h(e))return On(this,t,e,n);(n=n||{}).user=!0;var r=new pn(this,t,e,n);if(n.immediate){var o='callback for immediate watcher "'.concat(r.expression,'"');_t(),Xe(e,this,[r.value],this,o),Ot()}return function(){r.teardown()}}}(qn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(i(t))for(var o=0,a=t.length;o<a;o++)r.$on(t[o],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(i(t)){for(var r=0,o=t.length;r<o;r++)n.$off(t[r],e);return n}var a,s=n._events[t];if(!s)return n;if(!e)return n._events[t]=null,n;for(var c=s.length;c--;)if((a=s[c])===e||a.fn===e){s.splice(c,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?M(n):n;for(var r=M(arguments,1),o='event handler for "'.concat(t,'"'),i=0,a=n.length;i<a;i++)Xe(n[i],e,r,e,o)}return e}}(qn),function(t){t.prototype._update=function(t,e){var n=this,r=n.$el,o=n._vnode,i=Pe(n);n._vnode=t,n.$el=o?n.__patch__(o,t):n.__patch__(n.$el,t,e,!1),i(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Me(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||O(e.$children,t),t._scope.stop(),t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Me(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(qn),function(t){ue(t.prototype),t.prototype.$nextTick=function(t){return cn(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,o=n._parentVnode;o&&e._isMounted&&(e.$scopedSlots=he(e.$parent,o.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&be(e._slotsProxy,e.$scopedSlots)),e.$vnode=o;try{ht(e),_e=e,t=r.call(e._renderProxy,e.$createElement)}catch(n){qe(n,e,"render"),t=e._vnode}finally{_e=null,ht()}return i(t)&&1===t.length&&(t=t[0]),t instanceof pt||(t=mt()),t.parent=o,t}}(qn);var tr=[String,RegExp,Array],er={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:tr,exclude:tr,max:[String,Number]},methods:{cacheVNode:function(){var t=this.cache,e=this.keys,n=this.vnodeToCache,r=this.keyToCache;if(n){var o=n.tag,i=n.componentInstance,a=n.componentOptions;t[r]={name:Zn(a),tag:o,componentInstance:i},e.push(r),this.max&&e.length>parseInt(this.max)&&Qn(t,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Qn(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Jn(t,(function(t){return Kn(e,t)}))})),this.$watch("exclude",(function(e){Jn(t,(function(t){return!Kn(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=Se(t),n=e&&e.componentOptions;if(n){var r=Zn(n),o=this.include,i=this.exclude;if(o&&(!r||!Kn(o,r))||i&&r&&Kn(i,r))return e;var a=this.cache,s=this.keys,c=null==e.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):e.key;a[c]?(e.componentInstance=a[c].componentInstance,O(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return z}};Object.defineProperty(t,"config",e),t.util={warn:In,extend:L,mergeOptions:$n,defineReactive:Mt},t.set=Lt,t.delete=It,t.nextTick=cn,t.observable=function(t){return At(t),t},t.options=Object.create(null),G.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,L(t.options.components,er),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=M(arguments,1);return n.unshift(this),l(t.install)?t.install.apply(t,n):l(t)&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=$n(this.options,t),this}}(t),Xn(t),function(t){G.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&h(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&l(n)&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}(t)}(qn),Object.defineProperty(qn.prototype,"$isServer",{get:st}),Object.defineProperty(qn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(qn,"FunctionalRenderContext",{value:En}),qn.version="2.7.8";var nr=b("style,class"),rr=b("input,textarea,option,select,progress"),or=function(t,e,n){return"value"===n&&rr(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},ir=b("contenteditable,draggable,spellcheck"),ar=b("events,caret,typing,plaintext-only"),sr=b("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),cr="http://www.w3.org/1999/xlink",ur=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},lr=function(t){return ur(t)?t.slice(6,t.length):""},fr=function(t){return null==t||!1===t};function dr(t){for(var e=t.data,n=t,r=t;s(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=hr(r.data,e));for(;s(n=n.parent);)n&&n.data&&(e=hr(e,n.data));return function(t,e){if(s(t)||s(e))return pr(t,mr(e));return""}(e.staticClass,e.class)}function hr(t,e){return{staticClass:pr(t.staticClass,e.staticClass),class:s(t.class)?[t.class,e.class]:e.class}}function pr(t,e){return t?e?t+" "+e:t:e||""}function mr(t){return Array.isArray(t)?function(t){for(var e,n="",r=0,o=t.length;r<o;r++)s(e=mr(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):f(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var vr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},yr=b("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),gr=b("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),br=function(t){return yr(t)||gr(t)};function wr(t){return gr(t)?"svg":"math"===t?"math":void 0}var _r=Object.create(null);var Or=b("text,number,password,search,email,tel,url");function Sr(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}var xr=Object.freeze({__proto__:null,createElement:function(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(t,e){return document.createElementNS(vr[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Cr={create:function(t,e){Er(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Er(t,!0),Er(e))},destroy:function(t){Er(t,!0)}};function Er(t,e){var n=t.data.ref;if(s(n)){var r=t.context,o=t.componentInstance||t.elm,a=e?null:o,c=e?void 0:o;if(l(n))Xe(n,r,[a],r,"template ref function");else{var u=t.data.refInFor,f="string"==typeof n||"number"==typeof n,d=Ft(n),h=r.$refs;if(f||d)if(u){var p=f?h[n]:n.value;e?i(p)&&O(p,o):i(p)?p.includes(o)||p.push(o):f?(h[n]=[o],kr(r,n,h[n])):n.value=[o]}else if(f){if(e&&h[n]!==o)return;h[n]=c,kr(r,n,a)}else if(d){if(e&&n.value!==o)return;n.value=a}else 0}}}function kr(t,e,n){var r=t._setupState;r&&x(r,e)&&(Ft(r[e])?r[e].value=n:r[e]=n)}var Tr=new pt("",{},[]),Pr=["create","activate","update","remove","destroy"];function jr(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&s(t.data)===s(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,r=s(n=t.data)&&s(n=n.attrs)&&n.type,o=s(n=e.data)&&s(n=n.attrs)&&n.type;return r===o||Or(r)&&Or(o)}(t,e)||c(t.isAsyncPlaceholder)&&a(e.asyncFactory.error))}function Ar(t,e,n){var r,o,i={};for(r=e;r<=n;++r)s(o=t[r].key)&&(i[o]=r);return i}var Mr={create:Lr,update:Lr,destroy:function(t){Lr(t,Tr)}};function Lr(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,r,o,i=t===Tr,a=e===Tr,s=Dr(t.data.directives,t.context),c=Dr(e.data.directives,e.context),u=[],l=[];for(n in c)r=s[n],o=c[n],r?(o.oldValue=r.value,o.oldArg=r.arg,Nr(o,"update",e,t),o.def&&o.def.componentUpdated&&l.push(o)):(Nr(o,"bind",e,t),o.def&&o.def.inserted&&u.push(o));if(u.length){var f=function(){for(var n=0;n<u.length;n++)Nr(u[n],"inserted",e,t)};i?zt(e,"insert",f):f()}l.length&&zt(e,"postpatch",(function(){for(var n=0;n<l.length;n++)Nr(l[n],"componentUpdated",e,t)}));if(!i)for(n in s)c[n]||Nr(s[n],"unbind",t,t,a)}(t,e)}var Ir=Object.create(null);function Dr(t,e){var n,r,o=Object.create(null);if(!t)return o;for(n=0;n<t.length;n++)(r=t[n]).modifiers||(r.modifiers=Ir),o[Rr(r)]=r,e._setupState&&e._setupState.__sfc&&(r.def=r.def||Gn(e,"_setupState","v-"+r.name)),r.def=r.def||Gn(e.$options,"directives",r.name);return o}function Rr(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function Nr(t,e,n,r,o){var i=t.def&&t.def[e];if(i)try{i(n.elm,t,n,r,o)}catch(r){qe(r,n.context,"directive ".concat(t.name," ").concat(e," hook"))}}var Br=[Cr,Mr];function Fr(t,e){var n=e.componentOptions;if(!(s(n)&&!1===n.Ctor.options.inheritAttrs||a(t.data.attrs)&&a(e.data.attrs))){var r,o,i=e.elm,u=t.data.attrs||{},l=e.data.attrs||{};for(r in(s(l.__ob__)||c(l._v_attr_proxy))&&(l=e.data.attrs=L({},l)),l)o=l[r],u[r]!==o&&Ur(i,r,o,e.data.pre);for(r in(J||tt)&&l.value!==u.value&&Ur(i,"value",l.value),u)a(l[r])&&(ur(r)?i.removeAttributeNS(cr,lr(r)):ir(r)||i.removeAttribute(r))}}function Ur(t,e,n,r){r||t.tagName.indexOf("-")>-1?$r(t,e,n):sr(e)?fr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):ir(e)?t.setAttribute(e,function(t,e){return fr(e)||"false"===e?"false":"contenteditable"===t&&ar(e)?e:"true"}(e,n)):ur(e)?fr(n)?t.removeAttributeNS(cr,lr(e)):t.setAttributeNS(cr,e,n):$r(t,e,n)}function $r(t,e,n){if(fr(n))t.removeAttribute(e);else{if(J&&!Q&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var Gr={create:Fr,update:Fr};function Vr(t,e){var n=e.elm,r=e.data,o=t.data;if(!(a(r.staticClass)&&a(r.class)&&(a(o)||a(o.staticClass)&&a(o.class)))){var i=dr(e),c=n._transitionClasses;s(c)&&(i=pr(i,mr(c))),i!==n._prevClass&&(n.setAttribute("class",i),n._prevClass=i)}}var zr,Hr,Wr,Yr,qr,Xr,Zr={create:Vr,update:Vr},Kr=/[\w).+\-_$\]]/;function Jr(t){var e,n,r,o,i,a=!1,s=!1,c=!1,u=!1,l=0,f=0,d=0,h=0;for(r=0;r<t.length;r++)if(n=e,e=t.charCodeAt(r),a)39===e&&92!==n&&(a=!1);else if(s)34===e&&92!==n&&(s=!1);else if(c)96===e&&92!==n&&(c=!1);else if(u)47===e&&92!==n&&(u=!1);else if(124!==e||124===t.charCodeAt(r+1)||124===t.charCodeAt(r-1)||l||f||d){switch(e){case 34:s=!0;break;case 39:a=!0;break;case 96:c=!0;break;case 40:d++;break;case 41:d--;break;case 91:f++;break;case 93:f--;break;case 123:l++;break;case 125:l--}if(47===e){for(var p=r-1,m=void 0;p>=0&&" "===(m=t.charAt(p));p--);m&&Kr.test(m)||(u=!0)}}else void 0===o?(h=r+1,o=t.slice(0,r).trim()):v();function v(){(i||(i=[])).push(t.slice(h,r).trim()),h=r+1}if(void 0===o?o=t.slice(0,r).trim():0!==h&&v(),i)for(r=0;r<i.length;r++)o=Qr(o,i[r]);return o}function Qr(t,e){var n=e.indexOf("(");if(n<0)return'_f("'.concat(e,'")(').concat(t,")");var r=e.slice(0,n),o=e.slice(n+1);return'_f("'.concat(r,'")(').concat(t).concat(")"!==o?","+o:o)}function to(t,e){console.error("[Vue compiler]: ".concat(t))}function eo(t,e){return t?t.map((function(t){return t[e]})).filter((function(t){return t})):[]}function no(t,e,n,r,o){(t.props||(t.props=[])).push(fo({name:e,value:n,dynamic:o},r)),t.plain=!1}function ro(t,e,n,r,o){(o?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push(fo({name:e,value:n,dynamic:o},r)),t.plain=!1}function oo(t,e,n,r){t.attrsMap[e]=n,t.attrsList.push(fo({name:e,value:n},r))}function io(t,e,n,r,o,i,a,s){(t.directives||(t.directives=[])).push(fo({name:e,rawName:n,value:r,arg:o,isDynamicArg:i,modifiers:a},s)),t.plain=!1}function ao(t,e,n){return n?"_p(".concat(e,',"').concat(t,'")'):t+e}function so(t,e,n,r,i,a,s,c){var u;(r=r||o).right?c?e="(".concat(e,")==='click'?'contextmenu':(").concat(e,")"):"click"===e&&(e="contextmenu",delete r.right):r.middle&&(c?e="(".concat(e,")==='click'?'mouseup':(").concat(e,")"):"click"===e&&(e="mouseup")),r.capture&&(delete r.capture,e=ao("!",e,c)),r.once&&(delete r.once,e=ao("~",e,c)),r.passive&&(delete r.passive,e=ao("&",e,c)),r.native?(delete r.native,u=t.nativeEvents||(t.nativeEvents={})):u=t.events||(t.events={});var l=fo({value:n.trim(),dynamic:c},s);r!==o&&(l.modifiers=r);var f=u[e];Array.isArray(f)?i?f.unshift(l):f.push(l):u[e]=f?i?[l,f]:[f,l]:l,t.plain=!1}function co(t,e,n){var r=uo(t,":"+e)||uo(t,"v-bind:"+e);if(null!=r)return Jr(r);if(!1!==n){var o=uo(t,e);if(null!=o)return JSON.stringify(o)}}function uo(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var o=t.attrsList,i=0,a=o.length;i<a;i++)if(o[i].name===e){o.splice(i,1);break}return n&&delete t.attrsMap[e],r}function lo(t,e){for(var n=t.attrsList,r=0,o=n.length;r<o;r++){var i=n[r];if(e.test(i.name))return n.splice(r,1),i}}function fo(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function ho(t,e,n){var r=n||{},o=r.number,i="$$v";r.trim&&(i="(typeof ".concat("$$v"," === 'string'")+"? ".concat("$$v",".trim()")+": ".concat("$$v",")")),o&&(i="_n(".concat(i,")"));var a=po(e,i);t.model={value:"(".concat(e,")"),expression:JSON.stringify(e),callback:"function (".concat("$$v",") {").concat(a,"}")}}function po(t,e){var n=function(t){if(t=t.trim(),zr=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<zr-1)return(Yr=t.lastIndexOf("."))>-1?{exp:t.slice(0,Yr),key:'"'+t.slice(Yr+1)+'"'}:{exp:t,key:null};Hr=t,Yr=qr=Xr=0;for(;!vo();)yo(Wr=mo())?bo(Wr):91===Wr&&go(Wr);return{exp:t.slice(0,qr),key:t.slice(qr+1,Xr)}}(t);return null===n.key?"".concat(t,"=").concat(e):"$set(".concat(n.exp,", ").concat(n.key,", ").concat(e,")")}function mo(){return Hr.charCodeAt(++Yr)}function vo(){return Yr>=zr}function yo(t){return 34===t||39===t}function go(t){var e=1;for(qr=Yr;!vo();)if(yo(t=mo()))bo(t);else if(91===t&&e++,93===t&&e--,0===e){Xr=Yr;break}}function bo(t){for(var e=t;!vo()&&(t=mo())!==e;);}var wo;function _o(t,e,n){var r=wo;return function o(){var i=e.apply(null,arguments);null!==i&&xo(t,o,n,r)}}var Oo=Qe&&!(rt&&Number(rt[1])<=53);function So(t,e,n,r){if(Oo){var o=Fe,i=e;e=i._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=o||t.timeStamp<=0||t.target.ownerDocument!==document)return i.apply(this,arguments)}}wo.addEventListener(t,e,it?{capture:n,passive:r}:n)}function xo(t,e,n,r){(r||wo).removeEventListener(t,e._wrapper||e,n)}function Co(t,e){if(!a(t.data.on)||!a(e.data.on)){var n=e.data.on||{},r=t.data.on||{};wo=e.elm||t.elm,function(t){if(s(t.__r)){var e=J?"change":"input";t[e]=[].concat(t.__r,t[e]||[]),delete t.__r}s(t.__c)&&(t.change=[].concat(t.__c,t.change||[]),delete t.__c)}(n),Vt(n,r,So,xo,_o,e.context),wo=void 0}}var Eo,ko={create:Co,update:Co,destroy:function(t){return Co(t,Tr)}};function To(t,e){if(!a(t.data.domProps)||!a(e.data.domProps)){var n,r,o=e.elm,i=t.data.domProps||{},u=e.data.domProps||{};for(n in(s(u.__ob__)||c(u._v_attr_proxy))&&(u=e.data.domProps=L({},u)),i)n in u||(o[n]="");for(n in u){if(r=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),r===i[n])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===n&&"PROGRESS"!==o.tagName){o._value=r;var l=a(r)?"":String(r);Po(o,l)&&(o.value=l)}else if("innerHTML"===n&&gr(o.tagName)&&a(o.innerHTML)){(Eo=Eo||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");for(var f=Eo.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;f.firstChild;)o.appendChild(f.firstChild)}else if(r!==i[n])try{o[n]=r}catch(t){}}}}function Po(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,r=t._vModifiers;if(s(r)){if(r.number)return g(n)!==g(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var jo={create:To,update:To},Ao=C((function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Mo(t){var e=Lo(t.style);return t.staticStyle?L(t.staticStyle,e):e}function Lo(t){return Array.isArray(t)?I(t):"string"==typeof t?Ao(t):t}var Io,Do=/^--/,Ro=/\s*!important$/,No=function(t,e,n){if(Do.test(e))t.style.setProperty(e,n);else if(Ro.test(n))t.style.setProperty(j(e),n.replace(Ro,""),"important");else{var r=Fo(e);if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)t.style[r]=n[o];else t.style[r]=n}},Bo=["Webkit","Moz","ms"],Fo=C((function(t){if(Io=Io||document.createElement("div").style,"filter"!==(t=k(t))&&t in Io)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Bo.length;n++){var r=Bo[n]+e;if(r in Io)return r}}));function Uo(t,e){var n=e.data,r=t.data;if(!(a(n.staticStyle)&&a(n.style)&&a(r.staticStyle)&&a(r.style))){var o,i,c=e.elm,u=r.staticStyle,l=r.normalizedStyle||r.style||{},f=u||l,d=Lo(e.data.style)||{};e.data.normalizedStyle=s(d.__ob__)?L({},d):d;var h=function(t,e){var n,r={};if(e)for(var o=t;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(n=Mo(o.data))&&L(r,n);(n=Mo(t.data))&&L(r,n);for(var i=t;i=i.parent;)i.data&&(n=Mo(i.data))&&L(r,n);return r}(e,!0);for(i in f)a(h[i])&&No(c,i,"");for(i in h)(o=h[i])!==f[i]&&No(c,i,null==o?"":o)}}var $o={create:Uo,update:Uo},Go=/\s+/;function Vo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Go).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" ".concat(t.getAttribute("class")||""," ");n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function zo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Go).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" ".concat(t.getAttribute("class")||""," "),r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Ho(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&L(e,Wo(t.name||"v")),L(e,t),e}return"string"==typeof t?Wo(t):void 0}}var Wo=C((function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}})),Yo=Z&&!Q,qo="transition",Xo="transitionend",Zo="animation",Ko="animationend";Yo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(qo="WebkitTransition",Xo="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Zo="WebkitAnimation",Ko="webkitAnimationEnd"));var Jo=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Qo(t){Jo((function(){Jo(t)}))}function ti(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Vo(t,e))}function ei(t,e){t._transitionClasses&&O(t._transitionClasses,e),zo(t,e)}function ni(t,e,n){var r=oi(t,e),o=r.type,i=r.timeout,a=r.propCount;if(!o)return n();var s="transition"===o?Xo:Ko,c=0,u=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++c>=a&&u()};setTimeout((function(){c<a&&u()}),i+1),t.addEventListener(s,l)}var ri=/\b(transform|all)(,|$)/;function oi(t,e){var n,r=window.getComputedStyle(t),o=(r[qo+"Delay"]||"").split(", "),i=(r[qo+"Duration"]||"").split(", "),a=ii(o,i),s=(r[Zo+"Delay"]||"").split(", "),c=(r[Zo+"Duration"]||"").split(", "),u=ii(s,c),l=0,f=0;return"transition"===e?a>0&&(n="transition",l=a,f=i.length):"animation"===e?u>0&&(n="animation",l=u,f=c.length):f=(n=(l=Math.max(a,u))>0?a>u?"transition":"animation":null)?"transition"===n?i.length:c.length:0,{type:n,timeout:l,propCount:f,hasTransform:"transition"===n&&ri.test(r[qo+"Property"])}}function ii(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return ai(e)+ai(t[n])})))}function ai(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function si(t,e){var n=t.elm;s(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=Ho(t.data.transition);if(!a(r)&&!s(n._enterCb)&&1===n.nodeType){for(var o=r.css,i=r.type,c=r.enterClass,u=r.enterToClass,d=r.enterActiveClass,h=r.appearClass,p=r.appearToClass,m=r.appearActiveClass,v=r.beforeEnter,y=r.enter,b=r.afterEnter,w=r.enterCancelled,_=r.beforeAppear,O=r.appear,S=r.afterAppear,x=r.appearCancelled,C=r.duration,E=Te,k=Te.$vnode;k&&k.parent;)E=k.context,k=k.parent;var T=!E._isMounted||!t.isRootInsert;if(!T||O||""===O){var P=T&&h?h:c,j=T&&m?m:d,A=T&&p?p:u,M=T&&_||v,L=T&&l(O)?O:y,I=T&&S||b,D=T&&x||w,R=g(f(C)?C.enter:C);0;var N=!1!==o&&!Q,B=li(L),F=n._enterCb=U((function(){N&&(ei(n,A),ei(n,j)),F.cancelled?(N&&ei(n,P),D&&D(n)):I&&I(n),n._enterCb=null}));t.data.show||zt(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),L&&L(n,F)})),M&&M(n),N&&(ti(n,P),ti(n,j),Qo((function(){ei(n,P),F.cancelled||(ti(n,A),B||(ui(R)?setTimeout(F,R):ni(n,i,F)))}))),t.data.show&&(e&&e(),L&&L(n,F)),N||B||F()}}}function ci(t,e){var n=t.elm;s(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=Ho(t.data.transition);if(a(r)||1!==n.nodeType)return e();if(!s(n._leaveCb)){var o=r.css,i=r.type,c=r.leaveClass,u=r.leaveToClass,l=r.leaveActiveClass,d=r.beforeLeave,h=r.leave,p=r.afterLeave,m=r.leaveCancelled,v=r.delayLeave,y=r.duration,b=!1!==o&&!Q,w=li(h),_=g(f(y)?y.leave:y);0;var O=n._leaveCb=U((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(ei(n,u),ei(n,l)),O.cancelled?(b&&ei(n,c),m&&m(n)):(e(),p&&p(n)),n._leaveCb=null}));v?v(S):S()}function S(){O.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),b&&(ti(n,c),ti(n,l),Qo((function(){ei(n,c),O.cancelled||(ti(n,u),w||(ui(_)?setTimeout(O,_):ni(n,i,O)))}))),h&&h(n,O),b||w||O())}}function ui(t){return"number"==typeof t&&!isNaN(t)}function li(t){if(a(t))return!1;var e=t.fns;return s(e)?li(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function fi(t,e){!0!==e.data.show&&si(e)}var di=function(t){var e,n,r={},o=t.modules,l=t.nodeOps;for(e=0;e<Pr.length;++e)for(r[Pr[e]]=[],n=0;n<o.length;++n)s(o[n][Pr[e]])&&r[Pr[e]].push(o[n][Pr[e]]);function f(t){var e=l.parentNode(t);s(e)&&l.removeChild(e,t)}function d(t,e,n,o,i,a,u){if(s(t.elm)&&s(a)&&(t=a[u]=yt(t)),t.isRootInsert=!i,!function(t,e,n,o){var i=t.data;if(s(i)){var a=s(t.componentInstance)&&i.keepAlive;if(s(i=i.hook)&&s(i=i.init)&&i(t,!1),s(t.componentInstance))return h(t,e),p(n,t.elm,o),c(a)&&function(t,e,n,o){var i,a=t;for(;a.componentInstance;)if(a=a.componentInstance._vnode,s(i=a.data)&&s(i=i.transition)){for(i=0;i<r.activate.length;++i)r.activate[i](Tr,a);e.push(a);break}p(n,t.elm,o)}(t,e,n,o),!0}}(t,e,n,o)){var f=t.data,d=t.children,v=t.tag;s(v)?(t.elm=t.ns?l.createElementNS(t.ns,v):l.createElement(v,t),g(t),m(t,d,e),s(f)&&y(t,e),p(n,t.elm,o)):c(t.isComment)?(t.elm=l.createComment(t.text),p(n,t.elm,o)):(t.elm=l.createTextNode(t.text),p(n,t.elm,o))}}function h(t,e){s(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,v(t)?(y(t,e),g(t)):(Er(t),e.push(t))}function p(t,e,n){s(t)&&(s(n)?l.parentNode(n)===t&&l.insertBefore(t,e,n):l.appendChild(t,e))}function m(t,e,n){if(i(e)){0;for(var r=0;r<e.length;++r)d(e[r],n,t.elm,null,!0,e,r)}else u(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function v(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return s(t.tag)}function y(t,n){for(var o=0;o<r.create.length;++o)r.create[o](Tr,t);s(e=t.data.hook)&&(s(e.create)&&e.create(Tr,t),s(e.insert)&&n.push(t))}function g(t){var e;if(s(e=t.fnScopeId))l.setStyleScope(t.elm,e);else for(var n=t;n;)s(e=n.context)&&s(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),n=n.parent;s(e=Te)&&e!==t.context&&e!==t.fnContext&&s(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function w(t,e,n,r,o,i){for(;r<=o;++r)d(n[r],i,t,e,!1,n,r)}function _(t){var e,n,o=t.data;if(s(o))for(s(e=o.hook)&&s(e=e.destroy)&&e(t),e=0;e<r.destroy.length;++e)r.destroy[e](t);if(s(e=t.children))for(n=0;n<t.children.length;++n)_(t.children[n])}function O(t,e,n){for(;e<=n;++e){var r=t[e];s(r)&&(s(r.tag)?(S(r),_(r)):f(r.elm))}}function S(t,e){if(s(e)||s(t.data)){var n,o=r.remove.length+1;for(s(e)?e.listeners+=o:e=function(t,e){function n(){0==--n.listeners&&f(t)}return n.listeners=e,n}(t.elm,o),s(n=t.componentInstance)&&s(n=n._vnode)&&s(n.data)&&S(n,e),n=0;n<r.remove.length;++n)r.remove[n](t,e);s(n=t.data.hook)&&s(n=n.remove)?n(t,e):e()}else f(t.elm)}function x(t,e,n,r){for(var o=n;o<r;o++){var i=e[o];if(s(i)&&jr(t,i))return o}}function C(t,e,n,o,i,u){if(t!==e){s(e.elm)&&s(o)&&(e=o[i]=yt(e));var f=e.elm=t.elm;if(c(t.isAsyncPlaceholder))s(e.asyncFactory.resolved)?T(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(c(e.isStatic)&&c(t.isStatic)&&e.key===t.key&&(c(e.isCloned)||c(e.isOnce)))e.componentInstance=t.componentInstance;else{var h,p=e.data;s(p)&&s(h=p.hook)&&s(h=h.prepatch)&&h(t,e);var m=t.children,y=e.children;if(s(p)&&v(e)){for(h=0;h<r.update.length;++h)r.update[h](t,e);s(h=p.hook)&&s(h=h.update)&&h(t,e)}a(e.text)?s(m)&&s(y)?m!==y&&function(t,e,n,r,o){var i,c,u,f=0,h=0,p=e.length-1,m=e[0],v=e[p],y=n.length-1,g=n[0],b=n[y],_=!o;for(0;f<=p&&h<=y;)a(m)?m=e[++f]:a(v)?v=e[--p]:jr(m,g)?(C(m,g,r,n,h),m=e[++f],g=n[++h]):jr(v,b)?(C(v,b,r,n,y),v=e[--p],b=n[--y]):jr(m,b)?(C(m,b,r,n,y),_&&l.insertBefore(t,m.elm,l.nextSibling(v.elm)),m=e[++f],b=n[--y]):jr(v,g)?(C(v,g,r,n,h),_&&l.insertBefore(t,v.elm,m.elm),v=e[--p],g=n[++h]):(a(i)&&(i=Ar(e,f,p)),a(c=s(g.key)?i[g.key]:x(g,e,f,p))?d(g,r,t,m.elm,!1,n,h):jr(u=e[c],g)?(C(u,g,r,n,h),e[c]=void 0,_&&l.insertBefore(t,u.elm,m.elm)):d(g,r,t,m.elm,!1,n,h),g=n[++h]);f>p?w(t,a(n[y+1])?null:n[y+1].elm,n,h,y,r):h>y&&O(e,f,p)}(f,m,y,n,u):s(y)?(s(t.text)&&l.setTextContent(f,""),w(f,null,y,0,y.length-1,n)):s(m)?O(m,0,m.length-1):s(t.text)&&l.setTextContent(f,""):t.text!==e.text&&l.setTextContent(f,e.text),s(p)&&s(h=p.hook)&&s(h=h.postpatch)&&h(t,e)}}}function E(t,e,n){if(c(n)&&s(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var k=b("attrs,class,staticClass,staticStyle,key");function T(t,e,n,r){var o,i=e.tag,a=e.data,u=e.children;if(r=r||a&&a.pre,e.elm=t,c(e.isComment)&&s(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(s(a)&&(s(o=a.hook)&&s(o=o.init)&&o(e,!0),s(o=e.componentInstance)))return h(e,n),!0;if(s(i)){if(s(u))if(t.hasChildNodes())if(s(o=a)&&s(o=o.domProps)&&s(o=o.innerHTML)){if(o!==t.innerHTML)return!1}else{for(var l=!0,f=t.firstChild,d=0;d<u.length;d++){if(!f||!T(f,u[d],n,r)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}else m(e,u,n);if(s(a)){var p=!1;for(var v in a)if(!k(v)){p=!0,y(e,n);break}!p&&a.class&&dn(a.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,o){if(!a(e)){var i,u=!1,f=[];if(a(t))u=!0,d(e,f);else{var h=s(t.nodeType);if(!h&&jr(t,e))C(t,e,f,null,null,o);else{if(h){if(1===t.nodeType&&t.hasAttribute("data-server-rendered")&&(t.removeAttribute("data-server-rendered"),n=!0),c(n)&&T(t,e,f))return E(e,f,!0),t;i=t,t=new pt(l.tagName(i).toLowerCase(),{},[],void 0,i)}var p=t.elm,m=l.parentNode(p);if(d(e,f,p._leaveCb?null:m,l.nextSibling(p)),s(e.parent))for(var y=e.parent,g=v(e);y;){for(var b=0;b<r.destroy.length;++b)r.destroy[b](y);if(y.elm=e.elm,g){for(var w=0;w<r.create.length;++w)r.create[w](Tr,y);var S=y.data.hook.insert;if(S.merged)for(var x=1;x<S.fns.length;x++)S.fns[x]()}else Er(y);y=y.parent}s(m)?O([t],0,0):s(t.tag)&&_(t)}}return E(e,f,u),e.elm}s(t)&&_(t)}}({nodeOps:xr,modules:[Gr,Zr,ko,jo,$o,Z?{create:fi,activate:fi,remove:function(t,e){!0!==t.data.show?ci(t,e):e()}}:{}].concat(Br)});Q&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&wi(t,"input")}));var hi={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?zt(n,"postpatch",(function(){hi.componentUpdated(t,e,n)})):pi(t,e,n.context),t._vOptions=[].map.call(t.options,yi)):("textarea"===n.tag||Or(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",gi),t.addEventListener("compositionend",bi),t.addEventListener("change",bi),Q&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){pi(t,e,n.context);var r=t._vOptions,o=t._vOptions=[].map.call(t.options,yi);if(o.some((function(t,e){return!B(t,r[e])})))(t.multiple?e.value.some((function(t){return vi(t,o)})):e.value!==e.oldValue&&vi(e.value,o))&&wi(t,"change")}}};function pi(t,e,n){mi(t,e,n),(J||tt)&&setTimeout((function(){mi(t,e,n)}),0)}function mi(t,e,n){var r=e.value,o=t.multiple;if(!o||Array.isArray(r)){for(var i,a,s=0,c=t.options.length;s<c;s++)if(a=t.options[s],o)i=F(r,yi(a))>-1,a.selected!==i&&(a.selected=i);else if(B(yi(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));o||(t.selectedIndex=-1)}}function vi(t,e){return e.every((function(e){return!B(e,t)}))}function yi(t){return"_value"in t?t._value:t.value}function gi(t){t.target.composing=!0}function bi(t){t.target.composing&&(t.target.composing=!1,wi(t.target,"input"))}function wi(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function _i(t){return!t.componentInstance||t.data&&t.data.transition?t:_i(t.componentInstance._vnode)}var Oi={model:hi,show:{bind:function(t,e,n){var r=e.value,o=(n=_i(n)).data&&n.data.transition,i=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&o?(n.data.show=!0,si(n,(function(){t.style.display=i}))):t.style.display=r?i:"none"},update:function(t,e,n){var r=e.value;!r!=!e.oldValue&&((n=_i(n)).data&&n.data.transition?(n.data.show=!0,r?si(n,(function(){t.style.display=t.__vOriginalDisplay})):ci(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,r,o){o||(t.style.display=t.__vOriginalDisplay)}}},Si={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function xi(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?xi(Se(e.children)):t}function Ci(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var o=n._parentListeners;for(var r in o)e[k(r)]=o[r];return e}function Ei(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var ki=function(t){return t.tag||de(t)},Ti=function(t){return"show"===t.name},Pi={name:"transition",props:Si,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(ki)).length){0;var r=this.mode;0;var o=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return o;var i=xi(o);if(!i)return o;if(this._leaving)return Ei(t,o);var a="__transition-".concat(this._uid,"-");i.key=null==i.key?i.isComment?a+"comment":a+i.tag:u(i.key)?0===String(i.key).indexOf(a)?i.key:a+i.key:i.key;var s=(i.data||(i.data={})).transition=Ci(this),c=this._vnode,l=xi(c);if(i.data.directives&&i.data.directives.some(Ti)&&(i.data.show=!0),l&&l.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(i,l)&&!de(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var f=l.data.transition=L({},s);if("out-in"===r)return this._leaving=!0,zt(f,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Ei(t,o);if("in-out"===r){if(de(i))return c;var d,h=function(){d()};zt(s,"afterEnter",h),zt(s,"enterCancelled",h),zt(f,"delayLeave",(function(t){d=t}))}}return o}}},ji=L({tag:String,moveClass:String},Si);function Ai(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Mi(t){t.data.newPos=t.elm.getBoundingClientRect()}function Li(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,o=e.top-n.top;if(r||o){t.data.moved=!0;var i=t.elm.style;i.transform=i.WebkitTransform="translate(".concat(r,"px,").concat(o,"px)"),i.transitionDuration="0s"}}delete ji.mode;var Ii={Transition:Pi,TransitionGroup:{props:ji,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var o=Pe(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,o(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=Ci(this),s=0;s<o.length;s++){if((l=o[s]).tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))i.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a;else;}if(r){var c=[],u=[];for(s=0;s<r.length;s++){var l;(l=r[s]).data.transition=a,l.data.pos=l.elm.getBoundingClientRect(),n[l.key]?c.push(l):u.push(l)}this.kept=t(e,null,c),this.removed=u}return t(e,null,i)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Ai),t.forEach(Mi),t.forEach(Li),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;ti(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Xo,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Xo,t),n._moveCb=null,ei(n,e))})}})))},methods:{hasMove:function(t,e){if(!Yo)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){zo(n,t)})),Vo(n,e),n.style.display="none",this.$el.appendChild(n);var r=oi(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};qn.config.mustUseProp=or,qn.config.isReservedTag=br,qn.config.isReservedAttr=nr,qn.config.getTagNamespace=wr,qn.config.isUnknownElement=function(t){if(!Z)return!0;if(br(t))return!1;if(t=t.toLowerCase(),null!=_r[t])return _r[t];var e=document.createElement(t);return t.indexOf("-")>-1?_r[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:_r[t]=/HTMLUnknownElement/.test(e.toString())},L(qn.options.directives,Oi),L(qn.options.components,Ii),qn.prototype.__patch__=Z?di:D,qn.prototype.$mount=function(t,e){return function(t,e,n){var r;t.$el=e,t.$options.render||(t.$options.render=mt),Me(t,"beforeMount"),r=function(){t._update(t._render(),n)},new pn(t,r,D,{before:function(){t._isMounted&&!t._isDestroyed&&Me(t,"beforeUpdate")}},!0),n=!1;var o=t._preWatchers;if(o)for(var i=0;i<o.length;i++)o[i].run();return null==t.$vnode&&(t._isMounted=!0,Me(t,"mounted")),t}(this,t=t&&Z?Sr(t):void 0,e)},Z&&setTimeout((function(){z.devtools&&ct&&ct.emit("init",qn)}),0);var Di=/\{\{((?:.|\r?\n)+?)\}\}/g,Ri=/[-.*+?^${}()|[\]\/\\]/g,Ni=C((function(t){var e=t[0].replace(Ri,"\\$&"),n=t[1].replace(Ri,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")}));var Bi={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var n=uo(t,"class");n&&(t.staticClass=JSON.stringify(n.replace(/\s+/g," ").trim()));var r=co(t,"class",!1);r&&(t.classBinding=r)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:".concat(t.staticClass,",")),t.classBinding&&(e+="class:".concat(t.classBinding,",")),e}};var Fi,Ui={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var n=uo(t,"style");n&&(t.staticStyle=JSON.stringify(Ao(n)));var r=co(t,"style",!1);r&&(t.styleBinding=r)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:".concat(t.staticStyle,",")),t.styleBinding&&(e+="style:(".concat(t.styleBinding,"),")),e}},$i=function(t){return(Fi=Fi||document.createElement("div")).innerHTML=t,Fi.textContent},Gi=b("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Vi=b("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),zi=b("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Hi=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Wi=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Yi="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat(H.source,"]*"),qi="((?:".concat(Yi,"\\:)?").concat(Yi,")"),Xi=new RegExp("^<".concat(qi)),Zi=/^\s*(\/?)>/,Ki=new RegExp("^<\\/".concat(qi,"[^>]*>")),Ji=/^<!DOCTYPE [^>]+>/i,Qi=/^<!\--/,ta=/^<!\[/,ea=b("script,style,textarea",!0),na={},ra={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},oa=/&(?:lt|gt|quot|amp|#39);/g,ia=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,aa=b("pre,textarea",!0),sa=function(t,e){return t&&aa(t)&&"\n"===e[0]};function ca(t,e){var n=e?ia:oa;return t.replace(n,(function(t){return ra[t]}))}function ua(t,e){for(var n,r,o=[],i=e.expectHTML,a=e.isUnaryTag||R,s=e.canBeLeftOpenTag||R,c=0,u=function(){if(n=t,r&&ea(r)){var u=0,d=r.toLowerCase(),h=na[d]||(na[d]=new RegExp("([\\s\\S]*?)(</"+d+"[^>]*>)","i"));O=t.replace(h,(function(t,n,r){return u=r.length,ea(d)||"noscript"===d||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),sa(d,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""}));c+=t.length-O.length,t=O,f(d,c-u,c)}else{var p=t.indexOf("<");if(0===p){if(Qi.test(t)){var m=t.indexOf("--\x3e");if(m>=0)return e.shouldKeepComment&&e.comment&&e.comment(t.substring(4,m),c,c+m+3),l(m+3),"continue"}if(ta.test(t)){var v=t.indexOf("]>");if(v>=0)return l(v+2),"continue"}var y=t.match(Ji);if(y)return l(y[0].length),"continue";var g=t.match(Ki);if(g){var b=c;return l(g[0].length),f(g[1],b,c),"continue"}var w=function(){var e=t.match(Xi);if(e){var n={tagName:e[1],attrs:[],start:c};l(e[0].length);for(var r=void 0,o=void 0;!(r=t.match(Zi))&&(o=t.match(Wi)||t.match(Hi));)o.start=c,l(o[0].length),o.end=c,n.attrs.push(o);if(r)return n.unarySlash=r[1],l(r[0].length),n.end=c,n}}();if(w)return function(t){var n=t.tagName,c=t.unarySlash;i&&("p"===r&&zi(n)&&f(r),s(n)&&r===n&&f(n));for(var u=a(n)||!!c,l=t.attrs.length,d=new Array(l),h=0;h<l;h++){var p=t.attrs[h],m=p[3]||p[4]||p[5]||"",v="a"===n&&"href"===p[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;d[h]={name:p[1],value:ca(m,v)}}u||(o.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d,start:t.start,end:t.end}),r=n);e.start&&e.start(n,d,u,t.start,t.end)}(w),sa(w.tagName,t)&&l(1),"continue"}var _=void 0,O=void 0,S=void 0;if(p>=0){for(O=t.slice(p);!(Ki.test(O)||Xi.test(O)||Qi.test(O)||ta.test(O)||(S=O.indexOf("<",1))<0);)p+=S,O=t.slice(p);_=t.substring(0,p)}p<0&&(_=t),_&&l(_.length),e.chars&&_&&e.chars(_,c-_.length,c)}if(t===n)return e.chars&&e.chars(t),"break"};t;){if("break"===u())break}function l(e){c+=e,t=t.substring(e)}function f(t,n,i){var a,s;if(null==n&&(n=c),null==i&&(i=c),t)for(s=t.toLowerCase(),a=o.length-1;a>=0&&o[a].lowerCasedTag!==s;a--);else a=0;if(a>=0){for(var u=o.length-1;u>=a;u--)e.end&&e.end(o[u].tag,n,i);o.length=a,r=a&&o[a-1].tag}else"br"===s?e.start&&e.start(t,[],!0,n,i):"p"===s&&(e.start&&e.start(t,[],!1,n,i),e.end&&e.end(t,n,i))}f()}var la,fa,da,ha,pa,ma,va,ya,ga=/^@|^v-on:/,ba=/^v-|^@|^:|^#/,wa=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,_a=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Oa=/^\(|\)$/g,Sa=/^\[.*\]$/,xa=/:(.*)$/,Ca=/^:|^\.|^v-bind:/,Ea=/\.[^.\]]+(?=[^\]]*$)/g,ka=/^v-slot(:|$)|^#/,Ta=/[\r\n]/,Pa=/[ \f\t\r\n]+/g,ja=C($i);function Aa(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:Ba(e),rawAttrsMap:{},parent:n,children:[]}}function Ma(t,e){la=e.warn||to,ma=e.isPreTag||R,va=e.mustUseProp||R,ya=e.getTagNamespace||R;var n=e.isReservedTag||R;(function(t){return!(!(t.component||t.attrsMap[":is"]||t.attrsMap["v-bind:is"])&&(t.attrsMap.is?n(t.attrsMap.is):n(t.tag)))}),da=eo(e.modules,"transformNode"),ha=eo(e.modules,"preTransformNode"),pa=eo(e.modules,"postTransformNode"),fa=e.delimiters;var r,o,i=[],a=!1!==e.preserveWhitespace,s=e.whitespace,c=!1,u=!1;function l(t){if(f(t),c||t.processed||(t=La(t,e)),i.length||t===r||r.if&&(t.elseif||t.else)&&Da(r,{exp:t.elseif,block:t}),o&&!t.forbidden)if(t.elseif||t.else)a=t,(s=function(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];t.pop()}}(o.children))&&s.if&&Da(s,{exp:a.elseif,block:a});else{if(t.slotScope){var n=t.slotTarget||'"default"';(o.scopedSlots||(o.scopedSlots={}))[n]=t}o.children.push(t),t.parent=o}var a,s;t.children=t.children.filter((function(t){return!t.slotScope})),f(t),t.pre&&(c=!1),ma(t.tag)&&(u=!1);for(var l=0;l<pa.length;l++)pa[l](t,e)}function f(t){if(!u)for(var e=void 0;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;)t.children.pop()}return ua(t,{warn:la,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function(t,n,a,s,f){var d=o&&o.ns||ya(t);J&&"svg"===d&&(n=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Fa.test(r.name)||(r.name=r.name.replace(Ua,""),e.push(r))}return e}(n));var h,p=Aa(t,n,o);d&&(p.ns=d),"style"!==(h=p).tag&&("script"!==h.tag||h.attrsMap.type&&"text/javascript"!==h.attrsMap.type)||st()||(p.forbidden=!0);for(var m=0;m<ha.length;m++)p=ha[m](p,e)||p;c||(!function(t){null!=uo(t,"v-pre")&&(t.pre=!0)}(p),p.pre&&(c=!0)),ma(p.tag)&&(u=!0),c?function(t){var e=t.attrsList,n=e.length;if(n)for(var r=t.attrs=new Array(n),o=0;o<n;o++)r[o]={name:e[o].name,value:JSON.stringify(e[o].value)},null!=e[o].start&&(r[o].start=e[o].start,r[o].end=e[o].end);else t.pre||(t.plain=!0)}(p):p.processed||(Ia(p),function(t){var e=uo(t,"v-if");if(e)t.if=e,Da(t,{exp:e,block:t});else{null!=uo(t,"v-else")&&(t.else=!0);var n=uo(t,"v-else-if");n&&(t.elseif=n)}}(p),function(t){null!=uo(t,"v-once")&&(t.once=!0)}(p)),r||(r=p),a?l(p):(o=p,i.push(p))},end:function(t,e,n){var r=i[i.length-1];i.length-=1,o=i[i.length-1],l(r)},chars:function(t,e,n){if(o&&(!J||"textarea"!==o.tag||o.attrsMap.placeholder!==t)){var r,i=o.children;if(t=u||t.trim()?"script"===(r=o).tag||"style"===r.tag?t:ja(t):i.length?s?"condense"===s&&Ta.test(t)?"":" ":a?" ":"":""){u||"condense"!==s||(t=t.replace(Pa," "));var l=void 0,f=void 0;!c&&" "!==t&&(l=function(t,e){var n=e?Ni(e):Di;if(n.test(t)){for(var r,o,i,a=[],s=[],c=n.lastIndex=0;r=n.exec(t);){(o=r.index)>c&&(s.push(i=t.slice(c,o)),a.push(JSON.stringify(i)));var u=Jr(r[1].trim());a.push("_s(".concat(u,")")),s.push({"@binding":u}),c=o+r[0].length}return c<t.length&&(s.push(i=t.slice(c)),a.push(JSON.stringify(i))),{expression:a.join("+"),tokens:s}}}(t,fa))?f={type:2,expression:l.expression,tokens:l.tokens,text:t}:" "===t&&i.length&&" "===i[i.length-1].text||(f={type:3,text:t}),f&&i.push(f)}}},comment:function(t,e,n){if(o){var r={type:3,text:t,isComment:!0};0,o.children.push(r)}}}),r}function La(t,e){var n;!function(t){var e=co(t,"key");if(e){t.key=e}}(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,function(t){var e=co(t,"ref");e&&(t.ref=e,t.refInFor=function(t){var e=t;for(;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(t))}(t),function(t){var e;"template"===t.tag?(e=uo(t,"scope"),t.slotScope=e||uo(t,"slot-scope")):(e=uo(t,"slot-scope"))&&(t.slotScope=e);var n=co(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||ro(t,"slot",n,function(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}(t,"slot")));if("template"===t.tag){if(a=lo(t,ka)){0;var r=Ra(a),o=r.name,i=r.dynamic;t.slotTarget=o,t.slotTargetDynamic=i,t.slotScope=a.value||"_empty_"}}else{var a;if(a=lo(t,ka)){0;var s=t.scopedSlots||(t.scopedSlots={}),c=Ra(a),u=c.name,l=(i=c.dynamic,s[u]=Aa("template",[],t));l.slotTarget=u,l.slotTargetDynamic=i,l.children=t.children.filter((function(t){if(!t.slotScope)return t.parent=l,!0})),l.slotScope=a.value||"_empty_",t.children=[],t.plain=!1}}}(t),"slot"===(n=t).tag&&(n.slotName=co(n,"name")),function(t){var e;(e=co(t,"is"))&&(t.component=e);null!=uo(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var r=0;r<da.length;r++)t=da[r](t,e)||t;return function(t){var e,n,r,o,i,a,s,c,u=t.attrsList;for(e=0,n=u.length;e<n;e++){if(r=o=u[e].name,i=u[e].value,ba.test(r))if(t.hasBindings=!0,(a=Na(r.replace(ba,"")))&&(r=r.replace(Ea,"")),Ca.test(r))r=r.replace(Ca,""),i=Jr(i),(c=Sa.test(r))&&(r=r.slice(1,-1)),a&&(a.prop&&!c&&"innerHtml"===(r=k(r))&&(r="innerHTML"),a.camel&&!c&&(r=k(r)),a.sync&&(s=po(i,"$event"),c?so(t,'"update:"+('.concat(r,")"),s,null,!1,0,u[e],!0):(so(t,"update:".concat(k(r)),s,null,!1,0,u[e]),j(r)!==k(r)&&so(t,"update:".concat(j(r)),s,null,!1,0,u[e])))),a&&a.prop||!t.component&&va(t.tag,t.attrsMap.type,r)?no(t,r,i,u[e],c):ro(t,r,i,u[e],c);else if(ga.test(r))r=r.replace(ga,""),(c=Sa.test(r))&&(r=r.slice(1,-1)),so(t,r,i,a,!1,0,u[e],c);else{var l=(r=r.replace(ba,"")).match(xa),f=l&&l[1];c=!1,f&&(r=r.slice(0,-(f.length+1)),Sa.test(f)&&(f=f.slice(1,-1),c=!0)),io(t,r,o,i,f,c,a,u[e])}else ro(t,r,JSON.stringify(i),u[e]),!t.component&&"muted"===r&&va(t.tag,t.attrsMap.type,r)&&no(t,r,"true",u[e])}}(t),t}function Ia(t){var e;if(e=uo(t,"v-for")){var n=function(t){var e=t.match(wa);if(!e)return;var n={};n.for=e[2].trim();var r=e[1].trim().replace(Oa,""),o=r.match(_a);o?(n.alias=r.replace(_a,"").trim(),n.iterator1=o[1].trim(),o[2]&&(n.iterator2=o[2].trim())):n.alias=r;return n}(e);n&&L(t,n)}}function Da(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Ra(t){var e=t.name.replace(ka,"");return e||"#"!==t.name[0]&&(e="default"),Sa.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'.concat(e,'"'),dynamic:!1}}function Na(t){var e=t.match(Ea);if(e){var n={};return e.forEach((function(t){n[t.slice(1)]=!0})),n}}function Ba(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].name]=t[n].value;return e}var Fa=/^xmlns:NS\d+/,Ua=/^NS\d+:/;function $a(t){return Aa(t.tag,t.attrsList.slice(),t.parent)}var Ga=[Bi,Ui,{preTransformNode:function(t,e){if("input"===t.tag){var n=t.attrsMap;if(!n["v-model"])return;var r=void 0;if((n[":type"]||n["v-bind:type"])&&(r=co(t,"type")),n.type||r||!n["v-bind"]||(r="(".concat(n["v-bind"],").type")),r){var o=uo(t,"v-if",!0),i=o?"&&(".concat(o,")"):"",a=null!=uo(t,"v-else",!0),s=uo(t,"v-else-if",!0),c=$a(t);Ia(c),oo(c,"type","checkbox"),La(c,e),c.processed=!0,c.if="(".concat(r,")==='checkbox'")+i,Da(c,{exp:c.if,block:c});var u=$a(t);uo(u,"v-for",!0),oo(u,"type","radio"),La(u,e),Da(c,{exp:"(".concat(r,")==='radio'")+i,block:u});var l=$a(t);return uo(l,"v-for",!0),oo(l,":type",r),La(l,e),Da(c,{exp:o,block:l}),a?c.else=!0:s&&(c.elseif=s),c}}}}];var Va,za,Ha={expectHTML:!0,modules:Ga,directives:{model:function(t,e,n){n;var r=e.value,o=e.modifiers,i=t.tag,a=t.attrsMap.type;if(t.component)return ho(t,r,o),!1;if("select"===i)!function(t,e,n){var r=n&&n.number,o='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(r?"_n(val)":"val","})"),i="var $$selectedVal = ".concat(o,";");i="".concat(i," ").concat(po(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]")),so(t,"change",i,null,!0)}(t,r,o);else if("input"===i&&"checkbox"===a)!function(t,e,n){var r=n&&n.number,o=co(t,"value")||"null",i=co(t,"true-value")||"true",a=co(t,"false-value")||"false";no(t,"checked","Array.isArray(".concat(e,")")+"?_i(".concat(e,",").concat(o,")>-1")+("true"===i?":(".concat(e,")"):":_q(".concat(e,",").concat(i,")"))),so(t,"change","var $$a=".concat(e,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(i,"):(").concat(a,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(r?"_n("+o+")":o,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(po(e,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(po(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(po(e,"$$c"),"}"),null,!0)}(t,r,o);else if("input"===i&&"radio"===a)!function(t,e,n){var r=n&&n.number,o=co(t,"value")||"null";o=r?"_n(".concat(o,")"):o,no(t,"checked","_q(".concat(e,",").concat(o,")")),so(t,"change",po(e,o),null,!0)}(t,r,o);else if("input"===i||"textarea"===i)!function(t,e,n){var r=t.attrsMap.type;0;var o=n||{},i=o.lazy,a=o.number,s=o.trim,c=!i&&"range"!==r,u=i?"change":"range"===r?"__r":"input",l="$event.target.value";s&&(l="$event.target.value.trim()");a&&(l="_n(".concat(l,")"));var f=po(e,l);c&&(f="if($event.target.composing)return;".concat(f));no(t,"value","(".concat(e,")")),so(t,u,f,null,!0),(s||a)&&so(t,"blur","$forceUpdate()")}(t,r,o);else{if(!z.isReservedTag(i))return ho(t,r,o),!1}return!0},text:function(t,e){e.value&&no(t,"textContent","_s(".concat(e.value,")"),e)},html:function(t,e){e.value&&no(t,"innerHTML","_s(".concat(e.value,")"),e)}},isPreTag:function(t){return"pre"===t},isUnaryTag:Gi,mustUseProp:or,canBeLeftOpenTag:Vi,isReservedTag:br,getTagNamespace:wr,staticKeys:function(t){return t.reduce((function(t,e){return t.concat(e.staticKeys||[])}),[]).join(",")}(Ga)},Wa=C((function(t){return b("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))}));function Ya(t,e){t&&(Va=Wa(e.staticKeys||""),za=e.isReservedTag||R,function t(e){if(e.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||w(t.tag)||!za(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(Va)))}(e),1===e.type){if(!za(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var n=0,r=e.children.length;n<r;n++){var o=e.children[n];t(o),o.static||(e.static=!1)}if(e.ifConditions)for(n=1,r=e.ifConditions.length;n<r;n++){var i=e.ifConditions[n].block;t(i),i.static||(e.static=!1)}}}(t),function t(e,n){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=n),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var r=0,o=e.children.length;r<o;r++)t(e.children[r],n||!!e.for);if(e.ifConditions)for(r=1,o=e.ifConditions.length;r<o;r++)t(e.ifConditions[r].block,n)}}(t,!1))}var qa=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,Xa=/\([^)]*?\);*$/,Za=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Ka={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Ja={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Qa=function(t){return"if(".concat(t,")return null;")},ts={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Qa("$event.target !== $event.currentTarget"),ctrl:Qa("!$event.ctrlKey"),shift:Qa("!$event.shiftKey"),alt:Qa("!$event.altKey"),meta:Qa("!$event.metaKey"),left:Qa("'button' in $event && $event.button !== 0"),middle:Qa("'button' in $event && $event.button !== 1"),right:Qa("'button' in $event && $event.button !== 2")};function es(t,e){var n=e?"nativeOn:":"on:",r="",o="";for(var i in t){var a=ns(t[i]);t[i]&&t[i].dynamic?o+="".concat(i,",").concat(a,","):r+='"'.concat(i,'":').concat(a,",")}return r="{".concat(r.slice(0,-1),"}"),o?n+"_d(".concat(r,",[").concat(o.slice(0,-1),"])"):n+r}function ns(t){if(!t)return"function(){}";if(Array.isArray(t))return"[".concat(t.map((function(t){return ns(t)})).join(","),"]");var e=Za.test(t.value),n=qa.test(t.value),r=Za.test(t.value.replace(Xa,""));if(t.modifiers){var o="",i="",a=[],s=function(e){if(ts[e])i+=ts[e],Ka[e]&&a.push(e);else if("exact"===e){var n=t.modifiers;i+=Qa(["ctrl","shift","alt","meta"].filter((function(t){return!n[t]})).map((function(t){return"$event.".concat(t,"Key")})).join("||"))}else a.push(e)};for(var c in t.modifiers)s(c);a.length&&(o+=function(t){return"if(!$event.type.indexOf('key')&&"+"".concat(t.map(rs).join("&&"),")return null;")}(a)),i&&(o+=i);var u=e?"return ".concat(t.value,".apply(null, arguments)"):n?"return (".concat(t.value,").apply(null, arguments)"):r?"return ".concat(t.value):t.value;return"function($event){".concat(o).concat(u,"}")}return e||n?t.value:"function($event){".concat(r?"return ".concat(t.value):t.value,"}")}function rs(t){var e=parseInt(t,10);if(e)return"$event.keyCode!==".concat(e);var n=Ka[t],r=Ja[t];return"_k($event.keyCode,"+"".concat(JSON.stringify(t),",")+"".concat(JSON.stringify(n),",")+"$event.key,"+"".concat(JSON.stringify(r))+")"}var os={on:function(t,e){t.wrapListeners=function(t){return"_g(".concat(t,",").concat(e.value,")")}},bind:function(t,e){t.wrapData=function(n){return"_b(".concat(n,",'").concat(t.tag,"',").concat(e.value,",").concat(e.modifiers&&e.modifiers.prop?"true":"false").concat(e.modifiers&&e.modifiers.sync?",true":"",")")}},cloak:D},is=function(t){this.options=t,this.warn=t.warn||to,this.transforms=eo(t.modules,"transformCode"),this.dataGenFns=eo(t.modules,"genData"),this.directives=L(L({},os),t.directives);var e=t.isReservedTag||R;this.maybeComponent=function(t){return!!t.component||!e(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function as(t,e){var n=new is(e),r=t?"script"===t.tag?"null":ss(t,n):'_c("div")';return{render:"with(this){return ".concat(r,"}"),staticRenderFns:n.staticRenderFns}}function ss(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return cs(t,e);if(t.once&&!t.onceProcessed)return us(t,e);if(t.for&&!t.forProcessed)return fs(t,e);if(t.if&&!t.ifProcessed)return ls(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var n=t.slotName||'"default"',r=ms(t,e),o="_t(".concat(n).concat(r?",function(){return ".concat(r,"}"):""),i=t.attrs||t.dynamicAttrs?gs((t.attrs||[]).concat(t.dynamicAttrs||[]).map((function(t){return{name:k(t.name),value:t.value,dynamic:t.dynamic}}))):null,a=t.attrsMap["v-bind"];!i&&!a||r||(o+=",null");i&&(o+=",".concat(i));a&&(o+="".concat(i?"":",null",",").concat(a));return o+")"}(t,e);var n=void 0;if(t.component)n=function(t,e,n){var r=e.inlineTemplate?null:ms(e,n,!0);return"_c(".concat(t,",").concat(ds(e,n)).concat(r?",".concat(r):"",")")}(t.component,t,e);else{var r=void 0,o=e.maybeComponent(t);(!t.plain||t.pre&&o)&&(r=ds(t,e));var i=void 0,a=e.options.bindings;o&&a&&!1!==a.__isScriptSetup&&(i=function(t,e){var n=k(e),r=T(n),o=function(o){return t[e]===o?e:t[n]===o?n:t[r]===o?r:void 0},i=o("setup-const")||o("setup-reactive-const");if(i)return i;var a=o("setup-let")||o("setup-ref")||o("setup-maybe-ref");if(a)return a}(a,t.tag)),i||(i="'".concat(t.tag,"'"));var s=t.inlineTemplate?null:ms(t,e,!0);n="_c(".concat(i).concat(r?",".concat(r):"").concat(s?",".concat(s):"",")")}for(var c=0;c<e.transforms.length;c++)n=e.transforms[c](t,n);return n}return ms(t,e)||"void 0"}function cs(t,e){t.staticProcessed=!0;var n=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return ".concat(ss(t,e),"}")),e.pre=n,"_m(".concat(e.staticRenderFns.length-1).concat(t.staticInFor?",true":"",")")}function us(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return ls(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o(".concat(ss(t,e),",").concat(e.onceId++,",").concat(n,")"):ss(t,e)}return cs(t,e)}function ls(t,e,n,r){return t.ifProcessed=!0,function t(e,n,r,o){if(!e.length)return o||"_e()";var i=e.shift();return i.exp?"(".concat(i.exp,")?").concat(a(i.block),":").concat(t(e,n,r,o)):"".concat(a(i.block));function a(t){return r?r(t,n):t.once?us(t,n):ss(t,n)}}(t.ifConditions.slice(),e,n,r)}function fs(t,e,n,r){var o=t.for,i=t.alias,a=t.iterator1?",".concat(t.iterator1):"",s=t.iterator2?",".concat(t.iterator2):"";return t.forProcessed=!0,"".concat(r||"_l","((").concat(o,"),")+"function(".concat(i).concat(a).concat(s,"){")+"return ".concat((n||ss)(t,e))+"})"}function ds(t,e){var n="{",r=function(t,e){var n=t.directives;if(!n)return;var r,o,i,a,s="directives:[",c=!1;for(r=0,o=n.length;r<o;r++){i=n[r],a=!0;var u=e.directives[i.name];u&&(a=!!u(t,i,e.warn)),a&&(c=!0,s+='{name:"'.concat(i.name,'",rawName:"').concat(i.rawName,'"').concat(i.value?",value:(".concat(i.value,"),expression:").concat(JSON.stringify(i.value)):"").concat(i.arg?",arg:".concat(i.isDynamicArg?i.arg:'"'.concat(i.arg,'"')):"").concat(i.modifiers?",modifiers:".concat(JSON.stringify(i.modifiers)):"","},"))}if(c)return s.slice(0,-1)+"]"}(t,e);r&&(n+=r+","),t.key&&(n+="key:".concat(t.key,",")),t.ref&&(n+="ref:".concat(t.ref,",")),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'.concat(t.tag,'",'));for(var o=0;o<e.dataGenFns.length;o++)n+=e.dataGenFns[o](t);if(t.attrs&&(n+="attrs:".concat(gs(t.attrs),",")),t.props&&(n+="domProps:".concat(gs(t.props),",")),t.events&&(n+="".concat(es(t.events,!1),",")),t.nativeEvents&&(n+="".concat(es(t.nativeEvents,!0),",")),t.slotTarget&&!t.slotScope&&(n+="slot:".concat(t.slotTarget,",")),t.scopedSlots&&(n+="".concat(function(t,e,n){var r=t.for||Object.keys(e).some((function(t){var n=e[t];return n.slotTargetDynamic||n.if||n.for||hs(n)})),o=!!t.if;if(!r)for(var i=t.parent;i;){if(i.slotScope&&"_empty_"!==i.slotScope||i.for){r=!0;break}i.if&&(o=!0),i=i.parent}var a=Object.keys(e).map((function(t){return ps(e[t],n)})).join(",");return"scopedSlots:_u([".concat(a,"]").concat(r?",null,true":"").concat(!r&&o?",null,false,".concat(function(t){var e=5381,n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(a)):"",")")}(t,t.scopedSlots,e),",")),t.model&&(n+="model:{value:".concat(t.model.value,",callback:").concat(t.model.callback,",expression:").concat(t.model.expression,"},")),t.inlineTemplate){var i=function(t,e){var n=t.children[0];0;if(n&&1===n.type){var r=as(n,e.options);return"inlineTemplate:{render:function(){".concat(r.render,"},staticRenderFns:[").concat(r.staticRenderFns.map((function(t){return"function(){".concat(t,"}")})).join(","),"]}")}}(t,e);i&&(n+="".concat(i,","))}return n=n.replace(/,$/,"")+"}",t.dynamicAttrs&&(n="_b(".concat(n,',"').concat(t.tag,'",').concat(gs(t.dynamicAttrs),")")),t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function hs(t){return 1===t.type&&("slot"===t.tag||t.children.some(hs))}function ps(t,e){var n=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!n)return ls(t,e,ps,"null");if(t.for&&!t.forProcessed)return fs(t,e,ps);var r="_empty_"===t.slotScope?"":String(t.slotScope),o="function(".concat(r,"){")+"return ".concat("template"===t.tag?t.if&&n?"(".concat(t.if,")?").concat(ms(t,e)||"undefined",":undefined"):ms(t,e)||"undefined":ss(t,e),"}"),i=r?"":",proxy:true";return"{key:".concat(t.slotTarget||'"default"',",fn:").concat(o).concat(i,"}")}function ms(t,e,n,r,o){var i=t.children;if(i.length){var a=i[0];if(1===i.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var s=n?e.maybeComponent(a)?",1":",0":"";return"".concat((r||ss)(a,e)).concat(s)}var c=n?function(t,e){for(var n=0,r=0;r<t.length;r++){var o=t[r];if(1===o.type){if(vs(o)||o.ifConditions&&o.ifConditions.some((function(t){return vs(t.block)}))){n=2;break}(e(o)||o.ifConditions&&o.ifConditions.some((function(t){return e(t.block)})))&&(n=1)}}return n}(i,e.maybeComponent):0,u=o||ys;return"[".concat(i.map((function(t){return u(t,e)})).join(","),"]").concat(c?",".concat(c):"")}}function vs(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function ys(t,e){return 1===t.type?ss(t,e):3===t.type&&t.isComment?function(t){return"_e(".concat(JSON.stringify(t.text),")")}(t):function(t){return"_v(".concat(2===t.type?t.expression:bs(JSON.stringify(t.text)),")")}(t)}function gs(t){for(var e="",n="",r=0;r<t.length;r++){var o=t[r],i=bs(o.value);o.dynamic?n+="".concat(o.name,",").concat(i,","):e+='"'.concat(o.name,'":').concat(i,",")}return e="{".concat(e.slice(0,-1),"}"),n?"_d(".concat(e,",[").concat(n.slice(0,-1),"])"):e}function bs(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function ws(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),D}}function _s(t){var e=Object.create(null);return function(n,r,o){(r=L({},r)).warn;delete r.warn;var i=r.delimiters?String(r.delimiters)+n:n;if(e[i])return e[i];var a=t(n,r);var s={},c=[];return s.render=ws(a.render,c),s.staticRenderFns=a.staticRenderFns.map((function(t){return ws(t,c)})),e[i]=s}}var Os,Ss,xs=(Os=function(t,e){var n=Ma(t.trim(),e);!1!==e.optimize&&Ya(n,e);var r=as(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}},function(t){function e(e,n){var r=Object.create(t),o=[],i=[];if(n)for(var a in n.modules&&(r.modules=(t.modules||[]).concat(n.modules)),n.directives&&(r.directives=L(Object.create(t.directives||null),n.directives)),n)"modules"!==a&&"directives"!==a&&(r[a]=n[a]);r.warn=function(t,e,n){(n?i:o).push(t)};var s=Os(e.trim(),r);return s.errors=o,s.tips=i,s}return{compile:e,compileToFunctions:_s(e)}})(Ha).compileToFunctions;function Cs(t){return(Ss=Ss||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',Ss.innerHTML.indexOf("&#10;")>0}var Es=!!Z&&Cs(!1),ks=!!Z&&Cs(!0),Ts=C((function(t){var e=Sr(t);return e&&e.innerHTML})),Ps=qn.prototype.$mount;qn.prototype.$mount=function(t,e){if((t=t&&Sr(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=Ts(r));else{if(!r.nodeType)return this;r=r.innerHTML}else t&&(r=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(r){0;var o=xs(r,{outputSourceRange:!1,shouldDecodeNewlines:Es,shouldDecodeNewlinesForHref:ks,delimiters:n.delimiters,comments:n.comments},this),i=o.render,a=o.staticRenderFns;n.render=i,n.staticRenderFns=a}}return Ps.call(this,t,e)},qn.compile=xs}).call(this,n(64),n(185).setImmediate)},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){},function(t,e,n){"use strict";function r(t,e,n){return{name:t,native:e,item:i(window.__CORE__.response.metadata,t,e),views:o(e),senderId:n}}function o(t){for(var e=new Array,n=Object.keys(window.__CORE__.views),r=0;r<n.length;r++){var o=n[r],i=window.__CORE__.views[o];i.hasOwnProperty("canBeSelect")&&i.canBeSelect(t)&&e.push(i.metaInfo.name)}return e}function i(t,e,n){return"net"==e?function(t,e){var n={name:e.name,length:e.length,unroutedLength:e.unroutedLength,layersUsed:new Array};t&&t.layers&&e.layersUsed&&e.layersUsed.map((function(e){var r=t.layers.find((function(t){return t.id===e}));r&&n.layersUsed.push(r)}));return n}(t,n):"component"==e?function(t,e){var n={designator:e.designator,description:e.description,layerName:"None",parameters:e.parameters?e.parameters.map((function(t){return t})):[]};if(t&&t.layers){var r=t.layers.find((function(t){return t.id===e.layerId}));r&&(n.layerName=r.name)}return n}(t,n):n}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"f",(function(){return m})),n.d(e,"e",(function(){return v})),n.d(e,"d",(function(){return y})),n.d(e,"c",(function(){return g})),n.d(e,"g",(function(){return x})),n.d(e,"a",(function(){return E})),n.d(e,"h",(function(){return k})),n.d(e,"b",(function(){return T}));var r=n(68),o=n.n(r),i=n(87),a=n(6),s=n(139),c=n(223),u=function(t){var e=t.match(/\((.*?)\)/);if(e&&e[1])return parseInt(e[1],10)},l=n(171);function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h=a.n||!a.D,p=!Object(l.a)(a.o),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.reduce((function(t,e){return t[e.id]=e,t}),{});return Object.values(e)},v=function(t){return Array.isArray(t)&&t.length?t.map((function(t){return{id:t.id,username:t.name,name:t.fullName||t.name,email:t.email,mentionType:1===t.suggestionType?o.a.group:o.a.user,avatarUrl:t.ProfilePicture?Object(s.a)(t.ProfilePicture):"",mentionKey:p?t.name:t.email}})):[]},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.isArray(t)&&t.length?t.map((function(t){return{id:t.UserId||t.Id,globalUserId:t.GlobalUserId,username:t.UserName||t.Name||t.Email,name:t.Name||"".concat(t.FirstName," ").concat(t.LastName),email:t.Email,mentionType:t.MentionType||e,avatarUrl:t.ProfilePicture?Object(s.a)(t.ProfilePicture):"",mentionKey:p?t.UserName:t.Email}})):[]},g=function(t){return Array.isArray(t)&&t.length?t.map((function(t){var e,n,r,o,i=t.Data.split("|"),s=function(t){return(i.find((function(e){return e.includes(t+"=")}))||"").replace(t+"=","").trim()},u={packageId:t.EntityId,id:t.Guid,threadNumber:t.ThreadNumber||"#",docId:"LSM"===(null===(e=t.Properties)||void 0===e?void 0:e.DocumentType)?"Lsm":s("DocumentUniqueID")||null,pageId:null!==(n=null===(r=t.Properties)||void 0===r?void 0:r.PageId)&&void 0!==n?n:s("PageUniqueID"),drawing:t.Drawing?Object(c.a)(t.Drawing,""):"",modifiedBy:t.ModifiedBy,assignedTo:t.AssignedTo,screenshotUrl:t.OriginalStateScreenshotUrl||"",editable:t.ModifiedBy===a.x,resolved:0===t.Status,resolvable:!0,comments:Array.isArray(t.Comments)&&t.Comments.length?b(t.Comments,0===t.Status):[],properties:t.Properties?w(t.Properties):null,data:t.Data,threadType:(null==t||null===(o=t.Properties)||void 0===o?void 0:o.Type)||"",status:t.Status};return h||(u.taskInfo=t.taskInfo&&t.taskInfo.userDetailsInfo?t.taskInfo:{userDetailsInfo:null,taskName:null}),u})):[]},b=function(t,e){return t.map((function(t){return{id:t.Guid,date:h&&t.CreatedAt?new Date(t.CreatedAt):u(t.CreatedAt),isEdited:S(t),text:t.Text,resolved:e,author:_(t.Author),editable:t.Author&&t.Author.UserId===a.x,mentions:t.Mentions,userScreenshots:(n=t.Images,Array.isArray(n)&&n.length?n.map((function(t){return{id:t.Guid,src:t.Url,previewSrc:t.PreviewUrl}})):[])};var n}))},w=function(t){return{activity:t.Activity,autogeneratedComments:t.AutogeneratedComments,taskId:t.TaskId,type:t.Type,releaseGuid:t.ReleaseGuid||"",vcsRevision:t.VcsRevision||"",documentType:t.DocumentType,documentName:t.DocumentName||"",locationConfiguration:null!=t&&t.LocationConfiguration?JSON.parse(null==t?void 0:t.LocationConfiguration):"",layersConfiguration:null!=t&&t.LayersConfiguration?JSON.parse(null==t?void 0:t.LayersConfiguration):"",LwTaskHrid:t.LwTaskHrid,LwTaskId:t.LwTaskId,LwTaskPriority:t.LwTaskPriority,LwTaskStatus:t.LwTaskStatus,pageId:t.PageId||"",coords:{iconOffsetX:t.IconOffsetX||0,iconOffsetY:t.IconOffsetY||0,originOffsetX:t.OriginOffsetX||0,originOffsetY:t.OriginOffsetY||0}}},_=function(t){return t?{id:t.UserId,name:t.FullName,proficePicture:t.ProfilePicture,avatarUrl:t.ProfilePicture?Object(s.a)(t.ProfilePicture):""}:{id:"",name:"User",avatarUrl:""}},O=function(t){return t?{id:t.id,name:t.displayName,proficePicture:t.avatarUrl,avatarUrl:t.avatarUrl}:{id:"",name:"User",avatarUrl:""}},S=function(t){var e=u(null==t?void 0:t.ModifiedAt);return e&&e>u(null==t?void 0:t.CreatedAt)},x=function(t){return t.map((function(t){return{Name:t.name,Value:t.id}}))},C=function(t){return{id:t.guid+"_1",date:+new Date(t.createdAt),isEdited:!1,text:t.name+(t.description?"\n\nDescription: "+t.description:""),resolved:!1,author:O(t.createdBy),editable:!1,mentions:[],type:r.mentionStrings.user,isSystemComment:!1}},E=function(t){return t.map((function(t,e){var n,i;return{packageId:t.mainEntityGuid,id:t.guid,threadNumber:"-LWT_"+e,docId:"lwt",pageId:null,drawing:"",modifiedBy:t.createdBy.id,assignedTo:null===(n=t.assignee)||void 0===n?void 0:n.id,screenshotUrl:"",editable:!1,resolved:"Resolved"===t.status,resolvable:!0,lastReplyDate:+new Date(t.lastReplyDate),repliesCount:t.repliesCount,title:t.name,comments:[C(t)].concat(f((i=t.messages||[],i.map((function(t){var e,n;return{id:t.guid,date:+new Date(t.lastModifiedAt),isEdited:!1,text:t.text,resolved:!1,author:O(t.lastModifiedBy),editable:!1,mentions:(null===(e=t.metadata)||void 0===e?void 0:e.mentions)&&(null===(n=t.metadata)||void 0===n?void 0:n.mentions.map((function(t){var e;return{MentionGuid:null===(e=t.user)||void 0===e?void 0:e.id,MentionType:o.a[t.mentionType.toLowerCase()]}})))||[],type:t.messageType,isSystemComment:t.type===r.mentionStrings.system}})).filter((function(t){return t.type!==r.mentionStrings.system}))))),properties:{activity:null,autogeneratedComments:null,taskId:null,type:null,releaseGuid:"",documentType:"LWTASK",documentName:"",LwTaskHrid:t.hrid,LwTaskId:t.guid,LwTaskPriority:t.priority,LwTaskStatus:t.status,coords:{iconOffsetX:0,iconOffsetY:0,originOffsetX:0,originOffsetY:0}},task:null,taskInfo:{},dataType:{userDetailsInfo:null,taskName:null},status:t.status,threadType:"LWT"}}))},k=function(t){var e={text:t.value.Text,metadata:{mentions:t.value.Mentions.map((function(t){return t.MentionType===o.a.group?{mentionType:r.mentionStrings.group,group:{id:t.MentionGuid}}:{mentionType:r.mentionStrings.user,user:{id:t.MentionGuid}}}))}};return t.commentId&&(e.guid=t.commentId),e},T=function(t){return Array.isArray(t)?t.filter((function(t){var e;return null===(e=t.Tags)||void 0===e?void 0:e.length})).map((function(t){var e,n,r;return{vcsRevision:t.RevisionId,author:null===(e=t.Tags[0])||void 0===e?void 0:e.Author,dateFormatted:Object(i.formatDate)(null===(n=t.Tags[0])||void 0===n?void 0:n.DateTimeUTC,{ignoreTimeZone:!0,skipCurrentYear:!0,skipTimeZoneSuffix:!0}),tagName:null===(r=t.Tags[0])||void 0===r?void 0:r.Name}})):[]}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=this.getStorage()}var e,n,o;return e=t,(n=[{key:"getStorage",value:function(){try{return localStorage}catch(t){return console.error("Cannot use localStorage",t),window}}},{key:"get",value:function(){return(this.store instanceof Storage?this.store.getItem("vwr_unit"):this.store.__vwrUnit)||null}},{key:"set",value:function(t){this.store instanceof Storage?this.store.setItem("vwr_unit",t):this.store.__vwrUnit=t}},{key:"remove",value:function(){this.store.removeItem("vwr_unit")}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=new o},function(t,e,n){t.exports=!n(58)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(59),o=n(466),i=n(188),a=Object.defineProperty;e.f=n(94)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e(t.tag,t._g({tag:"component",staticClass:"afs-user-avatar__container"},t.$listeners),[e("span",{staticClass:"afs-user-avatar",class:t.classes},[t.isUnknown?[e("Icon",{staticClass:"afs-user-avatar__icon",attrs:{name:"avatar",filled:""}})]:[t.img&&!t.isFailed?e("img",{staticClass:"afs-user-avatar__img",attrs:{src:t.img,alt:t.alt},on:{error:t.handleImgError}}):e("AfsText",{staticClass:"afs-user-avatar__placeholder",attrs:{type:"title",inline:""}},[t._v("\n        "+t._s(t.alt)+"\n      ")]),t._v(" "),t.addAvatar?[e("div",{staticClass:"afs-user-avatar__add-avatar-icon",class:{"afs-user-avatar__add-avatar-icon_has-img":t.img}},[e("Icon",{attrs:{name:"photo-32"}})],1)]:t._e()]],2),t._v(" "),t.online?e("div",{staticClass:"afs-user-avatar__online"}):t._e()])};r._withStripped=!0;var o=n(5),i=n(4),a=n(1),s=n(3),c={name:"AfsUserAvatar",components:{AfsText:o.a,Icon:i.a},props:{isUnknown:{type:Boolean,default:!1},addAvatar:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},img:{type:String,default:""},title:{type:String,default:""},isNew:{type:Boolean,default:!1},size:{type:String,default:"lg",validator:function(t){return["xxxl","xl","lg","md","sm","xs"].includes(t)}},online:{type:Boolean,default:!1},tag:{type:String,default:"div"},bgColorCode:{type:String,default:""}},data:function(){return{isFailed:!1}},computed:{classes:function(){return[this.themeClass,this.sizeClass,this.colorClass,{"afs-user-avatar_loaded":this.img&&!this.isFailed&&!this.isNew,"afs-user-avatar__add-avatar":this.addAvatar,"afs-user-avatar__show-icon":this.showIcon}]},colorClass:function(){return this.addAvatar?"afs-user-avatar-dark":(this.isUnknown||!this.img||this.isFailed)&&this.alt?"afs-user-avatar_".concat(this.altColorCode):null},themeClass:function(){var t=Object(s.a)(this.$root);return Object(a.c)(t.theme)},sizeClass:function(){return"afs-user-avatar_".concat(this.size)},alt:function(){var t="string"==typeof this.title||Array.isArray(this.title)?this.title[0]:"";return t},altColorCode:function(){if("@"===this.alt)return"at";if(this.bgColorCode)return this.bgColorCode;var t="z".charCodeAt(0),e="0".charCodeAt(0),n=t-e,r=this.alt.toLowerCase().charCodeAt(0),o=r===t?r:((r-e)%n+n)%n+e;return String.fromCharCode(o)}},methods:{getBEMClass:function(t){return Object(a.a)("afs-user-avatar",t)},handleImgError:function(){this.isFailed=!0}}},u=(n(425),n(0)),l=Object(u.a)(c,r,[],!1,null,null,null).exports;e.a=l},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var r=n(27);e.a=function(t,e){var n=e.value;if(Object(r.hasOwnProperty)(n,"query")){var o=Object(r.hasOwnProperty)(n,"value")?n.value:t.innerHTML,i=n.query.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),a=new RegExp(i,"ig"),s=n.color||"#f2c94c",c=n.textColor||"#000";t.innerHTML=n.query&&o?o.replace(a,(function(t){return'<mark style="color: '.concat(c,"; background: ").concat(s,';">').concat(t,"</mark>")})):o}}},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("span",{staticClass:"afs-user-info",class:t.classes,attrs:{"data-locator":t.dataLocator}},[e("UserAvatar",{staticClass:"afs-user-info__avatar",class:t.imgClass,attrs:{img:t.img,title:t.avatarTitle,"is-new":t.isNew,online:t.online,size:t.avatarSize}}),t._v(" "),e("span",{staticClass:"afs-user-info__content"},[t.title?e("AfsText",{staticClass:"afs-user-info__title",class:t.titleClass,attrs:{tag:"span",type:"title",ellipsis:t.ellipsis}},[t._t("title",(function(){return[t._v("\n        "+t._s(t.title)+"\n      ")]}),{text:t.title,getBEMClass:t.getBEMClass})],2):t._e(),t._v(" "),t.meta?e("AfsText",{directives:[{name:"hint",rawName:"v-hint:[metaHintId]",arg:t.metaHintId}],ref:"meta",staticClass:"afs-user-info__text",class:t.metaClass,attrs:{tag:"span",type:"text",ellipsis:t.ellipsis},on:{"~mouseenter":function(e){return t.onMetaHover.apply(null,arguments)}}},[t._t("meta",(function(){return[t._v("\n        "+t._s(t.meta)+"\n      ")]}),{text:t.meta,getBEMClass:t.getBEMClass})],2):t._e(),t._v(" "),e("ContextMenu",{attrs:{id:t.metaHintId,"is-exist":t.showHintForMeta,type:"hint"},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[e("AfsText",{class:r("text"),attrs:{type:"tooltip"}},[t._v("\n          "+t._s(t.meta)+"\n        ")])]}}])})],1)],1)};r._withStripped=!0;var o=n(96),i=n(5),a=n(8),s=n(1),c=n(3),u=n(17),l=n(28),f={name:"AfsUserInfo",components:{UserAvatar:o.a,AfsText:i.a,ContextMenu:a.a},directives:{hint:l.a},props:{dataLocator:{type:String,default:"user-info"},type:{type:String,default:"",validator:function(t){return!t.length||["reverse"].includes(t)}},img:{type:String,default:""},title:{type:String,default:""},meta:{type:String,default:""},ellipsis:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},isNew:{type:Boolean,default:!1},hasTitle:{type:Boolean,default:!0},hasMeta:{type:Boolean,default:!0},hasHintForMeta:{type:Boolean,default:!1},titleClass:{type:null,default:null},metaClass:{type:null,default:null},imgClass:{type:null,default:null},online:{type:Boolean,default:!1},avatarSize:{type:String,default:"lg",validator:function(t){return["xxxl","xl","lg","md","sm","xs"].includes(t)}},useMetaForAvatarLetter:{type:Boolean,default:!1}},data:function(){return{metaHintId:Object(u.a)(),showHintForMeta:!1}},computed:{classes:function(){return[this.themeClass,this.type.length&&"afs-user-info_".concat(this.type),{"afs-user-info_clickable":this.clickable}]},themeClass:function(){var t=Object(c.a)(this.$root);return Object(s.c)(t.theme)},avatarTitle:function(){return this.isNew?"@":this.useMetaForAvatarLetter?this.meta:this.title||this.meta}},methods:{getBEMClass:function(t){return Object(s.a)("afs-user-info",t)},onMetaHover:function(){var t,e=null===(t=this.$refs.meta)||void 0===t?void 0:t.$el;this.showHintForMeta&&e&&e.offsetWidth<e.scrollWidth&&(this.showHintForMeta=!0)}}},d=(n(426),n(0)),h=Object(d.a)(f,r,[],!1,null,null,null).exports;e.a=h},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return u}));var a=o((function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"grayscale",void 0),i(this,"grayscale_factor",void 0),i(this,"transparency",void 0),i(this,"transparency_factor",void 0),this.grayscale=e||!1,this.grayscale_factor=n||0,this.transparency=r||!1,this.transparency_factor=o||0}));function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(e,n,r,o,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"layer",void 0),c(this,"layerName",void 0),c(this,"filter",void 0),this.layer=e,this.layerName=n||"layer".concat(e),this.filter=new a(r,o,i,s)}var e,n,r;return e=t,r=[{key:"createRenderOptions",value:function(e){return e.map((function(e){return new t(e.index,e.name)}))}}],(n=null)&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}));var a=o((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));i(a,"SelectionLayerName","Selection Layer"),i(a,"HighlightLayerName","Highlight layer")},function(t,e,n){},function(t,e,n){"use strict";var r=function(){var t=this;return(0,t._self._c)("label",t._g(t._b({staticClass:"afs-label",class:t.classes,attrs:{for:t.attrFor,"data-locator":t.dataLocator}},"label",t.$attrs,!1),t.$listeners),[t._t("default",null,{getBEMClass:t.getBEMClass})],2)};r._withStripped=!0;var o=n(1),i=n(3),a={name:"AfsLabel",props:{dataLocator:{type:String,default:"label"},attrFor:{type:String,default:""},hasPointer:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{classes:function(){return[this.themeClass,{"is-pointer":this.hasPointer,"is-disabled":this.disabled}]},themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)}},methods:{getBEMClass:function(t){return Object(o.a)("afs-link",t)}}},s=(n(151),n(0)),c=Object(s.a)(a,r,[],!1,null,null,null).exports;e.a=c},function(t,e,n){"use strict";var r,o;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),function(t){t[t.None=0]="None",t[t.Temporal=1]="Temporal",t[t.Supesampling=2]="Supesampling",t[t.Last=3]="Last"}(r||(r={})),function(t){t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal",t[t.DiagMain=3]="DiagMain",t[t.DiagSecond=4]="DiagSecond",t[t.Cross=5]="Cross",t[t.Last=6]="Last"}(o||(o={}))},function(t,e,n){"use strict";var r;!function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.MiddleOrWheel=4]="MiddleOrWheel",t[t.Back=8]="Back",t[t.Forward=16]="Forward"}(r||(r={})),e.a=r},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"afs-input",class:[t.themeClass]},[t.hasSlot("label")?e("AfsLabel",{staticClass:"afs-input__label"},[t._t("label")],2):t._e(),t._v(" "),e("input",t._g(t._b({directives:[{name:"hint",rawName:"v-hint:[id]",arg:t.id}],ref:"input",staticClass:"afs-input__control",class:t.controlClasses,attrs:{type:t.type,"data-locator":t.dataLocator},domProps:{value:t.modelValue}},"input",t.$attrs,!1),t.listeners)),t._v(" "),e("ContextMenu",t._b({staticClass:"afs-input__hint",attrs:{id:t.id,"is-exist":t.hasError,modifiers:{y:"bottom",x:"center"},type:"hint",arrow:"",error:""},scopedSlots:t._u([{key:"default",fn:function(){return[t._t("error-message",(function(){return[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]}))]},proxy:!0}],null,!0)},"ContextMenu",t.errorHintProps,!1))],1)};r._withStripped=!0;var o=n(8),i=n(104),a=n(2),s=n(1),c=/[a-z]|[A-Z]/,u=/[0-9]/,l="".concat("%s;","X"),f="".concat("%s;","x"),d="".concat("%s;","9"),h=n(17),p=n(3),m=n(28);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={name:"AfsInput",components:{ContextMenu:o.a,AfsLabel:i.a},directives:{hint:m.a},inheritAttrs:!1,model:{event:"model-changed",prop:"modelValue"},props:{type:{type:String,default:"text"},dataLocator:{type:String,default:"input"},radius:{type:String,default:"".concat(a.d.tl," ").concat(a.d.tr," ").concat(a.d.bl," ").concat(a.d.br)},modelValue:{type:String,default:""},isValid:{type:Boolean,default:!0},mask:{type:String,default:""},errorMessage:{type:String,default:""},controlClass:{type:null,default:null},errorHintProps:{type:Object,default:function(){return{}}},transparent:{type:Boolean,default:!1},code:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{id:function(){return Object(h.a)()},themeClass:function(){var t=Object(p.a)(this.$root);return Object(s.c)(t.theme)},controlClasses:function(){var t;return[this.controlClass,Object(s.b)("afs-input",this.radius),(t={},g(t,a.a.isError,!this.isValid),g(t,"is-transparent",this.transparent),g(t,"is-code",this.code),g(t,"is-disabled",this.disabled),t)]},hasMask:function(){return this.mask&&this.mask.length},listeners:function(){return y(y({},this.$listeners),{},{input:this.handleInput,blur:this.handleBlur,change:this.handleChange})},isIntOnly:function(){return"int"===this.mask},hasError:function(){return!(this.isValid||!this.errorMessage||!this.errorMessage.length)}},methods:{focus:function(){this.$refs.input.focus()},select:function(){this.$refs.input.select()},blur:function(){this.$refs.input.blur()},handleBlur:function(t){this.$emit("blur",t)},handleChange:function(t){this.$emit("change",t)},handleInput:function(t){var e=t.target.value;if(this.hasMask){var n=this.isIntOnly?e.replace(/\D+/g,""):function(t,e){for(var n=e.split("").map((function(t){return c.test(t)||u.test(t)?"".concat("%s;").concat(t):t})).join(""),r=0;r<t.length;r++){var o=t[r],i=c.test(o),a=u.test(o),s=n.indexOf(l),h=n.indexOf(f),p=n.indexOf(d),m=-1!==s,v=-1!==h;if(i){if(-1!==p&&s>p&&h>p)break;var y=!m||v&&h<s;n=n.replace(y?f:l,y?o.toLowerCase():o.toUpperCase())}if(a){if(m&&s<p||v&&h<p)break;n=n.replace(d,o)}if(n.length===e.length)return n}return n.substring(0,n.indexOf("%s;"))}(e,this.mask);this.$refs.input.value=n,this.$emit("model-changed",n)}else this.$emit("model-changed",e);this.$emit("input",t)},hasSlot:function(t){return this.$slots[t]},getBEMClass:function(t){return Object(s.a)("afs-input",t)}}},w=(n(162),n(0)),_=Object(w.a)(b,r,[],!1,null,null,null).exports,O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"afs-input",class:t.rootClasses},[e("div",t._g(t._b({directives:[{name:"hint",rawName:"v-hint:[id]",arg:t.id}],ref:"input",staticClass:"afs-input__control afs-input__control_clickable",class:t.controlClasses,attrs:{contenteditable:t.contentEditable},domProps:{innerHTML:t._s(t.parser(t.value))}},"div",t.$attrs,!1),t.listeners)),t._v(" "),e("ContextMenu",{staticClass:"afs-input__hint",attrs:{id:t.id,"is-exist":t.hasError,modifiers:{y:"bottom",x:"center"},type:"hint",arrow:!0,error:!0},scopedSlots:t._u([{key:"default",fn:function(){return[t._t("error-message",(function(){return[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]}))]},proxy:!0}],null,!0)})],1)};function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(E([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==S(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function C(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}O._withStripped=!0;var P={name:"ClickableLinks",components:{ContextMenu:o.a},directives:{hint:m.a},inheritAttrs:!1,props:{type:{type:String,default:"text"},radius:{type:String,default:"".concat(a.d.tl," ").concat(a.d.tr," ").concat(a.d.bl," ").concat(a.d.br)},value:{type:String,default:""},isValid:{type:Boolean,default:!0},errorMessage:{type:String,default:""},parser:{type:Function,default:function(t){return t}},controlClass:{type:null,default:null}},data:function(){return{contentEditable:!0}},computed:{id:function(){return Object(h.a)()},rootClasses:function(){return[this.themeClass]},controlClasses:function(){return[this.controlClass,Object(s.b)("afs-input",this.radius),T({},a.a.isError,!this.isValid)]},themeClass:function(){var t=Object(p.a)(this.$root);return Object(s.c)(t.theme)},listeners:function(){return k(k({},this.$listeners),{},{input:this.handleInput,blur:this.handleBlur,click:this.handleClick})},hasError:function(){return!(this.isValid||!this.errorMessage||!this.errorMessage.length)}},methods:{handleBlur:function(t){this.$emit("blur",t)},handleInput:function(t){this.$emit("input",t)},handleClick:function(t){var e,n=this;return(e=x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("a"===t.target.tagName.toLowerCase()){e.next=2;break}return e.abrupt("return");case 2:return n.contentEditable=!1,e.next=5,n.$nextTick();case 5:setTimeout((function(){return n.contentEditable=!0}));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){C(i,r,o,a,s,"next",t)}function s(t){C(i,r,o,a,s,"throw",t)}a(void 0)}))})()}}};Object(w.a)(P,O,[],!1,null,null,null).exports,e.a=_},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"afs-tabs",class:t.classes,attrs:{"data-locator":t.dataLocator}},t._l(t.modelValue,(function(n){return e("AfsText",{key:n.id,staticClass:"afs-tabs__item",class:{"is-active":n.isActive},attrs:{"data-locator":"".concat(t.dataLocator,"-item")},on:{click:function(e){return t.onClick(n.id)}}},[t._t("default",(function(){return[t._v("\n      "+t._s(n.name)+"\n    ")]}),{item:n})],2)})),1)};r._withStripped=!0;var o=n(5),i=n(1),a=n(3);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={name:"AfsTabs",components:{AfsText:o.a},model:{prop:"modelValue",event:"model-change"},props:{dataLocator:{type:String,default:"tabs"},modelValue:{type:Array,default:function(){return[]},validator:function(t){return t.every((function(t){return!function(t){return void 0===t}(t.id)}))}},condensedX:{type:Boolean,default:!1},condensedY:{type:Boolean,default:!0}},computed:{classes:function(){var t=[this.themeClass];return this.condensedX&&t.push("condensed-x"),this.condensedY&&t.push("condensed-y"),t},themeClass:function(){var t=Object(a.a)(this.$root);return Object(i.c)(t.theme)}},methods:{getBEMClass:function(t){return Object(i.a)("afs-tabs",t)},onClick:function(t){var e=this.modelValue.map((function(e){return c(c({},e),{},{isActive:t===e.id})}));this.$emit("model-change",e)}}},f=(n(163),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null).exports;e.a=d},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));var r,o=window.__CORE__;!function(t){t[t.Json=0]="Json",t[t.Binary=1]="Binary",t[t.BinaryZip=2]="BinaryZip",t[t.SceneBinZipStream=3]="SceneBinZipStream",t[t.SceneBinZipFile=4]="SceneBinZipFile"}(r||(r={}))},function(t,e,n){var r=n(175);t.exports=function(t){return Object(r(t))}},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!l){var t=s(d);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("transition",{attrs:{"enter-class":"afs-snackbar_enter","leave-to-class":"afs-snackbar_leave-to","enter-active-class":"afs-snackbar_enter-active","leave-active-class":"afs-snackbar_leave-active"}},[t.isOpened?e("div",t._b({directives:[{name:"inject",rawName:"v-inject",value:t.containerId,expression:"containerId"}],staticClass:"afs-snackbar",class:t.classes,style:t.cssVars,attrs:{"data-locator":t.dataLocator}},"div",t.$attrs,!1),[e("div",{staticClass:"afs-snackbar__container"},[t.hasIcon?e("div",{staticClass:"afs-snackbar__icon"},[t._v("\n        "+t._s(t.icon)+"\n        "),t._t("icon",null,{getBEMClass:t.getBEMClass})],2):t._e(),t._v(" "),e("div",{staticClass:"afs-snackbar__content"},[e("AfsText",{staticClass:"afs-snackbar__text",attrs:{type:"text"}},[t._t("default",null,{getBEMClass:t.getBEMClass})],2),t._v(" "),t.hasSlot("action")||t.showClose?e("div",{staticClass:"afs-snackbar__divider"}):t._e()],1),t._v(" "),t.hasSlot("action")?e("div",{staticClass:"afs-snackbar__action"},[t._t("action",null,{getBEMClass:t.getBEMClass})],2):t._e(),t._v(" "),t.showClose?e("Icon",{staticClass:"afs-snackbar__close",attrs:{name:"close-16","data-locator":"".concat(t.dataLocator,"-close")},on:{click:t.close}}):t._e()],1)]):t._e()])};r._withStripped=!0;var o=n(5),i=n(4),a=n(1),s=n(3),c=n(13);var u={name:"AfsSnackbar",components:{AfsText:o.a,Icon:i.a},directives:{inject:c.a},inheritAttrs:!1,props:{dataLocator:{type:String,default:"snackbar"},autoclose:{type:Boolean,default:!1},autocloseDelay:{type:[Number,String],default:3e3,validator:function(t){return isFinite(+t)}},icon:{type:String,default:""},containerId:{type:String,default:null},hideClose:{type:Boolean,default:!1},primary:{type:Boolean,default:!1},type:{type:String,default:"info",validator:function(t){return["info","success","error","system"].includes(t)}},zIndex:{type:Number,default:2}},data:function(){return{isOpened:!1}},computed:{classes:function(){var t=[this.themeClass];return this.primary&&(t.push("afs-snackbar_primary"),t.push("afs-snackbar_".concat(this.type))),t},cssVars:function(){return{"--snackbar-z-index":this.zIndex}},themeClass:function(){var t=Object(s.a)(this.$root);return Object(a.c)(t.theme)},hasIcon:function(){return!!this.icon.length||this.hasSlot("icon")},showClose:function(){return!this.hideClose||this.autoclose&&this.autocloseDelay>1e4},transitionListeners:function(){return{"before-enter":!0,enter:!0,"after-enter":!0,"enter-cancelled":!0,"before-leave":!0,leave:!0,"after-leave":!0,"leave-cancelled":!0}},listeners:function(){var t=this;return Object.entries(this.$listeners).reduce((function(e,n){var r=n[0],o=n[1];return t.transitionListeners[r]&&t.addTransitionListener(e,r,o),e}),{})}},methods:{getBEMClass:function(t){return Object(a.a)("afs-snackbar",t)},addTransitionListener:function(t,e,n){var r,o,i;t.transition?t.transition[e]=n:t.transition=(i=n,(o=e)in(r={})?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r)},open:function(){this.isOpened=!0,this.autoclose&&(this.clearAutoclose(),this.timer=setTimeout(this.close,this.autocloseDelay))},close:function(){this.isOpened=!1,this.clearAutoclose(),this.$emit("closed")},clearAutoclose:function(){this.timer&&clearTimeout(this.timer)},hasSlot:function(t){return this.$slots[t]}},expose:["open","close"]},l=(n(208),n(0)),f=Object(l.a)(u,r,[],!1,null,null,null).exports;e.a=f},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return s}));var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"unis",[]),a(this,"arcs",[]),a(this,"polygons",[]),a(this,"labels",[]),a(this,"lines",[]),a(this,"meshes",[])}var e,n,o;return e=t,(n=[{key:"isEmpty",get:function(){return!(this.unis.length||this.arcs.length||this.polygons.length||this.labels.length||this.lines.length||this.meshes.length)}},{key:"add",value:function(t){var e,n,o,i,a,s;t.unis.length&&(e=this.unis).push.apply(e,r(t.unis)),t.arcs.length&&(n=this.arcs).push.apply(n,r(t.arcs)),t.polygons.length&&(o=this.polygons).push.apply(o,r(t.polygons)),t.labels.length&&(i=this.labels).push.apply(i,r(t.labels)),t.lines.length&&(a=this.lines).push.apply(a,r(t.lines)),t.meshes.length&&(s=this.meshes).push.apply(s,r(t.meshes))}},{key:"clear",value:function(){this.unis.length=0,this.arcs.length=0,this.polygons.length=0,this.labels.length=0,this.lines.length=0,this.meshes.length=0}}])&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){},function(t,e,n){"use strict";var r=n(12),o=n(10);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function h(){}function p(){}function m(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,a){function s(){return new e((function(r,s){!function r(o,a,s,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==i(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}(o,a,r,s)}))}return r=r?r.then(s,s):s()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,u(b,"constructor",m),u(m,"constructor",p),p.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),u(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function s(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var c=0,u=null,l=function(t){t.headers.__RequestVerificationToken=Object(o.c)("data-csrf-token","")};e.a=function(t){return t.interceptors.request.use((function(t){var e=t._withVerification;if(void 0!==e&&e){["post","put","patch","delete"].includes(null==t?void 0:t.method)&&l(t)}return t})),t.interceptors.response.use(null,function(){var e,n=(e=a().mark((function e(n){var o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(412===(null==n||null===(o=n.response)||void 0===o?void 0:o.status)&&c<1)){e.next=19;break}return i=n.config,e.prev=2,c+=1,e.next=6,new Promise((function(t,e){r.a.emit("csrf-token:requestUpdate"),r.a.once("csrf-token:update",t),u=setTimeout((function(){e(new Error("[viewer] csrf-token:update timeout"))}),15e3)}));case 6:return clearTimeout(u),l(i),e.next=10,t.request(i);case 10:return s=e.sent,c=0,e.abrupt("return",s);case 15:return e.prev=15,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",Promise.reject(n));case 19:return e.abrupt("return",Promise.reject(n));case 20:case"end":return e.stop()}}),e,null,[[2,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){s(i,r,o,a,c,"next",t)}function c(t){s(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}()),t}},function(t,e,n){(function(n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,n,a){var s=i.URL||i.webkitURL,c=document.createElement("a");n=n||t.name||"download",c.download=n,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?o(c):r(c.href)?e(t,n,a):o(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){o(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,i){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),n);else if(r(t))e(t,n,i);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){o(a)}))}}:function(t,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var s="application/octet-stream"===t.type,c=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&c||a)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},l.readAsDataURL(t)}else{var f=i.URL||i.webkitURL,d=f.createObjectURL(t);o?o.location=d:location.href=d,o=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});i.saveAs=s.saveAs=s,t.exports=s})?r.apply(e,o):r)||(t.exports=i)}).call(this,n(64))},function(t,e,n){"use strict";var r=n(137);e.a=function(t,e){return new Promise((function(n,o){var i,a=setTimeout((function(){e&&i&&e.off("cancel",i),n()}),t);e&&(i=function(){clearTimeout(a),o(new r.a)},e.on("cancel",i))}))}},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"afs-accordion",class:t.classes,attrs:{"data-locator":t.dataLocator}},[e("GridSection",{staticClass:"afs-accordion__header",class:[{"afs-accordion__header_is-disabled":t.disabled},t.customHeaderClasses]},[t.hasCheckbox?e("Checkbox",{staticClass:"afs-accordion__checkbox",attrs:{"data-locator":"".concat(t.dataLocator,"-checkbox")},on:{click:function(e){return t.handleChangeCheckbox(e,!t.isChecked)}},scopedSlots:t._u([{key:"default",fn:function(){return[t._t("checkbox")]},proxy:!0}],null,!0),model:{value:t.isChecked,callback:function(e){t.isChecked=e},expression:"isChecked"}}):t._e(),t._v(" "),e("div",{staticClass:"afs-accordion__main-header-container"},[e("div",{staticClass:"afs-accordion__main-header",class:t.headerClasses,attrs:{"data-locator":"".concat(t.dataLocator,"-header")},on:{click:t.handleClick}},[t.hasCheckbox?t._e():e("Icon",{staticClass:"afs-accordion__main-chevron",attrs:{name:!t.disabled&&t.isOpened?"chevron-down-s":"chevron-right"}}),t._v(" "),t._t("header",(function(){return[t.icon?e("Icon",{staticClass:"afs-accordion__main-header-icon",attrs:{name:t.icon}}):t._e(),t._v(" "),e("AfsText",{attrs:{type:"title"}},[t._v(t._s(t.title))]),t._v(" "),t.showCount?e("AfsText",{staticClass:"afs-accordion__main-header-count"},[t._v("\n            ("+t._s(t.count)+")\n          ")]):t._e()]}),{isOpened:t.isOpened}),t._v(" "),t.hasCheckbox?e("Icon",{staticClass:"afs-accordion__main-chevron",attrs:{name:!t.disabled&&t.isOpened?"chevron-down-s":"chevron-right"}}):t._e()],2)]),t._v(" "),t.hasHeaderAddon?e("div",{staticClass:"afs-accordion__additional-header",attrs:{"data-locator":"".concat(t.dataLocator,"-additional-header")}},[t._t("additional-menu")],2):t._e()],1),t._v(" "),t.disabled?t._e():[e("transition",{attrs:{name:"fade","enter-class":"afs-accordion_enter","leave-to-class":"afs-accordion_leave-to","enter-active-class":"afs-accordion_enter-active","leave-active-class":"afs-accordion_leave-active"},on:{enter:t.enter,"after-enter":t.afterEnter,leave:t.leave}},[e("GridSection",{directives:[{name:"show",rawName:"v-show",value:t.isOpened,expression:"isOpened"}],ref:"body",staticClass:"afs-accordion__body",class:t.customBodyClasses,attrs:{"data-locator":"".concat(t.dataLocator,"-body")}},[t._t("body")],2)],1)]],2)};r._withStripped=!0;var o=n(1),i=n(3),a=n(56),s=n(65),c=n(5),u=n(4);var l={default:"",simple:"simple"},f={name:"AfsAccordion",components:{GridSection:a.c,AfsText:c.a,Checkbox:s.a,Icon:u.a},props:{title:{type:String,default:""},opened:{type:Boolean,default:!1},hasHeaderAddon:{type:Boolean,default:!1},type:{type:String,default:"",validator:function(t){return Object.values(l).includes(t)}},disabled:{type:Boolean,default:!1},customHeaderClasses:{type:[String,Array,Object],default:""},customBodyClasses:{type:[String,Array,Object],default:""},hasCheckbox:{type:Boolean,default:!1},dataLocator:{type:String,default:"accordion"},icon:{type:String,default:""},showCount:{type:Boolean,default:!1},count:{type:[String,Number],default:""}},emits:["click","checkbox-change"],data:function(t){return{isOpened:t.opened,isChecked:!1}},computed:{themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)},modClass:function(){return this.type?(t={},e="afs-accordion_".concat(this.type),n=!!this.type,e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t):{};var t,e,n},headerClasses:function(){return{"afs-accordion__main-header_is-opened":this.isOpened}},checkboxClasses:function(){return{"afs-accordion_checkbox":this.hasCheckbox}},classes:function(){return[this.themeClass,this.modClass,this.checkboxClasses,{"is-disabled":this.disabled}]}},methods:{getBEMClass:function(t){return Object(o.a)("afs-accordion",t)},handleClick:function(t){this.isOpened=!this.isOpened,this.$emit("click",{isOpened:this.isOpened,originalEvent:t})},open:function(t){this.isOpened=!0,this.$emit("click",{isOpened:this.isOpened,originalEvent:t})},close:function(t){this.isOpened=!1,this.$emit("click",{isOpened:this.isOpened,originalEvent:t})},enter:function(t){t.style.width=window.getComputedStyle(t).width,t.style.position="absolute",t.style.visibility="hidden",t.style.height="auto";var e=window.getComputedStyle(t).height;t.style.width=null,t.style.position=null,t.style.visibility=null,t.style.height=0,this.$nextTick((function(){return t.style.height=e}))},afterEnter:function(t){t.style.height="auto",this.$nextTick((function(){return t.removeAttribute("style")}))},leave:function(t){t.style.height=window.getComputedStyle(t).height,this.$nextTick((function(){return t.style.height=0}))},handleChangeCheckbox:function(t,e){this.$emit("checkbox-change",e)}}},d=(n(209),n(0)),h=Object(d.a)(f,r,[],!1,null,null,null).exports;e.a=h},function(t,e,n){"use strict";e.a=function(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}},function(t,e,n){var r=n(57),o=n(142),i=n(141),a=n(228)("src"),s=n(563),c=(""+s).split("toString");n(89).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(u&&(i(n,a)||o(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,n){var r=n(11),o=n(58),i=n(175),a=/"/g,s=function(t,e,n,r){var o=String(i(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},function(t,e,n){"use strict";n(90)},function(t,e,n){"use strict";n.d(e,"j",(function(){return h})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"f",(function(){return v})),n.d(e,"e",(function(){return y})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return b})),n.d(e,"g",(function(){return w})),n.d(e,"a",(function(){return _}));var r=n(76),o=RegExp(["^(#","%CATALOGID%","%ID%","%PARENTID%","%REVISION_STATE_COLOR%","Fitted","supplier","mpn","url","lifecycleStatus","Price@.*","Quantity@.*","part)$","%CATALOGITEMUNIQUEID%"].join("|")),i=function(t){return!o.test(t)},a=n(212);function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=new(0,window.__APP__.library.Vuex.Store)({state:{search:"",sortBy:null,items:[],columns:[],currency:null,isLiveDataFailed:!1,isActive:!1,expanded:[],selectedItemId:null},getters:{search:function(t){return t.search},trimmedSearch:function(t,e){return e.search.trim()},currency:function(t){return t.currency},columns:function(t){return t.columns},isLiveDataFailed:function(t){return t.isLiveDataFailed},visibleColumns:function(t){return t.columns.filter((function(t){return t.visible}))},sortedItems:function(t){return null!==t.sortBy?t.items.sort(Object(a.a)(t.sortBy.col,t.sortBy.isAsc)):t.items.slice()},body:function(t,e){return e.sortedItems.reduce((function(n,o){var i,a,s,c,u,f,d,h=o.parameters;return h.catalogId=h["%CATALOGID%"].firstValue(),h.id=(null===(i=h.ItemGUID)||void 0===i?void 0:i.firstValue())||h.catalogId,h.isFocused=null===(a=h["%ID%"])||void 0===a?void 0:a.has(t.selectedItemId),h.alternateParts=o.alternateParts&&Object.values(o.alternateParts).map((function(e,n){var o,i,a=e.parameters;return l(l({},a),{},{id:(null===(o=a.ItemGUID)||void 0===o?void 0:o.firstValue())||Object(r.d)("".concat(h.id,"-").concat(n)),isFocused:null===(i=a["%ID%"])||void 0===i?void 0:i.has(t.selectedItemId)})})),e.trimmedSearch.length>0&&!e.visibleColumns.some((function(t){var n,r,o;return null===(n=h[t.id])||void 0===n||null===(r=n.toString())||void 0===r||null===(o=r.toLowerCase())||void 0===o?void 0:o.includes(e.trimmedSearch.toLowerCase())}))||(n.rows.push(h),n.totalNames++,n.totalQuantity+=Number(h.Quantity),n.totalPrice+=Number(null!==(s=h.Price)&&void 0!==s?s:0),n.pricePerBoard+=(Number(null===(c=o.manufacturers)||void 0===c||null===(u=c[0])||void 0===u||null===(f=u.suppliers)||void 0===f||null===(d=f[0])||void 0===d?void 0:d.unitPrice)||0)*Number(h.Quantity)),n}),{rows:[],totalNames:0,totalQuantity:0,totalPrice:0,pricePerBoard:0})},rows:function(t,e){var n;return null==e||null===(n=e.body)||void 0===n?void 0:n.rows},totalNames:function(t,e){var n;return null==e||null===(n=e.body)||void 0===n?void 0:n.totalNames},totalPrice:function(t,e){var n;return null==e||null===(n=e.body)||void 0===n?void 0:n.totalPrice},pricePerBoard:function(t,e){var n;return null==e||null===(n=e.body)||void 0===n?void 0:n.pricePerBoard},totalQuantity:function(t,e){var n;return Math.ceil(null==e||null===(n=e.body)||void 0===n?void 0:n.totalQuantity)}},mutations:{setItems:function(t,e){t.items=e,t.expanded=[]},setActive:function(t,e){t.isActive=e},setSelectedItem:function(t,e){t.selectedItemId=e?(null==e?void 0:e.systemBomId)||t.items.reduce((function(t,n){var r,o;return t||(null===(r=n.parameters.Designator)||void 0===r||null===(o=r.findItem(e))||void 0===o?void 0:o.id)}),null):null},setIsLiveDataFailed:function(t,e){t.isLiveDataFailed=e},setSort:function(t,e){var n,r;t.sortBy={col:e.id,isAsc:e.id===(null===(n=t.sortBy)||void 0===n?void 0:n.col)&&!(null!==(r=t.sortBy)&&void 0!==r&&r.isAsc)}},setSearch:function(t,e){t.search=e},setCurrency:function(t,e){t.currency=e},setColumns:function(t,e){var n,o=e.items,a=e.columnAliases,c=e.visibleColumns,u=o.reduce((function(t,e){return Object.assign(t,Object.keys(e.parameters))}),{}),f=(null==c||null===(n=c.find((function(t){return"Base"===t.viewMode})))||void 0===n?void 0:n.columns.filter((function(t){return i(t.name)})).map((function(t){return Object(r.c)(t,!0)})))||r.a;t.columns=Object.values(u).sort((function(t,e){return t.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})})).reduce((function(t,e){return i(e)&&function(t){return function(e){return!t.some((function(t){return t.id.toLowerCase()===e.toLowerCase()}))}}(f)(e)?t.concat(Object(r.c)({name:e,width:120})):t}),[r.b].concat(s(f))).map((function(t){return l(l({},t),{},{text:a[t.id]||t.text})}))},toggleExpander:function(t,e){var n=t.expanded.indexOf(e);n>=0?t.expanded.splice(n,1):t.expanded.push(e)}}}),h=function(t){return d.commit("setSelectedItem",t)},p=function(t){return d.commit("setIsLiveDataFailed",t)},m=function(t){return d.commit("setItems",t)},v=function(t){return d.commit("setColumns",t)},y=function(){return d.getters.visibleColumns},g=function(){return d.getters.body},b=function(){return d.getters.rows},w=function(t){return d.commit("setCurrency",t)},_=function(){return d.commit("setActive",!0)};e.b=d},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(22);function o(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(r.isURLSearchParams(e))i=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))})))})),i=a.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}},function(t,e,n){"use strict";var r=n(22),o=n(196),i=n(197),a=n(128),s=n(198),c=n(201),u=n(202),l=n(131),f=n(82),d=n(83);t.exports=function(t){return new Promise((function(e,n){var h,p=t.data,m=t.headers,v=t.responseType;function y(){t.cancelToken&&t.cancelToken.unsubscribe(h),t.signal&&t.signal.removeEventListener("abort",h)}r.isFormData(p)&&delete m["Content-Type"];var g=new XMLHttpRequest;if(t.auth){var b=t.auth.username||"",w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+w)}var _=s(t.baseURL,t.url);function O(){if(g){var r="getAllResponseHeaders"in g?c(g.getAllResponseHeaders()):null,i={data:v&&"text"!==v&&"json"!==v?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:t,request:g};o((function(t){e(t),y()}),(function(t){n(t),y()}),i),g=null}}if(g.open(t.method.toUpperCase(),a(_,t.params,t.paramsSerializer),!0),g.timeout=t.timeout,"onloadend"in g?g.onloadend=O:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(O)},g.onabort=function(){g&&(n(l("Request aborted",t,"ECONNABORTED",g)),g=null)},g.onerror=function(){n(l("Network Error",t,null,g)),g=null},g.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||f.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(l(e,t,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},r.isStandardBrowserEnv()){var S=(t.withCredentials||u(_))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;S&&(m[t.xsrfHeaderName]=S)}"setRequestHeader"in g&&r.forEach(m,(function(t,e){void 0===p&&"content-type"===e.toLowerCase()?delete m[e]:g.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(g.withCredentials=!!t.withCredentials),v&&"json"!==v&&(g.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&g.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(h=function(t){g&&(n(!t||t&&t.type?new d("canceled"):t),g.abort(),g=null)},t.cancelToken&&t.cancelToken.subscribe(h),t.signal&&(t.signal.aborted?h():t.signal.addEventListener("abort",h))),p||(p=null),g.send(p)}))}},function(t,e,n){"use strict";var r=n(129);t.exports=function(t,e,n,o,i){var a=new Error(t);return r(a,e,n,o,i)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t,e){e=e||{};var n={};function o(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function i(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:o(void 0,t[n]):o(t[n],e[n])}function a(t){if(!r.isUndefined(e[t]))return o(void 0,e[t])}function s(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:o(void 0,t[n]):o(void 0,e[n])}function c(n){return n in e?o(t[n],e[n]):n in t?o(void 0,t[n]):void 0}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=u[t]||i,o=e(t);r.isUndefined(o)&&e!==c||(n[t]=o)})),n}},function(t,e){t.exports={version:"0.25.0"}},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return w}));var r=n(30);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function l(t){var e=m();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,y(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,t)})(t)}function p(t,e,n){return(p=m()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&v(o,n.prototype),o}).apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g,b=function(t){u(n,t);var e=l(n);function n(){return c(this,n),e.call(this,"Cancelled")}return s(n)}(h(Error)),w=function(t){u(n,t);var e=l(n);function n(){var t;c(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return i(d(t=e.call.apply(e,[this].concat(o))),"_isCancellationRequested",!1),t}return s(n,[{key:"isCancellationRequested",get:function(){return this._isCancellationRequested},set:function(t){this._isCancellationRequested||t!==this._isCancellationRequested&&(this._isCancellationRequested=t,this.emit("cancel"))}},{key:"throwIfCancellationRequested",value:function(){if(this.isCancellationRequested)throw new b}}]),n}(r.a);i(w,"default",(g=new w,Object.defineProperty(g,"isCancellationRequested",{get:function(){return!1},set:function(){},enumerable:!0,configurable:!0}),g))},function(t,e,n){"use strict";e.a=function(){return["","","-","-","-","-","","",""].reduce((function(t,e){return t+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+e}))}},function(t,e,n){"use strict";var r=n(6);e.a=function(t){return r.I||t?r.I.replace("{name}",t).replace("{size}","px48x48"):""}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return i}));var i=function(){function t(e,n,o,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0];r(this,t),this.center=e,this.angles=n,this.radius=o,this.width=i,this.material=a,this.z=s}var e,n,i;return e=t,i=[{key:"createCircleStroke",value:function(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,.5],s=[e,n],c=[0,2*Math.PI];return new t(s,c,r,i,o,a)}},{key:"createCircleFill",value:function(e,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,.5],a=[e,n],s=[0,2*Math.PI];return new t(a,s,r/2,r,o,i)}}],(n=null)&&o(e.prototype,n),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(95),o=n(227);t.exports=n(94)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(263),o=n(175);t.exports=function(t){return r(o(t))}},function(t,e,n){"use strict";n(97)},function(t,e,n){"use strict";n(98)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"toRgbaArray",value:function(t){if(!t)return this.defaultColor;if("#"===t[0])return this.hexToRgb(t);var e=t.indexOf("rgb(");if(e>-1){var n=t.substring(e).split(","),r=parseInt(n[0].substring(4).trim(),10),o=parseInt(n[1].trim(),10),i=parseInt(n[2].substring(0,n[2].length-1).trim(),10);return new Uint8Array([r,o,i,255])}if((e=t.indexOf("rgba("))>-1){n=t.substring(e).split(","),r=parseInt(n[0].substring(5).trim(),10),o=parseInt(n[1].trim(),10),i=parseInt(n[2].trim(),10);var a=255*parseFloat(n[3].substring(0,n[3].length-1).trim())|0;return new Uint8Array([r,o,i,a])}return this.defaultColor}},{key:"hexToRgb",value:function(t){t=this.normalizeHex(t);var e=parseInt(t.substr(1,2),16),n=parseInt(t.substr(3,2),16),r=parseInt(t.substr(5,2),16);return new Uint8Array([e,n,r,255])}},{key:"normalizeHex",value:function(t){return 4==t.length&&(t=t.replace(this.hexTripletRe,"#$1$1$2$2$3$3")),t.toLowerCase()}},{key:"toGrayscale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:77,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:151,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:28,o=new Uint8Array([255,255,255,255]);if("string"==typeof t&&(o=this.toRgbaArray(t)),!(Array.isArray(t)||t instanceof Uint8Array))return o;o=t;var i=Math.min(o[0]*e+o[1]*n+o[2]*r>>8,255);return new Uint8Array([i,i,i,o[3]])}},{key:"rgbaToHex",value:function(t){var e="#";if("string"==typeof t){var n=t.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);if(!n)return t;var r=(n&&n[4]||"").trim();return e=e+(256|Number(n[1])).toString(16).slice(1)+(256|Number(n[2])).toString(16).slice(1)+(256|Number(n[3])).toString(16).slice(1),e+=(255*(""!==r?Number(r):1)|256).toString(16).slice(1)}return e=e+(256|t[0]).toString(16).slice(1)+(256|t[1]).toString(16).slice(1)+(256|t[2]).toString(16).slice(1),e+=(256|t[3]).toString(16).slice(1)}}],(n=null)&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();o(i,"hexTripletRe",/#(.)(.)(.)/),o(i,"defaultColor",new Uint8Array([0,0,0,255]))},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var r=320,o=function(){var t,e;return null!==(t=null===(e=document.getElementById("comments-panel"))||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:240};e.b=function(t){var e=t.data,n=t.isTools,i=void 0===n||n,a=t.menuStartHeight,s=t.isDetached,c=void 0!==s&&s,u=window.innerWidth,l=window.innerHeight,f={x:0,y:0},d=e||null,h=a||200;if(d){var p=d.top,m=d.left,v=d.width;c&&(m=u-r-o()-32,p=24);var y,g=m+v+336+238,b=m-336,w=m+v+16,_=i?p+36:p+40,O=_-h-50;y=_+h<=l?_:O>0?O:l-h-24,f.x=parseInt(g>u?b:w),f.y=parseInt(y)}return f}},function(t,e,n){"use strict";var r=n(62),o=n.n(r),i=n(118);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=window.__CORE__,l={json:"application/json",stream:"application/octet-stream",form:"application/x-www-form-urlencoded"};e.a=function(t){var e=t.baseURL,n=t.type,r=t.headers,a=t.withCredentials,c=t.data,f=o.a.create({baseURL:e,withCredentials:a||!1,headers:s({"Content-Type":l[n||"json"],Accept:"*/*"},r),data:c});return Object(i.a)(f),f.interceptors.response.use((function(t){return t}),(function(t){var e;return o.a.isCancel(t)?new Promise((function(){})):(401===(null==t||null===(e=t.response)||void 0===e?void 0:e.status)&&u.bus.emit("unAuthorized"),Promise.reject(t))})),f}},function(t,e,n){"use strict";var r=n(36);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,t);var e,n,o,c=s(u);function u(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,"Value cannot be null. (Parameter name: '".concat(t,"')"),r.a.ArgumentNull,!1,e)}return e=u,n&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(r.c);e.a=l},function(t,e,n){"use strict";var r=n(58);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,n){"use strict";n(103)},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return c}));var r=function(){return(0,this._self._c)(this.tag,{tag:"component"},[this._v("\n  "+this._s(this.displayValue)+"\n")])};r._withStripped=!0;var o=new Map([["DKK","kr"],["EUR","€"],["GBP","£"],["INR","₹"],["JPY","¥"],["KRW","₩"],["PLN","zł"],["RUB","₽"],["SEK","kr"],["USD","$"],["VND","₫"],["CNY","¥"]]),i=function(t,e){var n=parseFloat(t||"0"),r=function(t,e){if(isNaN(t))return 0;var n=t.toString().split(".");return n[1]?1*Number(n.join(".")+(n[1].length>=e?"1":"")).toFixed(e):t}(n,n>1?2:5);return e?o.has(e)?"".concat(o.get(e)).concat(r):"".concat(r," ").concat(e):"".concat(r)},a={props:{code:{type:String,required:!0,validator:function(t){return 3===t.length||2===t.length}},tag:{type:String,default:"span"},value:{type:String,required:!0,validator:function(t){return/^\d+(\.[\d]+)?$/.test(t)}}},computed:{displayValue:function(){return i(this.value,this.code)}}},s=n(0),c=Object(s.a)(a,r,[],!1,null,null,null).exports},function(t,e,n){"use strict";var r=n(2),o=n(37),i=function t(e,n){if(!Object(o.a)(e))return n;var r=function t(e){if(!Object(o.a)(e)){var n=document.querySelector("html");return n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight?window:null}var r=window.getComputedStyle(e).getPropertyValue("overflow"),i=r&&r.split(" ").some((function(t){return"auto"===t||"scroll"===t}));return(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&i?e:t(e.parentNode)}(e);return r?(n.push(r),t(r.parentNode,n)):n},a=function(t){var e=[];return i(t.parentNode,e),e},s=function(t){var e=a(t).map((function(t){return function(t){var e={x:0,y:0},n=function(t){return t.currentTarget===window?window.scrollTo(e.x,e.y):(t.currentTarget.scrollTop=e.y,t.currentTarget.scrollLeft=e.x),t.preventDefault(),!1};return{enable:function(){return t.removeEventListener("scroll",n)},disable:function(){e.y=t.scrollTop,e.x=t.scrollLeft,t.addEventListener("scroll",n)}}}(t)}));return e.length?{disable:function(){e.forEach((function(t){return t.disable()}))},enable:function(){e.forEach((function(t){return t.enable()}))}}:null},c={inserted:function(t,e,n){var o=e.arg,i=e.modifiers,a=n.context;if(!t.dataset.afsDropdownControl){t.dataset.afsDropdownControl=o;var c=i.open,u=i.close,l=function(){var e=r.b.get(o);if(e){var n=s(t),i=function t(){null==e||e.close(),window.removeEventListener("scroll",t)};c?null==e||e.open(t):u?null==e||e.close():null==e||e.toggle(t),n?window.addEventListener("scroll",i):window.removeEventListener("scroll",i)}};t.removeEventListener("click",l,!0),t.addEventListener("click",l,!0);try{a.$on("hook:beforeDestroy",(function(){var t=r.b.get(o);t&&(null==t||t.close())}))}catch(t){}}},beforeUnmount:function(t,e){var n=e.arg;if(n){var o=r.b.get(n);null==o||o.close()}}};e.a=c},function(t,e,n){"use strict";e.a=function(t){return Array.isArray(t)&&t.length?t.map((function(t){return{id:null==t?void 0:t.id,name:null==t?void 0:t.fileName,order:(null==t?void 0:t.order)||0}})):[]}},function(t,e,n){var r=n(156);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(264),o=n(227),i=n(143),a=n(188),s=n(141),c=n(466),u=Object.getOwnPropertyDescriptor;e.f=n(94)?u:function(t,e){if(t=i(t),e=a(e,!0),c)try{return u(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(11),o=n(89),i=n(58);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},function(t,e,n){var r=n(155),o=n(263),i=n(113),a=n(79),s=n(482);t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,l=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,p){for(var m,v,y=i(e),g=o(y),b=r(s,p,3),w=a(g.length),_=0,O=n?h(e,w):c?h(e,0):void 0;w>_;_++)if((d||_ in g)&&(v=b(m=g[_],_,y),t))if(n)O[_]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return _;case 2:O.push(m)}else if(l)return!1;return f?-1:u||l?l:O}}},function(t,e,n){"use strict";n(107)},function(t,e,n){"use strict";n(108)},function(t,e,n){"use strict";n(109)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=u(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return p}));var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(u,t);var e,n,r,i=f(u);function u(){return a(this,u),i.apply(this,arguments)}return e=u,r=[{key:"sortDesignators",value:function(t,e){return t.designator.localeCompare(e.designator,void 0,{numeric:!0,sensitivity:"base"})}}],(n=[{key:"push",value:function(t){return c(h(u.prototype),"push",this).call(this,t)}},{key:"setDefaultSort",value:function(){return c(h(u.prototype),"setSort",this).call(this,u.sortDesignators)}},{key:"toString",value:function(){return this.toArray().map((function(t){return t.designator})).join(", ")}},{key:"getItem",value:function(t){return this.toArray().find((function(e){return e.id===t}))}},{key:"findItem",value:function(t){var e=t.schId,n=t.hash,r=t.subParts,i=[e||n].concat(o((null==r?void 0:r.map((function(t){return t.schId})))||[]));return this.toArray().find((function(t){return t.uniqueIdName.includes("@")?i.some((function(e){return t.uniqueIdName.startsWith(e)})):i.includes(t.uniqueIdName)}))}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(n(61).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r="fabricationId",o="gerberId"},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(319);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"selectedPath",null)}var e,n,a;return e=t,a=[{key:"join",value:function(e){var n=new t;n.selectedPath=[];for(var r=0;r<e.length;r++){var o;null===(o=e[r].selectedPath)||void 0===o||o.forEach((function(t){var e;return null===(e=n.selectedPath)||void 0===e?void 0:e.push(t)}))}return n}},{key:"getPathForGroup",value:function(e){return t.getPathBBox(e,0)}},{key:"getPathForLine",value:function(e){return t.getPathBBox(e,3)}},{key:"getPathForEllipse",value:function(e){return t.getPathBBox(e,3)}},{key:"getPathForPolyLine",value:function(e){var n=new t;n.selectedPath=[];for(var o=0;o<e.points.length-1;o++){var i=e.points[o],a=e.points[o+1],s=r.a.fromPoints(i.x,i.y,a.x,a.y,3);n.selectedPath.push(s)}return n}},{key:"getPathForPolygon",value:function(e){return t.getPathBBox(e,3)}},{key:"getPathForRect",value:function(e){return t.getPathBBox(e,3)}},{key:"getPathForPath",value:function(e){return t.getPathBBox(e,3)}},{key:"getPathBBox",value:function(e,n){var o=new t,i=e.getBBox(),a=r.a.fromBox(i,n);return o.selectedPath=[a],o}}],(n=[{key:"createSvgElement",value:function(t){if(!this.selectedPath)return null;if(1===this.selectedPath.length){var e=this.selectedPath[0].createSvgElement(0);return t(e),e}var n=document.createElementNS("http://www.w3.org/2000/svg","g");return this.selectedPath.forEach((function(e){var r=e.createSvgElement(0);t(r),n.appendChild(r)})),n}},{key:"test",value:function(t){if(!this.selectedPath)return!1;for(var e=0;e<this.selectedPath.length;e++){var n=this.selectedPath[e];if(n.x<=t.x&&t.x<=n.x+n.width&&n.y<=t.y&&t.y<=n.y+n.height)return!0}return!1}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();i(a,"margin",3)},function(t,e,n){},function(t,e,n){"use strict";var r={alpha:"alpha",beta:"success",new:"new"};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.toLowerCase();return{text:o,variant:"filled",type:r[o]||"success",uppercase:n,size:e}}},function(t,e,n){"use strict";var r=function(){return(0,this._self._c)(this.tag,{tag:"component",staticClass:"afs-badge",class:this.classes,attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};r._withStripped=!0;var o=n(1),i=n(3),a=n(2);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={default:"",xs:"xs",small:"small",middle:"middle"},u={default:"",base:"base",pro:"pro",success:"success",alpha:"alpha",new:"new"},l={name:"AfsBadge",props:{tag:{type:String,default:"div"},size:{type:String,default:c.default,validator:function(t){return Object.values(c).includes(t)}},type:{type:String,default:u.default,validator:function(t){return Object.values(u).includes(t)}},uppercase:{type:Boolean,default:!1},radius:{type:String,default:"".concat(a.d.tl," ").concat(a.d.tr," ").concat(a.d.bl," ").concat(a.d.br)},dataLocator:{type:String,default:"badge"}},computed:{classes:function(){return[this.type&&s({},"afs-badge_".concat(this.type),!!this.type.length),this.size&&s({},"afs-badge_".concat(this.size),!!this.size.length),Object(o.b)("afs-badge",this.radius),this.uppercase&&"afs-badge_uppercase",this.themeClass]},themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)}}},f=(n(255),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null).exports;e.a=d},function(t,e,n){"use strict";e.a=function(t,e){return t}},function(t,e,n){"use strict";e.a=function(t){switch("string"==typeof t&&(t=t.trim().toLowerCase()),t){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n(119),o=n(126),i=function(t){return t.replace(/\\([\s\S])|(")/,"\\$1$2")},a=function(t){return s(Object(o.c)().rows,Object(o.e)(),t.fileName)},s=function(t,e,n){var o=e.filter((function(t){return"id"!==t.id})),a=o.map((function(t){return'"'.concat(i(t.text),'"')}),"").join(","),s=t.reduce((function(t,e){return t+o.map((function(t){return e[t.id]?'"'.concat(i(e[t.id].toString()),'"'):""})).join(",")+"\n"}),a+"\n");Object(r.saveAs)(new Blob([s],{type:"text/csv;charset=utf-8"}),n)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i}));var r=n(237),o=n.n(r);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0;return o()(t,e,{leading:n})}n.d(e,"a",(function(){return o.a}))},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";if(n(94)){var r=n(229),o=n(57),i=n(58),a=n(11),s=n(331),c=n(412),u=n(155),l=n(253),f=n(227),d=n(142),h=n(254),p=n(157),m=n(79),v=n(493),y=n(231),g=n(188),b=n(141),w=n(265),_=n(60),O=n(113),S=n(404),x=n(232),C=n(234),E=n(233).f,k=n(406),T=n(228),P=n(70),j=n(160),A=n(321),M=n(266),L=n(408),I=n(251),D=n(324),R=n(252),N=n(407),B=n(484),F=n(95),U=n(158),$=F.f,G=U.f,V=o.RangeError,z=o.TypeError,H=o.Uint8Array,W=Array.prototype,Y=c.ArrayBuffer,q=c.DataView,X=j(0),Z=j(2),K=j(3),J=j(4),Q=j(5),tt=j(6),et=A(!0),nt=A(!1),rt=L.values,ot=L.keys,it=L.entries,at=W.lastIndexOf,st=W.reduce,ct=W.reduceRight,ut=W.join,lt=W.sort,ft=W.slice,dt=W.toString,ht=W.toLocaleString,pt=P("iterator"),mt=P("toStringTag"),vt=T("typed_constructor"),yt=T("def_constructor"),gt=s.CONSTR,bt=s.TYPED,wt=s.VIEW,_t=j(1,(function(t,e){return Et(M(t,t[yt]),e)})),Ot=i((function(){return 1===new H(new Uint16Array([1]).buffer)[0]})),St=!!H&&!!H.prototype.set&&i((function(){new H(1).set({})})),xt=function(t,e){var n=p(t);if(n<0||n%e)throw V("Wrong offset!");return n},Ct=function(t){if(_(t)&&bt in t)return t;throw z(t+" is not a typed array!")},Et=function(t,e){if(!_(t)||!(vt in t))throw z("It is not a typed array constructor!");return new t(e)},kt=function(t,e){return Tt(M(t,t[yt]),e)},Tt=function(t,e){for(var n=0,r=e.length,o=Et(t,r);r>n;)o[n]=e[n++];return o},Pt=function(t,e,n){$(t,e,{get:function(){return this._d[n]}})},jt=function(t){var e,n,r,o,i,a,s=O(t),c=arguments.length,l=c>1?arguments[1]:void 0,f=void 0!==l,d=k(s);if(null!=d&&!S(d)){for(a=d.call(s),r=[],e=0;!(i=a.next()).done;e++)r.push(i.value);s=r}for(f&&c>2&&(l=u(l,arguments[2],2)),e=0,n=m(s.length),o=Et(this,n);n>e;e++)o[e]=f?l(s[e],e):s[e];return o},At=function(){for(var t=0,e=arguments.length,n=Et(this,e);e>t;)n[t]=arguments[t++];return n},Mt=!!H&&i((function(){ht.call(new H(1))})),Lt=function(){return ht.apply(Mt?ft.call(Ct(this)):Ct(this),arguments)},It={copyWithin:function(t,e){return B.call(Ct(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return J(Ct(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(Ct(this),arguments)},filter:function(t){return kt(this,Z(Ct(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Q(Ct(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){X(Ct(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Ct(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(Ct(this),arguments)},lastIndexOf:function(t){return at.apply(Ct(this),arguments)},map:function(t){return _t(Ct(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Ct(this),arguments)},reduceRight:function(t){return ct.apply(Ct(this),arguments)},reverse:function(){for(var t,e=Ct(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return K(Ct(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(Ct(this),t)},subarray:function(t,e){var n=Ct(this),r=n.length,o=y(t,r);return new(M(n,n[yt]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,m((void 0===e?r:y(e,r))-o))}},Dt=function(t,e){return kt(this,ft.call(Ct(this),t,e))},Rt=function(t){Ct(this);var e=xt(arguments[1],1),n=this.length,r=O(t),o=m(r.length),i=0;if(o+e>n)throw V("Wrong length!");for(;i<o;)this[e+i]=r[i++]},Nt={entries:function(){return it.call(Ct(this))},keys:function(){return ot.call(Ct(this))},values:function(){return rt.call(Ct(this))}},Bt=function(t,e){return _(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ft=function(t,e){return Bt(t,e=g(e,!0))?f(2,t[e]):G(t,e)},Ut=function(t,e,n){return!(Bt(t,e=g(e,!0))&&_(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?$(t,e,n):(t[e]=n.value,t)};gt||(U.f=Ft,F.f=Ut),a(a.S+a.F*!gt,"Object",{getOwnPropertyDescriptor:Ft,defineProperty:Ut}),i((function(){dt.call({})}))&&(dt=ht=function(){return ut.call(this)});var $t=h({},It);h($t,Nt),d($t,pt,Nt.values),h($t,{slice:Dt,set:Rt,constructor:function(){},toString:dt,toLocaleString:Lt}),Pt($t,"buffer","b"),Pt($t,"byteOffset","o"),Pt($t,"byteLength","l"),Pt($t,"length","e"),$($t,mt,{get:function(){return this[bt]}}),t.exports=function(t,e,n,c){var u=t+((c=!!c)?"Clamped":"")+"Array",f="get"+t,h="set"+t,p=o[u],y=p||{},g=p&&C(p),b=!p||!s.ABV,O={},S=p&&p.prototype,k=function(t,n){$(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[f](n*e+r.o,Ot)}(this,n)},set:function(t){return function(t,n,r){var o=t._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[h](n*e+o.o,r,Ot)}(this,n,t)},enumerable:!0})};b?(p=n((function(t,n,r,o){l(t,p,u,"_d");var i,a,s,c,f=0,h=0;if(_(n)){if(!(n instanceof Y||"ArrayBuffer"==(c=w(n))||"SharedArrayBuffer"==c))return bt in n?Tt(p,n):jt.call(p,n);i=n,h=xt(r,e);var y=n.byteLength;if(void 0===o){if(y%e)throw V("Wrong length!");if((a=y-h)<0)throw V("Wrong length!")}else if((a=m(o)*e)+h>y)throw V("Wrong length!");s=a/e}else s=v(n),i=new Y(a=s*e);for(d(t,"_d",{b:i,o:h,l:a,e:s,v:new q(i)});f<s;)k(t,f++)})),S=p.prototype=x($t),d(S,"constructor",p)):i((function(){p(1)}))&&i((function(){new p(-1)}))&&D((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=n((function(t,n,r,o){var i;return l(t,p,u),_(n)?n instanceof Y||"ArrayBuffer"==(i=w(n))||"SharedArrayBuffer"==i?void 0!==o?new y(n,xt(r,e),o):void 0!==r?new y(n,xt(r,e)):new y(n):bt in n?Tt(p,n):jt.call(p,n):new y(v(n))})),X(g!==Function.prototype?E(y).concat(E(g)):E(y),(function(t){t in p||d(p,t,y[t])})),p.prototype=S,r||(S.constructor=p));var T=S[pt],P=!!T&&("values"==T.name||null==T.name),j=Nt.values;d(p,vt,!0),d(S,bt,u),d(S,wt,!0),d(S,yt,p),(c?new p(1)[mt]==u:mt in S)||$(S,mt,{get:function(){return u}}),O[u]=p,a(a.G+a.W+a.F*(p!=y),O),a(a.S,u,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*i((function(){y.of.call(p,1)})),u,{from:jt,of:At}),"BYTES_PER_ELEMENT"in S||d(S,"BYTES_PER_ELEMENT",e),a(a.P,u,It),R(u),a(a.P+a.F*St,u,{set:Rt}),a(a.P+a.F*!P,u,Nt),r||S.toString==dt||(S.toString=dt),a(a.P+a.F*i((function(){new p(1).slice()})),u,{slice:Dt}),a(a.P+a.F*(i((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!i((function(){S.toLocaleString.call([1,2])}))),u,{toLocaleString:Lt}),I[u]=P?T:j,r||P||d(S,pt,j)}}else t.exports=function(){}},function(t,e,n){"use strict";n(117)},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this;return(0,t._self._c)("AfsButton",t._b({staticClass:"comment-panel__btn-register",on:{click:t.onSignupClick}},"AfsButton",t.btnProps,!1),[t._t("default",(function(){return[t._v("Register in Altium 365")]}))],2)};r._withStripped=!0;var o=n(38),i=n(12),a={name:"SignupButton",components:{AfsButton:o.a},props:{btnProps:{type:Object,default:function(){return{}}},url:{type:String,default:""},sendFrom:{type:String,default:""},openedFrom:{type:String,default:"embed"}},methods:{onSignupClick:function(){i.a.emit("signup:redirect",{sendFrom:this.sendFrom}),this.url&&window.open("".concat(this.url,"?openedFrom=").concat(this.openedFrom,".").concat(this.sendFrom),"_blank")}}},s=n(0),c=Object(s.a)(a,r,[],!1,null,null,null);e.default=c.exports},function(t,e,n){"use strict";e.a=[{id:1,color:"#EC4025",isSelected:!0},{id:2,color:"#F29737",isSelected:!1},{id:3,color:"#FEFA53",isSelected:!1},{id:4,color:"#6EF44A",isSelected:!1},{id:5,color:"#6FF9FD",isSelected:!1},{id:6,color:"#0D39F5",isSelected:!1},{id:7,color:"#EC56F7",isSelected:!1},{id:8,color:"#FFFFFF",isSelected:!1},{id:9,color:"#000000",isSelected:!1}]},function(t,e,n){"use strict";e.a=[{id:1,thickness:2,isSelected:!0},{id:2,thickness:4,isSelected:!1},{id:3,thickness:8,isSelected:!1}]},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comments-tools",class:{"pointer-events-none":t.isDrawingActive}},[t._l(t.shownButtons,(function(n,r,o){return[o?e("div",{key:"".concat(n.id,"-").concat(r),staticClass:"comments-tools__separator"}):t._e(),t._v(" "),e("button",{key:n.id,staticClass:"comments-tools__btn",class:{"is-selected":n.isSelected,"is-mark":n.isMark},attrs:{title:n.title,disabled:t.isLoading,type:"button"},on:{click:function(e){return t.onBtnClick(r)}}},[e("AfsIcon",{staticClass:"comments-tools__icon",attrs:{name:n.icon}}),t._v(" "),n.isMark&&t.isShowMark?e("div",{staticClass:"comments-tools__btn-hint"},[t._v("\n        Your comment is still available\n      ")]):t._e()],1)]})),t._v(" "),t.isPaint?[e("div",{staticClass:"comments-tools__separator"}),t._v(" "),e("ColorPicker",{attrs:{disabled:t.isLoading},on:{"current-color":t.onStartColorPicker}}),t._v(" "),e("LinePicker",{attrs:{disabled:t.isLoading},on:{"current-line":t.onStartLinePicker}}),t._v(" "),e("div",{staticClass:"comments-tools__separator"}),t._v(" "),e("button",{staticClass:"comments-tools__btn",attrs:{disabled:!t.isDrawing||t.isLoading,title:"Delete Drawing",type:"button"},on:{click:t.onDeleteDrawing}},[e("AfsIcon",{staticClass:"comments-tools__icon",attrs:{name:"trash-16"}})],1),t._v(" "),e("AfsButton",{staticClass:"comments-tools__btn comments-tools__btn-post",attrs:{disabled:!t.hasPost,"is-busy":t.isLoading,primary:""},on:{click:t.onPost}},[t._v("\n      Post\n    ")]),t._v(" "),e("button",{staticClass:"comments-tools__btn",attrs:{disabled:t.isLoading,title:"Close comment without saving changes",type:"button"},on:{click:t.onClose}},[e("AfsIcon",{staticClass:"comments-tools__icon",attrs:{name:"cross-16"}})],1)]:t._e()],2)};r._withStripped=!0;var o=n(38),i=n(4),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"color-picker"},[e("button",{directives:[{name:"dropdown",rawName:"v-dropdown:pickerDropMenu",arg:"pickerDropMenu"}],staticClass:"color-picker__btn",attrs:{disabled:t.disabled,title:"Line Color",type:"button"}},[e("div",{staticClass:"color-picker__square",style:{"background-color":t.currentColor}})]),t._v(" "),e("AfsContextMenu",{ref:"pickerDropContextMenu",attrs:{id:"pickerDropMenu",type:"dropdown","init-width":"98",modifiers:{y:"bottom",x:"center"},offset:8},on:{open:t.pickerDropOpen}},[e("div",{staticClass:"color-picker__align-btn"},[t._l(t.colors,(function(n,r){return[e("button",{key:n.id,staticClass:"color-picker__btn",class:{"is-selected":n.isSelected},attrs:{type:"button"},on:{click:function(e){return t.onBtnClick(r)}}},[e("div",{staticClass:"color-picker__square",style:{"background-color":n.color}})])]}))],2)])],1)};a._withStripped=!0;var s=n(8),c=n(48),u=n.n(c),l=n(179),f={name:"ColorPicker",directives:{dropdown:u.a},components:{AfsContextMenu:s.a},props:{disabled:{type:Boolean,default:!1}},data:function(){return{isOpened:!1,positionDropdown:{x:0,y:0},colors:l.a}},computed:{currentColor:function(){return this.colors.find((function(t){return t.isSelected})).color||this.colors[0].color}},mounted:function(){var t=this.colors.find((function(t){return t.isSelected}))||{};this.$emit("current-color",{id:t.id})},methods:{pickerDropOpen:function(){this.isOpened=!0},pickerDropClose:function(){this.isOpened=!1},toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.isOpened||(this.isOpened=!0,this.$refs.pickerDropContextMenu.open(),this.$emit("open"))},close:function(){this.isOpened&&(this.isOpened=!1,this.$refs.pickerDropContextMenu.close(),this.$emit("close"))},onBtnClick:function(t){for(var e in this.colors)this.colors[e].isSelected=!1;this.colors[t].isSelected=!0,this.$emit("current-color",{id:this.colors[t].id}),this.close()}}},d=(n(435),n(0)),h=Object(d.a)(f,a,[],!1,null,null,null).exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"line-picker"},[e("button",{directives:[{name:"dropdown",rawName:"v-dropdown:lineDropMenu",arg:"lineDropMenu"}],staticClass:"line-picker__main-btn",attrs:{disabled:t.disabled,title:"Line Width",type:"button"}},[e("Icon",{staticClass:"line-picker__icon",attrs:{name:"thickness"}})],1),t._v(" "),e("AfsContextMenu",{ref:"lineDropContextMenu",attrs:{id:"lineDropMenu",type:"dropdown","init-width":"128",modifiers:{y:"bottom",x:"center"},offset:8},on:{open:t.lineDropOpen}},[e("div",{staticClass:"line-picker__dropdown"},[t._l(t.lineThicknessData,(function(n,r){return[e("button",{key:n.id,staticClass:"line-picker__btn",attrs:{type:"button"},on:{click:function(e){return t.onBtnClick(r)}}},[e("Icon",{directives:[{name:"show",rawName:"v-show",value:n.isSelected,expression:"item.isSelected"}],staticClass:"line-picker__checkmark",attrs:{name:"checkmark"}}),t._v(" "),e("div",{staticClass:"line-picker__line",style:{height:"".concat(n.thickness,"px")}})],1)]}))],2)])],1)};p._withStripped=!0;var m=n(180),v={name:"LinePicker",directives:{dropdown:u.a},components:{Icon:i.a,AfsContextMenu:s.a},props:{disabled:{type:Boolean,default:!1}},data:function(){return{isOpened:!1,positionDropdown:{x:0,y:0},lineThicknessData:m.a}},mounted:function(){var t=this.lineThicknessData.find((function(t){return t.isSelected}))||{};this.$emit("current-line",{id:t.id})},methods:{lineDropOpen:function(){this.isOpened=!0},lineDropClose:function(){this.isOpened=!1},toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.isOpened||(this.isOpened=!0,this.$refs.lineDropContextMenu.open(),this.$emit("open"))},close:function(){this.isOpened&&(this.isOpened=!1,this.$refs.lineDropContextMenu.close(),this.$emit("close"))},onBtnClick:function(t){for(var e in this.lineThicknessData)this.lineThicknessData[e].isSelected=!1;this.lineThicknessData[t].isSelected=!0,this.$emit("current-line",{id:this.lineThicknessData[t].id}),this.close()}}},y=(n(436),Object(d.a)(v,p,[],!1,null,null,null).exports);function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var w=window.__CORE__,_={name:"CommentsTools",components:{AfsIcon:i.a,AfsButton:o.a,ColorPicker:h,LinePicker:y},props:{hasText:{type:Boolean,default:!1},isDrawing:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},editModes:{type:Array,default:function(){return["area","draw"]}},thread:{type:Array,default:function(){return[]}}},data:function(t){return{tempID:null,isShowMark:!1,isDrawingActive:!1,buttons:{area:{id:1,icon:"text-16",isSelected:!0,isMark:!1,type:"area",title:"Text Comment",fn:function(){return t.onStartArea()}},paint:{id:2,icon:"paint-16-2",isSelected:!1,isMark:!1,type:"draw",title:"Freehand Drawing",fn:function(){return t.onStartDrawing()}}}}},computed:{isPaint:function(){return this.buttons.paint.isSelected},hasPost:function(){return(this.hasText||this.isDrawing||this.thread.length)&&!this.isLoading},shownButtons:function(){if(!this.editModes)return this.buttons;var t=Object.entries(this.buttons),e=this.editModes.reduce((function(e,n){var r=t.find((function(t){var e=g(t,2);e[0];return e[1].type===n})),o=g(r,2),i=o[0],a=o[1];return e[i]=a,e}),{});return 1===Object.entries(e).length?{}:e}},watch:{isPaint:{handler:function(t){t?(this.buttons.area.isMark=this.hasText,this.delay(this.hasText)):(this.delay(),this.buttons.area.isMark=!1),this.$emit("paint-mode",t)}},isLoading:function(t){t&&this.isPaint&&w.bus.emit("CommentsDrawingEngine:changeEditMode")}},created:function(){w.bus.on("CommentsDrawingEngine:startDraw",this.toggleDrawingActive),w.bus.on("CommentsDrawingEngine:endDraw",this.toggleDrawingActive)},destroyed:function(){w.bus.off("CommentsDrawingEngine:startDraw",this.toggleDrawingActive),w.bus.off("CommentsDrawingEngine:endDraw",this.toggleDrawingActive)},methods:{onBtnClick:function(t){for(var e in this.buttons)this.buttons[e].isSelected=!1;this.buttons[t].isSelected=!0,this.buttons[t].fn()},onStartArea:function(){w.bus.emit("CommentsDrawingEngine:changeEditMode","text"),this.$emit("mode-text",!0)},onStartDrawing:function(){w.bus.emit("CommentsDrawingEngine:changeEditMode","drawing"),this.$emit("mode-text",!1)},onStartColorPicker:function(t){w.bus.emit("CommentsDrawingEngine:startColorPicker",t)},onStartLinePicker:function(t){w.bus.emit("CommentsDrawingEngine:startLinePicker",t)},onDeleteDrawing:function(){w.bus.emit("CommentsDrawingEngine:deleteDrawing")},onPost:function(){this.hasPost&&this.$emit("confirm")},onClose:function(){this.onDeleteDrawing(),this.onBtnClick("area"),this.$emit("close")},delay:function(t){var e=this;clearInterval(this.tempID),t?this.tempID=setTimeout((function(){e.isShowMark=!0}),4e3):this.isShowMark=!1},toggleDrawingActive:function(){this.isDrawingActive=!this.isDrawingActive}}},O=(n(437),Object(d.a)(_,r,[],!1,null,"13c48844",null));e.a=O.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("GridContainer",{staticClass:"placeholder",attrs:{size:"fullscreen","center-content":""}},[e("GridContainer",[e("ContentPlaceholder",{attrs:{"icon-size":"lg"},scopedSlots:t._u([{key:"title",fn:function(){return[t._t("icon",(function(){return[e("Icon",{staticClass:"placeholder__icon",attrs:{name:"comments"}})]})),t._v(" "),e("div",{staticClass:"placeholder__text"},[t._t("default")],2),t._v(" "),t.hasSlot("btns")?e("div",{staticClass:"placeholder__btns"},[t._t("btns")],2):t._e()]},proxy:!0}],null,!0)})],1)],1)};r._withStripped=!0;var o=n(56),i=n(211),a={name:"Placeholder",components:{Icon:n(4).a,GridContainer:o.b,ContentPlaceholder:i.a},methods:{hasSlot:function(t){return!!this.$slots[t]}}},s=(n(430),n(0)),c=Object(s.a)(a,r,[],!1,null,null,null);e.a=c.exports},function(t,e,n){"use strict";var r=function(){return(0,this._self._c)("div",{ref:"dragTitle",staticClass:"dragger-title"},[this._t("default")],2)};r._withStripped=!0;var o={name:"ModalDraggerTitle",data:function(){return{pos1:0,pos2:0,pos3:0,pos4:0,parent:null}},mounted:function(){this.$refs.dragTitle&&this.$refs.dragTitle.addEventListener("mousedown",this.dragMouseDown,!0)},beforeDestroy:function(){this.parent=null,this.$refs.dragTitle&&this.$refs.dragTitle.removeEventListener("mousedown",this.dragMouseDown)},methods:{dragMouseDown:function(t){this.parent=document.querySelector(".comments-modal"),this.parent&&((t=t||window.event).preventDefault(),this.pos3=t.clientX,this.pos4=t.clientY,document.addEventListener("mouseup",this.closeDragElement),document.addEventListener("mousemove",this.elementDrag,!0))},elementDrag:function(t){(t=t||window.event).preventDefault(),this.pos1=this.pos3-t.clientX,this.pos2=this.pos4-t.clientY,this.pos3=t.clientX,this.pos4=t.clientY;var e=parseInt(this.parent.offsetTop-this.pos2),n=parseInt(this.parent.offsetLeft-this.pos1);this.$emit("drag",{y:e,x:n})},closeDragElement:function(){document.removeEventListener("mouseup",this.closeDragElement),document.removeEventListener("mousemove",this.elementDrag,!0)}}},i=(n(434),n(0)),a=Object(i.a)(o,r,[],!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade","enter-class":"comments-modal_enter","enter-active-class":"comments-modal_enter-active","leave-to-class":"comments-modal_leave-to","leave-active-class":"comments-modal_leave-active"},on:{"after-leave":function(e){return t.$emit("after-close")}}},[t.isOpened?e("div",{directives:[{name:"inject",rawName:"v-inject"}],staticClass:"comments-modal",style:t.position,attrs:{"data-afs-modal":t.id}},[t._t("default")],2):t._e()])};r._withStripped=!0;var o=n(245),i=n.n(o),a=n(81),s={name:"AppModal",directives:{inject:i.a},components:{},props:{id:{type:[String,Number],default:"",required:!0},x:{type:[String,Number],default:"0",required:!0},y:{type:[String,Number],default:"0",required:!0},closeOnViewClick:{type:Boolean,default:!0}},data:function(){return{isOpened:!1}},computed:{position:function(){return{top:"".concat(this.y,"px"),left:"".concat(this.x,"px")}}},watch:{isOpened:{immediate:!0,handler:function(t){t?(document.addEventListener("mousedown",this.handleDocumentClick,!0),document.addEventListener("keyup",this.handleDocumentKey,!0),window.addEventListener("resize",this.handleDocumentResize),a.a.add(this)):(document.removeEventListener("mousedown",this.handleDocumentClick,!0),document.removeEventListener("keyup",this.handleDocumentKey,!0),window.removeEventListener("resize",this.handleDocumentResize),a.a.remove(this))}}},methods:{toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.isOpened||(this.isOpened=!0,this.$emit("open"))},close:function(){this.isOpened&&(this.isOpened=!1,this.$emit("close"))},handleDocumentKey:function(t){27===t.keyCode&&a.a.isLast(this)&&this.close()},handleDocumentClick:function(t){t&&(t.target.closest(".comments-modal")||t.target.closest(".afs-modal")||t.target.closest(".comment-item")||t.target.closest(".afs-context-menu")||t.target.closest(".main-icon-interaction-group"))||(t.target.closest(".app__view")?this.closeOnViewClick&&(t.stopPropagation(),this.close()):this.closeAllModal())},handleDocumentResize:function(){this.closeAllModal()},closeAllModal:function(){this.$emit("close-all-modal")}}},c=(n(438),n(0)),u=Object(c.a)(s,r,[],!1,null,"4e65662c",null);e.a=u.exports},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(207),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(64))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return h}));var r=n(225),o=n(120);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function h(){}function p(){}function m(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,a){function s(){return new e((function(r,s){!function r(o,a,s,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==i(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}(o,a,r,s)}))}return r=r?r.then(s,s):s()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,u(b,"constructor",m),u(m,"constructor",p),p.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),u(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function s(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var c=Object(r.b)("request");function u(t){t.text().then((function(e){return c.LogWarn("Response status: [".concat(t.status,"] ").concat(null==t?void 0:t.statusText,"; body: ").concat(e))}))}var l=function(t){return t().then((function(t){switch(null==t?void 0:t.status){case 200:return Promise.resolve(t);case 401:return new Promise((function(){window.__CORE__.bus.emit("unAuthorized")}));default:return u(t),Promise.reject(new Error("".concat(t.statusText)))}}))},f=function t(e,n){return function(){var r,i=(r=a().mark((function r(i){var s,l;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=function(){return n?n(e):5e3},0!==e){r.next=3;break}throw new Error("Too many requests sent.");case 3:return r.prev=3,r.next=6,i();case 6:if(200!==(null==(l=r.sent)?void 0:l.status)){r.next=11;break}return r.next=10,l.json();case 10:return r.abrupt("return",r.sent);case 11:u(l),r.t0=null==l?void 0:l.status,r.next=401===r.t0?15:429===r.t0||503===r.t0?17:22;break;case 15:throw window.__CORE__.bus.emit("unAuthorized"),new Error("".concat(l.statusText));case 17:return r.next=19,Object(o.a)(s());case 19:return r.next=21,t(--e,n)(i);case 21:return r.abrupt("return",r.sent);case 22:throw new Error("".concat(l.statusText));case 23:r.next=33;break;case 25:return r.prev=25,r.t1=r.catch(3),c.LogWarn("Failed to process request: ".concat(null===r.t1||void 0===r.t1?void 0:r.t1.toString())),r.next=30,Object(o.a)(s());case 30:return r.next=32,t(--e,n)(i);case 32:return r.abrupt("return",r.sent);case 33:case"end":return r.stop()}}),r,null,[[3,25]])})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return i.apply(this,arguments)}}()},d=function(t){return f(5,(function(t){return 1e3*Math.pow(4,5-t)}))(t)},h=function(t){return new Promise((function(e){return setTimeout(e,t)}))}},function(t,e,n){"use strict";e.a=function(t,e){return e?"".concat(t,"-").concat(e):t}},function(t,e,n){var r=n(60);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(228)("meta"),o=n(60),i=n(141),a=n(95).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(58)((function(){return c(Object.preventExtensions({}))})),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return u&&f.NEED&&c(t)&&!i(t,r)&&l(t),t}}},function(t,e,n){"use strict";var r=n(22),o=n(127),i=n(191),a=n(133);var s=function t(e){var n=new i(e),s=o(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return t(a(e,n))},s}(n(82));s.Axios=i,s.Cancel=n(83),s.CancelToken=n(204),s.isCancel=n(132),s.VERSION=n(134).version,s.all=function(t){return Promise.all(t)},s.spread=n(205),s.isAxiosError=n(206),t.exports=s,t.exports.default=s},function(t,e,n){"use strict";var r=n(22),o=n(128),i=n(192),a=n(193),s=n(133),c=n(203),u=c.validators;function l(t){this.defaults=t,this.interceptors={request:new i,response:new i}}l.prototype.request=function(t,e){if("string"==typeof t?(e=e||{}).url=t:e=t||{},!e.url)throw new Error("Provided config url is not valid");(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var i,l=[];if(this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)})),!o){var f=[a,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(l),i=Promise.resolve(e);f.length;)i=i.then(f.shift(),f.shift());return i}for(var d=e;r.length;){var h=r.shift(),p=r.shift();try{d=h(d)}catch(t){p(t);break}}try{i=a(d)}catch(t){return Promise.reject(t)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},l.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=s(this.defaults,t),o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,n,r){return this.request(s(r||{},{method:t,url:e,data:n}))}})),t.exports=l},function(t,e,n){"use strict";var r=n(22);function o(){this.handlers=[]}o.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=o},function(t,e,n){"use strict";var r=n(22),o=n(194),i=n(132),a=n(82),s=n(83);function c(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s("canceled")}t.exports=function(t){return c(t),t.headers=t.headers||{},t.data=o.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return c(t),e.data=o.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(c(t),e&&e.response&&(e.response.data=o.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var r=n(22),o=n(82);t.exports=function(t,e,n){var i=this||o;return r.forEach(n,(function(n){t=n.call(i,t,e)})),t}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},function(t,e,n){"use strict";var r=n(131);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";var r=n(22);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(199),o=n(200);t.exports=function(t,e){return t&&!r(e)?o(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(22),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,a={};return t?(r.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},function(t,e,n){"use strict";var r=n(22);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=o(window.location.href),function(e){var n=r.isString(e)?o(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r=n(134).version,o={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){o[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var i={};o.transitional=function(t,e,n){function o(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,a){if(!1===t)throw new Error(o(r," has been removed"+(e?" in "+e:"")));return e&&!i[r]&&(i[r]=!0,console.warn(o(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,a)}},t.exports={assertOptions:function(t,e,n){if("object"!=typeof t)throw new TypeError("options must be an object");for(var r=Object.keys(t),o=r.length;o-- >0;){var i=r[o],a=e[i];if(a){var s=t[i],c=void 0===s||a(s,i,t);if(!0!==c)throw new TypeError("option "+i+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:o}},function(t,e,n){"use strict";var r=n(83);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},o.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},o.source=function(){var t;return{token:new o((function(e){t=e})),cancel:t}},t.exports=o},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t){return r.isObject(t)&&!0===t.isAxiosError}},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,a,s,c=1,u={},l=!1,f=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return u[c]=o,r(c),c++},d.clearImmediate=h}function h(t){delete u[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(64),n(114))},function(t,e,n){"use strict";n(135)},function(t,e,n){"use strict";n(136)},function(t,e,n){},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e(t.tag,{tag:"component",staticClass:"afs-content-placeholder",class:t.classes,attrs:{"data-locator":t.dataLocator}},[t.img?e("img",{staticClass:"afs-content-placeholder__icon",attrs:{src:t.img,alt:""}}):t._e(),t._v(" "),t.icon?e("Icon",{staticClass:"afs-content-placeholder__icon",class:t.iconClass,attrs:{name:t.icon,filled:t.iconFilled}}):t._e(),t._v(" "),t.hasTitle?e("AfsText",{staticClass:"afs-content-placeholder__title",attrs:{type:t.titleTextType}},[t._t("title",null,{getBEMClass:t.getBEMClass})],2):t._e(),t._v(" "),t.hasText?e("AfsText",{staticClass:"afs-content-placeholder__text",attrs:{type:"paragraph"}},[t._t("text",null,{getBEMClass:t.getBEMClass})],2):t._e(),t._v(" "),t.hasExtraContent?e("div",{staticClass:"afs-content-placeholder__footer"},[t._t("default",null,{getBEMClass:t.getBEMClass})],2):t._e()],1)};r._withStripped=!0;var o=n(4),i=n(5),a=n(1),s=n(3),c={name:"AfsContentPlaceholder",components:{Icon:o.a,AfsText:i.a},props:{iconSize:{type:String,default:"lg",validator:function(t){return["lg","md","sm","xs"].some((function(e){return e===t}))}},iconColor:{type:String,default:"secondary",validator:function(t){return["primary","secondary"].some((function(e){return e===t}))}},titleSize:{type:String,default:"md",validator:function(t){return["lg","md"].some((function(e){return e===t}))}},iconFilled:{type:Boolean,default:!1},icon:{type:String,default:""},img:{type:String,default:""},isCard:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1},tag:{type:String,default:"div"},dataLocator:{type:String,default:"content-placeholder"}},computed:{classes:function(){return[this.themeClass,{"afs-content-placeholder_card":this.isCard,"is-error":this.isInvalid}]},themeClass:function(){var t=Object(s.a)(this.$root);return Object(a.c)(t.theme)},iconClass:function(){return"afs-content-placeholder__icon_".concat(this.iconSize," afs-content-placeholder__icon-").concat(this.iconColor)},titleTextType:function(){return"lg"===this.titleSize?"large title":"title"},hasTitle:function(){return this.$slots.title},hasText:function(){return this.$slots.text},hasExtraContent:function(){return this.$slots.default}},methods:{getBEMClass:function(t){return Object(a.a)("afs-content-placeholder",t)}}},u=(n(280),n(0)),l=Object(u.a)(c,r,[],!1,null,null,null).exports;e.a=l},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(76),o={numeric:!0,sensitivity:"base"},i=function(t,e){if(Object(r.e)(t))return c(t,e);switch(t){case"Designator":return s(e);case"Quantity":return u(e);case"part":return l(e);default:return a(t,e)}},a=function(t,e){return function(n,r){var i,a,s=((null===(i=n.parameters[t])||void 0===i?void 0:i.toString())||"").localeCompare((null===(a=r.parameters[t])||void 0===a?void 0:a.toString())||"",void 0,o);return e?s:-s}},s=function(t){return function(e,n){var r,i,a,s,c,u,l=(null===(r=e.parameters)||void 0===r||null===(i=r.Designator)||void 0===i||null===(a=i.firstValue())||void 0===a?void 0:a.designator)||"",f=(null===(s=n.parameters)||void 0===s||null===(c=s.Designator)||void 0===c||null===(u=c.firstValue())||void 0===u?void 0:u.designator)||"",d=0;try{var h=l.match(/^[^0-9]+/g)[0],p=f.match(/^[^0-9]+/g)[0];if(!(d=h.localeCompare(p,void 0,o)))d=+l.match(/[0-9]+/g)[0]-+f.match(/[0-9]+/g)[0]}catch(t){d=e.toString().localeCompare(n.toString(),void 0,o)}return t?d:-d}},c=function(t,e){return function(n,r){var o,i,a,s,c=null!==(o=null===(i=n.parameters[t])||void 0===i?void 0:i.anyValue())&&void 0!==o?o:"",u=null!==(a=null===(s=r.parameters[t])||void 0===s?void 0:s.anyValue())&&void 0!==a?a:"";return""===c?e?-1:1:""===u?e?1:-1:e?c-u:u-c}},u=function(t){return function(e,n){return t?e.parameters.Quantity-n.parameters.Quantity:n.parameters.Quantity-e.parameters.Quantity}},l=function(t){return function(e,n){var r,i,a,s,c=((null===(r=e.parameters)||void 0===r||null===(i=r.part)||void 0===i?void 0:i.toString())||"").localeCompare((null===(a=n.parameters)||void 0===a||null===(s=a.part)||void 0===s?void 0:s.toString())||"",void 0,o);return t?c:-c}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(61);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function h(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,m(t,e,"set"),n),n}function p(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function m(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var v=new WeakMap,y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,t);var e,n,r,o=c(u);function u(){var t;i(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(l(t=o.call.apply(o,[this].concat(n))),v,{writable:!0,value:null}),t}return e=u,(n=[{key:"color",get:function(){return"Deleted"===this.anyValue()?"var(--afs-additional-red)":null!==p(this,v)?"rgb(".concat(p(this,v).join(","),")"):null}},{key:"setColor",value:function(t){var e=t&&t.padStart(8,"f").match(/.{2}/g);return Array.isArray(e)&&h(this,v,[parseInt(e[3],16),parseInt(e[2],16),parseInt(e[1],16)]),this}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(r.a)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return l}));var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,t);var e,n,r,c=s(u);function u(){return o(this,u),c.apply(this,arguments)}return e=u,(n=[{key:"color",get:function(){switch(this.anyValue()){case"Deleted":case"Out of date":return"var(--afs-additional-red)";case"Up to date":return"var(--afs-additional-green)"}return null}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(n(61).a)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return l}));var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,t);var e,n,r,c=s(u);function u(){return o(this,u),c.apply(this,arguments)}return e=u,(n=[{key:"color",get:function(){switch(this.anyValue()){case"Obsolete":case"End of Life":return"var(--afs-additional-red)";case"Volume Production":case"New Product":return"var(--afs-additional-green)";case"Not Recommended for New Design":return"var(--afs-additional-orange)";case"Unknown":return"var(--afs-additional-gray)"}return null}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(n(61).a)},function(t,e,n){"use strict";function r(t){return function(e,n){var r=(e&&e[t]||"").toLocaleUpperCase(),o=(n&&n[t]||"").toLocaleUpperCase();return r.localeCompare(o)}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("label",{staticClass:"afs-radiobutton",class:[t.themeClass,t.classes],attrs:{"data-locator":t.dataLocator}},[e("input",{staticClass:"afs-radiobutton__input",attrs:{type:"radio",name:t.name,disabled:t.disabled,"data-locator":"".concat(t.dataLocator,"-control")},domProps:{value:t.value,checked:t.shouldBeChecked},on:{change:t.updateInput}}),t._v(" "),e("span",{staticClass:"afs-radiobutton__figure"}),t._v(" "),t.hasText?e("span",{staticClass:"afs-radiobutton__text"},[t._t("default",null,{getBEMClass:t.getBEMClass})],2):t._e()])};r._withStripped=!0;var o=n(1),i=n(3),a={name:"AfsRadiobutton",model:{prop:"modelValue",event:"change"},props:{dataLocator:{type:String,default:"radiobutton"},name:{type:String,default:""},value:{type:String,default:""},modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)},classes:function(){return{"is-checked":this.shouldBeChecked,"is-disabled":this.disabled}},hasText:function(){return this.$slots.default},shouldBeChecked:function(){return this.modelValue===this.value}},methods:{getBEMClass:function(t){return Object(o.a)("afs-radiobutton",t)},updateInput:function(){this.$emit("change",this.value)}}},s=(n(440),n(0)),c=Object(s.a)(a,r,[],!1,null,null,null).exports;e.a=c},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return t.priorityIconName?e("span",[e("AfsIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"priorityHint_".concat(t.id),delay:400},expression:"{ id: `priorityHint_${id}`, delay: 400 }"}],staticClass:"task-priority",class:t.priorityIconClass,attrs:{"data-locator":t.dataLocator,name:t.priorityIconName}}),t._v(" "),e("ContextMenu",{staticClass:"afs-input__hint",attrs:{id:"priorityHint_".concat(t.id),modifiers:{y:"bottom",x:"start"},type:"hint"},scopedSlots:t._u([{key:"default",fn:function(){return[t._v("\n      Priority: "+t._s(t.priorityName)+"\n    ")]},proxy:!0}],null,!1,535427238)})],1):t._e()};r._withStripped=!0;var o=n(8),i=n(122),a=n(24),s=n(17),c=n(28),u={undefined:{icon:"",name:"Undefined"},low:{icon:"arrow-down",name:"Low"},medium:{icon:"arrow-up-orange",name:"Medium"},high:{icon:"arrow-up",name:"High"},highest:{icon:"flame",name:"Highest"}},l={name:"TaskPriority",components:{AfsIcon:a.a,ContextMenu:o.a},directives:{hint:c.a},props:{dataLocator:{type:String,default:"task-priority"},value:{type:String,default:"Undefined",validator:function(t){return Object(i.a)(u,t.toLowerCase())}},size:{type:String,default:"lg",validator:function(t){return["sm","lg"].includes(t)}}},data:function(){return{id:Object(s.a)()}},computed:{priorityName:function(){return u[this.value.toLowerCase()].name},priorityIconName:function(){return u[this.value.toLowerCase()].icon},priorityIconClass:function(){return"task-priority_".concat(this.value.toLowerCase()," task-priority_").concat(this.size)}}},f=(n(428),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null).exports;e.a=d},function(t,e,n){"use strict";e.a={showVote:!0,showEmailNotification:!0}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"customMentionRegExp",(function(){return s})),n.d(e,"matchEmail",(function(){return c})),n.d(e,"getViewKey",(function(){return u})),n.d(e,"makeDictionary",(function(){return d})),n.d(e,"commentToText",(function(){return p})),n.d(e,"textToEditHtml",(function(){return m})),n.d(e,"textToPreviewHtml",(function(){return v}));var r=/(\b(https?|ftp|file|dxp):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi,o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"link";return(t||"").replace(r,'<a class="'.concat(e,'" target="_blank" href="$1">$1</a>'))},i=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},a=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gim,s=/@(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\s/gim,c=function(t){return t.match(a)||[]},u=function(t){var e=t.name;return"@".concat(void 0===e?"":e)},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mentionKey";return 1===t.mentionType?"@".concat(t[e]||t.email):3===t.mentionType?t.email:"{@".concat(t.name,"}")},f=function(t,e){return!t.keys.includes(e)&&t.keys.push(e)},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.reduce((function(t,n){var r=e?u(n):l(n),o=e?l(n):u(n);if(t.map.set(r.toLowerCase(),o),n.email){var a=l(n,"email");r!==a&&(t.map.set(a.toLowerCase(),o),f(t,i(a)))}return f(t,i(r)),t}),{map:new Map,keys:[]}),r=n.map,o=n.keys;return r.size?{map:r,regex:new RegExp("(".concat(o.join("|"),")(?=\\s|$)"),"gmi")}:null},h=function(t,e){return e?t.replace(e.regex,(function(t){if(t){var n=e.map.get(t.toLowerCase());return'<span class="full-match" data-mention="'.concat(n,'">').concat(n,"</span>")}})):t},p=function(t,e){var n=d(e,!0);return n?t.replace(n.regex,(function(t){return n.map.get(t.toLowerCase())})):t},m=function(t,e){var n=d(e);return h(t,n)},v=function(t){for(var e=o(t),n=c(t).map((function(t){return{email:t,name:t,mentionType:1}})),r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(n.length){var s=d(n);i.push(s)}return i.filter(Boolean).reduce((function(t,e){return h(t,e)}),e)}}])},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(39),o=n(545);function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"metadata_",Object(o.b)()),c(this,"netsMap",new Map),c(this,"reversedPrimitivesMap",new Map),c(this,"primitivesMap_",new Map),c(this,"emptyNet",{name:"no net",primitives:[],layersUsed:[],boundRects:[]})}var e,n,a;return e=t,a=[{key:"instance",get:function(){return window.__SINGLETONS__.pcbMetadataRepository||(window.__SINGLETONS__.pcbMetadataRepository=new t),window.__SINGLETONS__.pcbMetadataRepository}}],(n=[{key:"attach",value:function(t){var e,n,r,o,i,a,s=this;this.dettach(),this.metadata_=t,null===(e=this.metadata)||void 0===e||null===(n=e.nets)||void 0===n||n.forEach((function(t){return s.netsMap.set(t.name,t)})),null===(r=this.metadata)||void 0===r||null===(o=r.primitives)||void 0===o||o.forEach((function(t){return s.reversedPrimitivesMap.set(t.pcbId,t)})),null===(i=this.metadata)||void 0===i||null===(a=i.primitives)||void 0===a||a.forEach((function(t){return s.primitivesMap_.set(t.id,t)}))}},{key:"dettach",value:function(){this.metadata_=Object(o.b)(),this.netsMap.clear(),this.primitivesMap_.clear(),this.reversedPrimitivesMap.clear()}},{key:"isReady",value:function(){return null!=this.metadata_.pcbDocument}},{key:"metadata",get:function(){return this.metadata_}},{key:"pcbDocument",get:function(){return this.metadata.pcbDocument}},{key:"components",get:function(){return this.metadata.components}},{key:"allPcbComponents",get:function(){var t=this.metadata.components.slice();return this.metadata.components.forEach((function(e){e.otherPcb&&t.push.apply(t,i(Array.from(e.otherPcb.values())))})),t}},{key:"primitives",get:function(){return this.metadata.primitives}},{key:"nets",get:function(){return this.metadata.nets}},{key:"layers",get:function(){return this.metadata.layers}},{key:"getDocumentLayers",value:function(t){var e,n=this.metadata.pcbDocuments.find((function(e){return e.id===t}));return n&&null!==(e=n.layers)&&void 0!==e?e:[]}},{key:"primitivesMap",get:function(){return this.primitivesMap_}},{key:"getNetByName",value:function(t){var e;return null!==(e=this.netsMap.get(t))&&void 0!==e?e:this.emptyNet}},{key:"getPrimitiveById",value:function(t){var e=this.reversedPrimitivesMap.get(t);return null!=e?e:null}},{key:"getComponentById",value:function(t,e){var n,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=function(t){return r.allPcbComponents.find((function(n){return n.pcbId===t&&n.pcbDocId===e}))},a=i(t);if(!a&&o){var s=null==o?void 0:o.graphiteMapping[t];s&&(a=i(s))}return null!==(n=a)&&void 0!==n?n:null}},{key:"getComponentByPrimitiveId",value:function(t,e){for(var n=this.allPcbComponents.filter((function(t){return t.pcbDocId===e})),r=0,o=n.length;r<o;r++)for(var i=n[r],a=0,s=i.primitives.length;a<s;a++){var c=this.primitivesMap_.get(i.primitives[a]);if((null==c?void 0:c.pcbId)===t)return{component:i,primitive:c}}return null}},{key:"getComponentsByPos",value:function(t,e){var n,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=[],a=null==o||(null===(n=this.metadata.pcbDocument)||void 0===n?void 0:n.id)===o;return this.metadata.components.forEach((function(n){var s;a||(n=null===(s=n.otherPcb)||void 0===s?void 0:s.get(o)),n&&n.boundRect&&r.pointInRectangle(t,e,n.boundRect)&&i.push(n)})),i}},{key:"getBoardArraysByPos",value:function(t,e){var n=this;return this.primitives.filter((function(t){return 21===n.getObjectId(t)})).filter((function(r){return n.pointInRectangle(t,e,[null==r?void 0:r.x,null==r?void 0:r.y,null==r?void 0:r.x1,null==r?void 0:r.y1])}))}},{key:"getNetsByPrimitiveId",value:function(t){for(var e=[],n=0,r=this.nets.length;n<r;n++)for(var o=this.nets[n],i=0,a=o.primitives.length;i<a;i++){var s=this.primitivesMap_.get(o.primitives[i]);(null==s?void 0:s.pcbId)===t&&e.push({net:o,primitive:s})}return e}},{key:"getBoardArrayById",value:function(t){var e=this.getPrimitiveById(t);return 21===this.getObjectId(e)?e:null}},{key:"getComponentPrimitiveStat",value:function(){var t=this,e=new Map;this.allPcbComponents.forEach((function(n){n.primitives.forEach((function(n){var r=t.primitivesMap_.get(n);if(r){var o=t.getObjectId(r),i=e.get(o);e.set(o,null!=i?i:1)}}))}));var n=[];return e.forEach((function(t,e){n.push({objectId:e,objectIdName:Object(r.c)(e),count:t})})),n}},{key:"getChildPrimitives",value:function(t){var e,n=this;return null!=t&&null!==(e=t.primitives)&&void 0!==e&&e.length?t.primitives.map((function(t){return n.primitivesMap_.get(t)})).filter((function(t){return!!t})):null}},{key:"getChildPads",value:function(t){var e,n=this;return null!=t&&null!==(e=t.primitives)&&void 0!==e&&e.length?t.primitives.map((function(t){return n.primitivesMap_.get(t)})).filter((function(t){return n.getObjectId(t)===r.a.Pad})):null}},{key:"pointInRectangle",value:function(t,e,n){return t>=n[0]/1e6&&t<=n[2]/1e6&&e>=n[1]/1e6&&e<=n[3]/1e6}},{key:"getObjectId",value:function(t){return null!=t&&t.kind?255&t.kind:r.a.None}}])&&s(e.prototype,n),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"j",(function(){return w})),n.d(e,"k",(function(){return _})),n.d(e,"h",(function(){return O})),n.d(e,"f",(function(){return U})),n.d(e,"g",(function(){return X})),n.d(e,"c",(function(){return tt})),n.d(e,"i",(function(){return pt})),n.d(e,"e",(function(){return Gt})),n.d(e,"d",(function(){return zt}));var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r(this,t),a(this,"id",void 0),a(this,"info",void 0),this.id=e,this.info=n}return i(t,[{key:"isEmpty",get:function(){return this.id<=0}}]),t}();a(s,"emptyNode",new s(-1,"Empty"));var c=i((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),a(this,"nodes",[]),a(this,"x",0),a(this,"y",0),a(this,"clickX",0),a(this,"clickY",0),a(this,"onlyNets",!1),Object.assign(this,e)})),u=n(78),l=n(146),f=n(259);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==d(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,s(b,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function p(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){p(i,r,o,a,s,"next",t)}function s(t){p(i,r,o,a,s,"throw",t)}a(void 0)}))}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var w=g((function t(e,n,r,o,i,a,s){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-1;b(this,t),this.originalMaterialMap=e,this.selectedMaterialMap=n,this.selectionLayer=r,this.highlightLayer=o,this.selectionMaterial=i,this.highlightMaterial=a,this.selectionHatchingMaterial=s,this.colorShift=c,this.layerShift=u,this.boardArraySelectionMaterial=l})),_=function(){function t(e,n){b(this,t),this.minPoint=e,this.maxPoint=n}return g(t,[{key:"isEmpty",get:function(){return!this.minPoint||!this.maxPoint}}],[{key:"create",value:function(e){var n,r;return 4===e.length?(n=new f.a(e[0],e[1]),r=new f.a(e[2],e[3])):6===e.length&&(n=new f.a(e[0],e[1],e[2]),r=new f.a(e[3],e[4],e[5])),new t(n,r)}}]),t}(),O=function(){function t(e){b(this,t),v(this,"scene",void 0),v(this,"selectionOptions",void 0),v(this,"lastMaterialMap",null),v(this,"selectionNodeItems",[]),v(this,"selectionIds",new Map),v(this,"highlightData",void 0),v(this,"highlightScene",void 0),v(this,"isSelected",!1),this.scene=e,this.selectionOptions=this.createSelectionOptions(e),this.highlightData={add:null,remove:null,nodeInfo:null},this.onHighlightSceneRender=this.onHighlightSceneRender.bind(this),this.onMaterialChanged=this.onMaterialChanged.bind(this),this.onMaterialChanged=this.onMaterialChanged.bind(this),this.highlightScene=this.createHighlightScene(e,this.selectionOptions),this.highlightScene&&this.highlightScene.on("beforeRender",this.onHighlightSceneRender),e.on("materialAdded",this.onMaterialChanged),e.on("materialRemoved",this.onMaterialChanged)}var e,n;return g(t,[{key:"dispose",value:function(){var t;null===(t=this.highlightScene)||void 0===t||t.off("beforeRender",this.onHighlightSceneRender),this.scene.off("materialAdded",this.onMaterialChanged),this.scene.off("materialRemoved",this.onMaterialChanged)}},{key:"addSelection",value:(n=m(h().mark((function t(e,n,r){var o,i,a,s,c,u,l=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.scene.setSelection(!0),this.updateMaterialMap(),o=[],i=[],a=[],e.forEach((function(t){var e=l.getPcbObjectId(t);9===e&&o.push(t),21===e?i.push(t):a.push(t)})),t.next=8,this.addSelectionComponents(o,n,r);case 8:return s=t.sent,t.next=11,this.addSelectionPrimitives(a,n,r);case 11:return c=t.sent,t.next=14,this.addSelectionBoardArray(i,n,r);case 14:if(u=t.sent,this.scene.setDirty(!0),!u.length){t.next=18;break}return t.abrupt("return",u);case 18:return t.abrupt("return",null!=s&&s.length?s:c);case 19:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})},{key:"clearSelection",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t&&(this.clearMaterialMap(),this.scene.setSelection(!1)),this.selectionNodeItems.length){for(var e=0,n=this.selectionNodeItems.length;e<n;e++)this.scene.removeItem(this.selectionNodeItems[e]),this.selectionNodeItems[e]=null;this.selectionNodeItems.length=0,this.selectionIds.clear()}this.scene.setDirty(!0)}},{key:"updateMaterialMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.isSelected?this.selectionOptions.selectedMaterialMap:this.selectionOptions.originalMaterialMap;(this.lastMaterialMap!=e||t)&&(this.scene.setMaterialMap(e),this.lastMaterialMap=e)}},{key:"removeHighlight",value:function(){this.highlightData.nodeInfo&&(this.highlightData.remove=this.highlightData.nodeInfo.node,this.highlightData.nodeInfo=null,this.highlightData.add=null)}},{key:"onHighlightSceneRender",value:function(t){if(this.highlightData.remove){var e=this.highlightData.remove;this.highlightData.remove=null,t.removeItem(e)}if(this.highlightData.add){this.highlightData.nodeInfo&&t.removeItem(this.highlightData.nodeInfo.node);var n=this.highlightData.add,r=this.createHighlightNode(t,n);r&&(this.highlightData.nodeInfo={root:n.pcbId,node:r})}}},{key:"createHighlightScene",value:function(t,e){return t}},{key:"createHighlightNode",value:function(t,e){return null}},{key:"isHighlight",value:function(t){return null!==this.highlightData.nodeInfo&&this.highlightData.nodeInfo.root===t}},{key:"addHighlight",value:function(t){t&&t.pcbId?this.isHighlight(t.pcbId)||this.selectionIds.has(t.pcbId)||(this.removeHighlight(),this.highlightData.add=t):this.removeHighlight()}},{key:"clearHighlight",value:function(){this.removeHighlight()}},{key:"addSelectionComponents",value:function(t,e,n){return n.throwIfCancellationRequested(),t.forEach((function(t){return e(t)})),Promise.resolve([])}},{key:"addSelectionBoardArray",value:function(t,e,n){return n.throwIfCancellationRequested(),Promise.resolve([])}},{key:"addSelectionPrimitives",value:(e=m(h().mark((function t(e,n,r){var o,i,a,s,c,u,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=[],i=this.scene.hiddenNodes,a=function(t){for(var n=[],r=0,o=e.length;r<o;r+=t)n.push(e.slice(r,r+t));return n}(500),s=0;case 5:if(!(s<a.length)){t.next=20;break}return r.throwIfCancellationRequested(),c=a[s],u=c.map((function(t){return t.pcbId})),i.length&&(u=u.filter((function(t){return!i.includes(t)}))),l=this.scene.cloneNodeItemsToMultiLayersByIds(u,this.selectionOptions.layerShift,this.selectionOptions.colorShift),o=o.concat(l),this.selectionNodeItems=this.selectionNodeItems.concat(l.filter((function(t){return t}))),c.forEach((function(t){return n(t)})),this.scene.setDirty(!0),t.next=17,new Promise((function(t){return setTimeout((function(){return t()}),0)}));case 17:s++,t.next=5;break;case 20:return t.abrupt("return",o);case 21:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"clearMaterialMap",value:function(){this.scene.setMaterialMap(this.selectionOptions.originalMaterialMap),this.lastMaterialMap=null}},{key:"toGrayscaleMaterials",value:function(t){return t.map((function(t){var e=l.a.toGrayscale(t.Diffuse);return new u.a(e,t.Hatching,t.Bordered,!1,!0)}))}},{key:"getPcbObjectId",value:function(t){return 255&t.kind}},{key:"isComponent",value:function(t){return 9==(255&t.kind)}}]),t}(),S=n(105),x=n(116),C=n(102),E=n(226),k=n(34);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=new Uint8Array([255,255,255,128]),N=new Uint8Array([255,255,255,32]),B=new Uint8Array([46,224,192,255]),F=new Uint8Array([0,128,0,255]),U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(i,t);var e,n,r,o=L(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t)}return e=i,(n=[{key:"onMaterialChanged",value:function(){this.updateMaterialSelectionOptions(this.scene,this.selectionOptions)}},{key:"onePixelUnits",get:function(){return this.scene.pixelsToUnits(1)}},{key:"createHighlightScene",value:function(t,e){var n={Diffuse:B,Hatching:S.b.None,Bordered:!1,GrayscaleMesh:!1,OnTop:!1,Offset2D:0},r=t.createOverlayScene("PCB_2D_Highlight_Scene",[{name:"Default_Highlight_Layer",z_range:[-1,1],is_keepout:!1,is_inverted:!1,is_cutout:!1,is_barrel:!1,show3d:!1}],[n]);return e.highlightLayer=0,e.highlightMaterial=0,r}},{key:"createHighlightNode",value:function(t,e){if(9===this.getPcbObjectId(e)){var n=this.createHighlightComponent(e);return t.addNode(this.selectionOptions.highlightLayer,n)}return null}},{key:"createHighlightComponent",value:function(t){var e=_.create(t.boundRect),n=2*this.onePixelUnits,r=4*this.onePixelUnits;return this.createStrokedRectangle(e.minPoint,e.maxPoint,n,this.selectionOptions.highlightMaterial,r)}},{key:"addSelectionComponents",value:function(t,e,n){var r=this,o=[];return t.forEach((function(t){n.throwIfCancellationRequested();var i=_.create(t.boundRect),a=r.createFilledRectangle(i.minPoint,i.maxPoint,r.selectionOptions.selectionHatchingMaterial,r.selectionOptions.selectionLayer);a&&(r.selectionNodeItems.push(a),r.selectionIds.set(t.pcbId,t),e(t),o.push(a))})),Promise.resolve(o)}},{key:"addSelectionBoardArray",value:function(t,e,n){var r=this,o=[];return t.forEach((function(t){n.throwIfCancellationRequested();var i=r.scene.getNodeItemById(t.pcbId),a=r.scene.getBoundingBoxForItem(i),s=_.create(a),c=r.createFilledRectangle(s.minPoint,s.maxPoint,r.selectionOptions.boardArraySelectionMaterial,r.selectionOptions.selectionLayer,!1);c&&(r.selectionNodeItems.push(c),r.selectionIds.set(t.pcbId,t),e(t),o.push(c))})),Promise.resolve(o)}},{key:"createSelectionOptions",value:function(t){var e=t.layerMap.GetLayersCount()-1,n=e-1,r=t.addMaterial(new u.a(R,S.b.None,!1)),o=t.addMaterial(new u.a(B,S.b.None,!1)),i=t.addMaterial(new u.a(N,S.b.None,!1)),a=this.scene.addMaterial(new u.a(F,S.b.DiagSecond,!1)),s=t.layers.length-t.layers.filter((function(t){return t.name==C.a.SelectionLayerName})).length,c=new E.a([]),l=new w(c,c,n,e,r,o,a,0,s,i);return this.updateMaterialSelectionOptions(t,l),l}},{key:"updateMaterialSelectionOptions",value:function(t,e){var n=t.getMaterials().slice(),r=new E.a(n,"2DMaterials"),o=e.highlightMaterial-e.colorShift,i=e.selectionMaterial-e.colorShift,a=e.selectionHatchingMaterial-e.colorShift,s=r.GetMaterialsCount(),c=this.toGrayscaleMaterials(t.getMaterials());c.push.apply(c,P(n.slice())),c[o]=c[o+s];var u=new E.a(c,"2DMaterials");e.originalMaterialMap=r,e.selectedMaterialMap=u,e.selectionMaterial=i+s,e.selectionHatchingMaterial=a+s,e.colorShift=s}},{key:"createFilledRectangle",value:function(t,e,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=new x.a,a=1e6;o&&(t.x/=a,t.y/=a,e.x/=a,e.y/=a);var s=(t.x+e.x)/2,c=(t.y+e.y)/2,u=e.x-t.x,l=e.y-t.y,f=k.a.createRectangle(s,c,u,l,n);i.unis.push(f);var d=this.scene.addNode(r,i);return d}},{key:"createStrokedRectangleNodeItem",value:function(t,e,n,r,o){var i,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=new x.a,c=1e6,u=t.x/c-a,l=e.y/c+a,f=(e.x-t.x)/c+2*a,d=(e.y-t.y)/c+2*a,h=k.a.createStrokedRectangle(u,l,f,d,n,r);(i=s.unis).push.apply(i,P(h));var p=this.scene.addNode(o,s);return p}},{key:"createStrokedRectangle",value:function(t,e,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=new x.a,s=1e6,c=t.x/s-i,u=e.y/s+i,l=(e.x-t.x)/s+2*i,f=(e.y-t.y)/s+2*i,d=k.a.createStrokedRectangle(c,u,l,f,n,r);return(o=a.unis).push.apply(o,P(d)),a}}])&&A(e.prototype,n),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(O);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t){return function(t){if(Array.isArray(t))return V(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e){return(H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(i,t);var e,n,r,o=W(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t)}return e=i,(n=[{key:"onMaterialChanged",value:function(){this.updateMaterialSelectionOptions(this.scene,this.selectionOptions)}},{key:"createSelectionOptions",value:function(t){var e=t.layerMap.GetLayersCount()-2,n=t.layers.length-t.layers.filter((function(t){return t.name==C.a.SelectionLayerName})).length,r=new E.a([]),o=new w(r,r,e,e,0,0,0,0,n);return this.updateMaterialSelectionOptions(t,o),o}},{key:"updateMaterialSelectionOptions",value:function(t,e){var n=t.getMaterials().slice(),r=new E.a(n,"3DMaterials"),o=this.toGrayscaleMaterials(t.getMaterials()),i=n.length,a=n.slice().map((function(t){return new u.a(t.Diffuse,t.Hatching,t.Bordered,!0,t.GrayscaleMesh)}));o.push.apply(o,G(a));var s=new E.a(o,"3DMaterials");e.originalMaterialMap=r,e.selectedMaterialMap=s,e.colorShift=i}}])&&z(e.prototype,n),r&&z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(O),Z=n(39);function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];K(this,t),Q(this,"name",void 0),Q(this,"item",void 0),Q(this,"selectedPrimitive",void 0),Q(this,"fit",void 0),Q(this,"_isPrimitiveContainer",!0),this.name=n,this.item=e,this.fit=r,this.selectedPrimitive=o,this._isPrimitiveContainer=i}var e,n,r;return e=t,r=[{key:"getObjectId",value:function(t){return t?255&t.kind:Z.a.None}},{key:"createComponent",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new t(e,"component",n,r,!0)}},{key:"createBoardArray",value:function(e){return new t(e,"board",!1,e)}},{key:"createNet",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.getObjectId(r),i=!this.netChildPrimitiveTypes.has(o);return new t(e,"net",n,r,i)}}],(n=[{key:"objectId",get:function(){return this.isNet&&!this.selectedPrimitive?Z.a.Net:!this.selectedPrimitive&&this.isComponent?Z.a.Component:t.getObjectId(this.selectedPrimitive)}},{key:"layerId",get:function(){var t,e;return!this.selectedPrimitive&&this.isComponent?this.item.layerId:null!==(t=null===(e=this.selectedPrimitive)||void 0===e?void 0:e.layerId)&&void 0!==t?t:-1}},{key:"isNet",get:function(){return"net"===this.name}},{key:"isComponent",get:function(){return"component"===this.name}},{key:"isEmpty",get:function(){return"none"===this.name}},{key:"isPrimitiveContainer",get:function(){return this._isPrimitiveContainer}}])&&J(e.prototype,n),r&&J(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Q(tt,"empty",new tt(void 0,"none",!1)),Q(tt,"netChildPrimitiveTypes",new Set([Z.a.Pad,Z.a.Via,Z.a.Track]));var et=n(91),nt=n(51),rt=n(19),ot=n(239);function it(t){return function(t){if(Array.isArray(t))return at(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ut=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ct(this,"selectedObjects",[]),ct(this,"index",-1),ct(this,"selectionPoint",{x:0,y:0}),ct(this,"captureDistance",.02),ct(this,"metadataRepository",ot.a.instance),ct(this,"layerManager",void 0),ct(this,"prevUpdateMouseEvent",void 0),ct(this,"pcbDocId",void 0),ct(this,"selectedPrimitiveTypes",new Set([Z.a.Pad,Z.a.Via])),ct(this,"supportedPrimitiveTypes",new Set([Z.a.Pad,Z.a.Via,Z.a.Track,Z.a.EmbeddedBoard])),ct(this,"currentVariant",null),this.layerManager=e,this.pcbDocId=n,rt.a.bus.on("Variants:changed",(function(t){return r.currentVariant=null==t?void 0:t.projectVariant}))}var e,n,r;return e=t,(n=[{key:"count",get:function(){return this.selectedObjects.length}},{key:"isEmpty",get:function(){return this.index<0}},{key:"current",get:function(){return this.isEmpty?tt.empty:this.selectedObjects[this.index]}},{key:"next",get:function(){return this.isEmpty?tt.empty:(this.index=this.selectedObjects.length==this.index+1?0:this.index+1,this.current)}},{key:"get",value:function(t,e,n,r){return this.update(t,e,n,r)?this.current:this.next}},{key:"update",value:function(t,e,n,r){var o=r?"dblclick":"click";return!(this.isCaptureDistance(t)&&this.prevUpdateMouseEvent===o||(this.selectionPoint=t,this.selectedObjects=n?this.createQueue2d(t,e,r):this.createQueue3d(e),this.index=this.selectedObjects.length?0:-1,this.prevUpdateMouseEvent=o,0))}},{key:"createSelectedPads",value:function(t,e,n){var r=this,o=new Set(t.map((function(t){return t.id}))),i=new Set(n.filter((function(t){return"net"===t.name&&!t.isPrimitiveContainer&&t.objectId===Z.a.Pad})).map((function(t){var e;return null===(e=t.selectedPrimitive)||void 0===e?void 0:e.pcbId})).filter((function(t){return!!t}))),a=e.flatMap((function(t){return t.primitives})),s=this.metadataRepository.getChildPads({primitives:a});return null!=s&&s.length?(s.forEach((function(t){if(!i.has(t.pcbId)&&o.has(t.pcbId)){var e=r.metadataRepository.getNetByName(t.netName);n.push(tt.createNet(e,!1,t))}})),[]):[]}},{key:"createSelectedFreePads",value:function(t,e){var n=this,r=[],o=new Set(e.filter((function(t){return!t.isPrimitiveContainer&&t.objectId===Z.a.Pad})).map((function(t){var e;return null===(e=t.selectedPrimitive)||void 0===e?void 0:e.pcbId})).filter((function(t){return!!t})));if(t.forEach((function(t){if(!o.has(t.id)){var e=n.metadataRepository.getPrimitiveById(t.id);e&&Object(Z.b)(e.kind)===Z.a.Pad&&r.push(e)}})),null==r||!r.length)return[];var i=this.metadataRepository.getNetByName("");return r.forEach((function(t){e.push(tt.createNet(i,!1,t))})),[]}},{key:"createQueue2d",value:function(t,e,n){var r,o=this,i=[];null==e||e.forEach((function(t){var e,n=o.metadataRepository.getNetsByPrimitiveId(t.id);null!=n&&n.length&&(e=i).push.apply(e,it(n.filter((function(t){return o.supportedPrimitiveTypes.has(Object(Z.b)(t.primitive.kind))})).map((function(t){return tt.createNet(t.net,!1,t.primitive)}))));var r=o.metadataRepository.getBoardArrayById(t.id);r&&i.push(tt.createBoardArray(r))}));var a=this.metadataRepository.getComponentsByPos(t.x,t.y,this.pcbDocId);if(null==a||a.forEach((function(t){i.push(tt.createComponent(t))})),null!=a&&a.length){var s,c=this.createSelectedPads(e,a,i);(s=i).push.apply(s,it(c))}var u=this.createSelectedFreePads(e,i);u.length&&(r=i).push.apply(r,it(u));var l=new Set(this.layerManager.getLayers().filter((function(t){return t.isVisible})).map((function(t){return t.metaId})));return(i=i.filter((function(t){return o.selectedPrimitiveTypes.has(t.objectId)||l.has(t.layerId)||l.has(t.item.layerId)||t.objectId===Z.a.EmbeddedBoard}))).length?(this.addNetToQueue(i),n&&(i=i.filter((function(t){return"net"===t.name&&!t.selectedPrimitive}))),i.sort((function(t,e){return o.getSortValue(t.objectId)-o.getSortValue(e.objectId)})),i):[]}},{key:"addNetToQueue",value:function(t){new Set(t.filter((function(t){return t.isNet})).map((function(t){return t.item.name}))).forEach((function(e){var n=t.find((function(t){return t.item.name===e}));n&&t.push(tt.createNet(n.item,!1))}))}},{key:"createQueue3d",value:function(t){var e=this,n=[],r=new Set;return null==t||t.forEach((function(t){var o=e.metadataRepository.getComponentById(t.id,e.pcbDocId,e.currentVariant);if(o){var i=tt.createComponent(o,!1);n.push(i)}else{var a=e.metadataRepository.getComponentByPrimitiveId(t.id,e.pcbDocId);if(a){if(Object(Z.b)(a.primitive.kind)===Z.a.Pad){var s=e.metadataRepository.getNetByName(a.primitive.netName);n.push(tt.createNet(s,!1,a.primitive))}else if(!r.has(a.component.pcbId)){var c=tt.createComponent(a.component);n.push(c),r.add(a.component.pcbId)}}else{var u=e.metadataRepository.getNetsByPrimitiveId(t.id);null!=u&&u.length&&n.push.apply(n,it(u.map((function(t){return tt.createNet(t.net,!1,t.primitive)}))))}}})),this.addNetToQueue(n),n.sort((function(t,n){return e.getSortValue(t.objectId)-e.getSortValue(n.objectId)})),n}},{key:"getSortValue",value:function(t){var e=1e4;switch(t){case Z.a.Via:e=100;break;case Z.a.Pad:e=200;break;case Z.a.Track:e=300;break;case Z.a.Component:e=400;break;case Z.a.Poly:e=500;break;case Z.a.Net:e=999}return e}},{key:"isCaptureDistance",value:function(t){return!this.isEmpty&&Math.pow(t.x-this.selectionPoint.x,2)+Math.pow(t.y-this.selectionPoint.y,2)<=Math.pow(this.captureDistance,2)}}])&&st(e.prototype,n),r&&st(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lt(t){return function(t){if(Array.isArray(t))return ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pt=function(){function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.simulationManager=r,ht(this,"metadata",void 0),ht(this,"layerManager",void 0),ht(this,"selectionObjectQueue",void 0),ht(this,"pcbDocId",void 0),ht(this,"renderMode",nt.b.Render2D),ht(this,"logger",rt.a.createLogger("SelectionNodesObserver")),ht(this,"subscribed",!1),ht(this,"onSelectNodes",(function(t){if(t){var e=o.selectionObjectQueue.get({x:t.x,y:t.y},t.nodes,o.is2D,(null==t?void 0:t.onlyNets)||!1),n=e.isEmpty?null:Object(et.a)(e.name,e.item,"PcbEngine");n&&(n.selectedPrimitive=e.selectedPrimitive,n.isPrimitiveContainer=e.isPrimitiveContainer,n.isPrimitiveContainer||(n.views=["PCBView3D","PCBView"])),rt.a.bus.emit("select",n)}else rt.a.bus.emit("select",null),rt.a.bus.emit("selectMany",null)})),ht(this,"onHighlightNodes",(function(t){if(!o.simulationManager.simulationEnabled)if(t){var e=o.getHighlightItem(t.x,t.y,t.nodes),n=e?{name:e.name,native:e.item,senderId:"PcbEngine"}:null;rt.a.bus.emit("PcbEngine:highlight",n)}else rt.a.bus.emit("PcbEngine:highlight",null)})),this.layerManager=e,this.selectionObjectQueue=new ut(e,n),this.pcbDocId=n,this.metadata=ot.a.instance,this.subscribeEvents(),this.onEnableSelection=this.onEnableSelection.bind(this),rt.a.bus.on("PcbEngine:enableSelection",this.onEnableSelection)}var e,n,r;return e=t,(n=[{key:"setRenderMode",value:function(t){this.renderMode=t}},{key:"dispose",value:function(){rt.a.bus.off("PcbEngine:enableSelection",this.onEnableSelection),this.unsubscribeEvents()}},{key:"onEnableSelection",value:function(t){t?this.subscribeEvents():this.unsubscribeEvents()}},{key:"subscribeEvents",value:function(){this.subscribed||(rt.a.bus.on("PcbEngine:selectNodes",this.onSelectNodes),rt.a.bus.on("PcbEngine:highlightNodes",this.onHighlightNodes),this.subscribed=!0)}},{key:"unsubscribeEvents",value:function(){this.subscribed=!1,rt.a.bus.off("PcbEngine:selectNodes",this.onSelectNodes),rt.a.bus.off("PcbEngine:highlightNodes",this.onHighlightNodes)}},{key:"logSelect",value:function(t){var e=this.selectionObjectQueue.count,n=t.selectedPrimitive,r=" EMPTY SELECTED PRIMITIVE";if(n){var o=Object(Z.c)(this.getObjectId(n));r=" PRIMITIVE: pcbId: ".concat(n.pcbId,", objectName: ").concat(o)}if("component"===t.name){var i=t.item;this.logger.LogInfo("= SELECTED : ".concat(t.name,", queueSize: ").concat(e,", pcbId: ").concat(i.pcbId,", designator: ").concat(i.designator,", layer: ").concat(i.layerName,", ").concat(r))}else if("net"===t.name){var a=t.item;this.logger.LogInfo("= SELECTED : ".concat(t.name,", queueSize: ").concat(e,", pcbId: ").concat(a.name,", ").concat(r))}else this.logger.LogInfo("= SELECTED : ".concat(t.name,", queueSize: ").concat(e,", ").concat(r))}},{key:"getHighlightItem",value:function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.is2D)return null;var i=[],a=this.getLayersMap((function(t){return t.isVisible})),s=this.getComponents2d(n,t,e,a);return s.length&&i.push.apply(i,lt(s.map((function(t){return tt.createComponent(t)})))),i.sort((function(t,e){return o?r.getStackIndex(e,a,o)-r.getStackIndex(t,a,o):r.getStackIndex(t,a,o)-r.getStackIndex(e,a,o)})),i[0]}},{key:"is2D",get:function(){return nt.b.Render2D===this.renderMode}},{key:"flipped",get:function(){return"bottom"===this.layerManager.viewType}},{key:"getStackIndex",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.isComponent){var r=e.get(t.item.layerId);if(r)return 1e4*r.stackIndex+100}if(t.isNet){var o=t.item,i=o.layersUsed.filter((function(t){return e.has(t)})).map((function(t){return e.get(t).stackIndex}));if(i.length)return i.sort((function(t,e){return n?e-t:t-e})),1e4*i[0]+200}return Number.MAX_VALUE}},{key:"getLayersMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t?this.layerManager.getLayers().filter(t):this.layerManager.getLayers(),n=new Map(e.map((function(t){return[t.metaId,t]})));return n}},{key:"getComponents2d",value:function(t,e,n,r){return(ot.a.instance.getComponentsByPos(e,n,this.pcbDocId)||[]).filter((function(t){return r.has(t.layerId)}))}},{key:"pointInRectangle",value:function(t,e,n){return t>=n[0]/1e6&&t<=n[2]/1e6&&e>=n[1]/1e6&&e<=n[3]/1e6}},{key:"getObjectId",value:function(t){return 255&t.kind}}])&&dt(e.prototype,n),r&&dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),mt=n(137),vt=n(18);function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */gt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==yt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function bt(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function wt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){bt(i,r,o,a,s,"next",t)}function s(t){bt(i,r,o,a,s,"throw",t)}a(void 0)}))}}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ot(){return(Ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=St(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function St(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tt(t)););return t}function xt(t,e){return(xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tt(t);if(e){var o=Tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Et(this,n)}}function Et(t,e){if(e&&("object"===yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kt(t)}function kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jt={where:function(t){return["READY"===t.type]},to:"READY"},At={where:function(t){return["BREAK"===t.type]},to:"BREAK"},Mt={where:function(t){return["CLEAR"===t.type]},to:"CLEAR"},Lt={where:function(t){return["COMPLETE"===t.type]},to:"COMPLETE"},It={IDLE:[jt],READY:[{where:function(t){return["DRAW"===t.type]},to:"DRAW"},{where:function(t){return["DRAWMANY"===t.type]},to:"DRAWMANY"}],DRAW:[jt,At,Mt,Lt],DRAWMANY:[jt,At,Mt,Lt],BREAK:[Lt],COMPLETE:[Mt],CLEAR:[jt]},Dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xt(t,e)}(u,t);var e,n,r,o,i,a,s,c=Ct(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Pt(kt(t=c.call(this,"IDLE",It)),"logger",window.__CORE__.createLogger("PCBEngine:SelectionSession")),Pt(kt(t),"metadata",void 0),Pt(kt(t),"renderer",void 0),Pt(kt(t),"data",{selectedItem:null,target:null}),Pt(kt(t),"renderMode",void 0),t.logger=window.__CORE__.createLogger("PCBEngine:DrawSelectionSession"),t.metadata=ot.a.instance,t.on("READY",(function(){return t.logger.LogDebug("READY")})),t.on("DRAW",(function(){return t.logger.LogDebug("DRAW")})),t.on("DRAWMANY",(function(){return t.logger.LogDebug("DRAWMANY")})),t.on("BREAK",(function(){return t.logger.LogDebug("BREAK")})),t.on("COMPLETE",(function(){return t.logger.LogDebug("COMPLETE")})),t.on("CLEAR",(function(){return t.logger.LogDebug("CLEAR")})),t.doDraw=t.doDraw.bind(kt(t)),t.doDrawMany=t.doDrawMany.bind(kt(t)),t.doClear=t.doClear.bind(kt(t)),t.on("DRAW",t.doDraw),t.on("DRAWMANY",t.doDrawMany),t.on("CLEAR",t.doClear),t}return e=u,(n=[{key:"dispose",value:function(){this.removeAllListeners()}},{key:"setup",value:function(t){this.dispatch({type:"READY"})&&(this.renderer=t)}},{key:"draw",value:(s=wt(gt().mark((function t(e,n){var r,o,i;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(null==e?void 0:e.native)===(null===(r=this.data.selectedItem)||void 0===r?void 0:r.native)&&n!==this.renderMode,i=!(null!=e&&e.native),t.next=4,this.gotoReady(i);case 4:this.dispatch({type:"DRAW",data:e,renderMode:n,update:o});case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"drawMany",value:(a=wt(gt().mark((function t(e,n){var r,o;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n!==this.renderMode,o=!e,t.next=4,this.gotoReady(o);case 4:this.dispatch({type:"DRAWMANY",data:e,renderMode:n,update:r});case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"dispatch",value:function(t){return Ot(Tt(u.prototype),"dispatch",this).call(this,t)}},{key:"dispatchClear",value:function(t){return this.dispatch({type:"CLEAR",deselect:t})}},{key:"gotoReady",value:function(t){var e=this;return new Promise((function(n){if("READY"!==e.state){var r=function(){e.off("READY",r),setTimeout((function(){return n()}),0)}.bind(e);if(e.on("READY",r),"DRAW"===e.state||"DRAWMANY"===e.state){var o=function(){e.off("COMPLETE",o),setTimeout((function(){e.dispatchClear(t)}),0)}.bind(e);e.on("COMPLETE",o),e.dispatch({type:"BREAK"})}"COMPLETE"===e.state&&e.dispatchClear(t)}else setTimeout((function(){return n()}),0)}))}},{key:"doClear",value:function(t){var e=this;try{t.deselect&&this.renderer.setSelected(!1),this.renderer.clearSelection(t.deselect)}catch(t){this.logger.LogError("Clear error. "+t)}setTimeout((function(){return e.dispatch({type:"READY"})}))}},{key:"addCustomNodesToDraw",value:function(t,e){t&&t.customNodes&&t.customNodes.forEach((function(t){return e.push({pcbId:t})}))}},{key:"handleBoardArraySelection",value:function(t,e){e.push(t)}},{key:"handleComponentSelection",value:function(t,e){var n,r=this;if(t&&t.pcbId){e.push(t),this.addCustomNodesToDraw(t,e);var o={currentVariant:null,variants:null};rt.a.bus.emit("Variants:get",o);var i=function(t,e){if(!t)return[];var n=t.graphiteMapping;return n?Object.entries(n).filter((function(t){return t[1]===e})).map((function(t){return Number.parseInt(t[0])})):[]},a=i(o.currentVariant,t.pcbId),s=o.variants?Array.from(o.variants.entries()).filter((function(t){var e;return t[0]!==(null===(e=o.currentVariant)||void 0===e?void 0:e.uniqueId)})).flatMap((function(e){return i(e[1],t.pcbId)})):[];null===(n=t.primitives)||void 0===n||n.forEach((function(t){var n=r.metadata.primitivesMap.get(t);if(null!=n&&n.pcbId){var o=a.findIndex((function(t){return t===n.pcbId}));if(o>=0)a.splice(o,1);else if((o=s.findIndex((function(t){return t===n.pcbId})))>=0)return;e.push(n),r.addCustomNodesToDraw(n,e)}})),a.forEach((function(t){return e.push(r.createVariantPrimitive(t))}))}}},{key:"doDraw",value:(i=wt(gt().mark((function t(e){var n,r,o,i,a,s,c,u,l,f,d,h,p=this;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.data.selectedItem=e.data,this.renderMode=e.renderMode,null!==(n=e.data)&&void 0!==n&&n.native){t.next=5;break}return this.dispatch({type:"READY"}),t.abrupt("return");case 5:if(r=new mt.b,o=function(){setTimeout((function(){return r.isCancellationRequested=!0}),0)},this.on("BREAK",o),t.prev=8,this.renderer.setSelected(!0),(i=e.data.native).primitives||"board"===e.data.name){t.next=14;break}return this.dispatchClear(!0),t.abrupt("return");case 14:return a=null,e.update?a=this.data.target:(a=this.getZoomToFitTargets(e.data,e.renderMode),this.data.target=a),s=a.fit2d||a.fit3d,c=[],"component"===e.data.name?this.handleComponentSelection(e.data.native,c):"board"===e.data.name?this.handleBoardArraySelection(null===(u=e.data)||void 0===u?void 0:u.native,c):null!==(l=e.data)&&void 0!==l&&l.isPrimitiveContainer||"net"===e.data.name&&(null===(f=e.data)||void 0===f||!f.selectedPrimitive)?i.primitives.forEach((function(t){var e=p.metadata.primitivesMap.get(t);e&&(e.pcbId&&c.push(e),p.addCustomNodesToDraw(e,c))})):null!==(d=e.data)&&void 0!==d&&d.selectedPrimitive&&(c.push(e.data.selectedPrimitive),this.addCustomNodesToDraw(e.data.selectedPrimitive,c)),r.throwIfCancellationRequested(),t.next=22,this.renderer.addSelection(c,r);case 22:h=t.sent,s&&!e.update&&(r.throwIfCancellationRequested(),this.renderer.zoomToFitTargets(h,a)),this.dispatch({type:"COMPLETE"}),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(8),t.t0 instanceof mt.a?setTimeout((function(){return p.dispatch({type:"COMPLETE"})}),0):(this.data.selectedItem=null,this.logger.LogError("Draw select error. ".concat(t.t0.message)),setTimeout((function(){return p.dispatchClear(!0)}),0));case 30:return t.prev=30,this.off("BREAK",o),t.finish(30);case 33:case"end":return t.stop()}}),t,this,[[8,27,30,33]])}))),function(t){return i.apply(this,arguments)})},{key:"doDrawMany",value:(o=wt(gt().mark((function t(e){var n,r,o,i,a,s,c,u,l,f=this;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[],r=Array.isArray(e.data)?e.data[0]:null,o=e.data,this.renderMode=e.renderMode,null!==(n=r)&&void 0!==n&&n.native){t.next=7;break}return this.dispatch({type:"READY"}),t.abrupt("return");case 7:return a=new mt.b,s=function(){setTimeout((function(){return a.isCancellationRequested=!0}),0)},this.on("BREAK",s),t.prev=10,this.renderer.setSelected(!0),c=null,e.update?c=this.data.target:(c=this.getZoomToFitTargets(r,e.renderMode),this.data.target=c),u=c.fit2d||c.fit3d,o.forEach((function(t){t.native.primitives?"component"===t.name&&f.handleComponentSelection(t.native,i):f.dispatchClear(!0)})),a.throwIfCancellationRequested(),t.next=19,this.renderer.addSelection(i,a);case 19:l=t.sent,u&&!e.update&&(a.throwIfCancellationRequested(),this.renderer.zoomToFitTargets(l,c)),this.dispatch({type:"COMPLETE"}),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(10),t.t0 instanceof mt.a?setTimeout((function(){return f.dispatch({type:"COMPLETE"})}),0):(this.logger.LogError("Draw select error. ".concat(t.t0.message)),setTimeout((function(){return f.dispatchClear(!0)}),0));case 27:return t.prev=27,this.off("BREAK",s),t.finish(27);case 30:case"end":return t.stop()}}),t,this,[[10,24,27,30]])}))),function(t){return o.apply(this,arguments)})},{key:"createVariantPrimitive",value:function(t){return{pcbId:t,id:t,kind:Z.a.Track,layerId:1,x:0,y:0}}},{key:"getZoomToFitTargets",value:function(t,e){return"PcbEngine"!==t.senderId?{fit2d:!0,fit3d:!0}:{fit2d:e!==nt.b.Render2D,fit3d:e!==nt.b.Render3D}}}])&&_t(e.prototype,n),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(vt.a);function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Nt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Rt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function Bt(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ft(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Bt(i,r,o,a,s,"next",t)}function s(t){Bt(i,r,o,a,s,"throw",t)}a(void 0)}))}}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gt=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$t(this,"metadata",void 0),$t(this,"renderer",void 0),$t(this,"renderMode",void 0),$t(this,"selectionSession",void 0),$t(this,"selectedItem_",void 0),$t(this,"subscribed",!1),$t(this,"unconvertedSelectedItem",void 0),$t(this,"onSelectedItem",function(){var t=Ft(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.selectedItem_=n,e.unconvertedSelectedItem=n,e.drawCurrentSelectedItem();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),$t(this,"onSelectedMany",function(){var t=Ft(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.renderMode&&(e.renderer.clearHighlight(),e.selectionSession.drawMany(n,e.renderMode));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),$t(this,"onHighlightItem",(function(t){if(e.renderMode){if(t&&t.native)return"net"===t.name?void t.native.primitives.forEach((function(t){var n=e.metadata.primitivesMap.get(t);e.launchHighlight(n)})):void e.launchHighlight(t.native);e.renderer.clearHighlight()}})),this.metadata=ot.a.instance,this.subscribeEvents(),this.onEnableSelection=this.onEnableSelection.bind(this),rt.a.bus.on("PcbEngine:enableSelection",this.onEnableSelection)}var e,n,r;return e=t,(n=[{key:"setup",value:function(t){var e;this.renderer=t,null===(e=this.selectionSession)||void 0===e||e.dispose(),this.selectionSession=new Dt,this.selectionSession.setup(this.renderer)}},{key:"selectedItem",get:function(){return this.selectedItem_}},{key:"setRenderMode",value:function(t){this.renderMode=t,this.drawCurrentSelectedItem()}},{key:"convertSelectedItemForDocument",value:function(t){var e;if("component"===(null===(e=this.unconvertedSelectedItem)||void 0===e?void 0:e.name)){var n=this.unconvertedSelectedItem.native.hash,r=this.isValidHash(n)?this.metadata.allPcbComponents.find((function(e){return e.pcbDocId==t&&e.hash===n})):null;r?(this.selectedItem_||(this.selectedItem_=this.unconvertedSelectedItem),this.selectedItem_.native=r):this.selectedItem_=null}}},{key:"isValidHash",value:function(t){return"$$$"!=t}},{key:"dispose",value:function(){rt.a.bus.off("PcbEngine:enableSelection",this.onEnableSelection),this.unsubscribeEvents()}},{key:"clear",value:function(){this.onSelectedItem(null)}},{key:"onEnableSelection",value:function(t){t?this.subscribeEvents():this.unsubscribeEvents()}},{key:"subscribeEvents",value:function(){this.subscribed||(rt.a.bus.on("select",this.onSelectedItem),rt.a.bus.on("selectMany",this.onSelectedMany),rt.a.bus.on("PcbEngine:highlight",this.onHighlightItem),this.subscribed=!0)}},{key:"unsubscribeEvents",value:function(){this.subscribed=!1,rt.a.bus.off("select",this.onSelectedItem),rt.a.bus.off("selectMany",this.onSelectedMany),rt.a.bus.off("PcbEngine:highlight",this.onHighlightItem)}},{key:"drawCurrentSelectedItem",value:function(){this.renderMode&&(this.renderer.clearHighlight(),this.selectionSession.draw(this.selectedItem_,this.renderMode))}},{key:"launchHighlight",value:function(t){if(t){if(this.renderer.isHighlight(t.pcbId))return;this.renderer.clearHighlight(),this.renderer.addHighlight(t)}else this.renderer.clearHighlight()}}])&&Ut(e.prototype,n),r&&Ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"cretateSelectionManager2d",value:function(t){return new U(t)}},{key:"cretateSelectionManager3d",value:function(t){return new X(t)}}])&&Vt(e.prototype,n),r&&Vt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)try{return JSON.parse(t)}catch(t){return console.error(t),e}return e}},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"afs-select",class:t.classes,attrs:{"data-locator":t.dataLocator},on:{keydown:t.handleKeyboard}},[e("AfsButton",t._b({directives:[{name:"dropdown",rawName:"v-dropdown:[id]",arg:t.id},{name:"hint",rawName:"v-hint:[hintId]",arg:t.hintId}],staticClass:"afs-select__button",class:{"is-open":t.isOpened,"is-quiet":t.quiet},attrs:{transparent:t.transparent||t.quiet,"data-locator":"".concat(t.dataLocator,"-button")},scopedSlots:t._u([{key:"customIcon",fn:function(){return[t._t("custom",null,{data:t.selected})]},proxy:!0},{key:"default",fn:function(){return[t._t("default",(function(){return[t._v("\n        "+t._s(t.selectedName)+"\n      ")]}),{data:t.selected}),t._v(" "),t.hasArrow?e("span",{staticClass:"afs-select__arrow"},[t._t("arrow",(function(){return[e("Icon",{class:t.getBEMClass("checkmark"),attrs:{name:"".concat(t.isOpened?"chevron-up-s":"chevron-down-8")}})]}))],2):t._e()]},proxy:!0}],null,!0)},"AfsButton",t.scope.menuBtn.attr,!1)),t._v(" "),e("ContextMenu",t._b({staticClass:"afs-input__hint",scopedSlots:t._u([{key:"default",fn:function(){return[t._t("error-message",(function(){return[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]}))]},proxy:!0}],null,!0)},"ContextMenu",t.scope.hint.attr,!1)),t._v(" "),e("ContextMenu",t._g(t._b({ref:"dropdown",staticClass:"afs-context-menu-select",class:{"hide-separate-line":t.hideSeparateLine},attrs:{"data-locator":"".concat(t.dataLocator,"-dropdown")},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[t._l(t.optionsComplete,(function(n){return[n.items.length?e("ul",{key:n.id,class:r("section")},[n.name?e("li",{key:n.id,class:[r("item"),t.getOptionClasses(n),r("item-in"),r("item_group-label")]},[t._t("group-label-".concat(n.id),(function(){return[e("AfsText",{attrs:{type:"group",inline:!0}},[t._v("\n                "+t._s(n.name)+"\n              ")])]}),{data:n})],2):t._e(),t._v(" "),t._l(n.items,(function(n){return e("li",{key:n.id,staticClass:"afs-select__menu-item",class:[r("item"),t.getOptionClasses(n)]},[e("button",{directives:[{name:"dropdown",rawName:"v-dropdown:[id].close",arg:t.id,modifiers:{close:!0}}],class:t.optionControlClasses,attrs:{type:"button",disabled:!!n.isDisabled,"data-locator":"".concat(t.dataLocator,"-option")},on:{"!click":function(e){return t.change(n)}}},[t.isSelected(n.id)&&t.hasIcon?e("Icon",{class:r("item-checkmark"),attrs:{name:t.icon||t.option.icon}}):t._e(),t._v(" "),t._t("option",(function(){return[n.description?e("div",{staticClass:"afs-context-menu-select__text-with-description"},[e("AfsText",{attrs:{type:"single line",inline:!0}},[t._v("\n                    "+t._s(n.name)+"\n                  ")]),t._v(" "),e("AfsText",{staticClass:"afs-context-menu-select__description",attrs:{type:"single line"}},[t._v("\n                    "+t._s(n.description)+"\n                  ")])],1):e("AfsText",{attrs:{type:"single line",inline:!0}},[t._v("\n                  "+t._s(n.name)+"\n                ")])]}),{data:n})],2)])}))],2):t._e()]}))]}}],null,!0)},"ContextMenu",t.scope.menu.attr,!1),t.scope.menu.listeners))],1)};r._withStripped=!0;var o=n(8),i=n(38),a=n(5),s=n(4),c=n(3),u=n(1),l=n(153),f=n(28),d=n(17),h=n(2),p=38,m=40,v=13,y=n(122),g=["group"];function b(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S={name:"Select",components:{ContextMenu:o.a,AfsButton:i.a,Icon:s.a,AfsText:a.a},directives:{dropdown:l.a,hint:f.a},model:{prop:"value",event:"input"},props:{dataLocator:{type:String,default:"select"},value:{type:Object,default:null},placeholder:{type:String,default:null},id:{type:String,default:d.a},offset:{type:[Number,String],default:0},options:{type:Array,required:!0,default:function(){return[]},validator:function(t){return t.every((function(t){return!function(t){return void 0===t}(t.id)}))}},groups:{type:Array,default:function(){return[]}},position:{type:Object,default:function(){return{y:"bottom",x:"start"}}},wide:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},quiet:{type:Boolean,default:!1},maxHeightMenu:{type:Number,default:392},radius:{type:String,default:"".concat(h.d.tl," ").concat(h.d.tr," ").concat(h.d.bl," ").concat(h.d.br)},disabled:{type:Boolean,default:!1},hasIcon:{type:Boolean,default:!1},hideSeparateLine:{type:Boolean,default:!1},icon:{type:String,default:"checkmark"},isValid:{type:Boolean,default:!0},errorMessage:{type:String,default:""},hasArrow:{type:Boolean,default:!0}},data:function(){return{selected:null,isOpened:!1,activeOption:null,keyboard:null}},computed:{selectedName:function(){return this.selected&&this.selected.name?this.selected.name:this.placeholder},controlClasses:function(){return O({},h.a.isError,!this.isValid)},scope:function(){return{menu:{attr:{id:this.id,type:"dropdown",modifiers:this.position,offset:this.parseOffset,wide:this.wide,fullWidth:this.fullWidth,maxHeightLimit:this.maxHeightMenu},listeners:{open:this.open,close:this.close}},menuBtn:{attr:{disabled:this.disabled,wide:this.wide,class:this.controlClasses,isValid:this.isValid,justify:"left",radius:this.radius}},hint:{attr:{id:this.hintId,isExist:this.hasError,modifiers:{y:"bottom",x:"center"},type:"hint",arrow:!0,error:!0}}}},hasError:function(){return!(this.isValid||!this.errorMessage||!this.errorMessage.length)},hintId:function(){return Object(d.a)()},parseOffset:function(){return parseInt(this.offset)},classes:function(){return[this.themeClass]},themeClass:function(){var t=Object(c.a)(this.$root);return Object(u.c)(t.theme)},activeOptionIndex:function(){var t=this.activeOption||this.selected;return t?this.options.indexOf(t):-1},optionControlClasses:function(){var t=this.$refs.dropdown.getBEMClass;return[t("item-clickable"),t("item-in"),t("item-in_flex"),this.hasIcon&&t("item-in_icon")]},optionsGroups:function(){var t=this.groups.reduce((function(t,e){return t[e.id]=_(_({},e),{},{items:[]}),t}),{});return t.default||(t.default={id:"default",items:[]}),t},optionsComplete:function(){var t=this.optionsGroups;return t.default.items=[],this.options.reduce((function(t,e){var n=e.group,r=b(e,g);return"string"!=typeof n&&"number"!=typeof n||!Object(y.a)(t,n)?r.id&&t.default.items.push(r):t[n].items.push(r),t}),_({},t))}},watch:{value:{immediate:!0,handler:function(t){!this.placeholder&&t&&(this.selected=t)}},options:{immediate:!0,deep:!0,handler:function(){this.placeholder||this.selected||this.value||(this.selected=this.getFirstEnabledOption())}}},created:function(){var t;this.keyboard=(t={up:{keyCodes:[p],events:[],fire:function(t){this.keyCodes.includes(t)&&this.events.forEach((function(t){return"function"==typeof t&&t()}))}},down:{keyCodes:[m],events:[],fire:function(t){this.keyCodes.includes(t)&&this.events.forEach((function(t){return"function"==typeof t&&t()}))}},enter:{keyCodes:[v],events:[],fire:function(t){this.keyCodes.includes(t)&&this.events.forEach((function(t){return"function"==typeof t&&t()}))}}},{up:function(e){return t.up.events.push(e),this},down:function(e){return t.down.events.push(e),this},enter:function(e){return t.enter.events.push(e),this},fire:function(e){return Object.values(t).forEach((function(t){return t.fire(e)}))}}).up(this.handleUpKey).down(this.handleDownKey).enter(this.handleEnterKey)},methods:{handleKeyboard:function(t){this.isOpened&&this.keyboard.fire(t.keyCode)},getFirstEnabledOption:function(){return this.options.find((function(t){return!("isDisabled"in t)||"isDisabled"in t&&!t.isDisabled}))},isSelected:function(t){return this.selected&&this.selected.id===t},isActive:function(t){return null!==this.activeOption&&this.activeOption.id===t},getOptionById:function(t){return this.options.find((function(e){return e.id===t}))},hasSlot:function(t){return this.$slots[t]},handleUpKey:function(){var t=this.activeOptionIndex;t>0&&(this.activeOption=this.options[t-1])},handleDownKey:function(){var t=this.activeOptionIndex;t<this.options.length-1&&(this.activeOption=this.options[t+1])},handleEnterKey:function(){this.change(this.activeOption)},getOptionClasses:function(t){return{"is-active":this.isActive(t.id),"is-selected":this.isSelected(t.id)&&!this.hasIcon}},getBEMClass:function(t){return Object(u.a)("afs-select",t)},open:function(){this.isOpened=!0,this.$emit("open")},close:function(){this.isOpened=!1,this.activeOption=null,this.$emit("close")},change:function(t){null===t||"string"!=typeof t.id&&"number"!=typeof t.id||t.id===(this.selected&&this.selected.id)||t.isDisabled||(this.selected=t,this.$emit("change",t),this.$emit("input",t))}}},x=(n(334),n(0)),C=Object(x.a)(S,r,[],!1,null,null,null).exports;e.a=C},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(73);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){function t(e,n){o(this,t),s(this,"name",void 0),s(this,"transports",void 0),s(this,"LogTrace",this.log.bind(this,r.a.Trace)),s(this,"LogDebug",this.log.bind(this,r.a.Debug)),s(this,"LogInfo",this.log.bind(this,r.a.Info)),s(this,"LogWarn",this.log.bind(this,r.a.Warn)),s(this,"LogError",this.log.bind(this,r.a.Error)),s(this,"LogCritical",this.log.bind(this,r.a.Critical)),this.name=e,this.transports=n}return a(t,[{key:"log",value:function(t,e,n){var o={name:this.name,timestamp:Date.now(),level:r.a[t],message:e,error:this.getError(n)};this.transports.filter((function(e){return t>=e.level})).forEach((function(t){return t.log(o)}))}},{key:"getError",value:function(t){if(t){var e;if(t.message&&t.stack)return t;var n={message:null!==(e=t.message)&&void 0!==e?e:"".concat(t),stack:""},r=new Error;if(r.stack)try{var o=r.stack.split(/\r\n|\n|\r/gm);o.length>3&&(o.splice(1,2),n.stack=o.join("\n"))}catch(t){}return n}return null}}]),t}(),u=function(){function t(){o(this,t)}return a(t,null,[{key:"registerTransport",value:function(e){t.transports.push(e)}},{key:"createLogger",value:function(e){return new c(e,t.transports)}}]),t}();s(u,"transports",[]),e.b=u.createLogger},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"Materials",void 0),o(this,"CustomData",void 0),o(this,"state",0),o(this,"Name",void 0),this.Materials=e||[],this.Name=n||"",this.CustomData=r||""}var e,n,i;return e=t,i=[{key:"getMaterials",value:function(t){for(var e=t.GetMaterialsCount(),n=new Array(e),r=0;r<e;r++)n[r]=t.GetMaterial(r);return n}}],(n=[{key:"GetStateId",value:function(){return this.state}},{key:"GetMaterial",value:function(t){return this.Materials[t]}},{key:"GetMaterialIndex",value:function(t,e){throw new Error("Method not implemented.")}},{key:"GetName",value:function(){return this.Name}},{key:"GetCustomData",value:function(){return this.CustomData}},{key:"GetMaterialsCount",value:function(){return this.Materials.length}}])&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=!1},function(t,e,n){var r=n(468),o=n(391);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(157),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(59),o=n(469),i=n(391),a=n(390)("IE_PROTO"),s=function(){},c=function(){var t,e=n(388)("iframe"),r=i.length;for(e.style.display="none",n(392).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(468),o=n(391).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(141),o=n(113),i=n(390)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(70)("unscopables"),o=Array.prototype;null==o[r]&&n(142)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e,n){var r=n(60);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){(function(e){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),l=Object.prototype.toString,f=Math.max,d=Math.min,h=function(){return u.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==l.call(t)}(t))return NaN;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var s=o.test(t);return s||i.test(t)?a(t.slice(2),s?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,n){var r,o,i,a,s,c,u=0,l=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=r,i=o;return r=o=void 0,u=e,a=t.apply(i,n)}function b(t){return u=t,s=setTimeout(_,e),l?g(t):a}function w(t){var n=t-c;return void 0===c||n>=e||n<0||v&&t-u>=i}function _(){var t=h();if(w(t))return O(t);s=setTimeout(_,function(t){var n=e-(t-c);return v?d(n,i-(t-u)):n}(t))}function O(t){return s=void 0,y&&r?g(t):(r=o=void 0,a)}function S(){var t=h(),n=w(t);if(r=arguments,o=this,c=t,n){if(void 0===s)return b(c);if(v)return s=setTimeout(_,e),g(c)}return void 0===s&&(s=setTimeout(_,e)),a}return e=m(e)||0,p(n)&&(l=!!n.leading,i=(v="maxWait"in n)?f(m(n.maxWait)||0,e):i,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=o=s=void 0},S.flush=function(){return void 0===s?a:O(h())},S}}).call(this,n(64))},function(t,e,n){"use strict";n.r(e);var r=function(){return(0,this._self._c)(this.name,this._g({tag:"component",staticClass:"lib-icon"},this.$listeners))};r._withStripped=!0;var o={name:"LibIcon",props:{name:{type:String,required:!0}}},i=(n(332),n(0)),a=Object(i.a)(o,r,[],!1,null,null,null);e.default=a.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return r.a}));var r=n(221)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={Connection:0,Module:1,ModuleEntry:2,ConnectionEntry:3}},function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var r=n(9);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"groupStackIndex",[[{type:r.a.Plated,subType:null}],[{type:r.a.NonPlated,subType:null}],[{type:r.a.Drillmap,subType:null},{type:r.a.NcDrill,subType:null}],[{type:r.a.Legend,subType:r.b.Top}],[{type:r.a.Soldermask,subType:r.b.Top}],[{type:r.a.Carbonmask,subType:r.b.Top}],[{type:r.a.Goldmask,subType:r.b.Top}],[{type:r.a.Heatsinkmask,subType:r.b.Top}],[{type:r.a.Peelablemask,subType:r.b.Top}],[{type:r.a.Silvermask,subType:r.b.Top}],[{type:r.a.Tinmask,subType:r.b.Top}],[{type:r.a.Paste,subType:r.b.Top}],[{type:r.a.Glue,subType:r.b.Top}],[{type:r.a.Depthrout,subType:r.b.Top}],[{type:r.a.Copper,subType:null}],[{type:r.a.Depthrout,subType:r.b.Top}],[{type:r.a.Glue,subType:r.b.Bot}],[{type:r.a.Paste,subType:r.b.Bot}],[{type:r.a.Tinmask,subType:r.b.Bot}],[{type:r.a.Silvermask,subType:r.b.Bot}],[{type:r.a.Peelablemask,subType:r.b.Bot}],[{type:r.a.Heatsinkmask,subType:r.b.Bot}],[{type:r.a.Goldmask,subType:r.b.Bot}],[{type:r.a.Carbonmask,subType:r.b.Bot}],[{type:r.a.Soldermask,subType:r.b.Bot}],[{type:r.a.Legend,subType:r.b.Bot}],[{type:r.a.Vcut,subType:null}],[{type:r.a.Viafill,subType:null}]]),i(this,"groupDisplayStackIndex",[[r.a.Copper],[r.a.Soldermask],[r.a.Carbonmask],[r.a.Goldmask],[r.a.Heatsinkmask],[r.a.Peelablemask],[r.a.Silvermask],[r.a.Tinmask],[r.a.Legend],[r.a.Paste],[r.a.Glue],[r.a.Depthrout],[r.a.Vcut],[r.a.Viafill],[r.a.Plated],[r.a.NonPlated],[r.a.Profile],[r.a.Drillmap,r.a.NcDrill]])}var e,n,a;return e=t,(n=[{key:"getLayerName",value:function(t){switch(t.kind){case r.a.Copper:return t.subKind===r.b.Top?"Top":t.subKind===r.b.Bot?"Bottom":"Mid ".concat(t.indexFrom-1);case r.a.Plated:case r.a.NonPlated:return t.subKind===r.b.Pth?"PTH ".concat(t.indexFrom,"-").concat(t.indexTo):t.subKind===r.b.Npth?"NPTH ".concat(t.indexFrom,"-").concat(t.indexTo):t.subKind===r.b.Blind?"Blind ".concat(t.indexFrom,"-").concat(t.indexTo):t.subKind===r.b.Buried?"Buried ".concat(t.indexFrom,"-").concat(t.indexTo):"Other ".concat(t.indexFrom,"-").concat(t.indexTo);case r.a.Profile:return t.subKind===r.b.P?"Profile P":t.subKind===r.b.Np?"Profile NP":t.name;case r.a.Soldermask:return t.subKind===r.b.Top?"Top Solder ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Solder ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Legend:return t.subKind===r.b.Top?"Top Overlay ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Overlay ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Paste:return t.subKind===r.b.Top?"Top Paste ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Paste ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Glue:return t.subKind===r.b.Top?"Top Glue ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Glue ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Carbonmask:return t.subKind===r.b.Top?"Top Carbon ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Carbon ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Goldmask:return t.subKind===r.b.Top?"Top Gold ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Gold ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Heatsinkmask:return t.subKind===r.b.Top?"Top Heatsink ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Heatsink ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Peelablemask:return t.subKind===r.b.Top?"Top Peelable ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Peelable ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Silvermask:return t.subKind===r.b.Top?"Top Silver ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Silver ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Tinmask:return t.subKind===r.b.Top?"Top Tin ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.subKind===r.b.Bot?"Bottom Tin ".concat(t.indexFrom&&1!==t.indexFrom?t.indexFrom:""):t.name;case r.a.Pads:if(t.subKind===r.b.Top)return"Top Pad Master";if(t.subKind===r.b.Bot)return"Bottom Pad Master";case r.a.Drawing:return"Drawing ".concat(t.indexFrom);case r.a.KeepOut:return"Keep-Out";case r.a.NcDrill:return"NC Drill ".concat(t.indexFrom?t.indexFrom:"");case r.a.Other:case r.a.OtherDrawing:return t.details?"".concat(t.details," (").concat(t.name,")"):"".concat(t.name);default:return t.name}}},{key:"getLayerGroupStackIndex",value:function(t){var e=this.groupStackIndex.findIndex((function(e){return e.findIndex((function(e){return e.type===t.kind&&(e.subType===t.subKind||null===e.subType)}))>=0}));return e>=0?e:this.groupStackIndex.length}},{key:"getLayerGroupDisplayStackIndex",value:function(t){var e=this.groupDisplayStackIndex.findIndex((function(e){return e.findIndex((function(e){return e===t.kind}))>=0}));return e>=0?e:this.groupDisplayStackIndex.length}},{key:"getLayerGroup",value:function(t){switch(t.kind){case r.a.Copper:return"Copper";case r.a.Plated:return"Plated";case r.a.NonPlated:return"Non Plated";case r.a.Profile:return"Profile";case r.a.Soldermask:return"Solder Mask";case r.a.Legend:return"Silkscreen";case r.a.Paste:return"Paste";case r.a.Glue:return"Glue";case r.a.Carbonmask:return"Carbon Mask";case r.a.Goldmask:return"Gold Mask";case r.a.Heatsinkmask:return"Heatsink Mask";case r.a.Peelablemask:return"Peelable Mask";case r.a.Silvermask:return"Silver Mask";case r.a.Tinmask:return"Tin Mask";case r.a.Depthrout:return"Depthrout";case r.a.Vcut:return"Vcut";case r.a.Viafill:return"Via Fill";case r.a.NcDrill:case r.a.Drillmap:return"Drills";default:return"Other Layers"}}},{key:"getDisplayIndex",value:function(t,e){return e}},{key:"isTop",value:function(t){return t.subKind===r.b.Top}},{key:"isBottom",value:function(t){return t.subKind===r.b.Bot}},{key:"isKeepOut",value:function(t){return t.kind===r.a.KeepOut||t.kind===r.a.Profile}},{key:"isDrillMap",value:function(t){return t.kind===r.a.Drillmap||t.kind===r.a.NcDrill||t.kind===r.a.Plated||t.kind===r.a.NonPlated}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=f(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(a,t);var e,n,o,i=h(a);function a(){return c(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"getLayerName",value:function(t){switch(t.kind){case r.a.Other:return t.name.match(/.gm(\d+)$/g)?"Mechanical "+(t.indexFrom?t.indexFrom:""):t.details?t.details:t.name;case r.a.Drillmap:var e=t.name.match(/drillmap_(\d+).gbr$/);return e?"Drill Map "+e[1]:t.name}return l(m(a.prototype),"getLayerName",this).call(this,t)}}])&&u(e.prototype,n),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(a);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=_(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function _(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}function O(t,e){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(a,t);var e,n,o,i=S(a);function a(){return g(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"getLayerName",value:function(t){var e;switch(t.kind){case r.a.OtherDrawing:if(e=/-dwgs_user.gbr$/g,t.name.match(e))return"Explanatory Drawings";if(e=/-cmts_user.gbr$/g,t.name.match(e))return"Explanatory Comments";case r.a.Other:if(e=/-b_crtyd.gbr$/g,t.name.match(e))return"Bottom Courtyards";if(e=/-f_crtyd.gbr$/g,t.name.match(e))return"Top Courtyards";if(e=/-b_fab.gbr$/g,t.name.match(e))return"Bottom Footprint Assembly";if(e=/-f_fab.gbr$/g,t.name.match(e))return"Top Footprint Assembly";if(e=/-eco1_user.gbr$/g,t.name.match(e))return"Eco User 1";if(e=/-eco2_user.gbr$/g,t.name.match(e))return"Eco User 2";if(e=/-margin.gbr$/g,t.name.match(e))return"Margin"}return w(C(a.prototype),"getLayerName",this).call(this,t)}},{key:"getDisplayIndex",value:function(t,e){var n;switch(t.kind){case r.a.OtherDrawing:return n=/-dwgs_user.gbr$/g,t.name.match(n)?2:(n=/-cmts_user.gbr$/g,t.name.match(n)?1:e+2);case r.a.Other:return n=/-b_crtyd.gbr$/g,t.name.match(n)?2:(n=/-f_crtyd.gbr$/g,t.name.match(n)?1:(n=/-b_fab.gbr$/g,t.name.match(n)?4:(n=/-f_fab.gbr$/g,t.name.match(n)?3:(n=/-eco1_user.gbr$/g,t.name.match(n)?5:(n=/-eco2_user.gbr$/g,t.name.match(n)?6:(n=/-margin.gbr$/g,t.name.match(n)?7:e+7))))))}return w(C(a.prototype),"getDisplayIndex",this).call(this,t,e)}}])&&b(e.prototype,n),o&&b(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(a);function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getLayer",value:function(t){if(t){if(t.startsWith("Altium Limited"))return this.altiumLayer;if(t.startsWith("KiCad"))return this.kicadLayer}return this.defaultLayer}}],(n=null)&&k(e.prototype,n),r&&k(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();T(P,"defaultLayer",new a),T(P,"altiumLayer",new v),T(P,"kicadLayer",new E)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e),e.default={inserted:function(t,e,n){var r=e.arg,o=void 0===r?void 0:r,i=e.value,a=void 0===i?void 0:i,s=n.context,c=void 0===s?void 0:s;(o||a?document.getElementById(o||a):document.body).appendChild(t);try{c.$on("hook:beforeDestroy",(function(){this.$parent.$el instanceof Element&&this.$parent.$el.appendChild(this.$el)}))}catch(t){}},unmounted:function(t){var e;null==t||null===(e=t.parentNode)||void 0===e||e.removeChild(t)}}}])},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=(t||"").trim(),n=e.split(".");return n.length>1?n.slice(0,-1).join("."):e}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";e.a=function(t){return 255&t}},,function(t,e,n){var r=n(95).f,o=n(141),i=n(70)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(11),o=n(175),i=n(58),a=n(394),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),l=function(t,e,n){var o={},s=i((function(){return!!a[t]()||"​"!="​"[t]()})),c=o[t]=s?e(f):a[t];n&&(o[n]=c),r(r.P+r.F*s,"String",o)},f=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=l},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(57),o=n(95),i=n(94),a=n(70)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(123);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){"use strict";n(167)},function(t,e,n){"use strict";var r=function(){return(0,this._self._c)(this.tag,this._g({tag:"component",staticClass:"afs-box",class:this.classes,attrs:{"data-locator":this.dataLocator}},this.$listeners),[this._t("default")],2)};r._withStripped=!0;var o=n(2),i=n(1),a=n(3);var s={name:"AfsBox",props:{tag:{type:String,default:"div"},type:{type:String,default:"",validator:function(t){return!t.length||["group"].includes(t)}},hasShadow:{type:Boolean,default:!1},hasBorder:{type:Boolean,default:!1},radius:{type:String,default:"".concat(o.d.tl," ").concat(o.d.tr," ").concat(o.d.bl," ").concat(o.d.br)},dataLocator:{type:String,default:"box"}},computed:{classes:function(){return[(t={"afs-box_shadow":this.hasShadow,"afs-box_border":this.hasBorder},e="afs-box_".concat(this.type),n=!!this.type.length,e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t),Object(i.b)("afs-box",this.radius),this.themeClass];var t,e,n},themeClass:function(){var t=Object(a.a)(this.$root);return Object(i.c)(t.theme)}}},c=(n(416),n(0)),u=Object(c.a)(s,r,[],!1,null,null,null);e.a=u.exports},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return w}));var r=("undefined"!=typeof window?window:void 0!==t?t:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(t,e){if(void 0===e&&(e=[]),null===t||"object"!=typeof t)return t;var n,r=(n=function(e){return e.original===t},e.filter(n)[0]);if(r)return r.copy;var i=Array.isArray(t)?[]:{};return e.push({original:t,copy:i}),Object.keys(t).forEach((function(n){i[n]=o(t[n],e)})),i}function i(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function a(t){return null!==t&&"object"==typeof t}var s=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},c={namespaced:{configurable:!0}};c.namespaced.get=function(){return!!this._rawModule.namespaced},s.prototype.addChild=function(t,e){this._children[t]=e},s.prototype.removeChild=function(t){delete this._children[t]},s.prototype.getChild=function(t){return this._children[t]},s.prototype.hasChild=function(t){return t in this._children},s.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},s.prototype.forEachChild=function(t){i(this._children,t)},s.prototype.forEachGetter=function(t){this._rawModule.getters&&i(this._rawModule.getters,t)},s.prototype.forEachAction=function(t){this._rawModule.actions&&i(this._rawModule.actions,t)},s.prototype.forEachMutation=function(t){this._rawModule.mutations&&i(this._rawModule.mutations,t)},Object.defineProperties(s.prototype,c);var u=function(t){this.register([],t,!1)};u.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},u.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},u.prototype.update=function(t){!function t(e,n,r){0;if(n.update(r),r.modules)for(var o in r.modules){if(!n.getChild(o))return void 0;t(e.concat(o),n.getChild(o),r.modules[o])}}([],this.root,t)},u.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var o=new s(e,n);0===t.length?this.root=o:this.get(t.slice(0,-1)).addChild(t[t.length-1],o);e.modules&&i(e.modules,(function(e,o){r.register(t.concat(o),e,n)}))},u.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},u.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};var l;var f=function(t){var e=this;void 0===t&&(t={}),!l&&"undefined"!=typeof window&&window.Vue&&b(window.Vue);var n=t.plugins;void 0===n&&(n=[]);var o=t.strict;void 0===o&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new u(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new l,this._makeLocalGettersCache=Object.create(null);var i=this,a=this.dispatch,s=this.commit;this.dispatch=function(t,e){return a.call(i,t,e)},this.commit=function(t,e,n){return s.call(i,t,e,n)},this.strict=o;var c=this._modules.root.state;v(this,c,[],this._modules.root),m(this,c),n.forEach((function(t){return t(e)})),(void 0!==t.devtools?t.devtools:l.config.devtools)&&function(t){r&&(t._devtoolHook=r,r.emit("vuex:init",t),r.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){r.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){r.emit("vuex:action",t,e)}),{prepend:!0}))}(this)},d={state:{configurable:!0}};function h(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function p(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;v(t,n,[],t._modules.root,!0),m(t,n,e)}function m(t,e,n){var r=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var o=t._wrappedGetters,a={};i(o,(function(e,n){a[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})}));var s=l.config.silent;l.config.silent=!0,t._vm=new l({data:{$$state:e},computed:a}),l.config.silent=s,t.strict&&function(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(t),r&&(n&&t._withCommit((function(){r._data.$$state=null})),l.nextTick((function(){return r.$destroy()})))}function v(t,e,n,r,o){var i=!n.length,a=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=r),!i&&!o){var s=y(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit((function(){l.set(s,c,r.state)}))}var u=r.context=function(t,e,n){var r=""===e,o={dispatch:r?t.dispatch:function(n,r,o){var i=g(n,r,o),a=i.payload,s=i.options,c=i.type;return s&&s.root||(c=e+c),t.dispatch(c,a)},commit:r?t.commit:function(n,r,o){var i=g(n,r,o),a=i.payload,s=i.options,c=i.type;s&&s.root||(c=e+c),t.commit(c,a,s)}};return Object.defineProperties(o,{getters:{get:r?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(o){if(o.slice(0,r)===e){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[o]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return y(t.state,n)}}}),o}(t,a,n);r.forEachMutation((function(e,n){!function(t,e,n,r){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){n.call(t,r.state,e)}))}(t,a+n,e,u)})),r.forEachAction((function(e,n){var r=e.root?n:a+n,o=e.handler||e;!function(t,e,n,r){(t._actions[e]||(t._actions[e]=[])).push((function(e){var o,i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return(o=i)&&"function"==typeof o.then||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}(t,r,o,u)})),r.forEachGetter((function(e,n){!function(t,e,n,r){if(t._wrappedGetters[e])return void 0;t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)}}(t,a+n,e,u)})),r.forEachChild((function(r,i){v(t,e,n.concat(i),r,o)}))}function y(t,e){return e.reduce((function(t,e){return t[e]}),t)}function g(t,e,n){return a(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function b(t){l&&t===l||
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:n});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[n].concat(t.init):n,e.call(this,t)}}function n(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}(l=t)}d.state.get=function(){return this._vm._data.$$state},d.state.set=function(t){0},f.prototype.commit=function(t,e,n){var r=this,o=g(t,e,n),i=o.type,a=o.payload,s=(o.options,{type:i,payload:a}),c=this._mutations[i];c&&(this._withCommit((function(){c.forEach((function(t){t(a)}))})),this._subscribers.slice().forEach((function(t){return t(s,r.state)})))},f.prototype.dispatch=function(t,e){var n=this,r=g(t,e),o=r.type,i=r.payload,a={type:o,payload:i},s=this._actions[o];if(s){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(a,n.state)}))}catch(t){0}var c=s.length>1?Promise.all(s.map((function(t){return t(i)}))):s[0](i);return new Promise((function(t,e){c.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(a,n.state)}))}catch(t){0}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(a,n.state,t)}))}catch(t){0}e(t)}))}))}},f.prototype.subscribe=function(t,e){return h(t,this._subscribers,e)},f.prototype.subscribeAction=function(t,e){return h("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},f.prototype.watch=function(t,e,n){var r=this;return this._watcherVM.$watch((function(){return t(r.state,r.getters)}),e,n)},f.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},f.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),v(this,this.state,t,this._modules.get(t),n.preserveState),m(this,this.state)},f.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=y(e.state,t.slice(0,-1));l.delete(n,t[t.length-1])})),p(this)},f.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},f.prototype.hotUpdate=function(t){this._modules.update(t),p(this,!0)},f.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(f.prototype,d);var w=C((function(t,e){var n={};return x(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=E(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"==typeof o?o.call(this,e,n):e[o]},n[r].vuex=!0})),n})),_=C((function(t,e){var n={};return x(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.commit;if(t){var i=E(this.$store,"mapMutations",t);if(!i)return;r=i.context.commit}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}})),n})),O=C((function(t,e){var n={};return x(e).forEach((function(e){var r=e.key,o=e.val;o=t+o,n[r]=function(){if(!t||E(this.$store,"mapGetters",t))return this.$store.getters[o]},n[r].vuex=!0})),n})),S=C((function(t,e){var n={};return x(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var i=E(this.$store,"mapActions",t);if(!i)return;r=i.context.dispatch}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}})),n}));function x(t){return function(t){return Array.isArray(t)||a(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function C(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function E(t,e,n){return t._modulesNamespaceMap[n]}function k(t,e,n){var r=n?t.groupCollapsed:t.group;try{r.call(t,e)}catch(n){t.log(e)}}function T(t){try{t.groupEnd()}catch(e){t.log("—— log end ——")}}function P(){var t=new Date;return" @ "+j(t.getHours(),2)+":"+j(t.getMinutes(),2)+":"+j(t.getSeconds(),2)+"."+j(t.getMilliseconds(),3)}function j(t,e){return n="0",r=e-t.toString().length,new Array(r+1).join(n)+t;var n,r}var A={Store:f,install:b,version:"3.6.2",mapState:w,mapMutations:_,mapGetters:O,mapActions:S,createNamespacedHelpers:function(t){return{mapState:w.bind(null,t),mapGetters:O.bind(null,t),mapMutations:_.bind(null,t),mapActions:S.bind(null,t)}},createLogger:function(t){void 0===t&&(t={});var e=t.collapsed;void 0===e&&(e=!0);var n=t.filter;void 0===n&&(n=function(t,e,n){return!0});var r=t.transformer;void 0===r&&(r=function(t){return t});var i=t.mutationTransformer;void 0===i&&(i=function(t){return t});var a=t.actionFilter;void 0===a&&(a=function(t,e){return!0});var s=t.actionTransformer;void 0===s&&(s=function(t){return t});var c=t.logMutations;void 0===c&&(c=!0);var u=t.logActions;void 0===u&&(u=!0);var l=t.logger;return void 0===l&&(l=console),function(t){var f=o(t.state);void 0!==l&&(c&&t.subscribe((function(t,a){var s=o(a);if(n(t,f,s)){var c=P(),u=i(t),d="mutation "+t.type+c;k(l,d,e),l.log("%c prev state","color: #9E9E9E; font-weight: bold",r(f)),l.log("%c mutation","color: #03A9F4; font-weight: bold",u),l.log("%c next state","color: #4CAF50; font-weight: bold",r(s)),T(l)}f=s})),u&&t.subscribeAction((function(t,n){if(a(t,n)){var r=P(),o=s(t),i="action "+t.type+r;k(l,i,e),l.log("%c action","color: #03A9F4; font-weight: bold",o),T(l)}})))}}};e.b=A}).call(this,n(64))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function(){function t(e,n,r,i,a,s,c,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"name",void 0),o(this,"index",void 0),o(this,"is_keepout",void 0),o(this,"z_range",void 0),o(this,"is_barrel",void 0),o(this,"is_cutout",void 0),o(this,"is_inverted",void 0),o(this,"show3d",void 0),this.name=e,this.index=n,this.z_range=r||[0,0],this.is_cutout=i||!1,this.is_barrel=a||!1,this.is_keepout=s||!1,this.is_inverted=c||!1,this.show3d=u||!1}var e,n,i;return e=t,i=[{key:"createLayerArray",value:function(e){for(var n=[],r=0;r<e;r++)n.push(new t("level"+r,r));return n}}],(n=null)&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}));var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),i(this,"x",void 0),i(this,"y",void 0),i(this,"z",void 0),this.x=e,this.y=n,this.z=o}var e,n,a;return e=t,(n=[{key:"isEmpty",get:function(){return 0==this.x&&0==this.y&&0==this.z}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return c}));var s="abcdefghijklmopqrstuvwxyz0123456789",c=function(){function t(e){r(this,t),a(this,"length",void 0),a(this,"history",void 0),this.length="number"==typeof e?e:t.DEFAULT_LENGTH,this.history=[]}return i(t,[{key:"set",value:function(t){this.history.length==this.length&&this.history.pop();var e=u.create(t);return this.history.unshift(e),e.id}},{key:"get",value:function(t){var e=this.history.find((function(e){return e.id==t}));return e&&e.value}},{key:"delete",value:function(t){this.history=this.history.filter((function(e){return e.id!==t}))}},{key:"forEach",value:function(t){this.history.forEach(t)}},{key:"toTop",value:function(t){if(this.get.call(this,t)){var e=this.history.findIndex((function(e){return e.id===t}));e>0&&this.history.unshift(this.history.splice(e,1)[0])}}},{key:"values",value:function(){return this.history.map((function(t){return t.value}))}},{key:"getId",value:function(t){return t<this.history.length?this.history[t].id:null}}]),t}();a(c,"DEFAULT_LENGTH",1/0);var u=function(){function t(e,n){r(this,t),this.id=e,this.value=n}return i(t,null,[{key:"create",value:function(e){var n=function(t){for(var e,n,r="",o=0;o<t;o++){var i=(n=s.length,(e=0)+Math.floor(Math.random()*(n-e)));r+=s.substring(i,i+1)}return r}(10);return e.id=n,new t(n,e)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return Ee}));var r=n(18),o=n(44);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"createElement",value:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}},{key:"setAttribute",value:function(t,e){for(var n in e)t.setAttribute(n,e[n.toString()]);return t}},{key:"createLeftRoundedRectPath",value:function(t,e,n,r,o){return"M"+(t+o)+","+e+"h"+(n-o)+"v"+r+"h"+(o-n)+"a"+o+","+o+" 0 0 1 "+-o+","+-o+"v"+(2*o-r)+"a"+o+","+o+" 0 0 1 "+o+","+-o+"z"}},{key:"createRightRoundedRectPath",value:function(t,e,n,r,o){return"M"+t+","+e+"h"+(n-o)+"a"+o+","+o+" 0 0 1 "+o+","+o+"v"+(r-2*o)+"a"+o+","+o+" 0 0 1 "+-o+","+o+"h"+(o-n)+"z"}}],(n=null)&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={r:2,strokeWidth:2,color:"white"},d=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"labelStyle",void 0),l(this,"_labelXY",void 0),l(this,"_labelX",void 0),l(this,"_labelY",void 0),l(this,"overlay",void 0),l(this,"useLabelLine",!0),this.labelStyle=n,this.overlay=a.createElement("g"),a.setAttribute(this.overlay,{id:"measurements"}),e.appendChild(this.overlay)}var e,n,r;return e=t,r=[{key:"getXProjection",value:function(t,e){return{from:t,to:[e[0],t[1],e[2]]}}},{key:"getYProjection",value:function(t,e){return{from:[e[0],t[1],t[2]],to:e}}}],(n=[{key:"labelXY",get:function(){return this._labelXY}},{key:"labelX",get:function(){return this._labelX}},{key:"labelY",get:function(){return this._labelY}},{key:"setStyle",value:function(t){this.labelStyle=t}},{key:"getLabelTemplate",value:function(t,e,n){return this.getLabelInfoTemplate(t,e,n)}},{key:"getLabelInfoTemplate",value:function(t,e,n){var r=a.createElement("g"),o=a.createElement("rect"),i=a.createElement("rect"),s=a.createElement("text"),c=a.createElement("text");s.textContent=t;var u=s.getBoundingClientRect();a.setAttribute(s,{x:5,y:.75*u.height,fill:"white"}),a.setAttribute(o,{x:0,y:0,width:u.width+10,height:u.height,fill:"black"}),c.textContent="".concat(e.toFixed(2)).concat(n);var l=c.getBoundingClientRect();return a.setAttribute(c,{x:u.width+15,y:.75*l.height,fill:"black"}),a.setAttribute(i,{x:u.width+10,y:0,width:l.width+10,height:l.height,fill:"white"}),r.appendChild(o),r.appendChild(i),r.appendChild(s),r.appendChild(c),r}},{key:"moveLabelInfo",value:function(t,e){var n=s(Array.from(t.children),4),r=n[0],o=n[1],i=n[2],c=n[3],u=i.getBoundingClientRect();a.setAttribute(i,{y:.75*u.height}),a.setAttribute(r,{width:u.width+10,height:u.height,fill:"black"}),c.textContent="".concat(e.value.toFixed(2)).concat(e.units);var l=c.getBoundingClientRect();a.setAttribute(c,{x:u.width+15,y:.75*l.height}),a.setAttribute(o,{x:u.width+10,width:l.width+10,height:l.height})}},{key:"moveLabelXY",value:function(t,e,n,r){this._labelXY&&this.moveLabel(this._labelXY,{from:t,to:e,label:"XY",value:n,units:r})}},{key:"moveLabelY",value:function(e,n,r,o){if(this._labelY){var i=t.getYProjection(e,n);this.moveLabel(this._labelY,{from:i.from,to:i.to,label:"Y",value:r,units:o})}}},{key:"moveLabelX",value:function(e,n,r,o){if(this._labelX){var i=t.getXProjection(e,n);this.moveLabel(this._labelX,{from:i.from,to:i.to,label:"X",value:r,units:o})}}},{key:"createLabelXY",value:function(t,e,n,r){this._labelXY=this.getLabelTemplateXY(t,e,"XY",n,r),a.setAttribute(this._labelXY,{id:"labelXY"}),this._labelXY.style="cursor: pointer",this.overlay.appendChild(this._labelXY)}},{key:"createLabelX",value:function(e,n,r,o){var i=t.getXProjection(e,n);this._labelX=this.getLabelTemplateX(i.from,i.to,"X",r,o),a.setAttribute(this._labelX,{id:"labelX",style:"visibility: hidden"}),this.overlay.appendChild(this._labelX)}},{key:"createLabelY",value:function(e,n,r,o){var i=t.getYProjection(e,n);this._labelY=this.getLabelTemplateY(i.from,i.to,"Y",r,o),a.setAttribute(this._labelY,{id:"labelY",style:"visibility: hidden"}),this.overlay.appendChild(this._labelY)}},{key:"showLabel",value:function(){this._labelXY&&a.setAttribute(this._labelXY,{style:"visibility: visible"})}},{key:"hideLabel",value:function(){this._labelXY&&a.setAttribute(this._labelXY,{style:"visibility: hidden"})}},{key:"showProjections",value:function(){this._labelX&&(a.setAttribute(this._labelX,{style:"visibility: visible"}),a.setAttribute(this._labelY,{style:"visibility: visible"}))}},{key:"hideProjections",value:function(){this._labelX&&(a.setAttribute(this._labelX,{style:"visibility: hidden"}),a.setAttribute(this._labelY,{style:"visibility: hidden"}))}},{key:"dispose",value:function(){var t,e,n;null===(t=this._labelXY)||void 0===t||t.remove(),null===(e=this._labelX)||void 0===e||e.remove(),null===(n=this._labelY)||void 0===n||n.remove()}}])&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(i,t);var e,n,r,o=g(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,(n=[{key:"getLabelVec",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))||1,i=-r/o,a=n/o,s=Math.PI/2,c=Math.atan2(r,n),u=-Math.PI/6;c>0&&c<s&&(u+=Math.PI),c>=s&&c<Math.PI&&(u=Math.PI-u),c<0&&c>-Math.PI&&(u=-u),c<0&&c>-s&&(u+=Math.PI);var l=[t[0]+.5*n,t[1]+.5*r];return{from:l,to:[l[0]+30*(i*Math.cos(u)-a*Math.sin(u)),l[1]+30*(i*Math.sin(u)+a*Math.cos(u))]}}},{key:"moveLabelLine",value:function(t,e){a.setAttribute(t,{x1:e.from[0],y1:e.from[1],x2:e.to[0],y2:e.to[1]})}},{key:"moveLabel",value:function(t,e){var n=p(Array.from(t.children),2),r=n[0],o=n[1],i=this.getLabelVec(e.from,e.to),s=Math.round(i.to[0]-i.from[0]),c=Math.round(i.to[1]-i.from[1]);this.useLabelLine&&this.moveLabelLine(o,{from:[0,0],to:[s,c]}),this.moveLabelInfo(r,{label:e.label,value:e.value,units:e.units}),a.setAttribute(r,{transform:"translate(".concat(s,",").concat(c,")")}),a.setAttribute(t,{transform:"translate(".concat(Math.round(i.from[0]),",").concat(Math.round(i.from[1]),")")})}},{key:"getLabelTemplateXY",value:function(t,e,n,r,o){var i=a.createElement("g"),s=this.getLabelVec(t,e),c=s.to[0]-s.from[0],u=s.to[1]-s.from[1],l=this.getLabelTemplate(n,r,o);if(a.setAttribute(i,{transform:"translate(".concat(s.from[0],",").concat(s.from[1],")")}),i.appendChild(l),this.useLabelLine){var f=this.getLabelLineTemplate([0,0],[c,u]);i.appendChild(f)}return i}},{key:"getLabelTemplateX",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}},{key:"getLabelTemplateY",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}},{key:"getLabelLineTemplate",value:function(t,e){var n=a.createElement("line");return a.setAttribute(n,{x1:t[0],y1:t[1],x2:e[0],y2:e[1],stroke:f.color,"stroke-width":f.strokeWidth}),n}}])&&v(e.prototype,n),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(d);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=P(t);if(e){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(i,t);var e,n,r,o=k(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,(n=[{key:"getLabelVec",value:function(t,e){return{from:t,to:e}}},{key:"moveLabel",value:function(t,e){var n=S(Array.from(t.children),1)[0],r=this.getLabelVec(e.from,e.to);this.moveLabelInfo(n,{label:e.label,value:e.value,units:e.units});var o=n.getBBox(),i=Math.round(r.to[0]-r.from[0])/2-o.width/2,s=Math.round(r.to[1]-r.from[1])/2-o.height/2;a.setAttribute(n,{transform:"translate(".concat(i,",").concat(s,")")}),a.setAttribute(t,{transform:"translate(".concat(Math.round(r.from[0]),",").concat(Math.round(r.from[1]),")")})}},{key:"getLabelTemplateXY",value:function(t,e,n,r,o){var i=a.createElement("g"),s=this.getLabelVec(t,e),c=(s.to[0],s.from[0],s.to[1],s.from[1],this.getLabelTemplate(n,r,o));return a.setAttribute(i,{transform:"translate(".concat(s.from[0],",").concat(s.from[1],")")}),i.appendChild(c),i}},{key:"getLabelTemplateX",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}},{key:"getLabelTemplateY",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}}])&&C(e.prototype,n),r&&C(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(d);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return(D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(i,t);var e,n,r,o=R(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,(n=[{key:"moveLabel",value:function(t,e){var n=M(Array.from(t.children),2),r=n[0],o=n[1],i=this.getLabelVec(e.from,e.to),s=Math.round(i.to[0]-i.from[0]),c=Math.round(i.to[1]-i.from[1]);this.useLabelLine&&this.moveLabelLine(o,{from:[0,0],to:[s,c]}),this.moveLabelInfo(r,{label:e.label,value:e.value,units:e.units}),a.setAttribute(r,{transform:"translate(".concat(s,",").concat(c,")")}),a.setAttribute(t,{transform:"translate(".concat(Math.round(i.from[0]),",").concat(Math.round(i.from[1]),")")})}},{key:"getLabelTemplate",value:function(t,e,n){var r=a.createElement("g"),o=a.createElement("rect"),i=a.createElement("text");i.textContent="".concat(e.toFixed(2)).concat(n);var s=i.getBoundingClientRect();return a.setAttribute(i,{x:5,y:.9*s.height,fill:"black",font:"12px Helvetica Neue"}),a.setAttribute(o,{x:0,y:0,width:s.width+10,height:s.height+5,fill:"white",stroke:"black","stroke-width":1}),r.appendChild(o),r.appendChild(i),r}},{key:"moveLabelInfo",value:function(t,e){var n=M(Array.from(t.children),2),r=n[0],o=n[1];o.textContent="".concat(e.value.toFixed(2)).concat(e.units);var i=o.getBoundingClientRect();a.setAttribute(o,{x:5,y:.9*i.height}),a.setAttribute(r,{x:0,width:i.width+10,height:i.height+5})}},{key:"getLabelTemplateXY",value:function(t,e,n,r,o){var i=a.createElement("g"),s=this.getLabelVec(t,e),c=s.to[0]-s.from[0],u=s.to[1]-s.from[1],l=this.getLabelTemplate(n,r,o);if(a.setAttribute(i,{transform:"translate(".concat(s.from[0],",").concat(s.from[1],")")}),i.appendChild(l),this.useLabelLine){var f=this.getLabelLineTemplate([0,0],[c,u]);i.appendChild(f)}return i}},{key:"getLabelTemplateX",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}},{key:"getLabelTemplateY",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}}])&&I(e.prototype,n),r&&I(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(_);function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var G=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,"svg",void 0),$(this,"labelStyleBuilderMap",new Map),this.svg=e,this.labelStyleBuilderMap.set("pointer",(function(t){return new _(n.svg,t)})),this.labelStyleBuilderMap.set("simplepointer",(function(t){return new F(n.svg,t)})),this.labelStyleBuilderMap.set("simple",(function(t){return new j(n.svg,t)})),this.labelStyleBuilderMap.set("roundedRect",(function(t){return new K(n.svg,t)}))}var e,n,r;return e=t,(n=[{key:"getLabelBuilder",value:function(t){var e=this.labelStyleBuilderMap.get(t.viewKind);return e||(e=this.labelStyleBuilderMap.get("pointer")),e(t)}}])&&U(e.prototype,n),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Z(t);if(e){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return X(this,n)}}function X(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(i,t);var e,n,r,o=q(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e)).useLabelLine=!1,n}return e=i,(n=[{key:"moveLabelXY",value:function(t,e,n,r){if(this._labelXY){var o=this._labelXY,i=o.children.item(0),s=this.getLabelVec(t,e),c="rotate(0)";a.setAttribute(o,{transform:c});var u=Math.round(s.from[0]),l=Math.round(s.from[1]);this.moveLabelInfo(i,{label:"XY",value:n,units:r});var f=o.getBBox(),d=f.width/2,h=f.height/2,p=f.width,m=this.getMeterLength(t,e);m<2*p&&this.hideProjections(),m<1.5*p&&(h+=f.height);var v=this.getMeterDegrees(t,e);c="translate(".concat(u,",").concat(l,") rotate(").concat(v,") translate(").concat(-d,", ").concat(-h,")"),a.setAttribute(o,{transform:c})}}},{key:"getMeterLength",value:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}},{key:"moveLabelX",value:function(t,e,n,r){if(this._labelX){var o=d.getXProjection(t,e),i=this._labelX,s=i.children.item(0);this.moveLabelInfo(s,{label:"X",value:n,units:r});var c=this.getLabelVec(o.from,o.to),u=i.getBBox(),l=Math.round(c.from[0]-u.width/2),f=Math.round(c.from[1]-u.height/2),h=u.width;this.getMeterLength(o.from,o.to)<1.5*h&&(f=t[1]>e[1]?f+u.height:f-u.height);var p="translate(".concat(l,",").concat(f,")");a.setAttribute(i,{transform:p})}}},{key:"moveLabelY",value:function(t,e,n,r){if(this._labelY){var o=d.getYProjection(t,e),i=this._labelY,s=i.children.item(0),c="rotate(0)";a.setAttribute(i,{transform:c}),this.moveLabelInfo(s,{label:"Y",value:n,units:r});var u=this.getLabelVec(o.from,o.to),l=i.getBBox(),f=Math.round(u.from[0]),h=Math.round(u.from[1]),p=l.width/2,m=l.height/2,v=l.width;this.getMeterLength(o.from,o.to)<1.5*v&&(m=t[0]>e[0]?m+l.height:m-l.height),c="translate(".concat(f,",").concat(h,") rotate(-90) translate(").concat(-p,", ").concat(-m,")"),a.setAttribute(i,{transform:c})}}},{key:"getMeterDegrees",value:function(t,e){var n=e[1]-t[1],r=e[0]-t[0],o=180*Math.atan2(n,r)/Math.PI;return o>-90&&o<90?o:o>=90&&o<=180?o-180:o+180}},{key:"getLabelTemplate",value:function(t,e,n){var r=a.createElement("g"),o=a.createElement("rect"),i=a.createElement("text");i.textContent="".concat(e.toFixed(2)).concat(n);var s=i.getBoundingClientRect();return a.setAttribute(i,{x:5,y:.9*s.height,fill:"black"}),a.setAttribute(o,{x:0,y:0,rx:4,ry:4,width:s.width+10,height:s.height+5,fill:"white",stroke:"black","stroke-width":1}),r.appendChild(o),r.appendChild(i),r}},{key:"moveLabelInfo",value:function(t,e){var n=z(Array.from(t.children),2),r=n[0],o=n[1];o.textContent="".concat(e.value.toFixed(2)).concat(e.units);var i=o.getBoundingClientRect();a.setAttribute(o,{x:5,y:.9*i.height}),a.setAttribute(r,{x:0,width:i.width+10,height:i.height+5})}},{key:"getLabelTemplateXY",value:function(t,e,n,r,o){var i=a.createElement("g"),s=this.getLabelVec(t,e),c=this.getLabelTemplate(n,r,o);i.appendChild(c);var u=i.getBBox(),l=s.from[0]-u.width/2,f=s.from[1]-u.height/2,d="translate(".concat(l,",").concat(f,")");return a.setAttribute(i,{transform:d}),i}},{key:"getLabelTemplateX",value:function(t,e,n,r,o){var i=a.createElement("g"),s=this.getLabelVec(t,e),c=this.getLabelTemplate(n,r,o),u="translate(".concat(s.from[0],",").concat(s.from[1],")");return a.setAttribute(i,{transform:u}),i.appendChild(c),i}},{key:"getLabelTemplateY",value:function(t,e,n,r,o){var i=a.createElement("g"),s=this.getLabelVec(t,e),c=this.getLabelTemplate(n,r,o),u="translate(".concat(s.from[0],",").concat(s.from[1],")");return a.setAttribute(i,{transform:u}),i.appendChild(c),i}}])&&W(e.prototype,n),r&&W(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(_),J=n(146),Q=n(78),tt=n(140),et=n(34),nt=n(116),rt=n(25);function ot(t){return function(t){if(Array.isArray(t))return it(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ct=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),st(this,"scene",void 0),st(this,"meterStyle",void 0),st(this,"primaryColor",-1),st(this,"secondaryColor",-1),st(this,"thirdColor",-1),st(this,"initialZoom",void 0),st(this,"colorMaterialMap",new Map),st(this,"nodeContainer",new nt.a),this.scene=e,this.setStyle(n)}var e,n,r;return e=t,(n=[{key:"build",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rt.b.Cross,i=this.getLineTemplate(e.from,e.to);(n=t.unis).push.apply(n,ot(i));var a,s=this.getCapTemplate(e.from);t.add(s),a=r?this.getSnappingCursorTemplate(e.to,o):this.getCapTemplate(e.to),t.add(a)}},{key:"buildCursor",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rt.b.Circle;n?t.add(this.getSnappingCursorTemplate(e,r)):t.add(this.getCursorTemplate(e))}},{key:"setStyle",value:function(t){this.meterStyle=t,t.colors.length>0&&(this.primaryColor=this.initMaterial(t.colors[0])),t.colors.length>1&&(this.secondaryColor=this.initMaterial(t.colors[1])),t.colors.length>2&&(this.thirdColor=this.initMaterial(t.colors[2])),this.primaryColor<0&&(this.primaryColor=this.initMaterial("#000000")),this.secondaryColor<0&&(this.secondaryColor=this.initMaterial("#FFFFFF")),this.thirdColor<0&&(this.thirdColor=this.initMaterial("rgba(255, 255, 255, 0.3)"))}},{key:"initMaterial",value:function(t){var e=this.colorMaterialMap.get(t);if(e)return e;var n=J.a.toRgbaArray(t);return e=this.scene.addMaterial(new Q.a(n,0,!1,!1,!1)),this.colorMaterialMap.set(t,e),e}},{key:"zoom",get:function(){return this.initialZoom||(this.initialZoom=25),this.initialZoom/this.scene.viewport.GetZoom()}},{key:"getCapTemplate",value:function(t){var e=t[0],n=t[1],r=.3/this.zoom,o=.6*r,i=tt.a.createCircleFill(e,n,o,this.secondaryColor),a=tt.a.createCircleFill(e,n,r,this.primaryColor),s=tt.a.createCircleFill(e,n,o,this.secondaryColor);return i.z=[t[2]+.02,t[2]+.02],a.z=[t[2],t[2]],s.z=[t[2]-.02,t[2]-.02],this.nodeContainer.clear(),this.nodeContainer.arcs.push(i,a,s),this.nodeContainer}},{key:"getLineTemplate",value:function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=.2/this.zoom,s=.5*a,c=et.a.createLine(n,r,o,i,s,this.primaryColor),u=et.a.createLine(n,r,o,i,a,this.secondaryColor),l=et.a.createLine(n,r,o,i,s,this.primaryColor);return c.z=[t[2]+.02,e[2]+.02],u.z=[t[2],e[2]],l.z=[t[2]-.02,e[2]-.02],[c,u,l]}},{key:"getCursorTemplate",value:function(t){var e=t[0],n=t[1],r=this.scene.pixelsToUnits(1),o=[0,.5];this.nodeContainer.clear();var i=this.meterStyle.capOptions.width*r,a=this.meterStyle.capOptions.height*r,s=et.a.createRectangle(e,n,i,a,this.primaryColor);s.z=o;var c=et.a.createRectangle(e,n,a,i,this.primaryColor);return c.z=o,this.nodeContainer.unis.push(s,c),this.nodeContainer}},{key:"getSnappingCursorTemplate",value:function(t,e){switch(e){case rt.b.Box:return this.getBoxCursorTemplate(t);case rt.b.Triangle:return this.getTriangleCursorTemplate(t);default:return this.getCircleCursorTemplate(t)}}},{key:"getCircleCursorTemplate",value:function(t){var e,n,r=t[0],o=t[1],i=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var a=i*(null!==(e=this.meterStyle.capOptions.radius)&&void 0!==e?e:7),s=i*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),c=tt.a.createCircleStroke(r,o,a,this.primaryColor,s,[0,.5]);return this.nodeContainer.arcs.push(c),this.nodeContainer}},{key:"getBoxCursorTemplate",value:function(t){var e,n,r,o=t[0],i=t[1],a=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var s=2*a*(null!==(e=this.meterStyle.capOptions.radius)&&void 0!==e?e:7),c=a*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),u=et.a.createStrokedRectangle(o-s/2,i+s/2,s,s,c,this.primaryColor);return(r=this.nodeContainer.unis).push.apply(r,ot(u)),this.nodeContainer}},{key:"getTriangleCursorTemplate",value:function(t){var e,n,r=t[0],o=t[1],i=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var a=i*(null!==(e=this.meterStyle.capOptions.radius)&&void 0!==e?e:7),s=i*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),c=4*a/Math.sqrt(3),u=r-c/2,l=r,f=r+c/2,d=et.a.createLine(u,o-a,l,o+a,s,this.primaryColor),h=et.a.createLine(l,o+a,f,o-a,s,this.primaryColor),p=et.a.createLine(u,o-a,f,o-a,s,this.primaryColor);return this.nodeContainer.unis.push(d,h,p),this.nodeContainer}},{key:"pixelsToUnitsX",value:function(t){var e=this.scene.viewportToWorld([0,0]);return this.scene.viewportToWorld([t,0])[0]-e[0]}},{key:"pixelsToUnitsY",value:function(t){var e=this.scene.viewportToWorld([0,0]);return this.scene.viewportToWorld([0,t])[1]-e[1]}}])&&at(e.prototype,n),r&&at(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ft=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),lt(this,"scene",void 0),lt(this,"meterStyleBuilderMap",new Map),this.scene=e,this.meterStyleBuilderMap.set("round",(function(t){return new gt(n.scene,t)})),this.meterStyleBuilderMap.set("simplecross",(function(t){return new Lt(n.scene,t)})),this.meterStyleBuilderMap.set("cross",(function(t){return new Et(n.scene,t)})),this.meterStyleBuilderMap.set("simplebox",(function(t){return new Gt(n.scene,t)}))}var e,n,r;return e=t,(n=[{key:"getMeterBuilder",value:function(t){var e=this.meterStyleBuilderMap.get(t.viewKind);return e||(e=this.meterStyleBuilderMap.get("round")),e(t)}}])&&ut(e.prototype,n),r&&ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e){return(pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yt(t);if(e){var o=yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pt(t,e)}(i,t);var e,n,r,o=mt(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,n&&ht(e.prototype,n),r&&ht(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ct);function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e){return(_t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ct(t);if(e){var o=Ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return St(this,n)}}function St(t,e){if(e&&("object"===bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xt(t)}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_t(t,e)}(i,t);var e,n,r,o=Ot(i);function i(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e),r=xt(n),s=void 0,(a="whiteTransparentColorId")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n}return e=i,r=[{key:"create",value:function(t){return new i(t,{viewKind:"cross",colors:["#000000","#FFFFFF","rgba(255, 255, 255, 0.3)"],capOptions:{width:2.4,height:8.8,lineWidth:.8},lineOptions:{lineCount:2,lineWidth:1}})}}],(n=[{key:"getCapTemplate",value:function(t){var e=t[0],n=t[1],r=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var o=this.meterStyle.capOptions.width*r,i=this.meterStyle.capOptions.height*r,a=et.a.createRectangle(e,n,o,i,this.secondaryColor),s=et.a.createRectangle(e,n,i,o,this.secondaryColor),c=et.a.createRectangle(e,n,o+2*r,i+2*r,this.primaryColor),u=et.a.createRectangle(e,n,i+2*r,o+2*r,this.primaryColor);return this.nodeContainer.unis.push(c,u,a,s),this.nodeContainer}},{key:"getLineTemplate",value:function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=this.scene.pixelsToUnits(1),s=this.meterStyle.lineOptions.lineWidth*a,c=et.a.createLine(n,r,o,i,s,this.secondaryColor);return[et.a.createLine(n,r,o,i,s+2*a,this.primaryColor),c]}}])&&wt(e.prototype,n),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ct);function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e){return(Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mt(t);if(e){var o=Mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return At(this,n)}}function At(t,e){if(e&&("object"===kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(i,t);var e,n,r,o=jt(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,r=[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FFFFFF",o={viewKind:"simplecross",colors:[r],capOptions:{width:e,height:n},lineOptions:{lineWidth:e}};return new i(t,o)}}],(n=[{key:"getCapTemplate",value:function(t){var e=t[0],n=t[1],r=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var o=this.meterStyle.capOptions.width*r,i=this.meterStyle.capOptions.height*r,a=et.a.createLine(e,n+i/2,e,n-i/2,o,this.primaryColor);this.nodeContainer.unis.push(a);var s=et.a.createLine(e-i/2,n,e+i/2,n,o,this.primaryColor);return this.nodeContainer.unis.push(s),this.nodeContainer}},{key:"getLineTemplate",value:function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=this.scene.pixelsToUnits(1),s=this.meterStyle.lineOptions.lineWidth*a;return[et.a.createLine(n,r,o,i,s,this.primaryColor)]}},{key:"getCursorTemplate",value:function(t){return this.getCapTemplate(t)}}])&&Tt(e.prototype,n),r&&Tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ct);function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t){return function(t){if(Array.isArray(t))return Rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Rt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bt(t,e){return(Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$t(t);if(e){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ut(this,n)}}function Ut(t,e){if(e&&("object"===It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bt(t,e)}(i,t);var e,n,r,o=Ft(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,r=[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FFFFFF",o={viewKind:"simplebox",colors:[r],capOptions:{width:e,height:n},lineOptions:{lineWidth:e}};return new i(t,o)}}],(n=[{key:"build",value:function(t,e){arguments.length>3&&void 0!==arguments[3]||rt.b.Cross;var n,r=this.getLineTemplate(e.from,e.to);(n=t.unis).push.apply(n,Dt(r))}},{key:"getLineTemplate",value:function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=this.scene.pixelsToUnits(1),s=this.meterStyle.lineOptions.lineWidth*a;return[et.a.createLine(n,r,o,i,s,this.primaryColor)]}},{key:"getCursorTemplate",value:function(t){return this.getBoxCursorTemplate(t)}}])&&Nt(e.prototype,n),r&&Nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ct);function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var zt=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=void 0,(r="workspace")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.workspace=e}var e,n,r;return e=t,(n=[{key:"setCursor",value:function(t){var e=this;setTimeout((function(){switch(t){case rt.b.None:e.workspace.style.cursor="none";break;case rt.b.Wait:e.workspace.style.cursor="wait";break;case rt.b.Cross:e.workspace.style.cursor=e.getCrossStyle();break;case rt.b.Box:e.workspace.style.cursor=e.getBoxStyle();break;case rt.b.Circle:e.workspace.style.cursor=e.getCircleStyle();break;default:e.workspace.style.cursor="default"}}),1)}},{key:"getCrossStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r="url('data:image/svg+xml;utf8,<svg width=\"".concat(t,'" height="').concat(t,'" viewBox="0 0 ').concat(t," ").concat(t,'" fill="none" xmlns="http://www.w3.org/2000/svg"> ')+'<line id="line1" x1="'.concat(t/2,'" y1="0" x2="').concat(t/2,'" y2="').concat(t,'" style="stroke-linecap:round;stroke:').concat(e,";stroke-width:").concat(n,'" /> ')+'<line id="line2" x1="0" y1="'.concat(t/2,'" x2="').concat(t,'" y2="').concat(t/2,'" style="stroke-linecap:round;stroke:').concat(e,";stroke-width:").concat(n,"\" /></svg>') ").concat(t/2," ").concat(t/2,", auto");return r}},{key:"getBoxStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.7,r="url('data:image/svg+xml;utf8,<svg width=\"".concat(t,'" height="').concat(t,'" viewBox="0 0 ').concat(t," ").concat(t,'" fill="none" xmlns="http://www.w3.org/2000/svg"> ')+'<rect x="1" y="1" width="'.concat(t-2,'" height="').concat(t-2,'" style="stroke:').concat(e,";stroke-width:").concat(n,"\" /></svg>') ").concat(t/2," ").concat(t/2,", auto");return r}},{key:"getCircleStyle",value:function(){return this.getBoxStyle()}}])&&Vt(e.prototype,n),r&&Vt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xt=rt.a.createLogger("MeterController"),Zt=function(){function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),qt(this,"scene",void 0),qt(this,"canvasControl",void 0),qt(this,"nodeMeter",null),qt(this,"nodeCursor",null),qt(this,"cx",void 0),qt(this,"layerIndex",void 0),qt(this,"overlay",void 0),qt(this,"measurement",void 0),qt(this,"meterBuilder",void 0),qt(this,"meterProvider",void 0),qt(this,"labelBuilder",void 0),qt(this,"labelProvider",void 0),qt(this,"container",new nt.a),qt(this,"changeMode",(function(t){t&&o.setMeterBuilder(t.id)})),qt(this,"invalidate",(function(){if(o.scene&&o.measurement&&"visible"===o.overlay.style.visibility)try{var t=o.scene.worldToViewport(o.measurement.from),e=o.scene.worldToViewport(o.measurement.to);o.labelBuilder.moveLabelXY(t,e,o.measurement.xy||0,o.measurement.unitName||"mm"),o.labelBuilder.moveLabelX(t,e,o.measurement.x||0,o.measurement.unitName||"mm"),o.labelBuilder.moveLabelY(t,e,o.measurement.y||0,o.measurement.unitName||"mm")}catch(t){Xt.LogError("Try invalidate meter.",t)}})),this.scene=n,this.canvasControl=r,this.nodeMeter=null,this.nodeCursor=null,this.layerIndex=n.layerMap.GetLayersCount()-1,this.meterProvider=new ft(n),this.setMeterBuilder(rt.c.Free),this.overlay=a.createElement("g"),this.labelProvider=new G(this.overlay),this.labelBuilder=this.labelProvider.getLabelBuilder({viewKind:"roundedRect"}),a.setAttribute(this.overlay,{id:"measurements"}),e.appendChild(this.overlay),rt.a.bus.on("LayerManager:changedLayers",(function(){o.drawMeter([o.measurement])})),rt.a.bus.on("Measurement:changeMode",(function(t){return o.changeMode(t)})),this.canvasControl.on("invalidate",this.invalidate)}var e,n,r;return e=t,r=[{key:"getXProjection",value:function(t,e){return{from:t,to:[e[0],t[1],e[2]]}}},{key:"getYProjection",value:function(t,e){return{from:[e[0],t[1],t[2]],to:e}}}],(n=[{key:"dispose",value:function(){var t=this;this.canvasControl.off("invalidate",this.invalidate),rt.a.bus.off("Measurement:changeMode",(function(e){return t.changeMode(e)}))}},{key:"activate",value:function(){a.setAttribute(this.overlay,{style:"visibility: visible"})}},{key:"deactivate",value:function(){a.setAttribute(this.overlay,{style:"visibility: hidden"}),this.hideMeter()}},{key:"setMeterBuilder",value:function(t){var e={viewKind:t===rt.c.ObjectToObject?"simplebox":"simplecross",colors:["#FFFFFF"],capOptions:{width:1,height:19,radius:7,lineWidth:2},lineOptions:{lineWidth:1}};this.meterBuilder=this.meterProvider.getMeterBuilder(e)}},{key:"setStyle",value:function(t){this.meterBuilder=this.meterProvider.getMeterBuilder(t.meterStyle),this.labelBuilder.hideProjections(),this.labelBuilder.dispose(),this.labelBuilder=this.labelProvider.getLabelBuilder(t.labelStyle),this.render()}},{key:"createXY",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rt.b.Cross;this.clearCursor(),this.meterBuilder.build(t,{from:e,to:n},r,o)}},{key:"createX",value:function(e,n,r){this.meterBuilder.build(e,t.getXProjection(n,r))}},{key:"createY",value:function(e,n,r){this.meterBuilder.build(e,t.getYProjection(n,r))}},{key:"showProjections",value:function(){this.labelBuilder.labelX&&(this.labelBuilder.showProjections(),this.drawMeter([this.measurement]))}},{key:"hideProjections",value:function(){this.labelBuilder.labelX&&(this.labelBuilder.hideProjections(),this.drawMeter([this.measurement]))}},{key:"drawMeter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rt.b.Cross;this.clearMeter(!1),this.container.clear(),this.measurement=t[0];try{if(this.measurement&&"visible"===this.overlay.style.visibility){var r,o,i,a=this.scene.worldToViewport(this.measurement.from),s=this.scene.worldToViewport(this.measurement.to);this.labelBuilder.labelXY||(this.labelBuilder.createLabelX(a,s,this.measurement.x||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelY(a,s,this.measurement.y||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelXY(a,s,this.measurement.xy||0,this.measurement.unitName||"mm")),this.createXY(this.container,this.measurement.from,this.measurement.to,e,n),this.container.isEmpty||this.labelBuilder.showLabel(),"visible"===(null===(r=this.labelBuilder)||void 0===r||null===(o=r.labelX)||void 0===o||null===(i=o.style)||void 0===i?void 0:i.visibility)&&(this.createX(this.container,this.measurement.from,this.measurement.to),this.createY(this.container,this.measurement.from,this.measurement.to)),this.nodeMeter=this.scene.addNode(this.layerIndex,this.container)}this.render()}catch(t){Xt.LogError("Try draw meter.",t)}}},{key:"hideMeter",value:function(){this.hideProjections(),this.clearMeter(!1),this.labelBuilder.hideLabel()}},{key:"updateMeasurement",value:function(t){this.measurement=t}},{key:"drawCursor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rt.b.Circle;try{this.clearCursor(!1),this.container.clear();var r=this.scene.viewportToWorld(t);this.meterBuilder.buildCursor(this.container,r,e,n),this.nodeCursor=this.scene.addNode(this.layerIndex,this.container),this.render()}catch(t){Xt.LogError("Try draw cursor. \nDetail: ".concat(t))}}},{key:"clearCursor",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=null;try{this.nodeCursor&&(e=this.nodeCursor.GetId(),this.scene.removeItem(this.nodeCursor),this.nodeCursor=null,t&&this.render())}catch(t){var n;Xt.LogError("Try clear cursor for nodeId: ".concat(null!==(n=e)&&void 0!==n?n:" is empty",".\nDetail: ").concat(t))}}},{key:"drawMeterWithFitZoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4;this.clearMeter(),this.container.clear(),this.measurement=t;try{var n,r,o,i,a;if(!this.measurement||"visible"!==this.overlay.style.visibility)return void this.render();null!==(n=this.measurement.fromObject)&&void 0!==n&&n.pcbId&&null!==(r=this.measurement.toObject)&&void 0!==r&&r.pcbId?this.zoomToFitBoundObjects(this.measurement.fromObject.pcbId,this.measurement.toObject.pcbId,e):this.zoomToFitBoundRects(this.measurement.from,this.measurement.to,e);var s=this.scene.worldToViewport(this.measurement.from),c=this.scene.worldToViewport(this.measurement.to);this.createXY(this.container,this.measurement.from,this.measurement.to),this.container.isEmpty||this.labelBuilder.showLabel(),"visible"===(null===(o=this.labelBuilder)||void 0===o||null===(i=o.labelX)||void 0===i||null===(a=i.style)||void 0===a?void 0:a.visibility)&&(this.createX(this.container,this.measurement.from,this.measurement.to),this.createY(this.container,this.measurement.from,this.measurement.to)),this.nodeMeter=this.scene.addNode(this.layerIndex,this.container),this.labelBuilder.labelXY||(this.labelBuilder.createLabelX(s,c,this.measurement.x||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelY(s,c,this.measurement.y||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelXY(s,c,this.measurement.xy||0,this.measurement.unitName||"mm")),this.render()}catch(t){Xt.LogError("Try draw meter with Fit To Zoom. \nDetail: ".concat(t))}}},{key:"zoomToFitBoundObjects",value:function(t,e,n){var r=this.scene.getNodeItemById(t),o=this.scene.getNodeItemById(e),i=this.scene.getBoundingBoxForItem(r),a=this.scene.getBoundingBoxForItem(o),s=this.getMinMaxBoundRects([i,a]),c=[s[0],s[1],s[2]],u=[s[3],s[4],s[5]];this.scene.zoomToFit(c,u,n)}},{key:"getMinMaxBoundRects",value:function(t){var e=Ht(t[0],6),n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5];if(t.forEach((function(t){n>t[0]&&(n=t[0]),r>t[1]&&(r=t[1]),o>t[2]&&(o=t[2]),i<t[3]&&(i=t[3]),a<t[4]&&(a=t[4]),s<t[5]&&(s=t[5])})),n>i){var c=[i,n];n=c[0],i=c[1]}if(r>a){var u=[a,r];r=u[0],a=u[1]}if(o>s){var l=[s,o];o=l[0],s=l[1]}return[n,r,o,i,a,s]}},{key:"zoomToFitBoundRects",value:function(t,e,n){var r=[Math.min(t[0],e[0]),Math.min(t[1],e[1]),0],o=[Math.max(t[0],e[0]),Math.max(t[1],e[1]),0];this.scene.zoomToFit(r,o,n)}},{key:"render",value:function(){this.canvasControl.invalidate()}},{key:"clearMeter",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clearCursor(!1);try{this.nodeMeter&&(this.scene.removeItem(this.nodeMeter),this.nodeMeter=null,t&&this.render())}catch(t){Xt.LogError("Try clear meter.",t)}}}])&&Yt(e.prototype,n),r&&Yt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Kt=n(260);window.__CORE__.createLogger("$$$_PREFORMANCE_COUNTER_$$$");var Jt=function(t,e){var n;return function(r){var o=n;n=Date.now(),(void 0===o||n-o>e)&&t(r)}},Qt=n(43),te=n(106);function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ne,re={},oe=function(t){return(t.composedPath&&t.composedPath()||[]).findIndex((function(t){return t.id&&"labelXY"===t.id}))>-1},ie=function(t){return!(null==t||!t.checkSnappingPoint)&&t.checkSnappingPoint([t.clientX,t.clientY])},ae=function(t){return(null==t?void 0:t.getMeasurementMode())===rt.c.ObjectToObject};re.IDLE=[{to:"CAPTURED",where:function(t){return["mousedown"===t.type]}},{to:"CAPTURED",where:function(t){return["touchstart"===t.type&&1==t.touches.length]}},{to:"2D/BOARD_ZOOMS",where:function(t){return["wheel"===t.type]}},{to:"2D/MOUSE_MOVES",where:function(t){return["mousemove"===t.type&&!ie(t)]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}}],re["2D/MOUSE_MOVES"]=[].concat(function(t){if(Array.isArray(t))return ee(t)}(ne=re.IDLE)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(ne)||function(t,e){if(t){if("string"==typeof t)return ee(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(t,e):void 0}}(ne)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{to:"2D/MOUSE_LEAVE",where:function(t){return["mouseleave"===t.type]}},{to:"SNAPPING_START",where:function(t){return["mousemove"===t.type&&ie(t)]}}]),re["2D/MOUSE_LEAVE"]=re.IDLE,re.SNAPPING_START=re["2D/MOUSE_MOVES"],re.CAPTURED=[{to:"WILL_MEASURE",where:function(t){return["click"===t.type,!oe(t)]}},{to:"WILL_MEASURE",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}},{to:"TOGGLE",where:function(t){return["click"===t.type,oe(t)]}},{to:"2D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type]}}],re.WILL_MEASURE=[{to:"MEASURING",where:function(t){return["mousemove"===t.type&&!ie(t)&&t.buttons===te.a.None]}},{to:"MEASURING",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}},{to:"CANCELED",where:function(t){return["keydown"===t.type,27===t.keyCode]}},{to:"CANCELED",where:function(t){return["touchend"===t.type]}},{to:"CANCELED",where:function(t){return["Canceled"===t.type]}}],re.MEASURING=[{to:"MEASURING",where:function(t){return["mousemove"===t.type&&!ie(t)&&t.buttons===te.a.None]}},{to:"MEASURING",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}},{to:"MEASURING_ZOOMS",where:function(t){return["wheel"===t.type]}},{to:"SNAPPING_END",where:function(t){return["mousemove"===t.type&&ie(t)]}},{to:"DID_MEASURE",where:function(t){return["click"===t.type,t.button===Qt.b.Left,!ae(t)]}},{to:"DID_MEASURE",where:function(t){return["touchend"===t.type,!ae(t)]}},{to:"CALCULATE_MEASURE",where:function(t){return["click"===t.type,t.button===Qt.b.Left,ae(t)]}},{to:"CALCULATE_MEASURE",where:function(t){return["touchend"===t.type,ae(t)]}},{to:"CANCELED",where:function(t){return["mouseup"===t.type,t.button===Qt.b.Right]}},{to:"CANCELED",where:function(t){return["keydown"===t.type,27===t.keyCode]}},{to:"CANCELED",where:function(t){return["Canceled"===t.type]}},{to:"PAN_MEASURE",where:function(t){return["mousemove"===t.type&&(0!=(t.buttons&te.a.Left)||0!=(t.buttons&te.a.Right))]}},{to:"2D/MOUSE_LEAVE",where:function(t){return["mouseleave"===t.type&&ae(t)]}}],re.CALCULATE_MEASURE=[{to:"OTO_DID_MEASURE",where:function(t){return["OtoCalculated"===t.type]}},{to:"CANCELED",where:function(t){return["Canceled"===t.type]}}],re.PAN_MEASURE=[{to:"PAN_MEASURE",where:function(t){return["mousemove"===t.type&&(0!=(t.buttons&te.a.Left)||0!=(t.buttons&te.a.Right))]}},{to:"DID_PAN_MEASURE",where:function(t){return["mouseup"===t.type,t.button===Qt.b.Right||t.button===Qt.b.Left]}},{to:"DID_PAN_MEASURE",where:function(t){return["mouseleave"===t.type]}}],re.DID_PAN_MEASURE=[{to:"MEASURING",where:function(t){return["mousemove"===t.type&&!ie(t)&&t.buttons===te.a.None]}},{to:"MEASURING",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"MEASURING_ZOOMS",where:function(t){return["wheel"===t.type]}}],re.MEASURING_ZOOMS=[{to:"MEASURING_ZOOMS",where:function(t){return["wheel"===t.type]}},{to:"MEASURING",where:function(t){return["mousemove"===t.type&&!ie(t)]}},{to:"MEASURING",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"SNAPPING_END",where:function(t){return["mousemove"===t.type&&ie(t)]}},{to:"DID_MEASURE",where:function(t){return["click"===t.type,t.button===Qt.b.Left]}}],re.SNAPPING_END=re.MEASURING,re.DID_MEASURE=re.IDLE,re.OTO_DID_MEASURE=re.IDLE,re["2D/BOARD_TRANSLATES"]=[{to:"2D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(t){return["mouseup"===t.type,t.button===Qt.b.Right||t.button===Qt.b.Left]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(t){return["mouseleave"===t.type]}}],re["2D/BOARD_ZOOMS"]=re.IDLE,re["2D/BOARD_DID_TRANSLATE"]=re.IDLE,re.TOGGLE=re.IDLE,re.CANCELED=re.IDLE,re["2D/TOUCH_END"]=re.IDLE,re["2D/TOUCH_START"]=[{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type]}},{to:"2D/TOUCH_MOVE",where:function(t){return["touchmove"===t.type&&t.touches.length>1]}},{to:"2D/TOUCH_END",where:function(t){return["touchend"===t.type]}}],re["2D/TOUCH_MOVE"]=[{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}},{to:"2D/TOUCH_MOVE",where:function(t){return["touchmove"===t.type&&t.touches.length>1]}},{to:"2D/TOUCH_END",where:function(t){return["touchend"===t.type]}}];var se=n(93);function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function he(t,e){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ye(t);if(e){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return me(this,n)}}function me(t,e){if(e&&("object"===ce(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ve(t)}function ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ye(t){return(ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function be(t,e){var n;return{x:t-(null!==(n=window.__APP__.sidebarWidth)&&void 0!==n?n:0),y:e}}function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oe(t,e){return(Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Se(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ce(t);if(e){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xe(this,n)}}function xe(t,e){if(e&&("object"===we(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}(i,t);var e,n,r,o=Se(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"IDLE",re)}return e=i,n&&_e(e.prototype,n),r&&_e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(a,t);var e,n,r,i=pe(a);function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"IDLE",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re;return fe(this,a),ge(ve(t=i.call(this,e,n)),"core",window.__CORE__),ge(ve(t),"logger",window.__CORE__.createLogger("MeterController")),ge(ve(t),"scene",void 0),ge(ve(t),"renderer",void 0),ge(ve(t),"measurements",void 0),ge(ve(t),"screenMeasurement",void 0),ge(ve(t),"currentID",void 0),ge(ve(t),"isSelected",void 0),ge(ve(t),"measurementUnit",rt.d.mm),ge(ve(t),"measurementMode",rt.c.Free),ge(ve(t),"clicked",void 0),ge(ve(t),"pcbView",void 0),ge(ve(t),"cursorStyle",void 0),ge(ve(t),"viewId",void 0),ge(ve(t),"engineId",void 0),ge(ve(t),"throttleMouseMove",void 0),ge(ve(t),"throttleMeasuring",void 0),ge(ve(t),"svgCursorBuilder",void 0),ge(ve(t),"emitEvent",(function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];t.core&&(n=t.core.bus).emit.apply(n,[e].concat(o))})),ge(ve(t),"changeMode",(function(e){t.dispatch(new o.b("Canceled")),t.onCanceled(),e&&(t.measurementMode=e.id,t.setStateMachineData(),t.setDeafaultCursor())})),ge(ve(t),"changeUnit",(function(e){t.updateMeasurementUnitFromStorage(e);var n=t.measurements.values()[0];Object.assign(n,t.getMeasure(n.from,n.to)),t.renderer.updateMeasurement(n),t.emitChangeHistory()})),ge(ve(t),"showProjections",(function(){var e;null===(e=t.renderer)||void 0===e||e.hideProjections()})),ge(ve(t),"hideProjections",(function(){var e;null===(e=t.renderer)||void 0===e||e.showProjections()})),ge(ve(t),"activateMeasurement",(function(){if(t.renderer){t.renderer.activate(),t.setStateMachineData(),t.setDeafaultCursor();var e=t.measurements.getId(0);e&&setTimeout((function(n){return t.selectMeasurement(e,!1)}),100),t.emitChangeHistory()}else t.logger.LogWarn("Try activate measurement witn empty meterRenderer")})),ge(ve(t),"deactivateMeasurement",(function(){t.renderer?(t.renderer.deactivate(),t.clicked=!1,t.svgCursorBuilder.setCursor(rt.b.Default)):t.logger.LogWarn("Try deactivate measurement with empty meterRenderer")})),ge(ve(t),"onIdle",(function(){t.screenMeasurement.from=[0,0],t.screenMeasurement.to=[0,0]})),ge(ve(t),"selectMeasurement",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.getMeasureById(e);if(r){t.measurements.toTop(e);var o=t.measurements.values()[0];Object.assign(o,r),n?t.renderer.drawMeterWithFitZoom(o):t.renderer.drawMeter([o])}else t.logger.LogError("Measurement with id:".concat(e," is empty."))})),ge(ve(t),"onWillMeasure",(function(e){try{if(t.svgCursorBuilder.setCursor(rt.b.None),e instanceof MouseEvent){var n=be(e.clientX,e.clientY),r=n.x,o=n.y;t.screenMeasurement.from=[r,o]}else{var i=be(e.touches[0].clientX,e.touches[0].clientY),a=i.x,s=i.y;t.screenMeasurement.from=[a,s],t.touchStart(e)}var c=t.scene.viewportToWorld(t.screenMeasurement.from),u=[c[0],c[1],0];"number"==typeof c[2]&&(u[2]=c[2]),t.currentID=t.measurements.set({from:u,to:u,withProjection:!1,mode:t.measurementMode}),t.renderer.drawMeter(t.measurements.values()),t.renderer.hideProjections(),t.emitEvent("".concat(t.engineId,":willMeasure"),t.currentID,{from:u,unit:t.unit,mode:t.measurementMode}),t.clicked=!1}catch(e){t.state="2D/MOUSE_MOVES",t.logger.LogWarn("MeterController could not go to the WillMeasure state.")}})),ge(ve(t),"onMeasuring",(function(e){var n=e instanceof MouseEvent?be(e.clientX,e.clientY):be(e.touches[0].clientX,e.touches[0].clientY);t.throttleMeasuring([n.x,n.y])})),ge(ve(t),"onDidMeasure",(function(){var e=t.measurements.get(t.currentID);t.emitEvent("".concat(t.engineId,":didMeasure"),t.currentID,{to:e.to,x:e.x,y:e.y,xy:null==e?void 0:e.xy,unit:t.unit,mode:t.measurementMode}),t.emitChangeHistory(),t.measurementMode===rt.c.Free?t.svgCursorBuilder.setCursor(rt.b.Cross):t.svgCursorBuilder.setCursor(rt.b.None),t.currentID=void 0})),ge(ve(t),"onCanceled",(function(e){t.setDeafaultCursor(),t.currentID&&t.clearMeter(t.currentID),t.renderer.hideMeter(),t.currentID=void 0,t.emitEvent("".concat(t.engineId,":cancelMeasure"),t.currentID,{from:[0,0],unit:t.unit}),t.renderer.render(),null!=e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())})),ge(ve(t),"onToggle",(function(e){var n,r;t.clicked?(null===(n=t.renderer)||void 0===n||n.hideProjections(),t.clicked=!1):(null===(r=t.renderer)||void 0===r||r.showProjections(),t.clicked=!0)})),ge(ve(t),"clearMeter",(function(e){t.measurements.delete(e),t.renderer.drawMeter(t.measurements.values())})),ge(ve(t),"clearAll",(function(){t.measurements.forEach((function(e){return t.measurements.delete(e.id)})),t.renderer.drawMeter(t.measurements.values())})),ge(ve(t),"render",(function(){try{var e;null===(e=t.renderer)||void 0===e||e.drawMeter(t.measurements.values())}catch(e){var n;t.logger.LogWarn("Try drawMeter for view: ".concat(t.viewId,". Detail: ").concat(null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e))}})),ge(ve(t),"mouseMoves",(function(t){})),ge(ve(t),"moveState",{start:null}),ge(ve(t),"on2DMouseMoves",(function(e){var n=be(e.clientX,e.clientY),r=n.x,o=n.y;t.throttleMouseMove([r,o])})),ge(ve(t),"onPanMeasure",(function(e){var n=be(e.clientX,e.clientY),r=n.x,o=n.y;t.scene.cameraController.MouseDown(Qt.b.Right,r,o),t.scene.cameraController.MouseMove(r,o),t.renderer.render()})),ge(ve(t),"onDidPanMeasure",(function(e){var n=be(e.clientX,e.clientY),r=n.x,o=n.y;t.scene.cameraController.MouseUp(Qt.b.Right,r,o),t.renderer.render()})),ge(ve(t),"on2DMouseLeave",(function(e){"MEASURING"===t.prevstate&&t.onCanceled(e),t.renderer.clearCursor()})),ge(ve(t),"onZoomMeasuring",(function(e){var n=be(e.clientX,e.clientY),r=n.x,o=n.y,i=t.scene.cameraController;i.MouseMove(r,o),i.MouseWheel(Math.sign(-e.deltaY)),t.renderer.drawMeter(t.measurements.values())})),ge(ve(t),"onBoardZoom",(function(e){t.render()})),ge(ve(t),"touchStart",(function(e){e.touches&&(t.scene.cameraController.TouchStart(e.touches),t.renderer.render(),e.preventDefault(),e.stopPropagation())})),ge(ve(t),"touchMove",(function(e){t.scene.cameraController.TouchMove(e.touches),t.renderer.render(),e.preventDefault(),e.stopPropagation()})),ge(ve(t),"touchEnd",(function(e){t.scene.cameraController.TouchEnd(e.touches),t.renderer.render(),e.preventDefault(),e.stopPropagation()})),t.measurements=new Kt.a(5),t.screenMeasurement={from:[0,0],to:[0,0]},t.throttleMouseMove=Jt(t.mouseMoves,10),t.throttleMeasuring=Jt((function(e){return t.measuring(e)}),10),t}return e=a,r=[{key:"getXOYProjection",value:function(t,e,n){var r=-e[2]/n[2];return[e[0]+r*n[0],e[1]+r*n[1],e[2]+r*n[2]]}}],(n=[{key:"subscribeListener",value:function(){return this.prependListener("#Transition",(function(t){})).on("IDLE",this.onIdle).on("WILL_MEASURE",this.onWillMeasure).on("MEASURING",this.onMeasuring).on("DID_MEASURE",this.onDidMeasure).on("CANCELED",this.onCanceled).on("TOGGLE",this.onToggle).on("2D/BOARD_DID_TRANSLATE",this.render).on("2D/BOARD_ZOOMS",this.onBoardZoom).on("2D/MOUSE_MOVES",this.on2DMouseMoves).on("2D/MOUSE_LEAVE",this.on2DMouseLeave).on("MEASURING_ZOOMS",this.onZoomMeasuring).on("PAN_MEASURE",this.onPanMeasure).on("DID_PAN_MEASURE",this.onDidPanMeasure).on("2D/TOUCH_START",this.touchStart).on("2D/TOUCH_MOVE",this.touchMove).on("2D/TOUCH_END",this.touchEnd).on("CAPTURED",this.touchStart),this}},{key:"unsubscribeListener",value:function(){return this.prependListener("#Transition",(function(t){})).off("IDLE",this.onIdle).off("WILL_MEASURE",this.onWillMeasure).off("MEASURING",this.onMeasuring).off("DID_MEASURE",this.onDidMeasure).off("CANCELED",this.onCanceled).off("TOGGLE",this.onToggle).off("2D/BOARD_DID_TRANSLATE",this.render).off("2D/BOARD_ZOOMS",this.onBoardZoom).off("2D/MOUSE_MOVES",this.on2DMouseMoves).off("2D/MOUSE_LEAVE",this.on2DMouseLeave).off("MEASURING_ZOOMS",this.onZoomMeasuring).off("PAN_MEASURE",this.onPanMeasure).off("DID_PAN_MEASURE",this.onDidPanMeasure).off("2D/TOUCH_START",this.touchStart).off("2D/TOUCH_MOVE",this.touchMove).off("2D/TOUCH_END",this.touchEnd).off("CAPTURED",this.touchStart),this}},{key:"subscribeEventBus",value:function(){this.core.bus.on("Measurement:clear",this.clearMeter),this.core.bus.on("Measurement:clearAll",this.clearAll),this.core.bus.on("Measurement:showProjection",this.showProjections),this.core.bus.on("Measurement:hideProjection",this.hideProjections),this.core.bus.on("Measurement:activate",this.activateMeasurement),this.core.bus.on("Measurement:deactivate",this.deactivateMeasurement),this.core.bus.on("Measurement:select",this.selectMeasurement),this.core.bus.on("HelpPanel:changeUnit",this.changeUnit),this.core.bus.on("Measurement:changeMode",this.changeMode)}},{key:"unsubscribeEventBus",value:function(){this.core.bus.off("Measurement:clear",this.clearMeter),this.core.bus.off("Measurement:clearAll",this.clearAll),this.core.bus.off("Measurement:showProjection",this.showProjections),this.core.bus.off("Measurement:hideProjection",this.hideProjections),this.core.bus.off("Measurement:activate",this.activateMeasurement),this.core.bus.off("Measurement:deactivate",this.deactivateMeasurement),this.core.bus.off("Measurement:select",this.selectMeasurement),this.core.bus.off("HelpPanel:changeUnit",this.changeUnit),this.core.bus.off("Measurement:changeMode",this.changeMode)}},{key:"dispose",value:function(){this.unsubscribeListener(),this.unsubscribeEventBus()}},{key:"enable",value:function(t,e,n,r){this.scene=n,this.renderer=new Zt(e,n,r),this.viewId=t,this.pcbView=document.querySelector('[data-view="'.concat(this.viewId,'"]')),this.svgCursorBuilder=new zt(this.pcbView),this.engineId=rt.e.get(t),this.clicked=!1,this.isSelected=!1,this.updateMeasurementUnitFromStorage(),this.subscribeListener(),this.subscribeEventBus(),this.setStateMachineData()}},{key:"disable",value:function(){this.dispatch(new o.b("Canceled")),this.renderer&&(this.renderer.deactivate(),this.renderer.dispose(),this.renderer=null),this.state="IDLE",this.unsubscribeEventBus(),this.unsubscribeListener()}},{key:"setStateMachineData",value:function(){var t=this;this.setDataTransfer({getMeasurementMode:function(){return t.measurementMode}})}},{key:"setDeafaultCursor",value:function(){switch(this.measurementMode){case rt.c.Free:this.svgCursorBuilder.setCursor(rt.b.Cross);break;case rt.c.ObjectToObject:this.svgCursorBuilder.setCursor(rt.b.Box);break;default:this.svgCursorBuilder.setCursor(rt.b.None)}}},{key:"unitFactor",get:function(){return 100}},{key:"unit",get:function(){switch(this.measurementUnit){case 0:return{k:2.54/this.unitFactor,name:"mm"};case 1:return{k:100/this.unitFactor,name:"mil"};default:return{k:1,name:""}}}},{key:"updateMeasurementUnitFromStorage",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=null!==(t=se.a.get())&&void 0!==t?t:"mm"),this.measurementUnit="mil"===e?rt.d.mil:rt.d.mm}},{key:"measuring",value:function(t){this.renderer.clearCursor(),this.screenMeasurement.to=t;var e=this.scene.viewportToWorld(this.screenMeasurement.to),n=[e[0],e[1],0];if("number"==typeof e[2]&&(n[2]=e[2]),this.currentID){var r=this.measurements.get(this.currentID);r.to=n,Object.assign(r,this.getMeasureById(this.currentID)),this.renderer.drawMeter(this.measurements.values()),this.emitEvent("".concat(this.engineId,":measuring"),this.currentID,{to:n,x:null==r?void 0:r.x,y:null==r?void 0:r.y,xy:null==r?void 0:r.xy})}}},{key:"emitChangeHistory",value:function(){var t=this,e=this.unit.k,n={measurements:this.measurements?this.measurements.values().map((function(n){var r=t.getMeasure(n.from,n.to);return le(le({},n),{},{x:r.x,y:r.y,xy:r.xy,unitName:r.unitName,from:[e*n.from[0],e*n.from[1],0],to:[e*n.to[0],e*n.to[1],0]})})):[],unit:this.unit,mode:this.measurementMode};this.emitEvent("Measurement:changeHistory",n)}},{key:"getMeasureById",value:function(t){var e=this.measurements.get(t);if(!e)return null;var n=e.from,r=e.to;return this.getMeasure(n,r)}},{key:"getMeasure",value:function(t,e){var n,r,o=this.unit,i=o.k,a=o.name,s=null!==(n=t[2])&&void 0!==n?n:0,c=null!==(r=e[2])&&void 0!==r?r:0;return{x:Math.abs(t[0]-e[0])*i,y:Math.abs(t[1]-e[1])*i,xy:i*Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(s-c,2)),unitName:a}}}])&&de(e.prototype,n),r&&de(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(r.a))},function(t,e,n){"use strict";var r=n(36);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,t);var e,n,o,c=s(u);function u(t,e,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(o=c.call(this,t,r.a.FileDataDocumentLoad,!1,n)).fileData=e,o}return e=u,n&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(r.c);e.a=l},function(t,e,n){var r=n(174);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(174),o=n(70)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(59),o=n(156),i=n(70)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n(210)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(18),o=n(91);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={where:function(t){return["Ready"===t.type]},to:"READY"},v={where:function(t){return["Load"===t.type]},to:"LOAD"},y={IDLE:[m,{where:function(t){return["Hidden"===t.type]},to:"HIDDEN"}],READY:[v],HIDDEN:[m],LOAD:[{where:function(t){return["Run"===t.type]},to:"RUN"},{where:function(t){return["Error"===t.type]},to:"CRASHED",error:!0},m],RUN:[v],CRASHED:[v]},g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(a,t);var e,n,r,i=l(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),p(d(t=i.call(this,"IDLE",y)),"logger",void 0),p(d(t),"domain",""),p(d(t),"designId",""),p(d(t),"metadata",null),p(d(t),"apiHeaders",void 0),t}return e=a,(n=[{key:"setup",value:function(t){this.logger=t.createLogger("FBOMEngine"),this.domain=t.domain,this.apiHeaders=t.apiHeaders;var e=t.response;e&&e.storage&&e.storage.files?(this.metadata=e.metadata,this.designId=e.designId,this.dispatch({type:"Ready"})):this.dispatch({type:"Hidden"})}},{key:"load",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n,r){t.dispatch({type:"Load"})?t.loadBomData(e).then((function(){n()})).catch((function(e){t.logger.LogError("Get BOM data error. ".concat(e.message,".")),t.dispatch({type:"Error",error:e}),r(e)})):"LOAD"===t.state?(t.once("CRASHED",r),t.once("RUN",n)):"CRASHED"===t.state?r():n()}))}},{key:"getComponent",value:function(t,e){var n,r;return null===(n=this.metadata)||void 0===n||null===(r=n.components)||void 0===r?void 0:r.find((function(n){var r;return((n.schId||n.hash)===e||(null===(r=n.subParts)||void 0===r?void 0:r.some((function(t){return t.schId===e}))))&&n.designator.includes(t)}))}},{key:"getSelectData",value:function(t,e){var n=this.getComponent(t.designator,t.uniqueIdName)||t.uniqueIdName.includes("@")&&this.getComponent(t.designator,t.uniqueIdName.split("@")[0]);if(n)return Object(o.a)("component",s(s({},n),{},{systemBomId:e}),"FBOMEngine")}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var r=n(18),o=n(61),i=n(213),a=n(214),s=n(215),c=n(66),u=n(164),l=n(77);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==f(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,s(b,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function h(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=window.__CORE__,S={where:function(t){return["Activate"===t.type]},to:"ACTIVE"},x={where:function(t){return["Load"===t.type]},to:"LOAD"},C={where:function(t){return["Deactivate"===t.type]},to:"NONACTIVE"},E={where:function(t){return["Error"===t.type]},to:"CRASHED",error:!0},k={HIDDEN:[E,{where:function(t){return["Ready"===t.type]},to:"READY"}],READY:[E,S,x],LOAD:[E,S,x],ACTIVE:[E,S,C],NONACTIVE:[E,S,x],CRASHED:[C,S,x]},T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(x,t);var e,n,f,g,w,S=y(x);function x(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BomViewManager",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FBOMEngine";return p(this,x),_(b(e=S.call(this,"HIDDEN",k)),"logger",void 0),_(b(e),"creator",void 0),_(b(e),"engine",void 0),_(b(e),"bus",void 0),_(b(e),"bomData",void 0),_(b(e),"selectedData",null),_(b(e),"selectDisabled",!1),_(b(e),"isDataFailed",!1),_(b(e),"pluginName",void 0),e.creator=t,e.logger=O.createLogger(n),e.pluginName=o,e.events.forEach((function(t){return O.bus.registerEvent(t)})),e.initHandlers(),e.on(r.a.TRANSITION_EVENT,(function(t){return e.emitDidStateChange(e.state,t)})),e.on(r.a.ERROR_EVENT,(function(t){return e.emitDidStateChange(e.state,t)})),e}return e=x,(n=[{key:"initHandlers",value:function(){var t=this;O.bus.on("FBOMEngine:setup",(function(e){return t.setup(e)})),O.bus.on("FBOMEngine:activate",(function(e){return t.activate()})),O.bus.on("FBOMEngine:deactivate",(function(e){return t.deactivate()})),O.bus.on("FBOMEngine:select",(function(e){return t.select(e)})),O.bus.on("FBOMEngine:disableSelect",(function(e){t.selectDisabled=e})),O.bus.on("FBOMEngine:checkSelection",(function(e){return t.canBeSelect(e)}))}},{key:"events",get:function(){return["FBOMEngine:setup","FBOMEngine:activate","FBOMEngine:deactivate","FBOMEngine:select","FBOMEngine:disableSelect","FBOMEngine:checkSelection","FBOMEngine:didStateChange","FBOMEngine:loaded"]}},{key:"emitDidStateChange",value:function(t,e){var n;null===(n=this.bus)||void 0===n||n.emit("FBOMEngine:didStateChange",{state:t,message:e})}},{key:"setup",value:function(t){var e=this;return new Promise((function(n){e.logger.LogDebug("Setup"),e.bus=t.bus,e.bus.on("select",(function(t){return e.onSelect(t)})),e.setupEngine(t),n()}))}},{key:"activate",value:(g=d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.bomData?this.toActive():"CRASHED"===this.engine.getState()?this.dispatch({type:"Error"}):"LOAD"===this.engine.getState()&&this.dispatch({type:"Load"}),this.isDataFailed&&"LOAD"!==this.engine.getState()&&this.engine.load(!this.bomData).catch((function(){}))}catch(t){this.dispatch({type:"Error",error:t})}case 1:case"end":return t.stop()}}),t,this)})),w=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=g.apply(t,e);function i(t){h(o,n,r,i,a,"next",t)}function a(t){h(o,n,r,i,a,"throw",t)}i(void 0)}))},function(){return w.apply(this,arguments)})},{key:"deactivate",value:function(){this.dispatch({type:"Deactivate"})}},{key:"select",value:function(t){if(!this.selectDisabled)if(t&&t.id&&t.item){var e=this.engine.getSelectData(t.item,t.id);this.bus.emit("select",e)}else this.bus.emit("select",null)}},{key:"canBeSelect",value:function(t){if(!t)return{item:null,can:!1};t.item&&Object.getOwnPropertyDescriptor(t.item,"designator")&&this.bomData?t.can=this.bomData.items.find((function(e){return e.designator===t.item.designator})):t.can=!1}},{key:"toActive",value:function(){var t,e,n,r;this.dispatch({type:"Activate",items:this.transformData(this.bomData),currency:null==this||null===(t=this.bomData)||void 0===t?void 0:t.currency,columnAliases:null==this||null===(e=this.bomData)||void 0===e?void 0:e.columnAliases,visibleColumns:null==this||null===(n=this.bomData)||void 0===n?void 0:n.visibleColumns,selectedItem:null==this||null===(r=this.selectedData)||void 0===r?void 0:r.native,isLiveDataFailed:this.isDataFailed})}},{key:"setupEngine",value:function(t){var e=this;this.engine=new this.creator,this.engine.on("READY",(function(){return e.prefetchData()})),this.engine.on("RUN",(function(t){return e.onEngineRun(t)})),this.engine.on("CRASHED",(function(){return e.isDataFailed=!0})),this.engine.setup(t)}},{key:"prefetchData",value:function(){this.dispatch({type:"Ready"}),this.engine.load(!0).catch((function(){}))}},{key:"onEngineRun",value:function(t){var e,n,r,o;O.bus.emit("FBOMEngine:loaded",t.data),this.bomData=null===(e=t.data)||void 0===e?void 0:e.systemBom,this.isDataFailed=!1,this.toActive(),(null===(n=t.data)||void 0===n||!n.hasLiveData)&&(null===(r=this.bomData)||void 0===r||null===(o=r.items)||void 0===o?void 0:o.length)>0&&this.engine.load(!1).catch((function(){}))}},{key:"onSelect",value:function(t){this.selectedData=t}},{key:"transformData",value:function(t){var e=this,n=this.getVariant(),r=t.items.reduce((function(t,r){if(r.parentId)t.alternateParts.push(r);else if(!e.shouldSkipRow(r,n)){var o=r.parameters["%CATALOGID%"];t.viewItems[r.id]=t.viewRows[o]?e.mergeParameters(t.viewRows[o],r,n):t.viewRows[o]=e.asViewItem(r,n)}return t}),{alternateParts:[],viewItems:{},viewRows:{}}),o=r.alternateParts,i=r.viewItems,a=r.viewRows;return o.forEach((function(t){var r=i[t.parentId];if(r){r.alternateParts||(r.alternateParts={});var o=t.parameters["%CATALOGID%"];r.alternateParts[o]?e.mergeParameters(r.alternateParts[o],t,n):r.alternateParts[o]=e.asViewItem(t,n)}})),Object.values(a)}},{key:"shouldSkipRow",value:function(t,e){return!this.isExtraRowOrItem(t)&&parseInt(this.getVariantData(t,"Quantity",e))<=0}},{key:"mergeParameters",value:function(t,e,n){for(var r=0,i=Object.keys(t.parameters);r<i.length;r++){var a=i[r];a===this.createVariantKey("Quantity",n)?t.parameters.Quantity+=parseInt(this.getVariantData(e,"Quantity",n)):""!==e.parameters[a]&&(t.parameters[a]instanceof u.a?t.parameters[a].push(e):t.parameters[a]instanceof o.a&&t.parameters[a].push(e.parameters[a]))}return t}},{key:"isExtraRowOrItem",value:function(t){var e,n;return Boolean("Extra-Row"===(null==t||null===(e=t.parameters)||void 0===e?void 0:e.ItemType)||"Extra-Place Holder"===(null==t||null===(n=t.parameters)||void 0===n?void 0:n.ItemType))}},{key:"asViewItem",value:function(t,e){for(var n,r=Object.assign({},t.parameters),o=0,i=Object.keys(r);o<i.length;o++)"Price"!==(n=i[o])&&"Quantity"!==n&&(r[n]=this.valuePresenterFactory(n,t));return r.Price=this.valuePresenterFactory(this.createVariantKey("Price",e),t),r.Quantity=parseInt(this.getVariantData(t,"Quantity",e)),r.Description=t.description,r.part=this.factoryPartNumber(t.manufacturers[0]),Object.assign({},t,{parameters:r})}},{key:"factoryPartNumber",value:function(t){return t?(new c.a).push("".concat(t.name," ").concat(t.mpn)).setUrl(t.manufacturerUrl).setStatusName(t.lifecycleStatus):new c.a}},{key:"valuePresenterFactory",value:function(t,e){switch(t){case"Revision State":return(new i.a).setColor(e.parameters["%REVISION_STATE_COLOR%"]).push(e.parameters[t]);case"Revision Status":return(new a.a).push(e.parameters[t]);case"Designator":return(new u.a).setDefaultSort().push(e)}if(l.a.test(t))return(new s.a).push(e.parameters[t]);if(l.c.test(t)){var n=e.parameters[t];if(n){var r=Number(t.replace("Supplier Part Number ","")),f=e.parameters["Supplier ".concat(r)],d=e.manufacturers.flatMap((function(t){return t.suppliers})).find((function(t){return t.name===f&&t.spn===n}));if(d)return(new c.a).setUrl(d.supplierUrl).push(e.parameters[t])}return new c.a}if(l.b.test(t)){var h=e.parameters[t];if(h){var p=Number(t.replace("Manufacturer Part Number ","")),m=e.parameters["Manufacturer ".concat(p)],v=e.manufacturers.find((function(t){return t.name===m&&t.mpn===h}));if(v)return(new c.a).setUrl(v.manufacturerUrl).setStatusName(v.lifecycleStatus).push(e.parameters[t])}return new c.a}return(new o.a).push(e.parameters[t])}},{key:"getVariant",value:function(){var t,e={};return this.bus.emit("Variants:getCurrent",e),null===(t=e.currentVariant)||void 0===t?void 0:t.name}},{key:"getVariantData",value:function(t,e,n){return t.parameters[this.createVariantKey(e,n)]||t.parameters[e]}},{key:"createVariantKey",value:function(t,e){return e&&"[No Variations]"!==e?"".concat(t,"@").concat(e):t}}])&&m(e.prototype,n),f&&m(e,f),Object.defineProperty(e,"prototype",{writable:!1}),x}(r.a)},function(t,e,n){"use strict";var r=n(17),o=function(){var t=this,e=t._self._c;return e("AfsModalWarning",t._g({ref:"modalWarning",attrs:{id:t.id},scopedSlots:t._u([{key:"default",fn:function(){return[t.hasMessage?[e("AfsText",{staticClass:"afs-color-text"},[t._v("\n        "+t._s(t.message)+"\n      ")])]:[e("AfsText",{staticClass:"afs-color-text"},[t._v("\n        Oops! Something went wrong.\n      ")])]]},proxy:!0}])},t.$listeners))};o._withStripped=!0;var i=function(){var t=this,e=t._self._c;return e("Modal",t._g({ref:"modal",staticClass:"afs-modal-warning",attrs:{id:t.id,level:"2",size:"sm","data-locator":t.dataLocator},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"afs-modal-warning__container"},[e("div",{staticClass:"afs-modal-warning__body"},[e("div",{staticClass:"afs-modal-warning__icon"},[t._t("icon",(function(){return[t._v("\n            🙁\n          ")]}))],2),t._v(" "),e("div",{staticClass:"afs-modal-warning__content"},[t._t("default",null,{getBEMClass:t.getBEMClass})],2)])])]},proxy:!0}],null,!0)},t.$listeners))};i._withStripped=!0;var a=n(86),s=n(1),c=n(3),u={name:"AfsModalWarning",components:{Modal:a.a},props:{dataLocator:{type:String,default:"modal-warning"}},data:function(){return{id:Object(r.a)()}},computed:{themeClass:function(){var t=Object(c.a)(this.$root);return Object(s.c)(t.theme)}},methods:{getBEMClass:function(t){return Object(s.a)("afs-modal-warning",t)},open:function(){this.$refs.modal&&this.$refs.modal.open()},close:function(){this.$refs.modal&&this.$refs.modal.close()}}},l=(n(424),n(0)),f=Object(l.a)(u,i,[],!1,null,null,null).exports,d={name:"AfsErrorHandler",components:{AfsText:n(5).a,AfsModalWarning:f},props:{id:{type:String,default:null},message:{type:String,default:null}},computed:{hasMessage:function(){return"string"==typeof this.message&&!!this.message.length}},methods:{open:function(){this.$refs.modalWarning.open()},close:function(){this.$refs.modalWarning.close()}}},h=Object(l.a)(d,o,[],!1,null,null,null).exports;var p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,o=void 0===n?"errorHandler_".concat(Object(r.a)()):n,i=e.afsConfig,a=void 0===i?{}:i,s=e.message,c=void 0===s?null:s,u="function"==typeof t;if(u){var l=document.querySelector("body");if(l){if(!document.querySelector("#".concat(o))){var f=document.createElement("div");f.setAttribute("id",o),l.appendChild(f)}return new t({components:{App:h},data:function(){return{afsConfig:a,message:c,id:o}},methods:{setMessage:function(t){return this.message=t,this},resetMessage:function(){return this.setMessage(c),this},open:function(){return this.$refs.app.open(),this},close:function(){return this.$refs.app.close(),this}},template:'<App ref="app" :id="id" :message="message" @open="$emit(\'open\', id)" @close="$emit(\'close\', id)" @after-close="$emit(\'after-close\', id)"/>'}).$mount("#".concat(o))}console.error("You should initialize ErrorHandler after dom loaded")}else console.error("You should pass Vue as first argument to initialize ErrorHandler")};e.a=function(t,e){var n=p(t,e);return n&&function(t,e){return new Promise((function(r,o){t.then((function(n){if(e&&"function"==typeof e.resolveCallback){var o=e.resolveCallback(n);if(o&&!0===o.promiseReject)return Promise.reject(t)}return r(n)})).catch((function(t){var r=t&&t.response&&t.response.data;if(401!==(t&&t.response&&t.response.status)){var i=e&&"function"==typeof e.showModalCondition?e.showModalCondition(t):!(r&&r.additionalInfo);if(i){null!=e&&e.allowReject&&o(t);var a=i.message||r&&r.message;n.setMessage(null),n.setMessage(a||null),n.open()}o(t)}else window.location.reload()}))}))}}},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-comments-filters"},[t.titleData?e("button",{directives:[{name:"dropdown",rawName:"v-dropdown:[menuId]",arg:t.menuId}],staticClass:"app-comments-filters__btn"},[e("AfsIcon",{staticClass:"app-comments-filters__icon-filter",attrs:{name:"filter-empty-16"}}),t._v(" "),t.titleData.text?e("AfsText",{staticClass:"app-comments-filters__title",attrs:{type:"title",ellipsis:""}},[t._v("\n      "+t._s(t.titleData.text)+"\n    ")]):t.titleData.user?e("UserAvatar",{attrs:{size:"sm",img:t.titleData.user.img,title:t.titleData.user.name}}):t._e(),t._v(" "),t.assignedToItem?e("div",{staticClass:"app-comments-filters__avatars"},t._l(t.activeFiltersUsers,(function(n){return e("UserAvatar",{directives:[{name:"hint",rawName:"v-hint",value:{id:t.avatarsHintId,onOpen:function(){return t.handleAvatarsHint(n)},noDelay:!0},expression:"{\n          id: avatarsHintId,\n          onOpen: () => handleAvatarsHint(user),\n          noDelay: true,\n        }"}],key:n.id,attrs:{size:"sm",img:n.img,title:n.name,"bg-color-code":n.bgColorCode}})})),1):t._e(),t._v(" "),e("AfsIcon",{staticClass:"app-comments-filters__icon",attrs:{name:"chevron-down-8"}})],1):t._e(),t._v(" "),e("div",{class:{"app-comments-filters__align-btn":!t.titleData}},[e("AfsButtonIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:t.hintId,delay:10},expression:"{ id: hintId, delay: 10 }"}],attrs:{size:"lg",transparent:"",icon:t.visibilityIcon},on:{click:t.toggleVisibility}}),t._v(" "),e("AfsButtonIcon",{directives:[{name:"dropdown",rawName:"v-dropdown:[menuId2]",arg:t.menuId2}],attrs:{size:"lg",transparent:"",icon:"slider-16"}})],1),t._v(" "),e("AfsContextMenu",t._b({},"AfsContextMenu",t.avatarsHintConfig,!1),[t._v(" "+t._s(t.avatarsText)+" ")]),t._v(" "),e("AfsContextMenu",t._b({},"AfsContextMenu",t.hintConfig,!1),[t._v(" "+t._s(t.hintText)+" ")]),t._v(" "),e("AfsContextMenu",{ref:"filtersContextMenu",attrs:{id:t.menuId,type:"dropdown","init-width":"208",modifiers:{y:"bottom",x:"center"},offset:12},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[t.areTasksEnabled?[t.tasksOnlyItem?e("ul",{class:r("section")},[e("li",{class:r("item-in")},[e("AfsCheckbox",{attrs:{"model-value":t.tasksOnlyItem.isSelected},on:{"model-changed":function(e){return t.onChangeCheckbox(e,t.tasksOnlyItem)}}},[e("AfsText",{attrs:{type:"paragraph",inline:""}},[t._v("\n                "+t._s(t.tasksOnlyItem.text)+"\n              ")])],1)],1)]):t._e(),t._v(" "),t.assignedToItem?e("ul",{class:r("section")},[e("AfsText",{class:r("section-label"),attrs:{type:"group"}},[t._v("\n            ASSIGNED TO\n          ")]),t._v(" "),e("div",{staticClass:"app-comments-filters__assigned-to"},t._l(t.assignedToItem.users,(function(n){return e("li",{key:n.id,class:[r("item-in")]},[e("AfsCheckbox",{attrs:{"model-value":n.isSelected},on:{"model-changed":function(e){return t.onChangeCheckboxUser(e,n)}}},[e("span",{class:[r("user"),r("user_no-padding")]},[e("UserAvatar",{class:r("user-figure"),attrs:{size:"sm",img:n.img,title:n.name}}),t._v(" "),e("AfsText",{attrs:{tag:"span",ellipsis:""}},[t._v("\n                    "+t._s(n.fullName||n.name)+"\n                  ")])],1)])],1)})),0)],1):t._e(),t._v(" "),e("ul",{class:r("section")},[e("li",{class:[r("item-in"),r("item-clickable")]},[e("AfsText",{attrs:{type:"paragraph"},on:{click:t.onClearFilters}},[t._v("\n              Clear filters\n            ")])],1)])]:e("ul",{class:[r("section"),r("section_pad-sm")]},t._l(t.filters.radios,(function(n){return e("li",{key:n.id,class:r("item")},[t.isRadioBtnVisible(n)?e("AfsRadio",{class:r("item-checkbox"),attrs:{"model-value":t.selectedRadio,value:n.text,name:"filters"},on:{change:function(e){return t.onChangeRadio(e,n)}}},[e("AfsText",{attrs:{type:"paragraph",inline:""}},[t._v("\n              "+t._s(n.text)+"\n              "),n.description?e("AfsText",{staticClass:"app-comments-filters__item-description",attrs:{type:"text",inline:""}},[t._v("\n                "+t._s(n.description)+"\n              ")]):t._e()],1)],1):t._e(),t._v(" "),n.users&&n.users.length?e("AppUserSelect",{staticClass:"app-comments-filters__select",attrs:{disabled:!n.isSelected,list:n.users},on:{"change-user":t.onChangeUser}}):t._e()],1)})),0)]}}])}),t._v(" "),e("AfsContextMenu",{ref:"filtersContextMenu2",attrs:{id:t.menuId2,type:"dropdown","init-width":"208",modifiers:{y:"bottom",x:"center"},offset:12},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[e("ul",{class:[r("section"),r("section_pad-sm")]},t._l(t.visibilityFilters,(function(n){return e("li",{key:n.id,class:r("item")},[e("AfsCheckbox",{class:r("item-checkbox"),attrs:{"model-value":n.isSelected},on:{"model-changed":function(e){return t.onChangeCheckbox(e,n)}}},[e("AfsText",{attrs:{type:"paragraph",inline:""}},[t._v("\n              "+t._s(n.text)+"\n            ")])],1)],1)})),0),t._v(" "),t.hideNotification?t._e():e("ul",{staticClass:"app-comments-filters__item-list",class:r("section")},[e("li",{class:r("item")},[e("button",{staticClass:"app-comments-filters__btn-icon",class:[r("item-clickable"),r("item-in"),r("item-in_icon")],on:{click:t.onNotificationsClick}},[e("AfsIcon",{staticClass:"app-comments-filters__item-icon",attrs:{name:"envelope-badge-16",filled:""}}),t._v(" "),e("AfsText",{staticClass:"app-comments-filters__btn-text"},[t._v("\n              Notification Settings\n            ")])],1)])])]}}])})],1)};r._withStripped=!0;var o=n(5),i=n(4),a=n(23),s=n(8),c=n(65),u=n(217),l=n(96),f=n(16),d=n.n(f),h=n(48),p=n.n(h),m=n(7),v=n.n(m),y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-user-select",attrs:{id:t.containerId}},[e("AfsButton",{directives:[{name:"dropdown",rawName:"v-dropdown:[menuId]",arg:t.menuId}],staticClass:"app-user-select__btn",attrs:{type:"button",disabled:t.disabled}},[e("UserAvatar",{staticClass:"app-user-select__img",attrs:{size:"sm",img:t.selectedUser.img,title:t.selectedUser.name}}),t._v(" "),e("AfsText",{staticClass:"app-user-select__text",attrs:{tag:"span",ellipsis:""}},[t._v("\n      "+t._s(t.selectedUser.name)+"\n    ")]),t._v(" "),e("AfsIcon",{staticClass:"app-user-select__icon",attrs:{name:"chevron-down-8"}})],1),t._v(" "),e("AfsContextMenu",{ref:t.menuId,attrs:{id:t.menuId,type:"dropdown",modifiers:{y:"bottom",x:"center"},"parent-container-id":t.containerId},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[e("ul",{class:r("section")},t._l(t.list,(function(n){return e("li",{key:n.id,class:r("item")},[e("button",{staticClass:"app-user-select__menu-btn",class:[r("item-clickable"),r("user")],attrs:{type:"button"},on:{click:function(e){return t.onClickUser(n)}}},[e("UserAvatar",{class:r("user-figure"),attrs:{size:"md",img:n.img,title:n.name}}),t._v(" "),e("AfsText",{attrs:{type:"single line",inline:"",ellipsis:""}},[e("span",[t._v("\n                "+t._s(n.fullName||n.name)+"\n              ")])])],1)])})),0)]}}])})],1)};y._withStripped=!0;var g={name:"AppUserSelect",components:{AfsButton:n(38).a,AfsContextMenu:s.a,AfsText:o.a,AfsIcon:i.a,UserAvatar:l.a},directives:{dropdown:p.a},props:{list:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{menuId:v()(),containerId:v()()}},computed:{selectedUser:function(){return this.list.find((function(t){return t.isSelected}))||this.list[0]}},methods:{onClickUser:function(t){this.$emit("change-user",t),this.$refs[this.menuId].close()}}},b=(n(441),n(0)),w=Object(b.a)(g,y,[],!1,null,null,null).exports,_=n(14),O={name:"AppCommentsFilters",components:{AfsText:o.a,AfsIcon:i.a,AfsButtonIcon:a.a,AfsContextMenu:s.a,AfsCheckbox:c.a,AfsRadio:u.a,AppUserSelect:w,UserAvatar:l.a},directives:{dropdown:p.a,hint:d.a},props:{filters:{type:Object,default:null},hideNotification:{type:Boolean,default:!1}},data:function(){return{menuId:"filters-menu-id",menuId2:"filters-menu-id-2",hintId:v()(),avatarsHintId:v()(),avatarsText:"",isVisible:!0}},computed:{areTasksEnabled:function(){return _.a.getLicenseDetails(_.a.names.lightWeightTasks).isEnabled},titleData:function(){var t,e,n,r,o;if(this.areTasksEnabled&&!this.activeFiltersUsers.length)return null!==(o=this.tasksOnlyItem)&&void 0!==o&&o.isSelected?{text:this.tasksOnlyItem.text}:{text:"All"};if(null===(t=this.filters)||void 0===t||!t.radios)return!1;var i=null===(e=this.filters)||void 0===e||null===(n=e.radios)||void 0===n?void 0:n.find((function(t){return t.isSelected})),a={text:"",user:null};if(null!=i&&null!==(r=i.users)&&void 0!==r&&r.length){var s=i.users.find((function(t){return t.isSelected}));a.text=null==s?void 0:s.name}else a.text=null==i?void 0:i.text;return a},activeFiltersUsers:function(){var t=this.assignedToItem.users.filter((function(t){return t.isSelected})),e=t.length;if(e>6){var n=t.slice(-(e-6+1)).map((function(t){return t.fullName||t.name}));(t=t.slice(0,5)).push({id:v()(),img:null,name:String(n.length),bgColorCode:"darkprimary",hint:n.join(", ")})}return t.reverse()},selectedRadio:function(){return this.filters.radios.find((function(t){return t.isSelected})).text||""},visibilityIcon:function(){return this.isVisible?"eye-16-2":"eye-off-16-2"},hintConfig:function(){return{type:"hint",id:this.hintId,modifiers:{y:"bottom",x:"center"},offset:4}},avatarsHintConfig:function(){return{type:"hint",id:this.avatarsHintId,modifiers:{y:"bottom",x:"center"},offset:4}},hintText:function(){return this.isVisible?"Hide pins on design":"Show pins on design"},tasksOnlyItem:function(){return this.filters.checkboxes.find((function(t){return"tasksonly"===t.id}))},assignedToItem:function(){return this.filters.checkboxes.find((function(t){return"assignedto"===t.id}))},visibilityFilters:function(){return this.filters.checkboxes.filter((function(t){return"group2"===t.group}))}},methods:{onChangeRadio:function(t,e){var n,r,o=Array.isArray(e.users)&&(null===(n=e.users.find((function(t){return t.isSelected})))||void 0===n?void 0:n.id);this.$emit("change-radio",{name:t,item:e,forSave:{Name:e.name,Value:JSON.stringify({id:e.id,userId:o||(null==e||null===(r=e.users)||void 0===r?void 0:r[0])||""})}})},onChangeCheckbox:function(t,e){this.$emit("change-checkbox",{isSelected:t,item:e,forSave:{Name:e.name,Value:t?1:0}})},onChangeCheckboxUser:function(t,e){this.$emit("change-checkbox-user",{isItemUserSelected:t,itemUser:e,forSave:{Name:"AssignedTo",Value:e.id}})},onChangeUser:function(t){this.$emit("change-radio",{user:t,forSave:{Name:"UserFrom",Value:JSON.stringify({id:"from",userId:t.id})}})},isRadioBtnVisible:function(t){return!t.users||t.users&&t.users.length},onNotificationsClick:function(){this.$emit("open-notifications"),this.$refs.filtersContextMenu2.close()},toggleVisibility:function(){this.isVisible=!this.isVisible,this.$emit("visibility-change",this.isVisible)},onClearFilters:function(){this.$emit("clear-filters")},handleAvatarsHint:function(t){this.avatarsText=t.hint||t.fullName||t.name}}},S=(n(442),Object(b.a)(O,r,[],!1,null,null,null));e.a=S.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-header"},[e("div",{staticClass:"comment-header__task"},[t._t("header"),t._v(" "),t.taskHrid?[e("a",{staticClass:"comment-header__task-hrid",attrs:{href:t.taskLink,target:"_parent"}},[t._v("\n        "+t._s(t.taskHrid)+"\n      ")]),t._v(" "),e("TaskPriority",{attrs:{value:t.taskPriority}})]:t._e()],2),t._v(" "),e("div",{staticClass:"comment-header__align",class:{"comment-header__align_right":!t.taskHrid}},[t.taskStatus?e("ModalEditCommentsSelectStatus",{attrs:{"task-status":t.taskStatus},on:{input:function(e){return t.$emit("change-status",e)}}}):t._e(),t._v(" "),t.taskHrid||t.isAnonymous?t._e():e("span",{directives:[{name:"hint",rawName:"v-hint",value:{id:"resolve",delay:1},expression:"{ id: 'resolve', delay: 1 }"}],staticClass:"comment-header__resolve-comment",on:{click:function(e){return t.$emit("handle-resolve")}}},[e("AfsButtonIcon",{class:{"is-resolved":t.isResolved},attrs:{transparent:"",size:"lg",icon:"checkmark-circle"}}),t._v(" "),e("span",[t._v(t._s(t.isResolved?"Resolved":"Resolve"))])],1),t._v(" "),e("AfsButtonIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"prev-comment",delay:1},expression:"{ id: 'prev-comment', delay: 1 }"}],attrs:{transparent:"",icon:"chevron-left",disabled:!t.prevNextThreadIds.prev},on:{click:function(e){return t.changeActiveThread("prev")}}}),t._v(" "),e("AfsButtonIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"next-comment",delay:1},expression:"{ id: 'next-comment', delay: 1 }"}],staticClass:"comment-header__btn-right",attrs:{transparent:"",icon:"chevron-left",disabled:!t.prevNextThreadIds.next},on:{click:function(e){return t.changeActiveThread("next")}}})],1),t._v(" "),e("ContextMenu",t._b({ref:"prev-comment",attrs:{id:"prev-comment"}},"ContextMenu",t.hintConfigPrev,!1),[t._v("\n    Previous Comment (Shift+Left)\n  ")]),t._v(" "),e("ContextMenu",t._b({ref:"next-comment",attrs:{id:"next-comment"}},"ContextMenu",t.hintConfig,!1),[t._v("\n    Next Comment (Shift+Right)\n  ")]),t._v(" "),e("ContextMenu",t._b({attrs:{id:"resolve"}},"ContextMenu",t.hintConfig,!1),[t._v("\n    "+t._s(t.isResolved?"Unresolve":"Resolve")+" Comment\n  ")])],1)};r._withStripped=!0;var o=n(8),i=n(23),a=n(218),s=n(16),c=n.n(s),u=function(){return(0,this._self._c)("Select",{staticClass:"modal-edit-task-status",attrs:{options:this.statusOptions,value:this.currentStatus,transparent:""},on:{input:this.handleStatusChange}})};u._withStripped=!0;var l={name:"ModalEditCommentsSelectStatus",components:{Select:n(224).a},props:{taskStatus:{type:String,default:""}},computed:{statusOptions:function(){return[{id:"ToDo",name:"To Do"},{id:"InProgress",name:"In Progress"},{id:"Resolved",name:"Resolved"}]},currentStatus:function(){var t=this;return this.statusOptions.find((function(e){return e.id===t.taskStatus}))}},methods:{handleStatusChange:function(t){this.$emit("input",t)}}},f=(n(432),n(0)),d=Object(f.a)(l,u,[],!1,null,null,null).exports,h=window.__CORE__,p={name:"CommentEditHeaderPanel",directives:{hint:c.a},components:{ContextMenu:o.a,AfsButtonIcon:i.a,TaskPriority:a.a,ModalEditCommentsSelectStatus:d},props:{activeThread:{type:Object,default:function(){return{}}},activeThreadId:{type:[String,Number],default:""},sortedThreads:{type:Array,default:function(){return[]}},taskLink:{type:String,default:""},isAnonymous:{type:Boolean,default:!1}},computed:{taskPriority:function(){var t,e;return(null===(t=this.activeThread)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.LwTaskPriority)||""},taskHrid:function(){var t,e;return(null===(t=this.activeThread)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.LwTaskHrid)||""},taskStatus:function(){var t,e;return(null===(t=this.activeThread)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.LwTaskStatus)||""},prevNextThreadIds:function(){var t=this,e={prev:"",next:""};if(this.activeThreadId){var n=this.sortedThreads.findIndex((function(e){return e===t.activeThreadId}));n>-1&&(e.prev=this.sortedThreads[n-1]||"",e.next=this.sortedThreads[n+1]||"")}return e},hintConfigPrev:function(){return{type:"hint",modifiers:{y:"bottom",x:"left"},offset:4}},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"right"},offset:4}},isResolved:function(){var t;return(null===(t=this.activeThread)||void 0===t?void 0:t.resolved)||!1}},created:function(){document.addEventListener("keyup",this.handleKey)},beforeDestroy:function(){document.removeEventListener("keyup",this.handleKey)},methods:{changeActiveThread:function(t){var e=this,n=this.prevNextThreadIds[t]||null;n&&(this.$emit("set-active-thread",n),this.$nextTick((function(){h.bus.emit("CommentsDrawingEngine:activate",{id:n,zoomToFit:!0}),e.$refs["prev-comment"].close(),e.$refs["next-comment"].close()})))},handleKey:function(t){var e=t.code,n=t.shiftKey;"ArrowLeft"===e&&n&&this.changeActiveThread("prev"),"ArrowRight"===e&&n&&this.changeActiveThread("next")}}},m=(n(433),Object(f.a)(p,r,[],!1,null,null,null));e.a=m.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("ContextMenu",{attrs:{id:t.menuId,type:"dropdown","init-width":t.menuWidth,modifiers:{y:"bottom",x:"end"},"max-height-limit":t.maxHeightMenu},on:{close:t.menuClose}},[[e("GridColumn",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapsed,expression:"!isCollapsed"}],attrs:{"padding-size":"xl"}},[e("GridSection",[e("Search",{attrs:{icon:"search-thin-16"},on:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),t._v(" "),e("GridColumn",{style:{maxHeight:t.maxHeightMenuList+"px"},attrs:{"padding-size":"xl"}},[e("GridSection",[t.columnsFound?e("ul",t._l(t.columns,(function(n,r){return e("ColumnsMenuItem",{directives:[{name:"show",rawName:"v-show",value:t.isVisible(n,r),expression:"isVisible(column, index)"}],key:n.id,attrs:{id:n.id,text:n.text,"model-value":n.visible},on:{"model-changed":function(e){return t.toggleColumn(n)}}})})),1):e("ul",{staticClass:"not-found"},[e("AfsText",{attrs:{type:"paragraph"}},[t._v('"'+t._s(t.search)+'" not found')])],1),t._v(" "),e("AfsLink",{attrs:{href:"#"},on:{click:t.toggleItemsList}},[t._v("\n          "+t._s(t.btnShowMoreText)+"\n        ")])],1)],1)]],2)};r._withStripped=!0;var o=n(26),i=n(5),a=n(8),s=n(56),c=n(75),u=n(16),l=n.n(u),f=n(7),d=n.n(f),h=function(){var t=this,e=t._self._c;return e("li",{directives:[{name:"hint",rawName:"v-hint:[keyHintId]",arg:t.keyHintId}],staticClass:"columns-menu-item",on:{mouseover:t.mouseOver}},[e("Checkbox",{staticClass:"columns-menu-item__checkbox",attrs:{"model-value":t.modelValue},on:{"model-changed":function(e){return t.$emit("model-changed")}}},[e("AfsText",{ref:"text",staticClass:"columns-menu-item__text",attrs:{type:"paragraph",inline:!0,ellipsis:""}},[t._v("\n      "+t._s(t.text)+"\n    ")])],1),t._v(" "),t.hintVisible?e("ContextMenu",{attrs:{id:t.keyHintId,type:"hint",modifiers:{y:"bottom",x:"start"}}},[t._v("\n    "+t._s(t.text)+"\n  ")]):t._e()],1)};h._withStripped=!0;var p=n(65),m={name:"ColumnsMenuItem",components:{AfsText:i.a,Checkbox:p.a,ContextMenu:a.a},directives:{hint:l.a},props:{id:{type:String,required:!0},text:{type:String,required:!0},modelValue:{type:Boolean},guid:{type:String,default:d()()}},data:function(){return{hintVisible:!1}},computed:{keyHintId:function(){return"".concat(this.guid,"-menu-").concat(this.id)}},methods:{mouseOver:function(){var t;this.hintVisible=this.isOverflowing(null===(t=this.$refs.text)||void 0===t?void 0:t.$el)},isOverflowing:function(t){return t&&t.offsetWidth<t.scrollWidth}}},v=(n(418),n(0)),y=Object(v.a)(m,h,[],!1,null,"37662f6d",null).exports,g=n(27),b={name:"ColumnsMenu",components:{AfsLink:o.a,AfsText:i.a,ColumnsMenuItem:y,ContextMenu:a.a,GridColumn:s.a,GridSection:s.c,Search:c.a},directives:{hint:l.a},props:{menuId:{type:String,default:"menu"},columns:{type:Array,default:function(){return[]},validator:function(t){return!t.length||t.every((function(t){return Object(g.hasOwnProperty)(t,"id")&&Object(g.hasOwnProperty)(t,"text")}))}},menuWidth:{type:Number,default:208},maxHeightMenu:{type:Number,default:328},maxHeightMenuList:{type:Number,default:260},menuLength:{type:Number,default:6}},data:function(){return{isCollapsed:!0,search:""}},computed:{btnShowMoreText:function(){return this.isCollapsed?"Show More":"Show Less"},componentId:function(){return d()()},searchText:function(){return this.search.trim().toLowerCase()},columnsFound:function(){return this.columns.some(this.isVisible)}},methods:{createElementId:function(t){return"".concat(this.componentId,"-").concat(t)},isVisible:function(t,e){return this.isCollapsed&&e<this.menuLength||!this.isCollapsed&&t.text.toLowerCase().includes(this.searchText)},toggleItemsList:function(){this.isCollapsed=!this.isCollapsed,this.isCollapsed&&(this.search="")},menuClose:function(){this.search=""},toggleColumn:function(t){t.visible=!t.visible}}},w=(n(419),Object(v.a)(b,r,[],!1,null,"049aa45f",null));e.a=w.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("Modal",{ref:"modal",staticClass:"afs-modal-confirmation",attrs:{id:t.id,level:"2",size:t.size,"has-close":t.hasClose,"has-outside-close":!1,"parent-container-id":t.parentContainerId,"data-locator":t.dataLocator},on:{open:t.onOpen,close:t.onClose},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"afs-modal-confirmation__container"},[e("div",{staticClass:"afs-modal-confirmation__body"},[t._t("default",null,{getBEMClass:t.getBEMClass})],2),t._v(" "),e("div",{staticClass:"afs-modal-confirmation__footer"},[t.hasSlot("footer-additional")?e("div",{staticClass:"afs-modal-confirmation__footer-additional"},[t._t("footer-additional")],2):t._e(),t._v(" "),t.showLoader?e("div",{staticClass:"afs-modal-confirmation__loader"},[e("Loader"),t._v(" "),t.loaderText.length?e("AfsText",{staticClass:"afs-modal-confirmation__loader-text"},[t._v("\n            "+t._s(t.loaderText)+"\n          ")]):t._e()],1):t._e(),t._v(" "),t.hasBtnAccept?e("AfsButton",{staticClass:"afs-modal-confirmation__btn",attrs:{type:"button",primary:!0,disabled:t.acceptBtnDisabled,"is-busy":t.acceptBtnBusy,"data-locator":"".concat(t.dataLocator,"-confirm")},on:{click:function(e){return e.preventDefault(),t.handleAccept.apply(null,arguments)}}},[t._t("accept")],2):t._e(),t._v(" "),t.hasBtnReject?e("AfsButton",{staticClass:"afs-modal-confirmation__btn",attrs:{disabled:t.rejectBtnDisabled,"data-locator":"".concat(t.dataLocator,"-reject"),type:"button"},on:{click:function(e){return e.preventDefault(),t.handleReject.apply(null,arguments)}}},[t._t("reject")],2):t._e()],1)])]},proxy:!0}],null,!0)})};r._withStripped=!0;var o=n(86),i=n(38),a=n(54),s=n(5),c=n(17),u=n(3),l=n(1),f={name:"AfsModalConfirmation",components:{Modal:o.a,AfsButton:i.a,Loader:a.a,AfsText:s.a},props:{dataLocator:{type:String,default:"modal-confirmation"},id:{type:String,default:Object(c.a)()},hasBtnAccept:{type:Boolean,default:!0},hasBtnReject:{type:Boolean,default:!0},hasClose:{type:Boolean,default:!1},acceptBtnDisabled:{type:Boolean,default:!1},rejectBtnDisabled:{type:Boolean,default:!1},acceptBtnBusy:{type:Boolean,default:!1},showLoader:{type:Boolean,default:!1},loaderText:{type:String,default:""},parentContainerId:{type:String,default:""},size:{type:String,default:"md",validator:function(t){return["xxl","lg","md","mdl","mdh","sm"].includes(t)}}},emits:["open","close","accept","reject"],data:function(){return{confirmed:!1}},computed:{themeClass:function(){var t=Object(u.a)(this.$root);return Object(l.c)(t.theme)}},methods:{getBEMClass:function(t){return Object(l.a)("afs-modal-confirmation",t)},hasSlot:function(t){return!!this.$slots[t]},handleModalOpen:function(){this.confirmed=!1},onOpen:function(){this.handleModalOpen(),this.$emit("open")},onClose:function(){this.$emit("close")},open:function(){this.$refs.modal&&this.$refs.modal.open()},close:function(){this.$refs.modal&&this.$refs.modal.close()},preventConfirmed:function(){if(this.confirmed)return!0;this.confirmed=!0},handleAccept:function(){if(this.preventConfirmed())return!1;this.$emit("accept")},handleReject:function(){if(this.preventConfirmed())return!1;this.$emit("reject")}}},d=(n(431),n(0)),h=Object(d.a)(f,r,[],!1,null,null,null).exports;e.a=h},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("Modal",{ref:"modalAddComment",staticClass:"comment",attrs:{id:"modalAddComment",y:t.modalCoords.y,x:t.modalCoords.x,"close-on-view-click":!t.isPaintMode},on:{close:t.onClose,"close-all-modal":function(e){return t.$emit("close-all-modal")}}},[e("div",[t.editModes.length>1?e("CommentsTools",{attrs:{"edit-modes":t.editModes,"has-text":t.hasCommentText,"is-loading":t.isLoading,"is-drawing":t.isDrawing,thread:t.updatePostedThread},on:{"mode-text":t.setModeText,confirm:function(e){return t.$emit("confirm")},close:t.close,"paint-mode":function(e){t.isPaintMode=e}}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modeText,expression:"modeText"}],staticClass:"comment__wrap"},[t.hideHeader?t._e():e("ModalDraggerTitle",{on:{drag:t.moveModal}}),t._v(" "),e("div",{staticClass:"comment__body"},[t._t("content")],2)],1)],1),t._v(" "),t.modeText?[t._t("toast")]:t._e()],2)};r._withStripped=!0;var o=n(147),i=n(181),a=n(183),s={name:"ModalAddComments",components:{Modal:n(184).a,CommentsTools:i.a,ModalDraggerTitle:a.a},props:{editModes:{type:Array,default:function(){return["area"]}},activeCommentPosition:{type:Object,default:function(){return{}}},isDrawing:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},hasCommentText:{type:Boolean,default:!1},updatePostedThread:{type:Array,default:function(){return[]}},hideHeader:{type:Boolean,default:!1}},data:function(){return{modeText:!0,isMovePosition:!1,moveModalPosition:{x:0,y:0},menuStartHeight:200,isPaintMode:!1}},computed:{modalCoords:function(){var t;return this.isMovePosition?this.moveModalPosition:Object(o.b)({data:null===(t=this.activeCommentPosition)||void 0===t?void 0:t.iconRect,menuStartHeight:this.menuStartHeight})}},watch:{activeCommentPosition:{immediate:!0,deep:!0,handler:function(t){this.isMovePosition=!1}}},methods:{open:function(){this.isOpened||(this.isOpened=!0,this.modeText=!0,this.isMovePosition=!1,this.$refs.modalAddComment.open(),this.moveModalPosition={x:0,y:0},this.$emit("open"),this.$emit("set-open-modal",this),this.setStartMenuHeight())},close:function(){this.isOpened&&(this.isOpened=!1,this.$refs.modalAddComment.close(),this.$emit("remove-open-modal",this))},onClose:function(){this.$emit("close")},setModeText:function(t){this.modeText=t,t||this.$emit("check-exist-text")},moveModal:function(t){this.moveModalPosition=t,this.isMovePosition=!0},setStartMenuHeight:function(){var t=this;this.$nextTick((function(){t.menuStartHeight=t.$refs.modalAddComment.$el.offsetHeight}))}}},c=(n(439),n(0)),u=Object(c.a)(s,r,[],!1,null,"1140dc88",null);e.a=u.exports},function(t,e,n){"use strict";var r=function(){var t=this._self._c;return t("AfsSubHeader",{staticClass:"app-comments-header",attrs:{center:!1}},[t("div",{staticClass:"app-comments-header__container"},[this._v("\n    "+this._s(this.subheaderText)+"\n  ")])])};r._withStripped=!0;var o=n(69),i=n(14),a={name:"AppCommentsHeader",components:{AfsSubHeader:o.a},computed:{areTasksEnabled:function(){return i.a.getLicenseDetails(i.a.names.lightWeightTasks).isEnabled},subheaderText:function(){return this.areTasksEnabled?"Comments and Tasks":"Comments"}}},s=n(0),c=Object(s.a)(a,r,[],!1,null,null,null);e.a=c.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-toast"},[e("Snackbar",{ref:"snackbarToast",staticClass:"comment-toast__first-plan",attrs:{"hide-close":""},nativeOn:{click:function(e){return t.close.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Icon",{staticClass:"comment-toast__icon",attrs:{name:"plus-16-2"}})]},proxy:!0},{key:"default",fn:function(){return[e("AfsText",{staticClass:"comment-toast__text",attrs:{inline:""}},[t._v("\n        "+t._s(t.toastText)+"\n      ")])]},proxy:!0},{key:"action",fn:function(){return[e("AfsText",{staticClass:"comment-toast__btn",attrs:{inline:""},on:{click:t.exit}},[t._v("\n        Esc to Exit\n      ")])]},proxy:!0}])})],1)};r._withStripped=!0;var o=n(4),i=n(5),a=n(115),s=n(81),c={PCBView3D:"Select an object or point to leave a comment",LSMView:"Select an object to leave a comment",FBOM:"Select a row to leave a comment",default:"Select an object or click and drag to leave a comment"},u={name:"AddCommentToast",components:{Icon:o.a,AfsText:i.a,Snackbar:a.a},props:{activeTab:{type:String,default:""}},data:function(){return{isOpened:!1}},computed:{toastText:function(){return(null==c?void 0:c[this.activeTab])||c.default}},watch:{isOpened:{immediate:!0,handler:function(t){t?(document.addEventListener("keyup",this.handleKeyUp,!0),window.addEventListener("resize",this.handleDocumentResize),s.a.add(this)):(document.removeEventListener("keyup",this.handleKeyUp,!0),window.removeEventListener("resize",this.handleDocumentResize),s.a.remove(this))}}},methods:{toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.isOpened||(this.$refs.snackbarToast&&this.$refs.snackbarToast.open(),this.isOpened=!0)},close:function(){this.isOpened&&(this.$refs.snackbarToast&&this.$refs.snackbarToast.close(),this.isOpened=!1)},handleKeyUp:function(t){t.stopPropagation(),t.preventDefault();var e=document.querySelectorAll(".comment-toast");27===t.keyCode&&e[e.length-1]===this.$el&&s.a.isLast(this)&&this.exit()},exit:function(){this.close(),this.$emit("close:esc")},handleDocumentResize:function(){this.close()}}},l=(n(443),n(0)),f=Object(l.a)(u,r,[],!1,null,null,null);e.a=f.exports},function(t,e,n){"use strict";var r=function(t){return new Promise((function(e,n){t.addEventListener("did-screenshot",(function r(o){var i=o.detail;t.removeEventListener("did-screenshot",r);var a=i.error,s=i.data;setTimeout((function(){a?n(a):e(s)}),0)})),t.dispatchEvent(new Event("do-screenshot"))}))},o=function(t){var e=(new XMLSerializer).serializeToString(t);return"data:image/svg+xml; charset=utf8, "+encodeURIComponent(e)},i=function(t){return new Promise((function(e,n){var r=new Image;r.onerror=n,r.onload=function(){e(r)},r.src=t}))};function a(t){var e,n=t.cloneNode(!1);if((null!==(e=t.shadowRoot)&&void 0!==e?e:t).childNodes.forEach((function(t){var e=t;null!==e.offsetParent&&function(t){if(t.getBoundingClientRect&&t.tagName&&!t.dataset.screenshot){var e=t.getBoundingClientRect(),n=document.documentElement.clientWidth,r=document.documentElement.clientHeight;return!(e.right<0||e.bottom<0||e.left>n||e.top>r)}return!0}(e)&&n.appendChild(a(e))})),n.style){var r=window.getComputedStyle(t);if(r.cssText)n.style.cssText=r.cssText;else for(var o=0;o<r.length;o+=1){var i=r[o];n.style.setProperty(i,r.getPropertyValue(i),r.getPropertyPriority(i))}}return n}var s=function(t){var e,n,r,o=t.parentElement,i=null===(e=o.getBoundingClientRect())||void 0===e?void 0:e.width,s=Math.min((null===(n=o.getBoundingClientRect())||void 0===n?void 0:n.height)+80,null===(r=t.getBoundingClientRect())||void 0===r?void 0:r.height),c=a(t);return c&&(c.style.width="".concat(i,"px"),c.style.height="".concat(s,"px")),function(t,e,n){var r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),i=document.createElementNS(r,"foreignObject");return o.setAttribute("width","".concat(e)),o.setAttribute("height","".concat(n)),o.setAttribute("viewBox","0 0 ".concat(e," ").concat(n)),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),o.appendChild(i),i.appendChild(t),o}(c,i,s)};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function h(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==c(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,s(b,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}e.a=function(){var t,e=(t=u().mark((function t(e){var n,a,c,f,d,h,p,m,v,y,g,b;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("options is null");case 3:return(e.svg||e.html)&&(d=e.svg||s(e.html),n=i(o(d))),e.canvas&&(h=e.canvas,c=h.width,f=h.height,a=r(h).then(i)),t.next=7,Promise.all([n,a]);case 7:return p=t.sent,m=l(p,2),v=m[0],y=m[1],(g=document.createElement("canvas")).width=c||(null==v?void 0:v.width)||0,g.height=f||(null==v?void 0:v.height)||0,b=g.getContext("2d"),y&&b.drawImage(y,0,0,g.width,g.height),v&&b.drawImage(v,0,0,g.width,g.height),t.abrupt("return",g.toDataURL());case 20:t.prev=20,t.t0=t.catch(0),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){d(i,r,o,a,s,"next",t)}function s(t){d(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"part-number"},[t.url?e("AfsLink",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.search,value:t.value},expression:"{\n      query: search,\n      value: value\n    }"}],staticClass:"part-number__link",attrs:{title:t.value,href:t.url,target:"_blank"},on:{click:t.onLinkClick}},[t._v("\n    "+t._s(t.value)+"\n  ")]):e("AfsText",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.search,value:t.value},expression:"{\n      query: search,\n      value: value\n    }"}],staticClass:"part-number__text",attrs:{title:t.value}},[t._v("\n    "+t._s(t.value)+"\n  ")]),t._v(" "),t.statusName?e("div",{staticClass:"part-number__marker",class:t.createStatusClass(t.statusName),attrs:{title:t.statusName}},[t._v("\n     \n  ")]):t._e()],1)};r._withStripped=!0;var o=n(26),i=n(5),a=n(99),s=window.__APP__.analytics,c={name:"ValuePartNumber",components:{AfsLink:o.a,AfsText:i.a},directives:{highlight:a.a},props:{search:{type:String,default:""},url:{type:String,default:void 0},statusName:{type:String,default:void 0},value:{type:String,default:""}},methods:{createStatusClass:function(t){switch(t){case"EOL":case"Obsolete":return"error";case"NRND":return"warning";case"Unknown":return"unknown";default:return"success"}},onLinkClick:function(){s.dispatchViewNavigationEvent("FBom",{action:"OctopartClick"})}}},u=(n(421),n(0)),l=Object(u.a)(c,r,[],!1,null,null,null);e.a=l.exports},function(t,e,n){"use strict";var r=function(){return(0,this._self._c)("AfsText",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:this.search,value:this.value},expression:"{\n    query: search,\n    value: value\n  }"}],style:{color:this.color},attrs:{title:this.value}})};r._withStripped=!0;var o=n(5),i=n(99),a={name:"ValueColoredText",components:{AfsText:o.a},directives:{highlight:i.a},props:{search:{type:String,default:""},color:{type:String,default:void 0},value:{type:String,default:""}}},s=n(0),c=Object(s.a)(a,r,[],!1,null,null,null);e.a=c.exports},function(t,e,n){"use strict";var r=function(){return(0,this._self._c)("AfsText",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:this.search,value:this.value},expression:"{\n    query: search,\n    value: value\n  }"}],style:this.color&&{paddingLeft:"8px",borderLeft:"16px solid ".concat(this.color)},attrs:{title:this.value}})};r._withStripped=!0;var o=n(5),i=n(99),a={name:"ValueRevisionState",components:{AfsText:o.a},directives:{highlight:i.a},props:{search:{type:String,default:""},color:{type:String,default:void 0},value:{type:String,default:""}}},s=n(0),c=Object(s.a)(a,r,[],!1,null,null,null);e.a=c.exports},function(t,e,n){"use strict";var r=function(){var t=this._self._c;return t("div",{staticClass:"fbom-no-results"},[t("AfsIcon",{staticClass:"fbom-no-results__icon",attrs:{name:"search-thin-16"}}),this._v(" "),t("AfsText",{staticClass:"fbom-no-results__title",attrs:{type:"large title"}},[this._v("No results for your search")]),this._v(" "),t("AfsText",{attrs:{type:"single line"}},[this._v("Clear the search and start again.")])],1)};r._withStripped=!0;var o=n(4),i=n(5),a={name:"NotFound",components:{AfsIcon:o.a,AfsText:i.a}},s=(n(422),n(0)),c=Object(s.a)(a,r,[],!1,null,null,null);e.a=c.exports},function(t,e,n){"use strict";var r=function(){var t=this;return(0,t._self._c)("Icon",{staticClass:"alternate-part-expander",class:{"alternate-part-expander--collapsed":!t.expanded},attrs:{name:"chevron-down-s"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.$emit("click")}}})};r._withStripped=!0;var o={name:"AlternatePartsExpander",components:{Icon:n(4).a},props:{expanded:{type:Boolean,default:!1}}},i=(n(423),n(0)),a=Object(i.a)(o,r,[],!1,null,"77c2b968",null);e.a=a.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"thread-group"},[e("AfsAccordion",{staticClass:"thread-group__acc",attrs:{opened:""},scopedSlots:t._u([{key:"header",fn:function(n){n.isOpened;return[t.title?e("div",{staticClass:"thread-group__title"},[t.icon?e("Icon",{staticClass:"thread-group__icon",attrs:{name:t.icon,filled:t.iconFilled}}):t._e(),t._v(" "),e("AfsText",{staticClass:"thread-group__name",attrs:{type:"title",ellipsis:""}},[t._v("\n          "+t._s(t.title)+"\n        ")]),t._v(" "),e("AfsText",{staticClass:"thread-group__count"},[t._v(" ("+t._s(t.count)+") ")])],1):t._e()]}},{key:"body",fn:function(){return[t._t("default")]},proxy:!0}],null,!0)})],1)};r._withStripped=!0;var o=n(5),i=n(4),a=n(121),s={name:"ThreadGroup",components:{AfsText:o.a,Icon:i.a,AfsAccordion:a.a},props:{title:{type:String,default:""},icon:{type:String,default:""},iconFilled:{type:Boolean,default:!0},count:{type:Number,default:0}}},c=(n(429),n(0)),u=Object(c.a)(s,r,[],!1,null,"bc1818c4",null);e.a=u.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",[t.isAnonymous?e("Placeholder",{scopedSlots:t._u([{key:"default",fn:function(){return[t._v("\n      To place and view comments, you must register in Altium 365\n    ")]},proxy:!0},{key:"btns",fn:function(){return[e("SignupButton",{attrs:{url:t.registerLink}})]},proxy:!0}],null,!1,1944887250)}):e("Placeholder",{scopedSlots:t._u([{key:"default",fn:function(){return[t._v("\n      "+t._s(t.noCommentsText||"Ask a question, leave a note, or just draw. Comments that you and other people post will appear here.")+"\n    ")]},proxy:!0},{key:"btns",fn:function(){return[e("AfsButton",{attrs:{icon:"bubble-add-16",wide:"","is-selected":t.isActiveAddComment},on:{click:t.onAddComment}},[t._v("\n        Place a Comment\n      ")])]},proxy:!0}])})],1)};r._withStripped=!0;var o=n(38),i=n(182),a=n(178),s={name:"ThreadPlaceholder",components:{AfsButton:o.a,Placeholder:i.a,SignupButton:a.default},props:{isAnonymous:{type:Boolean,default:!1},registerLink:{type:String,default:""},isActiveAddComment:{type:Boolean,default:!1},noCommentsText:{type:String,default:""}},methods:{onAddComment:function(){this.$emit("add-comment")}}},c=n(0),u=Object(c.a)(s,r,[],!1,null,null,null);e.a=u.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"context-menu"},[e("AfsButtonIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"more",delay:10},expression:"{ id: 'more', delay: 10 }"},{name:"dropdown",rawName:"v-dropdown:[id]",arg:t.id}],attrs:{transparent:"",size:"lg",icon:"more-16-2"}}),t._v(" "),e("ContextMenu",{ref:"contextMenu",attrs:{id:t.id,type:"dropdown",offset:-6,modifiers:{y:"bottom",x:"end"}},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[e("ul",{class:r("section")},t._l(t.contextMenu,(function(n,o){return e("li",{key:o,class:r("item")},[n.isHide?t._e():e("button",{class:[r("item-clickable"),r("item-in")],attrs:{type:"button"},on:{click:function(e){return t.onClick(n)}}},[e("AfsText",{attrs:{type:"single line",inline:""}},[t._v("\n              "+t._s(n.text)+"\n            ")])],1)])})),0)]}}])}),t._v(" "),e("ContextMenu",t._b({attrs:{id:"more"}},"ContextMenu",t.hintConfig,!1),[t._v("More Options")])],1)};r._withStripped=!0;var o=n(23),i=n(5),a=n(8),s=n(48),c=n.n(s),u=n(16),l=n.n(u),f={name:"CommentContextMenu",directives:{dropdown:c.a,hint:l.a},components:{AfsButtonIcon:o.a,AfsText:i.a,ContextMenu:a.a},props:{hideCopyLink:{type:Boolean,default:!1},hideEdit:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1},hideConvert:{type:Boolean,default:!1},changePosition:{type:Object,default:function(){return{}}}},data:function(t){return{id:"contextMenu-".concat(t._uid)}},computed:{contextMenu:function(){return[{text:"Convert to Task",event:"convert-to-task",isHide:this.hideConvert},{text:"Edit",event:"edit",isHide:this.hideEdit},{text:"Delete",event:"delete",isHide:this.hideDelete},{text:"Copy Link",event:"copy-link",isHide:this.hideCopyLink}]},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"right"},offset:4}}},watch:{changePosition:{immediate:!0,deep:!0,handler:function(t){this.$refs.contextMenu&&this.$refs.contextMenu.close()}}},methods:{onClick:function(t){this.$emit(t.event),this.$refs.contextMenu&&this.$refs.contextMenu.close()}}},d=n(0),h=Object(d.a)(f,r,[],!1,null,null,null);e.a=h.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("th",{directives:[{name:"hint",rawName:"v-hint:[keyHintId]",arg:t.keyHintId}],staticClass:"fbom-column-head",class:{"fbom-column-head--sorted":t.sorted,active:t.active},style:{width:t.width,minWidth:"".concat(t.minWidth,"px")},on:{mouseover:t.onMouseOver}},[t.hintVisible&&!t.resizing?e("ContextMenu",{attrs:{id:t.keyHintId,type:"hint",modifiers:{y:"bottom",x:"start"}}},[t._v("\n    "+t._s(t.text)+"\n  ")]):t._e(),t._v(" "),t.sorted?e("button",{staticClass:"fbom-column-head__content",attrs:{type:"button"},on:{click:t.onButtonClick}},[e("span",{ref:"text",staticClass:"fbom-column-head__text"},[t._v("\n      "+t._s(t.text)+"\n    ")]),t._v(" "),e("Icon",{staticClass:"fbom-column-head__icon",attrs:{name:t.sortIcon}})],1):e("div",{staticClass:"fbom-column-head__content"},[e("span",{ref:"text",staticClass:"fbom-column-head__text"},[t._v("\n      "+t._s(t.text)+"\n    ")])]),t._v(" "),t.resizer?e("div",{staticClass:"fbom-column-head__resizer",on:{mousedown:function(e){return e.stopPropagation(),t.$emit("resize")}}}):t._e()],1)};r._withStripped=!0;var o=n(4),i=n(8),a=n(48),s=n.n(a),c=n(16),u=n.n(c),l=n(7),f=n.n(l),d={name:"TableColumnHeader",components:{Icon:o.a,ContextMenu:i.a},directives:{dropdown:s.a,hint:u.a},props:{id:{type:String,required:!0},text:{type:String,default:null},sorted:{type:Boolean,default:!1},resizer:{type:Boolean,default:!1},resizing:{type:Boolean,default:!1},minWidth:{type:Number,default:48},baseWidth:{type:String,default:null},sortBy:{type:Object,default:function(){return{}}},guid:{type:String,default:f()()}},data:function(){return{width:this.baseWidth,hintVisible:null}},computed:{active:function(){var t;return(null===(t=this.sortBy)||void 0===t?void 0:t.col)===this.id},sortIcon:function(){var t;return this.active&&null!==(t=this.sortBy)&&void 0!==t&&t.isAsc?"chevron-up-s":"chevron-down-s"},keyHintId:function(){return"".concat(this.guid,"-heading-").concat(this.id)}},methods:{initWidth:function(){var t=this.$el.getBoundingClientRect().width;t&&(this.width="".concat(t,"px"))},onMouseOver:function(){this.hintVisible=this.isOverflowing(this.$refs.text)},isOverflowing:function(t){return t&&t.offsetWidth<t.scrollWidth},onButtonClick:function(){this.resizing||this.$emit("sort")},resize:function(t){var e=t-this.$el.getBoundingClientRect().left;this.width="".concat(Math.max(e,this.minWidth),"px")}}},h=(n(420),n(0)),p=Object(h.a)(d,r,[],!1,null,"0394201d",null);e.a=p.exports},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-header"},[e("div",{staticClass:"comment-header__title",class:{"is-active":t.isActive}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.threadNumber,expression:"threadNumber"}],staticClass:"comment-header__counter"},[t._v("\n      #"+t._s(t.threadNumber)+"\n    ")]),t._v(" "),t.label?e("div",{directives:[{name:"hint",rawName:"v-hint",value:t.labelHint&&{id:t.hintId,delay:100},expression:"\n        labelHint && {\n          id: hintId,\n          delay: 100\n        }\n      "}],staticClass:"comment-header__label-hint"},[t._v("\n      "+t._s(t.label)+"\n    ")]):t._e(),t._v(" "),t.isResolved?e("div",{staticClass:"comment-header__resolved"},[e("Icon",{staticClass:"comment-header__resolved-icon",attrs:{name:"checkmark-circle"}}),t._v(" "),e("AfsText",{staticClass:"comment-header__resolved-label",attrs:{inline:""}},[t._v("\n        Resolved\n      ")])],1):t._e(),t._v(" "),t.labelHint?e("AfsContextMenu",t._b({},"AfsContextMenu",t.hintConfig,!1),[t._v("\n      "+t._s(t.labelHint)+"\n    ")]):t._e()],1)])};r._withStripped=!0;var o=n(4),i=n(5),a=n(8),s=n(16),c=n.n(s),u=n(7),l=n.n(u),f={name:"CommentHeaderTitle",components:{Icon:o.a,AfsText:i.a,AfsContextMenu:a.a},directives:{hint:c.a},props:{threadNumber:{type:[Number,String],default:""},isResolved:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},label:{type:String,default:""},labelHint:{type:String,default:""}},data:function(){return{hintId:l()()}},computed:{hintConfig:function(){return{type:"hint",id:this.hintId,modifiers:{y:"bottom",x:"start"},offset:12,viewboxOffset:0}}}},d=(n(427),n(0)),h=Object(d.a)(f,r,[],!1,null,null,null);e.a=h.exports},function(t,e,n){"use strict";var r=n(36),o=["OES_vertex_array_object","ANGLE_instanced_arrays","OES_element_index_uint","OES_texture_float","OES_texture_half_float"],i=function(t){var e=[];if(o.forEach((function(n){!t.getExtension(n)&&e.push(n)})),e.length)throw new r.f("Some of WebGL extensions are not supported by your browser / graphics card driver: ".concat(e.join(", ")),e)};e.a=function(){var t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl");if(e&&e instanceof WebGLRenderingContext)return i(e);throw new r.e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"encodeHtml",(function(){return r})),n.d(e,"decodeHtml",(function(){return o})),n.d(e,"decodeHtmlByInnerText",(function(){return i}));var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[<>"']/g,(function(t){return e[t]}))},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'"};return t.replace(/&amp;|&lt;|&gt;|&quot;|&#039;/g,(function(t){return e[t]}))},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.createElement("span");return e.innerHTML=t,e.innerText}}])},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(77);function o(t){return r.a.test(t)?"ManufacturerLifecycle":r.b.test(t)?"ManufacturerPartNumber":r.c.test(t)?"SupplierPartNumber":t.replace(/\s/g,"")}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"x",0),o(this,"y",0),o(this,"width",0),o(this,"height",0)}var e,n,i;return e=t,i=[{key:"fromBox",value:function(e,n){var r=new t;return e&&(e.x||0===e.x?(r.x=e.x,r.y=e.y,r.width=e.width,r.height=e.height):(e.top||0===e.top)&&(r.x=e.left,r.y=e.top,r.width=e.right-e.left,r.height=e.bottom-e.top)),n>0&&(r.x-=n,r.y-=n,r.width+=2*n,r.height+=2*n),r}},{key:"fromPoints",value:function(e,n,r,o,i){var a=new t;return e>r?(a.x=r,a.width=e-r):(a.x=e,a.width=r-e),n>o?(a.y=o,a.height=n-o):(a.y=n,a.height=o-n),i>0&&(a.x-=i,a.y-=i,a.width+=2*i,a.height+=2*i),a}}],(n=[{key:"createSvgElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=document.createElementNS("http://www.w3.org/2000/svg","rect");return e.setAttribute("x","".concat(this.x-t)),e.setAttribute("y","".concat(this.y-t)),e.setAttribute("width","".concat(this.width+2*t)),e.setAttribute("height","".concat(this.height+2*t)),e}}])&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){var r=n(89),o=n(57),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(229)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(143),o=n(79),i=n(231);t.exports=function(t){return function(e,n,a){var s,c=r(e),u=o(c.length),l=i(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(174);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(70)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(59);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(265),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){"use strict";n(486);var r=n(123),o=n(142),i=n(58),a=n(175),s=n(70),c=n(409),u=s("species"),l=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=s(t),h=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),p=h?!i((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[d](""),!e})):void 0;if(!h||!p||"replace"===t&&!l||"split"===t&&!f){var m=/./[d],v=n(a,d,""[t],(function(t,e,n,r,o){return e.exec===c?h&&!o?{done:!0,value:m.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),y=v[0],g=v[1];r(String.prototype,t,y),o(RegExp.prototype,d,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},function(t,e,n){var r=n(155),o=n(481),i=n(404),a=n(59),s=n(79),c=n(406),u={},l={};(e=t.exports=function(t,e,n,f,d){var h,p,m,v,y=d?function(){return t}:c(t),g=r(n,f,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(i(y)){for(h=s(t.length);h>b;b++)if((v=e?g(a(p=t[b])[0],p[1]):g(t[b]))===u||v===l)return v}else for(m=y.call(t);!(p=m.next()).done;)if((v=o(m,g,p.value,e))===u||v===l)return v}).BREAK=u,e.RETURN=l},function(t,e,n){var r=n(57).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(57),o=n(11),i=n(123),a=n(254),s=n(189),c=n(328),u=n(253),l=n(60),f=n(58),d=n(324),h=n(249),p=n(395);t.exports=function(t,e,n,m,v,y){var g=r[t],b=g,w=v?"set":"add",_=b&&b.prototype,O={},S=function(t){var e=_[t];i(_,t,"delete"==t||"has"==t?function(t){return!(y&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(y||_.forEach&&!f((function(){(new b).entries().next()})))){var x=new b,C=x[w](y?{}:-0,1)!=x,E=f((function(){x.has(1)})),k=d((function(t){new b(t)})),T=!y&&f((function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)}));k||((b=e((function(e,n){u(e,b,t);var r=p(new g,e,b);return null!=n&&c(n,v,r[w],r),r}))).prototype=_,_.constructor=b),(E||T)&&(S("delete"),S("has"),v&&S("get")),(T||C)&&S(w),y&&_.clear&&delete _.clear}else b=m.getConstructor(e,t,v,w),a(b.prototype,n),s.NEED=!0;return h(b,t),O[t]=b,o(o.G+o.W+o.F*(b!=g),O),y||m.setStrong(b,t,v),b}},function(t,e,n){for(var r,o=n(57),i=n(142),a=n(228),s=a("typed_array"),c=a("view"),u=!(!o.ArrayBuffer||!o.DataView),l=u,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=o[d[f++]])?(i(r.prototype,s,!0),i(r.prototype,c,!0)):l=!1;t.exports={ABV:u,CONSTR:l,TYPED:s,VIEW:c}},function(t,e,n){"use strict";n(242)},function(t,e,n){"use strict";n(243)},function(t,e,n){"use strict";n(244)},function(t,e,n){"use strict";var r=n(256);e.a=r.a},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(170),o=n(14);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f,d=window.__CORE__,h=window.__APP__.createModule;!function(t){t.Click="DownloadButton:Click"}(f||(f={}));t=h({type:"Plugin",description:"DownloadButton",create:function(t){return new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(l,t);var e,n,i,u=c(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,{name:"DownloadButton",displayIcon:Object(r.a)("viewer-download-16","download-v2-16"),comment:"Download: BOM Difference",description:"Download Button for the BomCompareView plugin",order:2,hint:"Download: BOM Difference",disableActiveBtnState:!0,view:{type:"",config:{type:"aside-right",fullHeight:!1}}})).hasLicense=!1,t.logger=d.createLogger("DownloadButton Plugin"),t}return e=l,(n=[{key:"events",get:function(){return Object.values(f)}},{key:"hidden",get:function(){return!this.hasLicense}},{key:"setup",value:function(){var t=o.a.names.bomCompare;return this.hasLicense=o.a.getLicenseDetails(t).isEnabled,Promise.resolve()}},{key:"initView",value:function(){this.hasView=!1}},{key:"click",value:function(){d.bus.emit(f.Click)}},{key:"activate",value:function(){this.click()}},{key:"deactivate",value:function(){this.click()}}])&&a(e.prototype,n),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(t))}});d.addModule(t)},function(t,e,n){"use strict";var r=n(2);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a={inserted:function(t,e){var n=e.value;if("object"===o(n)&&null!==n&&!Array.isArray(n)){var i=null,a=(null==n?void 0:n.id)||"app-trimmed-text-hint",s=function(){var e=r.b.get(a);if(e){var o=function(){return e.setText(n.hint)};e.on&&e.on("open",o),e.open&&e.open(t),e.off&&e.off("open",o)}};t.addEventListener("mouseenter",(function(e){var r=t.cloneNode(!0);r.style.width="auto",r.style.display="inline",r.style.overflow="hidden",r.visibility="hidden",document.body.appendChild(r);var o=r.offsetWidth;r.remove(),o<t.scrollWidth||(n.noDelay?s():i=setTimeout(s,n.delay||1e3))}),!1),t.addEventListener("mouseleave",(function(e){i&&clearTimeout(i);var n=r.b.get(a);if(n){var o=function(){return n.setText(null)};n.on&&n.on("close",o),n.close&&n.close(t),n.off&&n.off("close",o)}}),!1)}}}},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t[t.Front=0]="Front",t[t.Back=1]="Back"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t,e,n){var r;return function(){var o=this,i=arguments,a=function(){r=null,n||t.apply(o,i)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(o,i)}}},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"classes",(function(){return r})),n.d(e,"vueInstanceName",(function(){return o})),n.d(e,"MULTIBOARD_PROJECT_TYPE",(function(){return i})),n.d(e,"isTouch",(function(){return a})),n.d(e,"getBody",(function(){return s})),n.d(e,"isRequiredFunction",(function(){return c})),n.d(e,"radius",(function(){return u})),n.d(e,"componentsRepository",(function(){return l})),n.d(e,"commentLineLimit",(function(){return f})),n.d(e,"SIZES",(function(){return d}));var r={isNotouch:"is-notouch",isTouch:"is-touch",isOpened:"is-opened",isActive:"is-active",isSelected:"is-selected",isError:"is-error"},o="__afsComponentInstance",i="SystemDesign",a="ontouchstart"in window,s=function(){return document.querySelector("body")},c=function(t){return"function"==typeof t},u={tl:"top-left",tr:"top-right",bl:"bottom-left",br:"bottom-right"},l={set:function(t){var e=t.id,n=t.component;window.__afsComponents||(window.__afsComponents={}),window.__afsComponents[e]=n},get:function(t){return window.__afsComponents&&window.__afsComponents[t]},delete:function(t){!window.__afsComponents||window.__afsComponents&&!window.__afsComponents[t]||delete window.__afsComponents[t]}},f=32,d=Object.freeze({SM:"sm",MD:"md",LG:"lg"})}])},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){(function(e){var r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c="object"==n(e)&&e&&e.Object===Object&&e,u="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),f=Object.prototype.toString,d=Math.max,h=Math.min,p=function(){return l.Date.now()};function m(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==n(t)||function(t){return!!t&&"object"==n(t)}(t)&&"[object Symbol]"==f.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var c=i.test(t);return c||a.test(t)?s(t.slice(2),c?2:8):o.test(t)?NaN:+t}t.exports=function(t,e,n){var r,o,i,a,s,c,u=0,l=!1,f=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=r,i=o;return r=o=void 0,u=e,a=t.apply(i,n)}function b(t){return u=t,s=setTimeout(_,e),l?g(t):a}function w(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-u>=i}function _(){var t=p();if(w(t))return O(t);s=setTimeout(_,function(t){var n=e-(t-c);return f?h(n,i-(t-u)):n}(t))}function O(t){return s=void 0,y&&r?g(t):(r=o=void 0,a)}function S(){var t=p(),n=w(t);if(r=arguments,o=this,c=t,n){if(void 0===s)return b(c);if(f)return s=setTimeout(_,e),g(c)}return void 0===s&&(s=setTimeout(_,e)),a}return e=v(e)||0,m(n)&&(l=!!n.leading,i=(f="maxWait"in n)?d(v(n.maxWait)||0,e):i,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=o=s=void 0},S.flush=function(){return void 0===s?a:O(p())},S}}).call(this,r(2))},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i}));var r=n(0),o=n.n(r);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0;return o()(t,e,{leading:n})}n.d(e,"debounce",(function(){return o.a}))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r}])},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";n.r(e),n.d(e,"ScreenshotUploadService",(function(){return s}));var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=function(){function t(e){o()(this,t),this.api=e.apiClient,this.entityGuid=e.entityGuid}return a()(t,[{key:"uploadImage",value:function(t){var e=this;return new Promise((function(n,r){var o=new FileReader;o.onload=function(o){var i=o.target.result;e.upload(i).then((function(e){var o=e.data.Guid;o?n({id:t.id,serverGuid:o,src:i,previewSrc:i}):r({id:t.id})})).catch((function(e){r({id:t.id,error:e})}))},o.readAsDataURL(t.data)}))}},{key:"upload",value:function(t){return this.sendRequest(t)}},{key:"sendRequest",value:function(t){return this.api.post("/v1.0/".concat(this.entityGuid,"/images"),{Image:t},{_withVerification:!0})}}]),t}()}])},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(295),o=n(10),i=n(12);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function h(){}function p(){}function m(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,i){function s(){return new e((function(r,s){!function r(o,i,s,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==a(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}(o,i,r,s)}))}return r=r?r.then(s,s):s()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,u(b,"constructor",m),u(m,"constructor",p),p.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),u(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function c(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=d(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function d(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,t);var e,n,r,a,d,m=p(b);function b(){var t;u(this,b);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return g(v(t=m.call.apply(m,[this].concat(n))),"sourceId",null),g(v(t),"targetId",null),g(v(t),"projectId",null),g(v(t),"pageUrl",null),t}return e=b,(n=[{key:"setup",value:function(t){this.sourceId=Object(o.c)("data-comparison-source-id",null),this.targetId=Object(o.c)("data-comparison-target-id",null),this.projectId=Object(o.c)("data-project-src",null),this.pageUrl=Object(o.c)("data-page-url",null),f(y(b.prototype),"setup",this).call(this,t)}},{key:"loadBomData",value:(a=s().mark((function t(){var e,n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.metadata.Error){t.next=4;break}return n=Array.isArray(this.metadata.Error)?this.metadata.Error[0]:this.metadata.Error,r=null!==(e=n.Message)&&void 0!==e?e:"",i.a.emit("comparison:onDataUpdated",{error:{message:r,code:n.Code}}),t.abrupt("return",Promise.reject({message:"Loading error. ".concat(r),name:n.Code}));case 4:this.dispatch({type:"Run",data:this.getBomData(this.metadata)});case 5:case"end":return t.stop()}}),t,this)})),d=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){c(o,n,r,i,s,"next",t)}function s(t){c(o,n,r,i,s,"throw",t)}i(void 0)}))},function(){return d.apply(this,arguments)})}])&&l(e.prototype,n),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),b}(r.a)},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return le})),function(t){t.SET_COLUMNS="BOM_COMPARE_SET_COLUMNS",t.SET_ITEMS="BOM_COMPARE_SET_ITEMS",t.SET_CURRENCY="BOM_COMPARE_SET_CURRENCY",t.SET_FILTER="BOM_COMPARE_SET_FILTER",t.TAB_ACTIVATED="BOM_COMPARE_TAB_ACTIVATED",t.SET_SEARCH="BOM_COMPARE_SET_SEARCH",t.SET_SORT="BOM_COMPARE_SET_SORT",t.SET_VARIANT="BOM_COMPARE_SET_VARIANT",t.SEARCH_ACTIVATED="BOM_COMPARE_SEARCH_ACTIVATED",t.SET_TITLE="BOM_COMPARE_SET_TITLE",t.TOGGLE_EXPANDER="BOM_COMPARE_TOGGLE_EXPANDER"}(r||(r={}));var o=r;var i,a,s,c,u=new(0,window.__APP__.library.Vuex.Store)({state:{isSearchActive:!1},mutations:(i={},a=o.SEARCH_ACTIVATED,s=function(t,e){t.isSearchActive=e},a in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i)}),l=n(35),f=RegExp(["^(#","%CATALOGID%","%ID%","%PARENTID%","%REVISION_STATE_COLOR%","Fitted","supplier","mpn","url","lifecycleStatus","Price@.*","Quantity@.*","part)$","Diff.*","%CATALOGITEMUNIQUEID%"].join("|")),d=function(t){return!f.test(t)},h=[{id:"Comment",text:"Name",width:"22%",minWidth:100,sorted:!0,visible:!0},{id:"Description",text:"Description",width:"34%",minWidth:100,sorted:!0,visible:!0},{id:"Designator",text:"Designator",width:"22%",minWidth:100,sorted:!0,visible:!0},{id:"Manufacturer Part Number 1",text:"Manufacturer Part Number 1",width:"15%",minWidth:100,sorted:!0,visible:!0},{id:"Price",text:"Price",width:60,minWidth:60,sorted:!0,visible:!0,money:!0},{id:"Quantity",text:"Qty",width:60,minWidth:48,sorted:!0,visible:!0}],p=n(212),m=n(76);function v(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=l.COMPONENT_FILTER_ALL_SELECTED&~(1<<l.COMPONENT_FILTER.NONE),O={namespaced:!0,state:function(){return{search:"",searchTrim:"",variant:"",sortBy:null,items:[],columns:[],currency:null,isActive:!1,expanded:[],selectedItemId:null,diffFilter:_,tabTitle:"",projectName:""}},getters:{csvFileName:function(t){return[t.projectName,t.tabTitle,t.variant].map((function(t){return t.replace(/[/|\\:*?"<>]/g,"_")})).join("_")+".csv"},hasVariantItems:function(t){return function(e){return e===t.variant&&t.items.length>0}},trimmedSearch:function(t){return t.searchTrim},visibleColumns:function(t){return t.columns.filter((function(t){return t.visible}))},sortedItems:function(t){return null!==t.sortBy?t.items.sort(Object(p.a)(t.sortBy.col,t.sortBy.isAsc)):t.items},body:function(t,e){return e.sortedItems.reduce((function(n,r){var o,i,a,s,c;if(null!==t.diffFilter&&(null===r.diff||0==(t.diffFilter&1<<r.diff)))return n;var u=r.parameters;return u.id=u["%CATALOGID%"].firstValue(),u.isFocused=u["%ID%"].has(t.selectedItemId),u.alternateParts=r.alternateParts&&Object.values(r.alternateParts).map((function(e,n){var r=e.parameters;return b(b({},r),{},{id:"".concat(u.id,".").concat(n),isFocused:r["%ID%"].has(t.selectedItemId)})})),t.searchTrim.length>0&&!e.visibleColumns.some((function(e){var n,r,o;return null===(n=u[e.id])||void 0===n||null===(r=n.toString())||void 0===r||null===(o=r.toLowerCase())||void 0===o?void 0:o.includes(t.searchTrim.toLowerCase())}))||(n.rows.push(u),n.totalNames++,n.totalQuantity+=Number(u.Quantity),n.totalPrice+=Number(null!==(o=u.Price)&&void 0!==o?o:0),n.pricePerBoard+=(Number(null===(i=r.manufacturers)||void 0===i||null===(a=i[0])||void 0===a||null===(s=a.suppliers)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.unitPrice)||0)*Number(u.Quantity)),n}),{rows:[],totalNames:0,totalQuantity:0,totalPrice:0,pricePerBoard:0})},items:function(t,e){return e.body.rows},totalNames:function(t,e){return e.body.totalNames},totalPrice:function(t,e){return e.body.totalPrice},pricePerBoard:function(t,e){return e.body.pricePerBoard},totalQuantity:function(t,e){return Math.ceil(e.body.totalQuantity)}},mutations:(w(c={},o.SET_TITLE,(function(t,e){t.tabTitle=e.title,t.projectName=e.projectName})),w(c,o.SET_VARIANT,(function(t,e){t.variant=e})),w(c,o.SET_FILTER,(function(t,e){t.diffFilter=e})),w(c,o.SET_ITEMS,(function(t,e){t.items=e,t.expanded=[]})),w(c,o.TAB_ACTIVATED,(function(t,e){t.isActive=e})),w(c,o.SET_SORT,(function(t,e){var n,r;t.sortBy={col:e.id,isAsc:e.id===(null===(n=t.sortBy)||void 0===n?void 0:n.col)&&!(null!==(r=t.sortBy)&&void 0!==r&&r.isAsc)}})),w(c,o.SET_SEARCH,(function(t,e){t.search=e,t.searchTrim=e.trim().toLowerCase()})),w(c,o.SET_CURRENCY,(function(t,e){t.currency=e})),w(c,o.SET_COLUMNS,(function(t,e){var n,r=e.items,o=e.columnAliases,i=e.visibleColumns;e.isDiffMode||(t.diffFilter=null);var a=r.reduce((function(t,e){return Object.assign(t,Object.keys(e.parameters))}),{}),s=(null==i||null===(n=i.find((function(t){return"Base"===t.viewMode})))||void 0===n?void 0:n.columns.filter((function(t){return d(t.name)})).map((function(t){return Object(m.c)(t,!0)})))||h;t.columns=Object.values(a).sort((function(t,e){return t.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})})).reduce((function(t,e){return d(e)&&function(t){return function(e){return!t.some((function(t){return t.id.toLowerCase()===e.toLowerCase()}))}}(s)(e)?t.concat(Object(m.c)({name:e,width:120})):t}),[m.b].concat(v(s))).map((function(t){return b(b({},t),{},{text:o[t.id]||t.text})}))})),w(c,o.TOGGLE_EXPANDER,(function(t,e){var n=t.expanded.indexOf(e);n>=0?t.expanded.splice(n,1):t.expanded.push(e)})),c)},S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fbom"},[t.pluginName===t.TABLE_TYPE.DIFF?e("BaseContent",t._b({directives:[{name:"show",rawName:"v-show",value:t.isActive(t.TABLE_TYPE.DIFF),expression:"isActive(TABLE_TYPE.DIFF)"}],ref:t.pluginName,staticClass:"fbom__content",on:{sort:function(e){return t.sort(t.TABLE_TYPE.DIFF,e)},search:function(e){return t.search(t.TABLE_TYPE.DIFF,e)},toggle:function(e){return t.toggleExpander(t.TABLE_TYPE.DIFF,e)}}},"BaseContent",t.createContent(t.TABLE_TYPE.DIFF),!1)):t._e(),t._v(" "),t.pluginName===t.TABLE_TYPE.LEFT?e("BaseContent",t._b({directives:[{name:"show",rawName:"v-show",value:t.isActive(t.TABLE_TYPE.LEFT),expression:"isActive(TABLE_TYPE.LEFT)"}],ref:t.pluginName,staticClass:"fbom__content",on:{sort:function(e){return t.sort(t.TABLE_TYPE.LEFT,e)},search:function(e){return t.search(t.TABLE_TYPE.LEFT,e)},toggle:function(e){return t.toggleExpander(t.TABLE_TYPE.LEFT,e)}}},"BaseContent",t.createContent(t.TABLE_TYPE.LEFT),!1)):t._e(),t._v(" "),t.pluginName===t.TABLE_TYPE.RIGHT?e("BaseContent",t._b({directives:[{name:"show",rawName:"v-show",value:t.isActive(t.TABLE_TYPE.RIGHT),expression:"isActive(TABLE_TYPE.RIGHT)"}],ref:t.pluginName,staticClass:"fbom__content",on:{sort:function(e){return t.sort(t.TABLE_TYPE.RIGHT,e)},search:function(e){return t.search(t.TABLE_TYPE.RIGHT,e)},toggle:function(e){return t.toggleExpander(t.TABLE_TYPE.RIGHT,e)}}},"BaseContent",t.createContent(t.TABLE_TYPE.RIGHT),!1)):t._e(),t._v(" "),t.isEmpty?e("NoData",{staticClass:"fbom__empty"}):t._e()],1)};S._withStripped=!0;var x=n(381),C=n(336),E=n(172),k=n(119),T=n(72);function P(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var A=function(t,e,n){var r=e.filter((function(t){return"id"!==t.id})),o=[].concat(P(r.map((function(t){return'"'.concat(Object(E.a)(t.text),'"')}),"")),['"Status"']).join(","),i=t.reduce((function(t,e){var n=r.map((function(t){return e[t.id]?'"'.concat(Object(E.a)(e[t.id].toString()),'"'):""}));return n.push('"'.concat(T.b[Number(e.Diff)],'"')),t+n.join(",")+"\n"}),o+"\n");Object(k.saveAs)(new Blob([i],{type:"text/csv;charset=utf-8"}),n)},M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("Search",{ref:"search",attrs:{"is-active":t.isSearchActive,search:t.searchText},on:{search:function(e){return t.$emit("search",e)}}}),t._v(" "),e("Table",{directives:[{name:"show",rawName:"v-show",value:t.rows.length,expression:"rows.length"}],ref:"table",staticClass:"content__table bomcmp",class:{"content__table_with-banner":t.isBannerActive,"content__table_with-search":t.isSearchActive},attrs:{"trimmed-search":t.trimmedSearch,"table-type":t.tableType,"is-compare":t.isCompare,columns:t.columns,rows:t.rows,expanded:t.expanded,"sort-by":t.sortBy,currency:t.currency},on:{sort:function(e){return t.$emit("sort",e)}},scopedSlots:t._u([{key:"body__num",fn:function(n){var r=n.data;return[e("div",{staticClass:"cell-container"},[r.row.alternateParts?e("AlternatePartsExpander",{attrs:{expanded:t.expanded.includes(r.row.id)},on:{click:function(e){return t.$emit("toggle",r.row.id)}}}):t._e(),t._v(" "),r.parentRow?t._e():e("div",{staticClass:"content__num"},[t._v("\n          "+t._s(r.index+1)+"\n        ")])],1)]}},{key:"body__name",fn:function(n){var r=n.data;return[e("div",{staticClass:"cell-container"},[e("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.trimmedSearch,value:r.row.name},expression:"{\n            query: trimmedSearch,\n            value: data.row.name\n          }"}],staticClass:"content__clip",attrs:{title:r.row.name}})])]}},{key:"body__description",fn:function(n){var r=n.data;return[e("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.trimmedSearch,value:r.row.description},expression:"{\n          query: trimmedSearch,\n          value: data.row.description\n        }"}],staticClass:"content__clip",attrs:{title:r.row.description}})]}},{key:"body__part",fn:function(n){var r=n.data;return[e("ValuePartNumber",{attrs:{search:t.trimmedSearch,value:r.row.part&&r.row.part.toString(),url:r.row.part&&r.row.part.url,"status-name":r.row.part&&r.row.part.statusName}})]}},{key:"body__Designator",fn:function(n){var r=n.data;return[e("div",{staticClass:"content__clip designator-link-container"},[[e("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.trimmedSearch,value:r.row.Designator.toString()},expression:"{\n              query: trimmedSearch,\n              value: data.row.Designator.toString()\n            }"}],staticClass:"content__clip",attrs:{title:r.row.Designator.toString()}})]],2)]}},{key:"body__SupplierPartNumber",fn:function(n){var r=n.data;return[e("ValuePartNumber",{staticClass:"cell-container",attrs:{search:t.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),url:r.row[r.col.id]&&r.row[r.col.id].url,"status-name":r.row[r.col.id]&&r.row[r.col.id].statusName}})]}},{key:"body__ManufacturerPartNumber",fn:function(n){var r=n.data;return[e("ValuePartNumber",{staticClass:"cell-container",attrs:{search:t.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),url:r.row[r.col.id]&&r.row[r.col.id].url,"status-name":r.row[r.col.id]&&r.row[r.col.id].statusName}})]}},{key:"body__ManufacturerLifecycle",fn:function(n){var r=n.data;return[e("ValueColoredText",{staticClass:"content__clip",attrs:{search:t.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),color:r.row[r.col.id]&&r.row[r.col.id].color,col:{data:r}}})]}},{key:"body__RevisionStatus",fn:function(n){var r=n.data;return[e("ValueColoredText",{staticClass:"content__clip",attrs:{search:t.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),color:r.row[r.col.id]&&r.row[r.col.id].color,col:{data:r}}})]}},{key:"body__RevisionState",fn:function(n){var r=n.data;return[e("ValueRevisionState",{staticClass:"content__clip",attrs:{search:t.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),color:r.row[r.col.id]&&r.row[r.col.id].color}})]}},{key:"body__menu",fn:function(n){var r=n.data;return[e("div",{staticClass:"status-icon",attrs:{title:t.getStatusHint(r)}},[""!==t.getStatus(r)&&"Unknown"!==t.getStatus(r)?e("StatusIcon",{attrs:{status:t.getStatus(r)}}):t._e()],1)]}},{key:"footer",fn:function(){return[e("FooterText",{attrs:{currency:t.currency,"total-names":t.totalNames,"total-price":t.totalPrice,"price-per-board":t.pricePerBoard,"total-quantity":t.totalQuantity}})]},proxy:!0}])}),t._v(" "),t.rows.length?t._e():e("div",{staticClass:"content__not-found"},[e("div",{staticClass:"content__not-found-container"},[t.trimmedSearch.length?e("NotFound"):e("NoData",{attrs:{"diff-filter":t.diffFilter}})],1)])],1)};M._withStripped=!0;var L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fbom-root"},[e("div",{staticClass:"fbom-overflow-container"},[e("table",{ref:"table",staticClass:"fbom-table bomcmp"},[e("thead",{ref:"header",staticClass:"fbom-table__header",attrs:{"data-screenshot":"visible"}},[e("tr",{staticClass:"fbom-table__row",attrs:{"data-screenshot":"visible"}},[t._l(t.computedColumns.list,(function(n){return e("TableColumnHeader",{directives:[{name:"show",rawName:"v-show",value:n.visible,expression:"col.visible"}],key:n.id,ref:"headerColumns",refInFor:!0,staticClass:"fbom-table__col",attrs:{id:n.id,text:n.data.text,sorted:n.data.sorted,"sort-by":t.sortBy,resizer:n.prev>0,resizing:!!t.resizeColumn,"min-width":n.data.minWidth,"base-width":n.baseWidth},on:{sort:function(e){return t.onSorting(n)},resize:function(e){return t.onResizeStart(n.prev)}}})})),t._v(" "),e("TableColumnHeader",{staticClass:"fbom-table__col",attrs:{id:"last",resizer:""},on:{resize:function(e){return t.onResizeStart(t.computedColumns.last)}}}),t._v(" "),e("th",{staticClass:"fbom-table__col fbom-table__col_more"},[e("button",{directives:[{name:"dropdown",rawName:"v-dropdown:[dropdownMenuId]",arg:t.dropdownMenuId}],staticClass:"fbom-table__col-content column-more",attrs:{type:"button",title:"Column Settings"}},[e("Icon",{attrs:{name:"slider",transparent:!0}})],1),t._v(" "),e("ColumnsMenu",{attrs:{"menu-id":t.dropdownMenuId,columns:t.computedColumns.menu}})],1)],2)]),t._v(" "),e("tbody",{ref:"body",staticClass:"fbom-table__body",on:{click:function(e){return t.$emit("body:click",e)}}},[t._l(t.rows,(function(n,r){return[e("tr",{key:n.ViewKey,staticClass:"fbom-table__row",class:{"is-focused":n.isFocused},on:{click:function(e){return t.$emit("select",{row:n})}}},[t._l(t.computedColumns.list,(function(o){return e("td",{directives:[{name:"show",rawName:"v-show",value:o.visible,expression:"col.visible"}],key:o.id,ref:"rowColumn",refInFor:!0,staticClass:"fbom-table__col"},[e("div",{staticClass:"fbom-table__col-data",style:t.isCompare?{color:t.getDiffColor(o,n)}:void 0},[t._t(o.slotBody,(function(){return[e("div",{staticClass:"fbom-table__col-data-default"},[o.data.money?[n[o.id]&&""!==n[o.id].toString()?e("Money",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.trimmedSearch},expression:"{\n                          query: trimmedSearch\n                        }"}],key:"".concat(t.trimmedSearch,"-").concat(n[o.id].toString()),attrs:{code:t.currency,value:n[o.id].toString()}}):t._e()]:[e("span",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.trimmedSearch,value:t.formattedColumn(n,o.id)},expression:"{\n                          query: trimmedSearch,\n                          value: formattedColumn(row, col.id)\n                        }"}]},[t._v(t._s(t.formattedColumn(n,o.id)))])]],2)]}),{data:{index:r,row:n,col:o}})],2)])})),t._v(" "),e("td",{staticClass:"fbom-table__col"}),t._v(" "),e("td",{staticClass:"fbom-table__col column-more"},[e("div",{staticClass:"fbom-table__col-data"},[t._t("body__menu",null,{data:n})],2)])],2),t._v(" "),n.alternateParts?t._l(n.alternateParts,(function(r){return e("tr",{directives:[{name:"show",rawName:"v-show",value:t.expanded.includes(n.id),expression:"expanded.includes(row.id)"}],key:r.id,staticClass:"fbom-table__row",class:{"is-focused":r.isFocused},attrs:{id:"row-".concat(r.id)},on:{click:function(e){return t.$emit("select",{row:r,parentRow:n})}}},[t._l(t.computedColumns.list,(function(o){return e("td",{directives:[{name:"show",rawName:"v-show",value:o.visible,expression:"col.visible"}],key:o.id,ref:"rowColumn",refInFor:!0,staticClass:"fbom-table__col"},["num"!==o.id?[e("div",{staticClass:"fbom-table__col-data"},[t._t(o.slotBody,(function(){return[e("div",{staticClass:"fbom-table__col-data-default"},[o.data.money?[r[o.id]&&""!==r[o.id].toString()?e("Money",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.trimmedSearch},expression:"{\n                              query: trimmedSearch\n                            }"}],key:"".concat(t.trimmedSearch,"-").concat(r[o.id].toString()),attrs:{code:t.currency,value:r[o.id].toString()}}):t._e()]:[e("span",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.trimmedSearch,value:t.formattedColumn(r,o.id)},expression:"{\n                              query: trimmedSearch,\n                              value: formattedColumn(alternateRow, col.id)\n                            }"}]},[t._v(t._s(t.formattedColumn(r,o.id)))])]],2)]}),{data:{row:r,parentRow:n,col:o}})],2)]:t._e()],2)})),t._v(" "),e("td",{staticClass:"fbom-table__col"}),t._v(" "),e("td",{staticClass:"fbom-table__col column-more"},[e("div",{staticClass:"fbom-table__col-data"},[t._t("body__menu",null,{data:r})],2)])],2)})):t._e()]}))],2)])]),t._v(" "),e("div",{ref:"footer",staticClass:"fbom-footer-row"},[e("div",{staticClass:"fbom-footer-row__content"},[t._t("footer")],2)])])};L._withStripped=!0;var I=n(4),D=n(152),R=n(48),N=n.n(R),B=n(16),F=n.n(B),U=n(318),$=n(300),G=n(314),V=n(27),z=n(99),H=["var(--color-control-secondary)","var(--color-danger_secondary)","var(--comment-resolved)","#FFD60A"],W={name:"BOMCompareTable",components:{TableColumnHeader:G.a,Icon:I.a,ColumnsMenu:$.a,Money:D.a},directives:{dropdown:N.a,hint:F.a,highlight:z.a},props:{tableType:{type:String,default:l.TABLE_TYPE.FBOM},isCompare:{type:Boolean,default:!1},trimmedSearch:{type:String,default:""},sortBy:{type:Object,default:function(){return{}},validator:function(t){return Object(V.hasOwnProperty)(t,"col")}},columns:{type:Array,default:function(){return[]},validator:function(t){return!t.length||t.every((function(t){var e=!Object(V.hasOwnProperty)(t,"width")||isFinite(+t.width)||Object(V.percentage)({exact:!0}).test(t.width),n=!Object(V.hasOwnProperty)(t,"minWidth")||isFinite(+t.minWidth);return Object(V.hasOwnProperty)(t,"id")&&e&&n}))}},rows:{type:Array,default:function(){return[]},validator:function(t){return!t.length||t.every((function(t){return Object(V.hasOwnProperty)(t,"id")}))}},expanded:{type:Array,default:function(){return[]}},contextMenuWidth:{type:Number,default:200},maxHeightMenu:{type:Number,default:395},currency:{type:String,default:"USD"}},data:function(){return{resizeColumn:null}},computed:{dropdownMenuId:function(){return"menu-"+this.tableType},colorizeCell:function(t){return this.isCompare?{color:H[t]}:{}},computedColumns:function(){return this.columns.reduce((function(t,e,n){return t.list.push({id:null==e?void 0:e.id,prev:t.last,visible:e.visible,slotBody:"body__".concat(Object(U.a)(e.id)),data:e,baseWidth:Object(V.percentage)({exact:!0}).test(e.width)?e.width:"".concat(e.width,"px")}),e.visible&&(t.last=n),n&&t.menu.push(e),t}),{list:[],menu:[],last:0})}},mounted:function(){var t=this;setTimeout((function(){t.initializeTableWidth()}),0)},methods:{getDiffColor:function(t,e){return void 0===e.DiffUpdates?H[e.Diff]:e.DiffTableSlots.indexOf(t.slotBody)>=0?H[T.a.changed]:H[T.a.none]},formattedColumn:function(t,e){return void 0===t[e]?"":t[e].toString()},getHeaderColumns:function(){return Array.isArray(this.$refs.headerColumns)?this.$refs.headerColumns:[this.$refs.headerColumns]},initializeTableWidth:function(){this.$refs.table&&(this.$refs.table.style.width="fit-content",this.getHeaderColumns().forEach((function(t){return t.initWidth()})))},onResizeStart:function(t){this.resizeColumn=this.getHeaderColumns()[t],this.resizeColumn&&(document.addEventListener("mousemove",this.onResizing),document.addEventListener("mouseup",this.onResizeEnd))},onResizing:function(t){this.resizeColumn&&this.resizeColumn.resize(t.pageX)},onResizeEnd:function(){this.resizeColumn=null,document.removeEventListener("mousemove",this.onResizing),document.removeEventListener("mouseup",this.onResizeEnd)},onSorting:function(t){this.$emit("sort",t)}}},Y=(n(499),n(0)),q=Object(Y.a)(W,L,[],!1,null,"1720287e",null).exports,X=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"fbom-search"},[e("AfsSearch",{ref:"afs-search",attrs:{icon:"search-thin-16"},on:{keydown:function(t){t.stopPropagation()},keyup:function(t){t.stopPropagation()}},model:{value:t.localValue,callback:function(e){t.localValue=e},expression:"localValue"}})],1)};X._withStripped=!0;var Z={name:"Search",components:{AfsSearch:n(75).a},props:{isActive:{type:Boolean,default:!1,required:!0},search:{type:String,default:"",required:!0}},data:function(t){return{localValue:t.search}},watch:{search:function(t){this.localValue=t},localValue:function(t){this.$emit("search",t)}}},K=(n(500),Object(Y.a)(Z,X,[],!1,null,null,null).exports),J=function(){return(0,this._self._c)("Icon",{class:["status-icon",this.iconClassName],attrs:{name:this.iconName}})};function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}J._withStripped=!0;var tt,et=["Fatal error","Error","Warning","Clear"].concat(function(t){if(Array.isArray(t))return Q(t)}(tt=T.b)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(tt)||function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(tt)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),nt={name:"StatusIcon",components:{Icon:I.a},props:{status:{type:String,required:!0,validator:function(t){return et.includes(t)}}},computed:{iconClassName:function(){switch(this.status){case"Fatal error":return"status-icon_fatal-error";case"Error":return"status-icon_error";case"Warning":return"status-icon_warning";case"Removed":return"status-icon_removed";case"Added":return"status-icon_added";case"Modified":return"status-icon_modified";case"Clear":default:return"status-icon_ok"}},iconName:function(){switch(this.status){case"Fatal error":case"Error":return"exclamation";case"Warning":return"exclamation-circle";case"Removed":return"deleted";case"Added":return"added";case"Modified":return"modified";case"Clear":default:return"checkmark-circle"}}}},rt=(n(501),Object(Y.a)(nt,J,[],!1,null,"300f817c",null).exports),ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fbom-footer"},[e("div",{staticClass:"fbom-footer__item-list"},[e("dl",{staticClass:"fbom-footer__item fbox-footer-definitions"},[e("dt",{staticClass:"fbox-footer-definitions__title"},[t._v("Total")]),t._v(" "),e("dd",{staticClass:"fbox-footer-definitions__details"},[t._v("\n        "+t._s(t.totalNames)+" lines, "+t._s(t.totalQuantity)+" components\n      ")])]),t._v(" "),t.totalPrice?e("dl",{staticClass:"fbom-footer__item fbox-footer-definitions"},[e("dt",{staticClass:"fbox-footer-definitions__title"},[t._v("Price")]),t._v(" "),e("dd",{staticClass:"fbox-footer-definitions__details"},[e("Money",{attrs:{code:t.currency,value:t.totalPrice}})],1),t._v(" "),e("dd",{staticClass:"fbox-footer-definitions__details"},[e("Icon",{directives:[{name:"hint",rawName:"v-hint:[`${componentId}-totals`]",arg:"".concat(t.componentId,"-totals")}],staticClass:"fbox-footer-icon",attrs:{name:"info-2-16"}}),t._v(" "),e("ContextMenu",{attrs:{id:"".concat(t.componentId,"-totals"),type:"hint",modifiers:{y:"bottom",x:"start"}}},[t._v("\n          Price per board: "),e("Money",{attrs:{code:t.currency,value:t.pricePerBoard}}),t._v(" "),e("br"),t._v("\n          Order price: "),e("Money",{attrs:{code:t.currency,value:t.totalPrice}})],1)],1)]):t._e()])])};ot._withStripped=!0;var it=n(8),at=n(7),st=n.n(at),ct={directives:{hint:F.a},components:{Icon:I.a,ContextMenu:it.a,Money:D.a},props:{currency:{type:String,default:""},totalNames:{type:Number,default:0},totalPrice:{type:Number,default:0},pricePerBoard:{type:Number,default:0},totalQuantity:{type:Number,default:0}},computed:{componentId:function(){return st()()}}},ut=(n(502),Object(Y.a)(ct,ot,[],!1,null,"7d6c5e51",null).exports),lt=function(){var t=this._self._c;return t("div",{staticClass:"bom-compare-no-results"},[t("Icon",{staticClass:"bom-compare-no-results__icon",attrs:{name:this.pageContent.icon}}),this._v(" "),t("AfsText",{staticClass:"bom-compare-no-results__title",attrs:{type:"large title"}},[this._v(this._s(this.pageContent.text))])],1)};lt._withStripped=!0;var ft=n(5),dt={id:null,icon:"compare-design-16",text:"No BOM differences detected"},ht={id:l.COMPONENT_FILTER.NONE,icon:"compare-design-16",text:"No differences detected"},pt=[{id:l.COMPONENT_FILTER.REMOVED,icon:"deleted",text:"No removed items detected"},{id:l.COMPONENT_FILTER.ADDED,icon:"added",text:"No added items detected"},{id:l.COMPONENT_FILTER.MODIFIED,icon:"modified",text:"No modified items detected"}],mt={name:"NoData",components:{AfsText:ft.a,Icon:I.a},props:{diffFilter:{type:Number,default:null}},computed:{pageContent:function(){var t=this;if(null===this.diffFilter)return dt;var e=pt.find((function(e){return(t.diffFilter&1<<e.id)>0}));return!!e&&this.diffFilter===1<<e.id?e:ht}}},vt=(n(503),Object(Y.a)(mt,lt,[],!1,null,null,null).exports),yt=n(306),gt=n(307),bt=n(308),wt=n(309),_t=n(310),Ot=window.__APP__.utils.directives.highlight,St={name:"BomCompareBaseContent",components:{ValuePartNumber:yt.a,ValueColoredText:gt.a,ValueRevisionState:bt.a,Table:q,StatusIcon:rt,FooterText:ut,NotFound:wt.a,NoData:vt,Search:K,AlternatePartsExpander:_t.a},directives:{highlight:Ot},props:{diffFilter:{type:Number,default:null},tableType:{type:String,default:l.TABLE_TYPE.LEFT},sortBy:{type:String,default:""},searchText:{type:String,default:""},columns:{type:Array,default:function(){return[]}},trimmedSearch:{type:String,default:""},rows:{type:Array,default:function(){return[]}},expanded:{type:Array,default:function(){return[]}},currency:{type:Number,default:0},totalPrice:{type:Number,default:0},totalQuantity:{type:Number,default:0},totalNames:{type:Number,default:0},pricePerBoard:{type:Number,default:0},setColVisible:{type:Function,default:function(){return 0}},isSearchActive:{type:Boolean,default:!1}},data:function(){return{isBannerActive:!1}},computed:{isCompare:function(){return this.tableType===l.TABLE_TYPE.DIFF}},methods:{getStatus:function(t){var e;return this.isCompare?t.Diff&&T.b[t.Diff]||"":(null===(e=t["BOM Status"])||void 0===e?void 0:e.toString())||""},getColumnTextById:function(t){var e,n;return null!==(e=null===(n=this.columns.find((function(e){return e.id===t})))||void 0===n?void 0:n.text)&&void 0!==e?e:t},getStatusHint:function(t){var e=this;if(!this.isCompare){var n,r=null===(n=t["BOM Status Details"])||void 0===n?void 0:n.toString();return r?r.replace(/ *, */g,"\n"):""}if(!t.Diff)return"";var o=T.b[t.Diff];return Array.isArray(t.DiffUpdates)&&(o+=":\n"+t.DiffUpdates.slice(0,4).map((function(t){return e.getColumnTextById(t.property)})).join("\n")+(t.DiffUpdates.length>4?"\n...":"")),o}}},xt=(n(504),Object(Y.a)(St,M,[],!1,null,"25347d9c",null).exports),Ct=n(12),Et=window.__APP__.utils.debounce,kt=window.__CORE__,Tt={name:"BOMCompareTab",components:{BaseContent:xt,NoData:vt},data:function(){return{TABLE_TYPE:l.TABLE_TYPE,pluginName:l.TABLE_TYPE.LEFT}},computed:{isEmpty:function(){var t,e,n,r=[l.TABLE_TYPE.LEFT,l.TABLE_TYPE.RIGHT,l.TABLE_TYPE.DIFF];return!(Boolean(null===(t=this.$store.state[r[0]])||void 0===t?void 0:t.isActive)||Boolean(null===(e=this.$store.state[r[1]])||void 0===e?void 0:e.isActive)||Boolean(null===(n=this.$store.state[r[2]])||void 0===n?void 0:n.isActive))}},created:function(){var t=this,e=this.$root.$el.parentElement.dataset.view;this.pluginName=e,Ct.a.on("bomcompare:filterChanged",(function(e){var n=e.data;t.$store.commit(l.TABLE_TYPE.DIFF+"/"+o.SET_FILTER,n.filterBy)})),Ct.a.on("bomcompare:changeVariant",(function(){var t=x.componentsRepository.get("menu-"+e);t&&t.close()}))},mounted:function(){var t=this;kt.bus.on(C.a.Click,(function(){t.isActive(t.pluginName)&&t.downloadCsv(t.pluginName)})),kt.bus.on("SearchButton:activate",(function(){t.$store.commit(o.SEARCH_ACTIVATED,!0)})),kt.bus.on("SearchButton:deactivate",(function(){var e,n;t.$store.commit(o.SEARCH_ACTIVATED,!1),t.$store.commit(t.pluginName+"/"+o.SET_SEARCH,"");var r=null===(e=t.$refs[t.pluginName])||void 0===e||null===(n=e.$refs.search)||void 0===n?void 0:n.$refs["afs-search"];r&&r.handleClearSearch()}))},methods:{createContent:function(t){var e=this.$store,n=t===l.TABLE_TYPE.DIFF?l.TABLE_TYPE.RIGHT:t;return{diffFilter:e.state[t].diffFilter,tableType:t,rows:e.getters[t+"/items"],columns:e.state[t].columns,expanded:e.state[t].expanded,sortBy:e.state[t].sortBy,trimmedSearch:e.getters[t+"/trimmedSearch"],currency:e.state[n].currency,totalPrice:e.getters[n+"/totalPrice"],totalQuantity:e.getters[n+"/totalQuantity"],totalNames:e.getters[t+"/totalNames"],pricePerBoard:e.getters[n+"/pricePerBoard"],isSearchActive:e.state.isSearchActive}},isActive:function(t){var e;return Boolean(null===(e=this.$store.state[t])||void 0===e?void 0:e.isActive)},sort:function(t,e){var n=this;Et("sort",(function(){return n.$store.commit(t+"/"+o.SET_SORT,e)}),20)},search:function(t,e){var n=this;Et("search",(function(){return n.$store.commit(t+"/"+o.SET_SEARCH,e)}),1e3,{trailing:!0})},toggleExpander:function(t,e){var n=this;Et("expander",(function(){return n.$store.commit(t+"/"+o.TOGGLE_EXPANDER,e)}),20)},downloadCsv:function(t){var e=this.$store.getters[t+"/body"].rows,n=this.$store.getters[t+"/visibleColumns"],r=this.$store.getters[t+"/csvFileName"];(t===l.TABLE_TYPE.DIFF?A:E.c)(e,n,r)}}},Pt=(n(505),n(506),Object(Y.a)(Tt,S,[],!1,null,"74e2b1a2",null).exports),jt=window.__APP__,At=n(61),Mt=n(213),Lt=n(214),It=n(164),Dt=n(215),Rt=n(296),Nt=n(66),Bt=n(77);function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $t(){return($t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Gt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Gt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}function Vt(t,e){return(Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yt(t);if(e){var o=Yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ht(this,n)}}function Ht(t,e){if(e&&("object"===Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wt(t)}function Wt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xt=window.__CORE__,Zt=["Price","Quantity","ViewKey","Diff","DiffUpdates","DiffTableSlots"],Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vt(t,e)}(i,t);var e,n,r,o=zt(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),qt(Wt(n=o.call(this,e,"BOMCompareViewManager",t)),"bus",void 0),qt(Wt(n),"bomData",void 0),qt(Wt(n),"activeVariant",l.NO_VARIATIONS),qt(Wt(n),"diffMode",void 0),n.diffMode=t===l.TABLE_TYPE.DIFF,n}return e=i,(n=[{key:"initHandlers",value:function(){var t=this;this.$on("setup",(function(e){return $t(Yt(i.prototype),"setup",t).call(t,e)})),this.$on("activate",(function(e){return $t(Yt(i.prototype),"activate",t).call(t)})),this.$on("deactivate",(function(e){return $t(Yt(i.prototype),"deactivate",t).call(t)})),Ct.a.on("bomcompare:changeVariant",(function(e){return t.updateVariant(e)}))}},{key:"updateVariant",value:function(t){var e=t.data.variant,n=this.pluginName;t.data.plugin===n&&e!==this.activeVariant&&(this.activeVariant=e,this.toActive(!0))}},{key:"$on",value:function(t,e){var n=t.indexOf(":")<0?"".concat(this.pluginName,":").concat(t):t;Xt.bus.on(n,e)}},{key:"events",get:function(){var t=this;return["setup","activate","deactivate","select","checkSelection","didStateChange","loaded"].map((function(e){return"".concat(t.pluginName,":").concat(e)}))}},{key:"emitDidStateChange",value:function(t,e){this.bus.emit("".concat(this.pluginName,":didStateChange"),{state:t,message:e})}},{key:"toActive",value:function(){var t,e,n,r=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dispatch({type:"Activate",transformData:function(){return r.transformData(r.bomData)},currency:null===(t=this.bomData)||void 0===t?void 0:t.currency,columnAliases:null===(e=this.bomData)||void 0===e?void 0:e.columnAliases,visibleColumns:null===(n=this.bomData)||void 0===n?void 0:n.visibleColumns,diffMode:o,variant:this.activeVariant})}},{key:"prefetchData",value:function(){var t=this;this.dispatch({type:"Ready"}),this.engine.load(!0).catch((function(){t.dispatch({type:"Error"})}))}},{key:"transformData",value:function(t){var e=this,n=this.getVariant();t.items.forEach((function(t){var n,r=null===(n=t.diffVariant)||void 0===n?void 0:n.get(e.activeVariant);r?(t.diff=r.Action,t.diffUpdates=r.Updates,t.diffTableSlots=r.TableSlots):t.diff=null}));var r=t.items.reduce((function(t,r){if(r.parentId)t.alternateParts.push(r);else if(!e.shouldSkipRow(r,n)){var o=r.parameters["%CATALOGID%"]+r.diff,i=r.id+r.diff,a=t.viewRows[o];if(a&&a.diff===r.diff)t.viewItems[i]=e.mergeParameters(a,r,n);else{var s=e.asViewItem(r,n);t.viewItems[i]=s,t.viewRows[o]=s}}return t}),{alternateParts:[],viewItems:{},viewRows:{}}),o=r.alternateParts,i=r.viewItems,a=r.viewRows;return o.forEach((function(t){var r=i[t.parentId+null]||i[t.parentId+T.a.added]||i[t.parentId+T.a.removed]||i[t.parentId+T.a.changed];if(r){r.alternateParts||(r.alternateParts={});var o=t.parameters["%CATALOGID%"],a=r.alternateParts[o];a?e.mergeParameters(a,t,n):r.alternateParts[o]=e.asViewItem(t,n)}})),Object.values(a)}},{key:"asViewItem",value:function(t,e){for(var n,r=Object.assign({},t.parameters),o=0,i=Object.keys(r);o<i.length;o++)n=i[o],Zt.indexOf(n)<0&&(r[n]=this.valuePresenterFactory(n,t));return r.Price=this.valuePresenterFactory(this.createVariantKey("Price",e),t),r.Quantity=parseInt(this.getVariantData(t,"Quantity",e)),r.Description=t.description,r.Diff=t.diff,r.DiffUpdates=t.diffUpdates,r.DiffTableSlots=t.diffTableSlots,r.part=this.partNumber(t.manufacturers[0]),r.ViewKey=t.id+":"+t.diff,Object.assign({},t,{parameters:r})}},{key:"partNumber",value:function(t){var e=new Nt.a;return t?(e.push("".concat(t.name," ").concat(t.mpn)),this.diffMode?e:e.setUrl(t.manufacturerUrl).setStatusName(t.lifecycleStatus)):e}},{key:"valuePresenterFactory",value:function(t,e){switch(t){case"Revision State":return(new Mt.a).setColor(e.parameters["%REVISION_STATE_COLOR%"]).push(e.parameters[t]);case"Revision Status":return(new Lt.a).push(e.parameters[t]);case"Designator":return(new It.a).setDefaultSort().push(e)}if(Bt.a.test(t))return(new Dt.a).push(e.parameters[t]);if(Bt.c.test(t)){var n=e.parameters[t];if(n){var r=Number(t.replace("Supplier Part Number ","")),o=e.parameters["Supplier ".concat(r)],i=e.manufacturers.flatMap((function(t){return t.suppliers})).find((function(t){return t.name===o&&t.spn===n}));if(i)return this.diffMode?(new Nt.a).push(e.parameters[t]):(new Nt.a).setUrl(i.supplierUrl).push(e.parameters[t])}return new Nt.a}if(Bt.b.test(t)){var a=e.parameters[t];if(a){var s=Number(t.replace("Manufacturer Part Number ","")),c=e.parameters["Manufacturer ".concat(s)],u=e.manufacturers.find((function(t){return t.name===c&&t.mpn===a}));if(u)return this.diffMode?(new Nt.a).setStatusName(u.lifecycleStatus).push(e.parameters[t]):(new Nt.a).setUrl(u.manufacturerUrl).setStatusName(u.lifecycleStatus).push(e.parameters[t])}return new Nt.a}return(new At.a).push(e.parameters[t])}},{key:"getVariant",value:function(){return this.activeVariant}}])&&Ut(e.prototype,n),r&&Ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Rt.a),Jt=n(36),Qt=n(14);function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ee=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==te(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function ne(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oe(t,e){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=se(t);if(e){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(t,e){if(e&&("object"===te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ce=window.__CORE__,ue={message:"BOM Compare initialization",meta:"It will take a few moments"};function le(t,e,n,r){var i=n||"BOMCompareTab",a=r||"Compare";return new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oe(t,e)}(h,t);var r,s,c,l,f,d=ie(h);function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this,{name:i,displayName:a,order:6,hint:"_"})).isActive=!1,t.isHidden=!0,t.hasLicenses=!1,t.logger=ce.createLogger(i),t.viewManager=new Kt(n,e),t.registerHandlers(),u.registerModule(i,O),t}return r=h,(s=[{key:"commit",value:function(t,e){u.commit(i+"/"+t,e)}},{key:"registerHandlers",value:function(){var t=this;this.$on("didStateChange",(function(e){return t.onEngineStateChanged(e)})),Ct.a.on("bomcompare:setCompareInfo",(function(e){var n=e.data;t.commit(o.SET_TITLE,{title:n[i],projectName:n.projectName})}))}},{key:"events",get:function(){return["Variants:changed"]}},{key:"hidden",get:function(){return this.isHidden||!this.hasLicenses}},{key:"$emit",value:function(t,e){var n=t.indexOf(":")<0?"".concat(i,":").concat(t):t;ce.bus.emit(n,e)}},{key:"$on",value:function(t,e){var n=t.indexOf(":")<0?"".concat(i,":").concat(t):t;ce.bus.on(n,e)}},{key:"setup",value:(l=ee().mark((function t(e){var n;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=[Qt.a.names.bomCompare,Qt.a.names.killSwitchCompareBomView],this.hasLicenses=Qt.a.getLicenseDetails(n[0]).isEnabled&&Qt.a.getLicenseDetails(n[1]).isEnabled,this.$emit("setup",e),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),this.logger.LogError("Setup error. "+t.t0.message),new Error(i+" view setup error.");case 10:case"end":return t.stop()}}),t,this,[[0,6]])})),f=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=l.apply(t,e);function i(t){ne(o,n,r,i,a,"next",t)}function a(t){ne(o,n,r,i,a,"throw",t)}i(void 0)}))},function(t){return f.apply(this,arguments)})},{key:"activate",value:function(t){this.div=t,this.$emit("Search:updateInterface",{hidden:!0}),this.$emit("SearchButton:updateInterface",{hidden:!1}),this.commit(o.TAB_ACTIVATED,!0);try{this.isActive=!0,this.activateEngine(),this.$on("Variants:changed",this.activateEngine),this.$emit("Logo:hide")}catch(t){this.logger.LogError("Activate error. "+t.message),t.innerError&&t.innerError.code===Jt.a.StoreExpired?this.updateLoader("error",t.message,"info-16","small"):this.updateLoader("error","Something went wrong. Please try again later.")}}},{key:"deactivate",value:function(){this.$emit("Search:updateInterface",{hidden:!1}),this.$emit("SearchButton:updateInterface",{hidden:!0}),this.commit(o.TAB_ACTIVATED,!1),ce.bus.off("Variants:changed",this.activateEngine);try{this.isActive=!1,this.$emit("deactivate"),this.$emit("Logo:show")}catch(t){this.logger.LogError("Deactivate error. "+t.message)}}},{key:"activateEngine",value:function(){this.$emit("activate")}},{key:"initView",value:function(t){t&&!this.hasView&&(this.hasView=!0,this.view=function(t){var e=document.createElement("div");return t.appendChild(e),new jt.library.Vue({store:u,data:{afsConfig:window.__APP__.afsConfig},render:function(t){return t(Pt)}}).$mount(e)}(t))}},{key:"setStoreState",value:function(t){if(!u.getters[i+"/hasVariantItems"](t.variant)){var e=u.state[i].columns.length>0,n=t.transformData();e||(this.commit(o.SET_COLUMNS,{items:n,columnAliases:t.columnAliases,visibleColumns:t.visibleColumns,isDiffMode:t.diffMode}),this.commit(o.SET_CURRENCY,t.currency)),this.commit(o.SET_ITEMS,n),this.commit(o.SET_VARIANT,t.variant)}}},{key:"onEngineStateChanged",value:function(t){switch(t.state){case"HIDDEN":this.isHidden=!0,this.$emit("updateInterface",{hidden:!0});break;case"READY":this.$emit("updateInterface",{hidden:!1}),this.isHidden=!1;break;case"ACTIVE":this.initView(this.div),t.message&&(this.setStoreState(t.message),this.updateLoader()),Ct.a.emit("bomcompare:tabChanged",{plugin:i,variant:u.state[i].variant});break;case"LOAD":this.updateLoader("large",ue);break;case"CRASHED":this.updateLoader("error","Something went wrong. Please try again later.");break;case"NONACTIVE":this.commit(o.TAB_ACTIVATED,!1),this.updateLoader()}}},{key:"updateLoader",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"large",o=e&&(null==e?void 0:e.message)||e,i=null!=e&&void 0!==e&&e.meta?e.meta:"";this.isActive&&t&&o?(this.logger.LogDebug("Loader: ".concat(t,", message: ").concat(o)),this.loader?this.loader.update({message:o,meta:i,type:t,icon:n,size:r}):this.div&&(this.loader=window.__APP__.loader(this.div,{message:o,meta:i,type:t,icon:n,size:r}))):this.loader&&(this.loader.destroy(),this.loader=null)}}])&&re(r.prototype,s),c&&re(r,c),Object.defineProperty(r,"prototype",{writable:!1}),h}(t))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var r="UNIT_MM",o="UNIT_MIL"},function(t,e,n){"use strict";n.d(e,"a",(function(){return er})),n.d(e,"b",(function(){return nr})),n.d(e,"c",(function(){return or}));var r=n(51);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function h(){}function p(){}function m(){}var v={};u(v,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,a)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(i,a){function s(){return new e((function(r,s){!function r(i,a,s,c){var u=f(t[i],t,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==o(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}(i,a,r,s)}))}return r=r?r.then(s,s):s()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,u(b,"constructor",m),u(m,"constructor",p),p.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),u(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function a(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,c,"next",t)}function c(t){a(i,r,o,s,c,"throw",t)}s(void 0)}))}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"canvasControl",void 0),u(this,"renderMode",r.b.Render2D),u(this,"selectionIds",new Map),u(this,"cachedPrimitives",[]),u(this,"selectionManager",void 0),u(this,"selectionManager2d",void 0),u(this,"selectionManager3d",void 0),this.canvasControl=e,this.selectionManager2d=n,this.selectionManager3d=o,this.selectionManager=this.selectionManager2d}var e,n,o,a,l;return e=t,(n=[{key:"dispose",value:function(){}},{key:"isSelected",get:function(){return this.selectionManager2d.isSelected||this.selectionManager3d.isSelected},set:function(t){this.selectionManager2d.isSelected=t,this.selectionManager3d.isSelected=t}},{key:"setRenderMode",value:function(t){this.renderMode=t,this.activateRenderMode()}},{key:"addSelection",value:(l=s(i().mark((function t(e,n){var r=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.selectionManager.addSelection(e,(function(t){r.selectionIds.set(t.pcbId,t),r.canvasControl.invalidate()}),n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},{key:"updateMaterialMap",value:function(t){this.selectionManager.updateMaterialMap(t)}},{key:"clearSelection",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&(this.cachedPrimitives.length=0),this.selectionIds.clear(),this.selectionManager2d.clearSelection(n),this.selectionManager3d.clearSelection(n),this.updateMaterialMap(e),this.canvasControl.invalidate()}},{key:"isHighlight",value:function(t){return this.selectionManager.isHighlight(t)}},{key:"addHighlight",value:function(t){this.is2D&&(this.selectionManager.addHighlight(t),this.canvasControl.invalidate())}},{key:"clearHighlight",value:function(){this.is2D&&(this.selectionManager.clearHighlight(),this.canvasControl.invalidate())}},{key:"activateRenderMode",value:(a=s(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.selectionManager=this.is2D?this.selectionManager2d:this.selectionManager3d,this.updateMaterialMap(!0),this.canvasControl.invalidate();case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"is2D",get:function(){return this.renderMode==r.b.Render2D}}])&&c(e.prototype,n),o&&c(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}(),f=n(222),d=n(18),h=n(30),p=n(445),m=n(444),v=n(43),y={};y["3D/IDLE"]=[{to:"3D/R_BUTTON_IS_PRESSED",where:function(t){return["mousedown"===t.type,t.button===v.a.Right]}},{to:"3D/L_BUTTON_IS_PRESSED",where:function(t){return["mousedown"===t.type,t.button===v.a.Left]}},{to:"3D/BOARD_ZOOMS",where:function(t){return["wheel"===t.type]}},{to:"3D/TOUCH_START",where:function(t){return["touchstart"===t.type]}}],y["3D/R_BUTTON_IS_PRESSED"]=[{to:"3D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type]}},{to:"3D/IDLE",where:function(t){return["mouseup"===t.type,t.button===v.a.Right]}}],y["3D/L_BUTTON_IS_PRESSED"]=[{to:"3D/COMPONENT_LAUNCH_SELECTION",where:function(t){return["mouseup"===t.type,t.button===v.a.Left,t.clickPos.x===t.clientX,t.clickPos.y===t.clientY]}},{to:"3D/BOARD_ROTATES",where:function(t){return["mousemove"===t.type,t.clickPos.x!==t.clientX||t.clickPos.y!==t.clientY]}}],y["3D/BOARD_ZOOMS"]=y["3D/IDLE"],y["3D/BOARD_TRANSLATES"]=[{to:"3D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type]}},{to:"3D/BOARD_DID_TRANSLATE",where:function(t){return["mouseup"===t.type,t.button===v.a.Right]}},{to:"3D/BOARD_DID_TRANSLATE",where:function(t){return["mouseleave"===t.type]}}],y["3D/COMPONENT_LAUNCH_SELECTION"]=y["3D/IDLE"],y["3D/BOARD_ROTATES"]=[{to:"3D/BOARD_ROTATES",where:function(t){return["mousemove"===t.type]}},{to:"3D/BOARD_DID_ROTATE",where:function(t){return["mouseup"===t.type,t.button===v.a.Left]}},{to:"3D/BOARD_DID_ROTATE",where:function(t){return["mouseleave"===t.type]}}],y["3D/BOARD_DID_TRANSLATE"]=y["3D/IDLE"],y["3D/BOARD_DID_ROTATE"]=y["3D/IDLE"],y["3D/TOUCH_END"]=y["3D/IDLE"],y["3D/TOUCH_START"]=[{to:"3D/TOUCH_START",where:function(t){return["touchstart"===t.type]}},{to:"3D/TOUCH_MOVE",where:function(t){return["touchmove"===t.type]}},{to:"3D/TOUCH_END",where:function(t){return["touchend"===t.type]}}],y["3D/TOUCH_MOVE"]=[{to:"3D/TOUCH_START",where:function(t){return["touchstart"===t.type]}},{to:"3D/TOUCH_MOVE",where:function(t){return["touchmove"===t.type]}},{to:"3D/TOUCH_END",where:function(t){return["touchend"===t.type]}}];n(447);var g=n(446),b=n(19);function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"createElement",value:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}},{key:"setAttribute",value:function(t,e){for(var n in e)t.setAttribute(n,e[n.toString()]);return t}},{key:"createLeftRoundedRectPath",value:function(t,e,n,r,o){return"M"+(t+o)+","+e+"h"+(n-o)+"v"+r+"h"+(o-n)+"a"+o+","+o+" 0 0 1 "+-o+","+-o+"v"+(2*o-r)+"a"+o+","+o+" 0 0 1 "+o+","+-o+"z"}},{key:"createRightRoundedRectPath",value:function(t,e,n,r,o){return"M"+t+","+e+"h"+(n-o)+"a"+o+","+o+" 0 0 1 "+o+","+o+"v"+(r-2*o)+"a"+o+","+o+" 0 0 1 "+-o+","+o+"h"+(o-n)+"z"}}],(n=null)&&w(e.prototype,n),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E={r:2,strokeWidth:2,color:"white"},k=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,"labelStyle",void 0),C(this,"_labelXY",void 0),C(this,"_labelX",void 0),C(this,"_labelY",void 0),C(this,"overlay",void 0),C(this,"useLabelLine",!0),this.labelStyle=n,this.overlay=_.createElement("g"),_.setAttribute(this.overlay,{id:"measurements"}),e.appendChild(this.overlay)}var e,n,r;return e=t,r=[{key:"getXProjection",value:function(t,e){return{from:t,to:[e[0],t[1],e[2]]}}},{key:"getYProjection",value:function(t,e){return{from:[e[0],t[1],t[2]],to:e}}}],(n=[{key:"labelXY",get:function(){return this._labelXY}},{key:"labelX",get:function(){return this._labelX}},{key:"labelY",get:function(){return this._labelY}},{key:"setStyle",value:function(t){this.labelStyle=t}},{key:"getLabelTemplate",value:function(t,e,n){return this.getLabelInfoTemplate(t,e,n)}},{key:"getLabelInfoTemplate",value:function(t,e,n){var r=_.createElement("g"),o=_.createElement("rect"),i=_.createElement("rect"),a=_.createElement("text"),s=_.createElement("text");a.textContent=t;var c=a.getBoundingClientRect();_.setAttribute(a,{x:5,y:.75*c.height,fill:"white"}),_.setAttribute(o,{x:0,y:0,width:c.width+10,height:c.height,fill:"black"}),s.textContent="".concat(e.toFixed(2)).concat(n);var u=s.getBoundingClientRect();return _.setAttribute(s,{x:c.width+15,y:.75*u.height,fill:"black"}),_.setAttribute(i,{x:c.width+10,y:0,width:u.width+10,height:u.height,fill:"white"}),r.appendChild(o),r.appendChild(i),r.appendChild(a),r.appendChild(s),r}},{key:"moveLabelInfo",value:function(t,e){var n=O(Array.from(t.children),4),r=n[0],o=n[1],i=n[2],a=n[3],s=i.getBoundingClientRect();_.setAttribute(i,{y:.75*s.height}),_.setAttribute(r,{width:s.width+10,height:s.height,fill:"black"}),a.textContent="".concat(e.value.toFixed(2)).concat(e.units);var c=a.getBoundingClientRect();_.setAttribute(a,{x:s.width+15,y:.75*c.height}),_.setAttribute(o,{x:s.width+10,width:c.width+10,height:c.height})}},{key:"moveLabelXY",value:function(t,e,n,r){this._labelXY&&this.moveLabel(this._labelXY,{from:t,to:e,label:"XY",value:n,units:r})}},{key:"moveLabelY",value:function(e,n,r,o){if(this._labelY){var i=t.getYProjection(e,n);this.moveLabel(this._labelY,{from:i.from,to:i.to,label:"Y",value:r,units:o})}}},{key:"moveLabelX",value:function(e,n,r,o){if(this._labelX){var i=t.getXProjection(e,n);this.moveLabel(this._labelX,{from:i.from,to:i.to,label:"X",value:r,units:o})}}},{key:"createLabelXY",value:function(t,e,n,r){this._labelXY=this.getLabelTemplateXY(t,e,"XY",n,r),_.setAttribute(this._labelXY,{id:"labelXY"}),this._labelXY.style="cursor: pointer",this.overlay.appendChild(this._labelXY)}},{key:"createLabelX",value:function(e,n,r,o){var i=t.getXProjection(e,n);this._labelX=this.getLabelTemplateX(i.from,i.to,"X",r,o),_.setAttribute(this._labelX,{id:"labelX",style:"visibility: hidden"}),this.overlay.appendChild(this._labelX)}},{key:"createLabelY",value:function(e,n,r,o){var i=t.getYProjection(e,n);this._labelY=this.getLabelTemplateY(i.from,i.to,"Y",r,o),_.setAttribute(this._labelY,{id:"labelY",style:"visibility: hidden"}),this.overlay.appendChild(this._labelY)}},{key:"showLabel",value:function(){this._labelXY&&_.setAttribute(this._labelXY,{style:"visibility: visible"})}},{key:"hideLabel",value:function(){this._labelXY&&_.setAttribute(this._labelXY,{style:"visibility: hidden"})}},{key:"showProjections",value:function(){this._labelX&&(_.setAttribute(this._labelX,{style:"visibility: visible"}),_.setAttribute(this._labelY,{style:"visibility: visible"}))}},{key:"hideProjections",value:function(){this._labelX&&(_.setAttribute(this._labelX,{style:"visibility: hidden"}),_.setAttribute(this._labelY,{style:"visibility: hidden"}))}},{key:"dispose",value:function(){var t,e,n;null===(t=this._labelXY)||void 0===t||t.remove(),null===(e=this._labelX)||void 0===e||e.remove(),null===(n=this._labelY)||void 0===n||n.remove()}}])&&x(e.prototype,n),r&&x(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(i,t);var e,n,r,o=L(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,(n=[{key:"getLabelVec",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))||1,i=-r/o,a=n/o,s=Math.PI/2,c=Math.atan2(r,n),u=-Math.PI/6;c>0&&c<s&&(u+=Math.PI),c>=s&&c<Math.PI&&(u=Math.PI-u),c<0&&c>-Math.PI&&(u=-u),c<0&&c>-s&&(u+=Math.PI);var l=[t[0]+.5*n,t[1]+.5*r];return{from:l,to:[l[0]+30*(i*Math.cos(u)-a*Math.sin(u)),l[1]+30*(i*Math.sin(u)+a*Math.cos(u))]}}},{key:"moveLabelLine",value:function(t,e){_.setAttribute(t,{x1:e.from[0],y1:e.from[1],x2:e.to[0],y2:e.to[1]})}},{key:"moveLabel",value:function(t,e){var n=P(Array.from(t.children),2),r=n[0],o=n[1],i=this.getLabelVec(e.from,e.to),a=Math.round(i.to[0]-i.from[0]),s=Math.round(i.to[1]-i.from[1]);this.useLabelLine&&this.moveLabelLine(o,{from:[0,0],to:[a,s]}),this.moveLabelInfo(r,{label:e.label,value:e.value,units:e.units}),_.setAttribute(r,{transform:"translate(".concat(a,",").concat(s,")")}),_.setAttribute(t,{transform:"translate(".concat(Math.round(i.from[0]),",").concat(Math.round(i.from[1]),")")})}},{key:"getLabelTemplateXY",value:function(t,e,n,r,o){var i=_.createElement("g"),a=this.getLabelVec(t,e),s=a.to[0]-a.from[0],c=a.to[1]-a.from[1],u=this.getLabelTemplate(n,r,o);if(_.setAttribute(i,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),i.appendChild(u),this.useLabelLine){var l=this.getLabelLineTemplate([0,0],[s,c]);i.appendChild(l)}return i}},{key:"getLabelTemplateX",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}},{key:"getLabelTemplateY",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}},{key:"getLabelLineTemplate",value:function(t,e){var n=_.createElement("line");return _.setAttribute(n,{x1:t[0],y1:t[1],x2:e[0],y2:e[1],stroke:E.color,"stroke-width":E.strokeWidth}),n}}])&&A(e.prototype,n),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(k);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=z(t);if(e){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}function V(t,e){if(e&&("object"===N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(i,t);var e,n,r,o=G(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,(n=[{key:"getLabelVec",value:function(t,e){return{from:t,to:e}}},{key:"moveLabel",value:function(t,e){var n=B(Array.from(t.children),1)[0],r=this.getLabelVec(e.from,e.to);this.moveLabelInfo(n,{label:e.label,value:e.value,units:e.units});var o=n.getBBox(),i=Math.round(r.to[0]-r.from[0])/2-o.width/2,a=Math.round(r.to[1]-r.from[1])/2-o.height/2;_.setAttribute(n,{transform:"translate(".concat(i,",").concat(a,")")}),_.setAttribute(t,{transform:"translate(".concat(Math.round(r.from[0]),",").concat(Math.round(r.from[1]),")")})}},{key:"getLabelTemplateXY",value:function(t,e,n,r,o){var i=_.createElement("g"),a=this.getLabelVec(t,e),s=(a.to[0],a.from[0],a.to[1],a.from[1],this.getLabelTemplate(n,r,o));return _.setAttribute(i,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),i.appendChild(s),i}},{key:"getLabelTemplateX",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}},{key:"getLabelTemplateY",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}}])&&U(e.prototype,n),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(k);function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Q(t);if(e){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return J(this,n)}}function J(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(i,t);var e,n,r,o=K(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,(n=[{key:"moveLabel",value:function(t,e){var n=Y(Array.from(t.children),2),r=n[0],o=n[1],i=this.getLabelVec(e.from,e.to),a=Math.round(i.to[0]-i.from[0]),s=Math.round(i.to[1]-i.from[1]);this.useLabelLine&&this.moveLabelLine(o,{from:[0,0],to:[a,s]}),this.moveLabelInfo(r,{label:e.label,value:e.value,units:e.units}),_.setAttribute(r,{transform:"translate(".concat(a,",").concat(s,")")}),_.setAttribute(t,{transform:"translate(".concat(Math.round(i.from[0]),",").concat(Math.round(i.from[1]),")")})}},{key:"getLabelTemplate",value:function(t,e,n){var r=_.createElement("g"),o=_.createElement("rect"),i=_.createElement("text");i.textContent="".concat(e.toFixed(2)).concat(n);var a=i.getBoundingClientRect();return _.setAttribute(i,{x:5,y:.9*a.height,fill:"black",font:"12px Helvetica Neue"}),_.setAttribute(o,{x:0,y:0,width:a.width+10,height:a.height+5,fill:"white",stroke:"black","stroke-width":1}),r.appendChild(o),r.appendChild(i),r}},{key:"moveLabelInfo",value:function(t,e){var n=Y(Array.from(t.children),2),r=n[0],o=n[1];o.textContent="".concat(e.value.toFixed(2)).concat(e.units);var i=o.getBoundingClientRect();_.setAttribute(o,{x:5,y:.9*i.height}),_.setAttribute(r,{x:0,width:i.width+10,height:i.height+5})}},{key:"getLabelTemplateXY",value:function(t,e,n,r,o){var i=_.createElement("g"),a=this.getLabelVec(t,e),s=a.to[0]-a.from[0],c=a.to[1]-a.from[1],u=this.getLabelTemplate(n,r,o);if(_.setAttribute(i,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),i.appendChild(u),this.useLabelLine){var l=this.getLabelLineTemplate([0,0],[s,c]);i.appendChild(l)}return i}},{key:"getLabelTemplateX",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}},{key:"getLabelTemplateY",value:function(t,e,n,r,o){return this.getLabelTemplateXY(t,e,n,r,o)}}])&&X(e.prototype,n),r&&X(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(R);function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rt=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,"svg",void 0),nt(this,"labelStyleBuilderMap",new Map),this.svg=e,this.labelStyleBuilderMap.set("pointer",(function(t){return new R(n.svg,t)})),this.labelStyleBuilderMap.set("simplepointer",(function(t){return new tt(n.svg,t)})),this.labelStyleBuilderMap.set("simple",(function(t){return new H(n.svg,t)})),this.labelStyleBuilderMap.set("roundedRect",(function(t){return new dt(n.svg,t)}))}var e,n,r;return e=t,(n=[{key:"getLabelBuilder",value:function(t){var e=this.labelStyleBuilderMap.get(t.viewKind);return e||(e=this.labelStyleBuilderMap.get("pointer")),e(t)}}])&&et(e.prototype,n),r&&et(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e){return(ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ft(t);if(e){var o=ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(i,t);var e,n,r,o=ut(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e)).useLabelLine=!1,n}return e=i,(n=[{key:"moveLabelXY",value:function(t,e,n,r){if(this._labelXY){var o=this._labelXY,i=o.children.item(0),a=this.getLabelVec(t,e),s="rotate(0)";_.setAttribute(o,{transform:s});var c=Math.round(a.from[0]),u=Math.round(a.from[1]);this.moveLabelInfo(i,{label:"XY",value:n,units:r});var l=o.getBBox(),f=l.width/2,d=l.height/2,h=l.width,p=this.getMeterLength(t,e);p<2*h&&this.hideProjections(),p<1.5*h&&(d+=l.height);var m=this.getMeterDegrees(t,e);s="translate(".concat(c,",").concat(u,") rotate(").concat(m,") translate(").concat(-f,", ").concat(-d,")"),_.setAttribute(o,{transform:s})}}},{key:"getMeterLength",value:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}},{key:"moveLabelX",value:function(t,e,n,r){if(this._labelX){var o=k.getXProjection(t,e),i=this._labelX,a=i.children.item(0);this.moveLabelInfo(a,{label:"X",value:n,units:r});var s=this.getLabelVec(o.from,o.to),c=i.getBBox(),u=Math.round(s.from[0]-c.width/2),l=Math.round(s.from[1]-c.height/2),f=c.width;this.getMeterLength(o.from,o.to)<1.5*f&&(l=t[1]>e[1]?l+c.height:l-c.height);var d="translate(".concat(u,",").concat(l,")");_.setAttribute(i,{transform:d})}}},{key:"moveLabelY",value:function(t,e,n,r){if(this._labelY){var o=k.getYProjection(t,e),i=this._labelY,a=i.children.item(0),s="rotate(0)";_.setAttribute(i,{transform:s}),this.moveLabelInfo(a,{label:"Y",value:n,units:r});var c=this.getLabelVec(o.from,o.to),u=i.getBBox(),l=Math.round(c.from[0]),f=Math.round(c.from[1]),d=u.width/2,h=u.height/2,p=u.width;this.getMeterLength(o.from,o.to)<1.5*p&&(h=t[0]>e[0]?h+u.height:h-u.height),s="translate(".concat(l,",").concat(f,") rotate(-90) translate(").concat(-d,", ").concat(-h,")"),_.setAttribute(i,{transform:s})}}},{key:"getMeterDegrees",value:function(t,e){var n=e[1]-t[1],r=e[0]-t[0],o=180*Math.atan2(n,r)/Math.PI;return o>-90&&o<90?o:o>=90&&o<=180?o-180:o+180}},{key:"getLabelTemplate",value:function(t,e,n){var r=_.createElement("g"),o=_.createElement("rect"),i=_.createElement("text");i.textContent="".concat(e.toFixed(2)).concat(n);var a=i.getBoundingClientRect();return _.setAttribute(i,{x:5,y:.9*a.height,fill:"black"}),_.setAttribute(o,{x:0,y:0,rx:4,ry:4,width:a.width+10,height:a.height+5,fill:"white",stroke:"black","stroke-width":1}),r.appendChild(o),r.appendChild(i),r}},{key:"moveLabelInfo",value:function(t,e){var n=it(Array.from(t.children),2),r=n[0],o=n[1];o.textContent="".concat(e.value.toFixed(2)).concat(e.units);var i=o.getBoundingClientRect();_.setAttribute(o,{x:5,y:.9*i.height}),_.setAttribute(r,{x:0,width:i.width+10,height:i.height+5})}},{key:"getLabelTemplateXY",value:function(t,e,n,r,o){var i=_.createElement("g"),a=this.getLabelVec(t,e),s=this.getLabelTemplate(n,r,o);i.appendChild(s);var c=i.getBBox(),u=a.from[0]-c.width/2,l=a.from[1]-c.height/2,f="translate(".concat(u,",").concat(l,")");return _.setAttribute(i,{transform:f}),i}},{key:"getLabelTemplateX",value:function(t,e,n,r,o){var i=_.createElement("g"),a=this.getLabelVec(t,e),s=this.getLabelTemplate(n,r,o),c="translate(".concat(a.from[0],",").concat(a.from[1],")");return _.setAttribute(i,{transform:c}),i.appendChild(s),i}},{key:"getLabelTemplateY",value:function(t,e,n,r,o){var i=_.createElement("g"),a=this.getLabelVec(t,e),s=this.getLabelTemplate(n,r,o),c="translate(".concat(a.from[0],",").concat(a.from[1],")");return _.setAttribute(i,{transform:c}),i.appendChild(s),i}}])&&st(e.prototype,n),r&&st(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(R),ht=n(55),pt=n(146),mt=n(116),vt=n(78),yt=n(105),gt=n(140),bt=n(34);function wt(t){return function(t){if(Array.isArray(t))return _t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),St(this,"scene",void 0),St(this,"meterStyle",void 0),St(this,"primaryColor",void 0),St(this,"secondaryColor",void 0),St(this,"thirdColor",void 0),St(this,"initialZoom",void 0),St(this,"nodeContainer",new mt.a),this.scene=e,this.setStyle(n)}var e,n,r;return e=t,(n=[{key:"build",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ht.b.Cross,i=this.getLineTemplate(e.from,e.to);(n=t.unis).push.apply(n,wt(i));var a,s=this.getCapTemplate(e.from);t.add(s),a=r?this.getSnappingCursorTemplate(e.to,o):this.getCapTemplate(e.to),t.add(a)}},{key:"buildCursor",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ht.b.Circle;n?t.add(this.getSnappingCursorTemplate(e,r)):t.add(this.getCursorTemplate(e))}},{key:"setStyle",value:function(t){this.meterStyle=t,this.primaryColor=this.initMaterial(t.colors.length>0?t.colors[0]:"#000000"),this.secondaryColor=this.initMaterial(t.colors.length>1?t.colors[1]:"#FFFFFF"),this.thirdColor=this.initMaterial(t.colors.length>2?t.colors[2]:"rgba(255, 255, 255, 0.3)")}},{key:"initMaterial",value:function(e){var n=t.colorMaterialMap.get(e);if(n)return n;var r=pt.a.toRgbaArray(e);return n=this.scene.addMaterial(new vt.a(r,yt.b.None,!1,!1,!1)),t.colorMaterialMap.set(e,n),n}},{key:"zoom",get:function(){return this.initialZoom||(this.initialZoom=25),this.initialZoom/this.scene.viewport.GetZoom()}},{key:"getCapTemplate",value:function(t){var e=t[0],n=t[1],r=.3/this.zoom,o=.6*r,i=gt.a.createCircleFill(e,n,o,this.secondaryColor),a=gt.a.createCircleFill(e,n,r,this.primaryColor),s=gt.a.createCircleFill(e,n,o,this.secondaryColor);return i.z=[t[2]+.02,t[2]+.02],a.z=[t[2],t[2]],s.z=[t[2]-.02,t[2]-.02],this.nodeContainer.clear(),this.nodeContainer.arcs.push(i,a,s),this.nodeContainer}},{key:"getLineTemplate",value:function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=.2/this.zoom,s=.5*a,c=bt.a.createLine(n,r,o,i,s,this.primaryColor),u=bt.a.createLine(n,r,o,i,a,this.secondaryColor),l=bt.a.createLine(n,r,o,i,s,this.primaryColor);return c.z=[t[2]+.02,e[2]+.02],u.z=[t[2],e[2]],l.z=[t[2]-.02,e[2]-.02],[c,u,l]}},{key:"getCursorTemplate",value:function(t){var e=t[0],n=t[1],r=this.scene.pixelsToUnits(1),o=[0,.5];this.nodeContainer.clear();var i=this.meterStyle.capOptions.width*r,a=this.meterStyle.capOptions.height*r,s=bt.a.createRectangle(e,n,i,a,this.primaryColor);s.z=o;var c=bt.a.createRectangle(e,n,a,i,this.primaryColor);return c.z=o,this.nodeContainer.unis.push(s,c),this.nodeContainer}},{key:"getSnappingCursorTemplate",value:function(t,e){switch(e){case ht.b.Box:return this.getBoxCursorTemplate(t);case ht.b.Triangle:return this.getTriangleCursorTemplate(t);default:return this.getCircleCursorTemplate(t)}}},{key:"getCircleCursorTemplate",value:function(t){var e,n,r=t[0],o=t[1],i=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var a=i*(null!==(e=this.meterStyle.capOptions.radius)&&void 0!==e?e:7),s=i*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),c=gt.a.createCircleStroke(r,o,a,this.primaryColor,s,[0,.5]);return this.nodeContainer.arcs.push(c),this.nodeContainer}},{key:"getBoxCursorTemplate",value:function(t){var e,n,r,o=t[0],i=t[1],a=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var s=2*a*(null!==(e=this.meterStyle.capOptions.radius)&&void 0!==e?e:7),c=a*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),u=bt.a.createStrokedRectangle(o-s/2,i+s/2,s,s,c,this.primaryColor);return(r=this.nodeContainer.unis).push.apply(r,wt(u)),this.nodeContainer}},{key:"getTriangleCursorTemplate",value:function(t){var e,n,r=t[0],o=t[1],i=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var a=i*(null!==(e=this.meterStyle.capOptions.radius)&&void 0!==e?e:7),s=i*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),c=4*a/Math.sqrt(3),u=r-c/2,l=r,f=r+c/2,d=bt.a.createLine(u,o-a,l,o+a,s,this.primaryColor),h=bt.a.createLine(l,o+a,f,o-a,s,this.primaryColor),p=bt.a.createLine(u,o-a,f,o-a,s,this.primaryColor);return this.nodeContainer.unis.push(d,h,p),this.nodeContainer}},{key:"pixelsToUnitsX",value:function(t){var e=this.scene.viewportToWorld([0,0]);return this.scene.viewportToWorld([t,0])[0]-e[0]}},{key:"pixelsToUnitsY",value:function(t){var e=this.scene.viewportToWorld([0,0]);return this.scene.viewportToWorld([0,t])[1]-e[1]}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}St(xt,"colorMaterialMap",new Map);var kt=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Et(this,"scene",void 0),Et(this,"meterStyleBuilderMap",new Map),this.scene=e,this.meterStyleBuilderMap.set("round",(function(t){return new It(n.scene,t)})),this.meterStyleBuilderMap.set("simplecross",(function(t){return new Xt(n.scene,t)})),this.meterStyleBuilderMap.set("cross",(function(t){return new Gt(n.scene,t)})),this.meterStyleBuilderMap.set("simplebox",(function(t){return new oe(n.scene,t)}))}var e,n,r;return e=t,(n=[{key:"getMeterBuilder",value:function(t){var e=this.meterStyleBuilderMap.get(t.viewKind);return e||(e=this.meterStyleBuilderMap.get("round")),e(t)}}])&&Ct(e.prototype,n),r&&Ct(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jt(t,e){return(jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lt(t);if(e){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mt(this,n)}}function Mt(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jt(t,e)}(i,t);var e,n,r,o=At(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,n&&Pt(e.prototype,n),r&&Pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(xt);function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nt(t,e){return(Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$t(t);if(e){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ft(this,n)}}function Ft(t,e){if(e&&("object"===Dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ut(t)}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nt(t,e)}(i,t);var e,n,r,o=Bt(i);function i(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e),r=Ut(n),s=void 0,(a="whiteTransparentColorId")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n}return e=i,r=[{key:"create",value:function(t){return new i(t,{viewKind:"cross",colors:["#000000","#FFFFFF","rgba(255, 255, 255, 0.3)"],capOptions:{width:2.4,height:8.8,lineWidth:.8},lineOptions:{lineCount:2,lineWidth:1}})}}],(n=[{key:"getCapTemplate",value:function(t){var e=t[0],n=t[1],r=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var o=this.meterStyle.capOptions.width*r,i=this.meterStyle.capOptions.height*r,a=bt.a.createRectangle(e,n,o,i,this.secondaryColor),s=bt.a.createRectangle(e,n,i,o,this.secondaryColor),c=bt.a.createRectangle(e,n,o+2*r,i+2*r,this.primaryColor),u=bt.a.createRectangle(e,n,i+2*r,o+2*r,this.primaryColor);return this.nodeContainer.unis.push(c,u,a,s),this.nodeContainer}},{key:"getLineTemplate",value:function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=this.scene.pixelsToUnits(1),s=this.meterStyle.lineOptions.lineWidth*a,c=bt.a.createLine(n,r,o,i,s,this.secondaryColor);return[bt.a.createLine(n,r,o,i,s+2*a,this.primaryColor),c]}}])&&Rt(e.prototype,n),r&&Rt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(xt);function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t,e){return(Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qt(t);if(e){var o=qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yt(this,n)}}function Yt(t,e){if(e&&("object"===Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ht(t,e)}(i,t);var e,n,r,o=Wt(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,r=[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FFFFFF",o={viewKind:"simplecross",colors:[r],capOptions:{width:e,height:n},lineOptions:{lineWidth:e}};return new i(t,o)}}],(n=[{key:"getCapTemplate",value:function(t){var e=t[0],n=t[1],r=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var o=this.meterStyle.capOptions.width*r,i=this.meterStyle.capOptions.height*r,a=bt.a.createRectangle(e,n,o,i,this.primaryColor);this.nodeContainer.unis.push(a);var s=bt.a.createRectangle(e,n,i,o,this.primaryColor);return this.nodeContainer.unis.push(s),this.nodeContainer}},{key:"getLineTemplate",value:function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=this.scene.pixelsToUnits(1),s=this.meterStyle.lineOptions.lineWidth*a;return[bt.a.createLine(n,r,o,i,s,this.primaryColor)]}},{key:"getCursorTemplate",value:function(t){return this.getCapTemplate(t)}}])&&zt(e.prototype,n),r&&zt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(xt);function Zt(t){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t){return function(t){if(Array.isArray(t))return Jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){if(e&&("object"===Zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&te(t,e)}(i,t);var e,n,r,o=ee(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,r=[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FFFFFF",o={viewKind:"simplebox",colors:[r],capOptions:{width:e,height:n},lineOptions:{lineWidth:e}};return new i(t,o)}}],(n=[{key:"build",value:function(t,e){arguments.length>3&&void 0!==arguments[3]||ht.b.Cross;var n,r=this.getLineTemplate(e.from,e.to);(n=t.unis).push.apply(n,Kt(r))}},{key:"getLineTemplate",value:function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=this.scene.pixelsToUnits(1),s=this.meterStyle.lineOptions.lineWidth*a;return[bt.a.createLine(n,r,o,i,s,this.primaryColor)]}},{key:"getCursorTemplate",value:function(t){return this.getBoxCursorTemplate(t)}}])&&Qt(e.prototype,n),r&&Qt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(xt);function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ae=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=void 0,(r="workspace")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.workspace=e}var e,n,r;return e=t,(n=[{key:"setCursor",value:function(t){var e=this;setTimeout((function(){switch(t){case ht.b.None:e.workspace.style.cursor="none";break;case ht.b.Wait:e.workspace.style.cursor="wait";break;case ht.b.Cross:e.workspace.style.cursor=e.getCrossStyle();break;case ht.b.Box:e.workspace.style.cursor=e.getBoxStyle();break;case ht.b.Circle:e.workspace.style.cursor=e.getCircleStyle();break;default:e.workspace.style.cursor="default"}}),1)}},{key:"getCrossStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r="url('data:image/svg+xml;utf8,<svg width=\"".concat(t,'" height="').concat(t,'" viewBox="0 0 ').concat(t," ").concat(t,'" fill="none" xmlns="http://www.w3.org/2000/svg"> ')+'<line id="line1" x1="'.concat(t/2,'" y1="0" x2="').concat(t/2,'" y2="').concat(t,'" style="stroke-linecap:round;stroke:').concat(e,";stroke-width:").concat(n,'" /> ')+'<line id="line2" x1="0" y1="'.concat(t/2,'" x2="').concat(t,'" y2="').concat(t/2,'" style="stroke-linecap:round;stroke:').concat(e,";stroke-width:").concat(n,"\" /></svg>') ").concat(t/2," ").concat(t/2,", auto");return r}},{key:"getBoxStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.7,r="url('data:image/svg+xml;utf8,<svg width=\"".concat(t,'" height="').concat(t,'" viewBox="0 0 ').concat(t," ").concat(t,'" fill="none" xmlns="http://www.w3.org/2000/svg"> ')+'<rect x="1" y="1" width="'.concat(t-2,'" height="').concat(t-2,'" style="stroke:').concat(e,";stroke-width:").concat(n,"\" /></svg>') ").concat(t/2," ").concat(t/2,", auto");return r}},{key:"getCircleStyle",value:function(){return this.getBoxStyle()}}])&&ie(e.prototype,n),r&&ie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fe=ht.a.createLogger("MeterController"),de=function(){function t(e,n,r){var o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,"scene",void 0),le(this,"parentScene",void 0),le(this,"canvasControl",void 0),le(this,"nodeMeter",null),le(this,"nodeCursor",null),le(this,"cx",void 0),le(this,"layerIndex",void 0),le(this,"overlay",void 0),le(this,"measurement",void 0),le(this,"meterBuilder",void 0),le(this,"meterProvider",void 0),le(this,"labelBuilder",void 0),le(this,"labelProvider",void 0),le(this,"container",new mt.a),this.scene=n,this.parentScene=null!==(o=n.parentScene)&&void 0!==o?o:n,this.canvasControl=r,this.nodeMeter=null,this.nodeCursor=null,this.layerIndex=n.layerMap.GetLayersCount()-1,this.meterProvider=new kt(n),this.setMeterBuilder(ht.c.Free),this.overlay=_.createElement("g"),this.labelProvider=new rt(this.overlay),this.labelBuilder=this.labelProvider.getLabelBuilder({viewKind:"roundedRect"}),_.setAttribute(this.overlay,{id:"measurements"}),e.appendChild(this.overlay),ht.a.bus.on("LayerManager:changedLayers",(function(){i.drawMeter([i.measurement])})),ht.a.bus.on("Measurement:changeMode",(function(t){t&&i.setMeterBuilder(t.id)})),this.canvasControl.on("invalidate",(function(){if(i.measurement&&"visible"===i.overlay.style.visibility){var t=i.scene.worldToViewport(i.measurement.from),e=i.scene.worldToViewport(i.measurement.to);i.labelBuilder.moveLabelXY(t,e,i.measurement.xy||0,i.measurement.unitName||"mm"),i.labelBuilder.moveLabelX(t,e,i.measurement.x||0,i.measurement.unitName||"mm"),i.labelBuilder.moveLabelY(t,e,i.measurement.y||0,i.measurement.unitName||"mm")}}))}var e,n,r;return e=t,r=[{key:"getXProjection",value:function(t,e){return{from:t,to:[e[0],t[1],e[2]]}}},{key:"getYProjection",value:function(t,e){return{from:[e[0],t[1],t[2]],to:e}}}],(n=[{key:"dispose",value:function(){this.labelBuilder.dispose()}},{key:"activate",value:function(){_.setAttribute(this.overlay,{style:"visibility: visible"})}},{key:"deactivate",value:function(){_.setAttribute(this.overlay,{style:"visibility: hidden"}),this.hideMeter()}},{key:"setMeterBuilder",value:function(t){var e={viewKind:t===ht.c.ObjectToObject?"simplebox":"simplecross",colors:["#FFFFFF"],capOptions:{width:1,height:19,radius:7,lineWidth:1},lineOptions:{lineWidth:1}};this.meterBuilder=this.meterProvider.getMeterBuilder(e)}},{key:"createXY",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ht.b.Cross;this.clearCursor(),this.meterBuilder.build(t,{from:e,to:n},r,o)}},{key:"createX",value:function(e,n,r){this.meterBuilder.build(e,t.getXProjection(n,r))}},{key:"createY",value:function(e,n,r){this.meterBuilder.build(e,t.getYProjection(n,r))}},{key:"showProjections",value:function(){this.labelBuilder.labelX&&(this.labelBuilder.showProjections(),this.drawMeter([this.measurement]))}},{key:"hideProjections",value:function(){this.labelBuilder.labelX&&(this.labelBuilder.hideProjections(),this.drawMeter([this.measurement]))}},{key:"drawMeter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ht.b.Cross;this.clearMeter(!1),this.container.clear(),this.measurement=t[0];try{if(this.measurement&&"visible"===this.overlay.style.visibility){var r=this.scene.worldToViewport(this.measurement.from),o=this.scene.worldToViewport(this.measurement.to);this.labelBuilder.labelXY||(this.labelBuilder.createLabelX(r,o,this.measurement.x||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelY(r,o,this.measurement.y||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelXY(r,o,this.measurement.xy||0,this.measurement.unitName||"mm")),this.createXY(this.container,this.measurement.from,this.measurement.to,e,n),this.container.isEmpty||this.labelBuilder.showLabel(),"visible"===this.labelBuilder.labelX.style.visibility&&(this.createX(this.container,this.measurement.from,this.measurement.to),this.createY(this.container,this.measurement.from,this.measurement.to)),this.nodeMeter=this.scene.addNode(this.layerIndex,this.container)}this.render()}catch(t){fe.LogError("Try draw meter.",t)}}},{key:"hideMeter",value:function(){this.hideProjections(),this.clearMeter(!1),this.labelBuilder.hideLabel()}},{key:"updateMeasurement",value:function(t){this.measurement=t}},{key:"drawCursor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ht.b.Circle;try{this.clearCursor(!1),this.container.clear();var r=this.scene.viewportToWorld(t);this.meterBuilder.buildCursor(this.container,r,e,n),this.nodeCursor=this.scene.addNode(this.layerIndex,this.container),this.render()}catch(t){fe.LogError("Try draw cursor. \nDetail: ".concat(t))}}},{key:"clearCursor",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=null;try{this.nodeCursor&&(e=this.nodeCursor.GetId(),this.scene.removeItem(this.nodeCursor),this.nodeCursor=null,t&&this.render())}catch(t){var n;fe.LogError("Try clear cursor for nodeId: ".concat(null!==(n=e)&&void 0!==n?n:" is empty",".\nDetail: ").concat(t))}}},{key:"drawMeterWithFitZoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4;this.clearMeter(),this.container.clear(),this.measurement=t;try{var n,r;if(!this.measurement||"visible"!==this.overlay.style.visibility)return void this.render();null!==(n=this.measurement.fromObject)&&void 0!==n&&n.pcbId&&null!==(r=this.measurement.toObject)&&void 0!==r&&r.pcbId?this.zoomToFitBoundObjects(this.measurement.fromObject.pcbId,this.measurement.toObject.pcbId,e):this.zoomToFitBoundRects(this.measurement.from,this.measurement.to,e);var o=this.scene.worldToViewport(this.measurement.from),i=this.scene.worldToViewport(this.measurement.to);this.createXY(this.container,this.measurement.from,this.measurement.to),this.container.isEmpty||this.labelBuilder.showLabel(),"visible"===this.labelBuilder.labelX.style.visibility&&(this.createX(this.container,this.measurement.from,this.measurement.to),this.createY(this.container,this.measurement.from,this.measurement.to)),this.nodeMeter=this.scene.addNode(this.layerIndex,this.container),this.labelBuilder.labelXY||(this.labelBuilder.createLabelX(o,i,this.measurement.x||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelY(o,i,this.measurement.y||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelXY(o,i,this.measurement.xy||0,this.measurement.unitName||"mm")),this.render()}catch(t){fe.LogError("Try draw meter with Fit To Zoom. \nDetail: ".concat(t))}}},{key:"zoomToFitBoundObjects",value:function(t,e,n){var r=this.parentScene.getNodeItemById(t),o=this.parentScene.getNodeItemById(e),i=this.parentScene.getBoundingBoxForItem(r),a=this.parentScene.getBoundingBoxForItem(o),s=this.getMinMaxBoundRects([i,a]),c=[s[0],s[1],s[2]],u=[s[3],s[4],s[5]];this.parentScene.zoomToFit(c,u,n)}},{key:"getMinMaxBoundRects",value:function(t){var e=se(t[0],6),n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5];if(t.forEach((function(t){n>t[0]&&(n=t[0]),r>t[1]&&(r=t[1]),o>t[2]&&(o=t[2]),i<t[3]&&(i=t[3]),a<t[4]&&(a=t[4]),s<t[5]&&(s=t[5])})),n>i){var c=[i,n];n=c[0],i=c[1]}if(r>a){var u=[a,r];r=u[0],a=u[1]}if(o>s){var l=[s,o];o=l[0],s=l[1]}return[n,r,o,i,a,s]}},{key:"zoomToFitBoundRects",value:function(t,e,n){var r=[Math.min(t[0],e[0]),Math.min(t[1],e[1]),0],o=[Math.max(t[0],e[0]),Math.max(t[1],e[1]),0];this.parentScene.zoomToFit(r,o,n)}},{key:"render",value:function(){this.scene.setDirty(!0),this.canvasControl.invalidate()}},{key:"clearMeter",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clearCursor(!1);try{this.nodeMeter&&(this.scene.removeItem(this.nodeMeter),this.nodeMeter=null,t&&this.render())}catch(t){fe.LogError("Try clear meter.\nDetail: ".concat(t))}}}])&&ue(e.prototype,n),r&&ue(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var me=window.__CORE__.createLogger("MeterController"),ve=new Uint8Array([255,255,190,190]),ye=new Uint8Array([255,255,255,110]),ge=function(){function t(e){var n,r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),pe(this,"highlightNodeItem",null),pe(this,"highlightAdd",null),pe(this,"highlightRemove",null),pe(this,"highlightId",null),pe(this,"selectionIds",new Map),pe(this,"selectionNodeItems",[]),pe(this,"scene",void 0),pe(this,"parentScene",void 0),pe(this,"cx",void 0),pe(this,"layerIndex",void 0),pe(this,"selectionMaterial",void 0),pe(this,"highlightMaterial",void 0),this.scene=e,this.parentScene=null!==(n=e.parentScene)&&void 0!==n?n:e,this.initSelectionOptions(),this.scene.on("beforeRender",(function(t){return r.handleHighlight()}))}var e,n,r;return e=t,(n=[{key:"initSelectionOptions",value:function(){this.layerIndex=this.scene.layerMap.GetLayersCount()-1,this.selectionMaterial=this.scene.addMaterial(new vt.a(ve,yt.b.None,!1,!1,!1)),this.highlightMaterial=this.scene.addMaterial(new vt.a(ye,yt.b.None,!1,!1,!1))}},{key:"handleHighlight",value:function(){var t=!1;try{try{if(this.highlightRemove&&(this.scene.removeItem(this.highlightRemove),this.highlightNodeItem=null,this.highlightRemove=null,t=!0),this.highlightAdd&&!this.selectionIds.has(this.highlightAdd.pcbId)){var e=this.createHighlightNode(this.highlightAdd.pcbId);e&&(this.highlightNodeItem=e,this.highlightId=this.highlightAdd.pcbId,t=!0),this.highlightAdd=null}}catch(t){me.LogError("Try handle highlight.",t)}}finally{t&&this.scene.setDirty(!0)}}},{key:"addSelection",value:function(t){if(!t)return me.LogWarn("Try add empty selected object"),null;try{var e=this.parentScene.getNodeItemById(t.pcbId);if(!e)return null;var n=this.parentScene.cloneNodeItemToLayer(e,this.layerIndex,this.selectionMaterial,0,this.scene);return this.selectionNodeItems.push(n),this.selectionIds.set(t.pcbId,t),this.selectionNodeItems.push(n),n}catch(e){var r=JSON.stringify(t);return me.LogError("Try add selected object: ".concat(r,". \nDetail: ").concat(e)),null}}},{key:"clear",value:function(){var t=this;try{this.clearHighlight(),this.selectionNodeItems.forEach((function(e){e&&t.scene.removeItem(e)})),this.selectionIds.clear(),this.selectionNodeItems.length=0}catch(t){me.LogError("Try clear selected objects.")}this.scene.setDirty(!0)}},{key:"createHighlightNode",value:function(t){try{var e=this.parentScene.getNodeItemById(t);return e?this.parentScene.cloneNodeItemToLayer(e,this.layerIndex,this.highlightMaterial,0,this.scene):null}catch(e){return me.LogError("Try create highlight node for pcbId = ".concat(t,".")),null}}},{key:"addHighlight",value:function(t){this.highlightId!==t.pcbId&&(this.selectionIds.has(t.pcbId)||(this.highlightAdd=t))}},{key:"clearHighlight",value:function(){this.highlightId=null,this.highlightRemove=this.highlightNodeItem}}])&&he(e.prototype,n),r&&he(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),be=n(44);function we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oe(t,e,n){return e&&_e(t.prototype,e),n&&_e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xe="abcdefghijklmopqrstuvwxyz0123456789",Ce=function(){function t(e){we(this,t),Se(this,"length",void 0),Se(this,"history",void 0),this.length="number"==typeof e?e:t.DEFAULT_LENGTH,this.history=[]}return Oe(t,[{key:"set",value:function(t){this.history.length==this.length&&this.history.pop();var e=Ee.create(t);return this.history.unshift(e),e.id}},{key:"get",value:function(t){var e=this.history.find((function(e){return e.id==t}));return e&&e.value}},{key:"delete",value:function(t){this.history=this.history.filter((function(e){return e.id!==t}))}},{key:"forEach",value:function(t){this.history.forEach(t)}},{key:"toTop",value:function(t){if(this.get.call(this,t)){var e=this.history.findIndex((function(e){return e.id===t}));e>0&&this.history.unshift(this.history.splice(e,1)[0])}}},{key:"values",value:function(){return this.history.map((function(t){return t.value}))}},{key:"getId",value:function(t){return t<this.history.length?this.history[t].id:null}}]),t}();Se(Ce,"DEFAULT_LENGTH",1/0);var Ee=function(){function t(e,n){we(this,t),this.id=e,this.value=n}return Oe(t,null,[{key:"create",value:function(e){return new t(function(t){for(var e,n,r="",o=0;o<t;o++){var i=(n=xe.length,(e=0)+Math.floor(Math.random()*(n-e)));r+=xe.substring(i,i+1)}return r}(10),e)}}]),t}(),ke=n(106);function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Pe,je={},Ae=function(t){return(t.composedPath&&t.composedPath()||[]).findIndex((function(t){return t.id&&"labelXY"===t.id}))>-1},Me=function(t){return t.checkSnappingPoint([t.clientX,t.clientY])},Le=function(t){return(null==t?void 0:t.getMeasurementMode())===ht.c.ObjectToObject};je.IDLE=[{to:"CAPTURED",where:function(t){return["mousedown"===t.type]}},{to:"CAPTURED",where:function(t){return["touchstart"===t.type&&1==t.touches.length]}},{to:"2D/BOARD_ZOOMS",where:function(t){return["wheel"===t.type]}},{to:"2D/MOUSE_MOVES",where:function(t){return["mousemove"===t.type&&!Me(t)]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}}],je["2D/MOUSE_MOVES"]=[].concat(function(t){if(Array.isArray(t))return Te(t)}(Pe=je.IDLE)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(Pe)||function(t,e){if(t){if("string"==typeof t)return Te(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(t,e):void 0}}(Pe)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{to:"2D/MOUSE_LEAVE",where:function(t){return["mouseleave"===t.type]}},{to:"SNAPPING_START",where:function(t){return["mousemove"===t.type&&Me(t)]}}]),je["2D/MOUSE_LEAVE"]=je.IDLE,je.SNAPPING_START=je["2D/MOUSE_MOVES"],je.CAPTURED=[{to:"WILL_MEASURE",where:function(t){return["click"===t.type,!Ae(t)]}},{to:"WILL_MEASURE",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}},{to:"TOGGLE",where:function(t){return["click"===t.type,Ae(t)]}},{to:"2D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type]}}],je.WILL_MEASURE=[{to:"MEASURING",where:function(t){return["mousemove"===t.type&&!Me(t)&&t.buttons===ke.a.None]}},{to:"MEASURING",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}},{to:"CANCELED",where:function(t){return["keydown"===t.type,27===t.keyCode]}},{to:"CANCELED",where:function(t){return["touchend"===t.type]}},{to:"CANCELED",where:function(t){return["Canceled"===t.type]}}],je.MEASURING=[{to:"MEASURING",where:function(t){return["mousemove"===t.type&&!Me(t)&&t.buttons===ke.a.None]}},{to:"MEASURING",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}},{to:"MEASURING_ZOOMS",where:function(t){return["wheel"===t.type]}},{to:"SNAPPING_END",where:function(t){return["mousemove"===t.type&&Me(t)]}},{to:"DID_MEASURE",where:function(t){return["click"===t.type,t.button===v.b.Left,!Le(t)]}},{to:"DID_MEASURE",where:function(t){return["touchend"===t.type,!Le(t)]}},{to:"CALCULATE_MEASURE",where:function(t){return["click"===t.type,t.button===v.b.Left,Le(t)]}},{to:"CALCULATE_MEASURE",where:function(t){return["touchend"===t.type,Le(t)]}},{to:"CANCELED",where:function(t){return["mouseup"===t.type,t.button===v.b.Right]}},{to:"CANCELED",where:function(t){return["keydown"===t.type,27===t.keyCode]}},{to:"CANCELED",where:function(t){return["Canceled"===t.type]}},{to:"PAN_MEASURE",where:function(t){return["mousemove"===t.type&&(0!=(t.buttons&ke.a.Left)||0!=(t.buttons&ke.a.Right))]}},{to:"2D/MOUSE_LEAVE",where:function(t){return["mouseleave"===t.type&&Le(t)]}}],je.CALCULATE_MEASURE=[{to:"OTO_DID_MEASURE",where:function(t){return["OtoCalculated"===t.type]}},{to:"CANCELED",where:function(t){return["Canceled"===t.type]}}],je.PAN_MEASURE=[{to:"PAN_MEASURE",where:function(t){return["mousemove"===t.type&&(0!=(t.buttons&ke.a.Left)||0!=(t.buttons&ke.a.Right))]}},{to:"DID_PAN_MEASURE",where:function(t){return["mouseup"===t.type,t.button===v.b.Right||t.button===v.b.Left]}},{to:"DID_PAN_MEASURE",where:function(t){return["mouseleave"===t.type]}}],je.DID_PAN_MEASURE=[{to:"MEASURING",where:function(t){return["mousemove"===t.type&&!Me(t)&&t.buttons===ke.a.None]}},{to:"MEASURING",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"MEASURING_ZOOMS",where:function(t){return["wheel"===t.type]}}],je.MEASURING_ZOOMS=[{to:"MEASURING_ZOOMS",where:function(t){return["wheel"===t.type]}},{to:"MEASURING",where:function(t){return["mousemove"===t.type&&!Me(t)]}},{to:"MEASURING",where:function(t){return["touchmove"===t.type&&1==t.touches.length]}},{to:"SNAPPING_END",where:function(t){return["mousemove"===t.type&&Me(t)]}},{to:"DID_MEASURE",where:function(t){return["click"===t.type,t.button===v.b.Left]}}],je.SNAPPING_END=je.MEASURING,je.DID_MEASURE=je.IDLE,je.OTO_DID_MEASURE=je.IDLE,je["2D/BOARD_TRANSLATES"]=[{to:"2D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(t){return["mouseup"===t.type,t.button===v.b.Right||t.button===v.b.Left]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(t){return["mouseleave"===t.type]}}],je["2D/BOARD_ZOOMS"]=je.IDLE,je["2D/BOARD_DID_TRANSLATE"]=je.IDLE,je.TOGGLE=je.IDLE,je.CANCELED=je.IDLE,je["2D/TOUCH_END"]=je.IDLE,je["2D/TOUCH_START"]=[{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type]}},{to:"2D/TOUCH_MOVE",where:function(t){return["touchmove"===t.type&&t.touches.length>1]}},{to:"2D/TOUCH_END",where:function(t){return["touchend"===t.type]}}],je["2D/TOUCH_MOVE"]=[{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type&&t.touches.length>1]}},{to:"2D/TOUCH_MOVE",where:function(t){return["touchmove"===t.type&&t.touches.length>1]}},{to:"2D/TOUCH_END",where:function(t){return["touchend"===t.type]}}];var Ie=n(93),De=n(39);function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Be=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(this,"bus",void 0),Ne(this,"eventListeners",void 0),this.bus=e,this.eventListeners=[]}var e,n,r;return e=t,(n=[{key:"once",value:function(t,e){this.eventListeners.push({eventName:t,listener:e}),this.bus.once(t,e)}},{key:"on",value:function(t,e){this.eventListeners.push({eventName:t,listener:e}),this.bus.on(t,e)}},{key:"off",value:function(t,e){this.bus.off(t,e);var n=this.eventListeners.findIndex((function(n){return(null==n?void 0:n.eventName)==t&&(null==n?void 0:n.listener)==e}));this.eventListeners[n]=null}},{key:"removeAllListeners",value:function(){var t=this;this.eventListeners.filter((function(t){return t})).forEach((function(e){return t.bus.off(e.eventName,e.listener)})),this.eventListeners=[]}}])&&Re(e.prototype,n),r&&Re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $e(t,e){return($e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=He(t);if(e){var o=He(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(t,e){if(e&&("object"===Fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ze(t)}function ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function We(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ye=window.__CORE__,qe=Ye.createLogger("MeterController"),Xe=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Ye&&(e=Ye.bus).emit.apply(e,[t].concat(r))},Ze=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$e(t,e)}(i,t);var e,n,r,o=Ge(i);function i(t,e,n,r){var a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),We(ze(s=o.call(this,"IDLE",je)),"scene",void 0),We(ze(s),"renderer",void 0),We(ze(s),"measurements",void 0),We(ze(s),"screenMeasurement",void 0),We(ze(s),"currentID",void 0),We(ze(s),"isSelected",void 0),We(ze(s),"measurementUnit",ht.d.mm),We(ze(s),"measurementMode",ht.c.Free),We(ze(s),"clicked",void 0),We(ze(s),"pcbView",void 0),We(ze(s),"cursorStyle",void 0),We(ze(s),"snappingPoint",{point:null,cursor:ht.b.Cross}),We(ze(s),"viewId",void 0),We(ze(s),"engineId",void 0),We(ze(s),"otoController",void 0),We(ze(s),"otoRenderer",void 0),We(ze(s),"svgCursorBuilder",void 0),We(ze(s),"eventBusListeners",void 0),We(ze(s),"onIdle",(function(){s.screenMeasurement.from=[0,0],s.screenMeasurement.to=[0,0]})),We(ze(s),"selectMeasurement",(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=s.getMeasureById(t);if(n){s.measurements.toTop(t);var r=s.measurements.values()[0];Object.assign(r,n),s.otoRenderer.clear(),r.mode===ht.c.ObjectToObject&&(r.fromObject&&s.otoRenderer.addSelection(r.fromObject),r.toObject&&s.otoRenderer.addSelection(r.toObject));var o=function(){e?s.renderer.drawMeterWithFitZoom(r):s.renderer.drawMeter([r])};if(s.measurementMode===r.mode)s.renderer.setMeterBuilder(s.measurementMode),o();else{var i=s.measurementMode;s.renderer.setMeterBuilder(r.mode),o(),s.renderer.setMeterBuilder(i),s.measurementMode=i}}else qe.LogError("Measurement with id:".concat(t," is empty."))})),We(ze(s),"onWillMeasure",(function(t){switch(s.measurementMode){case ht.c.Free:s.freeWillMeasure(t);break;case ht.c.PointToPoint:s.ptpWillMeasure(t);break;case ht.c.ObjectToObject:s.otoWillMeasure(t)}})),We(ze(s),"freeWillMeasure",(function(t){try{s.svgCursorBuilder.setCursor(ht.b.None),t instanceof MouseEvent?s.screenMeasurement.from=[t.clientX,t.clientY]:(s.screenMeasurement.from=[t.touches[0].clientX,t.touches[0].clientY],s.touchStart(t));var e=s.scene.viewportToWorld(s.screenMeasurement.from),n=[e[0],e[1],0];"number"==typeof e[2]&&(n[2]=e[2]),s.currentID=s.measurements.set({from:n,to:n,withProjection:!1,mode:s.measurementMode}),s.renderer.drawMeter(s.measurements.values()),s.renderer.hideProjections(),Xe("".concat(s.engineId,":willMeasure"),s.currentID,{from:n,unit:s.unit,mode:s.measurementMode}),s.clicked=!1}catch(t){s.state="2D/MOUSE_MOVES",qe.LogWarn("MeterController could not go to the WillMeasure state.")}})),We(ze(s),"ptpWillMeasure",(function(t){try{s.cursorStyle=s.pcbView.style.cursor,s.svgCursorBuilder.setCursor(ht.b.None),s.renderer.clearCursor(),s.otoRenderer.clear(),s.snappingPoint.point?s.screenMeasurement.from=s.snappingPoint.point:t instanceof MouseEvent?s.screenMeasurement.from=[t.clientX,t.clientY]:(s.screenMeasurement.from=[t.touches[0].clientX,t.touches[0].clientY],s.touchStart(t));var e=s.scene.viewportToWorld(s.screenMeasurement.from),n=[e[0],e[1],0];"number"==typeof e[2]&&(n[2]=e[2]),s.currentID=s.measurements.set({from:n,to:n,withProjection:!1,mode:s.measurementMode}),s.renderer.drawMeter(s.measurements.values()),s.renderer.hideProjections(),Xe("".concat(s.engineId,":willMeasure"),s.currentID,{from:n,unit:s.unit,mode:s.measurementMode}),s.clicked=!1}catch(t){s.state="2D/MOUSE_MOVES",qe.LogWarn("MeterController could not go to the WillMeasure state.")}})),We(ze(s),"otoWillMeasure",(function(t){try{s.otoRenderer.clear(),t instanceof MouseEvent?s.screenMeasurement.from=[t.clientX,t.clientY]:(s.screenMeasurement.from=[t.touches[0].clientX,t.touches[0].clientY],s.touchStart(t));var e=s.scene.viewportToWorld(s.screenMeasurement.from),n=[e[0],e[1],0];"number"==typeof e[2]&&(n[2]=e[2]),s.renderer.hideMeter();var r=s.otoController.getPrimitiveByPos(n);if(r)if(s.currentID=s.measurements.set({from:n,fromObject:r,to:n,withProjection:!1,mode:s.measurementMode}),s.otoRenderer.addSelection(r))return s.renderer.render(),Xe("".concat(s.engineId,":willMeasure"),s.currentID,{from:n,fromObject:r,unit:s.unit,mode:s.measurementMode}),void(s.clicked=!1);s.state="2D/MOUSE_MOVES"}catch(t){s.state="2D/MOUSE_MOVES",qe.LogWarn("MeterController could not go to the WillMeasure state.")}})),We(ze(s),"onMeasuring",(function(t){var e=t instanceof MouseEvent?[t.clientX,t.clientY]:[t.touches[0].clientX,t.touches[0].clientY];s.isOtoMode?s.otoMeasuring(e):s.measuring(e)})),We(ze(s),"onCalculateMeasurement",(function(){var t=s.measurements.get(s.currentID);if(!t)return qe.LogWarn("onCalculateMeasurement: Not found measurement."),void s.dispatch(new be.b("Canceled"));var e=null,n=null;try{var r;if((e=s.otoController.getPrimitiveByPos(t.to))&&e.pcbId!==(null===(r=t.fromObject)||void 0===r?void 0:r.pcbId)){if(s.svgCursorBuilder.setCursor(ht.b.Wait),t.toObject=e,s.renderer.hideMeter(),s.otoRenderer.addSelection(e),s.renderer.render(),"Failed"===(n=s.getOtoDistance(t)).state){var o=JSON.stringify(e),i=JSON.stringify(t.fromObject);qe.LogWarn("Calculate distance is failed.\nObject 1: ".concat(o,".\nObject 2: ").concat(i)),s.dispatch(new be.b("Canceled"))}}else{s.state="MEASURING";var a=e?"It is not allowed to select the same object: ".concat(JSON.stringify(e)):"ToObject is empty";qe.LogWarn("MeterController could not go to the DidMeasure state. \n".concat(a))}}catch(r){var c;t.toObject=void 0,s.state="MEASURING";var u=e?JSON.stringify(e):"is empty",l=n?JSON.stringify(n):"is empty",f="An attempt to switch to the DidMeasure state caused an error: ".concat(null!==(c=null==r?void 0:r.message)&&void 0!==c?c:"")+"\nToObject: ".concat(u,"; \nDistance Info: ").concat(l);qe.LogError(f)}})),We(ze(s),"onDidMeasure",(function(){var t=s.measurements.get(s.currentID);Xe("".concat(s.engineId,":didMeasure"),s.currentID,{to:t.to,x:t.x,y:t.y,xy:null==t?void 0:t.xy,unit:s.unit,mode:s.measurementMode}),s.measurementMode===ht.c.Free?s.svgCursorBuilder.setCursor(ht.b.Cross):s.svgCursorBuilder.setCursor(ht.b.None),s.currentID=void 0})),We(ze(s),"onOtoDidMeasure",(function(){try{var t=s.measurements.get(s.currentID);s.renderer.drawMeter(s.measurements.values()),Xe("".concat(s.engineId,":didMeasure"),s.currentID,{to:t.to,toObject:t.toObject,x:t.x,y:t.y,xy:null==t?void 0:t.xy,unit:s.unit,mode:s.measurementMode})}catch(t){qe.LogError("onOtoDidMeasure error: ".concat(t.message))}finally{s.setDeafaultCursor(),s.currentID=void 0}})),We(ze(s),"onCanceled",(function(t){s.setDeafaultCursor(),s.currentID&&s.clearMeter(s.currentID),s.otoRenderer.clear(),s.renderer.hideMeter(),s.currentID=void 0,Xe("".concat(s.engineId,":cancelMeasure"),s.currentID,{from:[0,0],unit:s.unit}),s.renderer.render(),null!=t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())})),We(ze(s),"mouseMoves",(function(t){if(s.isOtoMode){s.otoRenderer.clearHighlight(),s.screenMeasurement.to=t;var e=s.scene.viewportToWorld(s.screenMeasurement.to),n=[e[0],e[1],0],r=s.otoController.getPrimitiveByPos(n);r&&s.otoRenderer.addHighlight(r)}s.measurementMode===ht.c.PointToPoint&&s.renderer.drawCursor(t)})),We(ze(s),"on2DMouseMoves",(function(t){s.mouseMoves([t.clientX,t.clientY])})),We(ze(s),"onPanMeasure",(function(t){s.scene.cameraController.MouseDown(v.b.Right,t.clientX,t.clientY),s.scene.cameraController.MouseMove(t.clientX,t.clientY),s.renderer.render()})),We(ze(s),"onDidPanMeasure",(function(t){s.scene.cameraController.MouseUp(v.b.Right,t.clientX,t.clientY),s.renderer.render()})),We(ze(s),"on2DMouseLeave",(function(t){"MEASURING"===s.prevstate&&s.onCanceled(t),s.renderer.clearCursor()})),We(ze(s),"onSnappingStart",(function(t){s.snappingPoint.point?s.renderer.drawCursor(s.snappingPoint.point,!0,s.snappingPoint.cursor):s.renderer.drawCursor([t.clientX,t.clientY])})),We(ze(s),"onSnappingEnd",(function(t){s.snappingPoint.point&&(s.measuring(s.snappingPoint.point,!0),s.renderer.drawCursor(s.snappingPoint.point,!0,s.snappingPoint.cursor))})),We(ze(s),"onZoomMeasuring",(function(t){var e=s.scene.cameraController;e.MouseMove(t.clientX,t.clientY),e.MouseWheel(Math.sign(-t.deltaY)),s.isOtoMode||s.renderer.drawMeter(s.measurements.values())})),We(ze(s),"onBoardZoom",(function(t){s.isOtoMode||s.render(),s.measurementMode===ht.c.PointToPoint&&s.renderer.drawCursor([t.clientX,t.clientY],!1)})),We(ze(s),"touchStart",(function(t){t.touches&&(s.scene.cameraController.TouchStart(t.touches),s.renderer.render(),t.preventDefault(),t.stopPropagation())})),We(ze(s),"touchMove",(function(t){s.scene.cameraController.TouchMove(t.touches),s.renderer.render(),t.preventDefault(),t.stopPropagation()})),We(ze(s),"touchEnd",(function(t){s.scene.cameraController.TouchEnd(t.touches),s.renderer.render(),t.preventDefault(),t.stopPropagation()})),s.viewId=r,s.engineId=null!==(a=ht.e.get(r))&&void 0!==a?a:"PcbEngine",s.scene=t,s.renderer=e,s.otoController=n,s.measurements=new Ce,s.screenMeasurement={from:[0,0],to:[0,0]},s.clicked=!1,s.otoRenderer=new ge(t),s.isSelected=!1,s.updateMeasurementUnitFromStorage(),s.pcbView=document.querySelector('[data-view="'.concat(s.viewId,'"]')),s.svgCursorBuilder=new ae(s.pcbView),s.eventBusListeners=new Be(Ye.bus),s.prependListener("#Transition",(function(t){})).on("IDLE",s.onIdle).on("WILL_MEASURE",s.onWillMeasure).on("MEASURING",s.onMeasuring).on("DID_MEASURE",s.onDidMeasure).on("CALCULATE_MEASURE",s.onCalculateMeasurement).on("OTO_DID_MEASURE",s.onOtoDidMeasure).on("CANCELED",s.onCanceled).on("TOGGLE",(function(){s.clicked?(s.renderer.hideProjections(),s.clicked=!1):(s.renderer.showProjections(),s.clicked=!0)})).on("2D/BOARD_DID_TRANSLATE",(function(){return s.render()})).on("2D/BOARD_ZOOMS",s.onBoardZoom).on("2D/MOUSE_MOVES",s.on2DMouseMoves).on("2D/MOUSE_LEAVE",s.on2DMouseLeave).on("SNAPPING_START",s.onSnappingStart).on("SNAPPING_END",s.onSnappingEnd).on("MEASURING_ZOOMS",s.onZoomMeasuring).on("PAN_MEASURE",s.onPanMeasure).on("DID_PAN_MEASURE",s.onDidPanMeasure).on("2D/TOUCH_START",s.touchStart).on("2D/TOUCH_MOVE",s.touchMove).on("2D/TOUCH_END",s.touchEnd).on("CAPTURED",s.touchStart),s.eventBusListeners.on("Measurement:clear",(function(t){return s.clearMeter(t)})),s.eventBusListeners.on("Measurement:clearAll",(function(){return s.clearAll()})),s.eventBusListeners.on("Measurement:showProjection",(function(){return s.renderer.hideProjections()})),s.eventBusListeners.on("Measurement:hideProjection",(function(){return s.renderer.showProjections()})),s.eventBusListeners.on("Measurement:activate",(function(){s.renderer.activate(),s.setStateMachineData(),s.setDeafaultCursor();var t=s.measurements.getId(0);t&&s.selectMeasurement(t,!1)})),s.eventBusListeners.on("Measurement:deactivate",(function(){s.renderer.deactivate(),s.otoRenderer.clear(),s.clicked=!1,s.svgCursorBuilder.setCursor(ht.b.Default)})),s.eventBusListeners.on("Measurement:select",(function(t){return s.selectMeasurement(t)})),s.eventBusListeners.on("HelpPanel:changeUnit",(function(t){s.updateMeasurementUnitFromStorage(t);var e=s.measurements.values()[0];e&&(Object.assign(e,s.getMeasure(e.from,e.to)),s.renderer.updateMeasurement(e))})),s.eventBusListeners.on("Measurement:changeMode",(function(t){s.dispatch(new be.b("Canceled")),s.onCanceled(),t&&(s.measurementMode=t.id,s.setStateMachineData(),s.setDeafaultCursor())})),s.eventBusListeners.on("SupportLibrary:getOtoDistanceResult",(function(t){return s.handleOtoDistanceResult(t)})),s.setStateMachineData(),s}return e=i,r=[{key:"getXOYProjection",value:function(t,e,n){var r=-e[2]/n[2];return[e[0]+r*n[0],e[1]+r*n[1],e[2]+r*n[2]]}}],(n=[{key:"dispose",value:function(){Ye.bus.emit("Measurement:clearMeasurements"),this.removeAllListeners(),this.eventBusListeners.removeAllListeners(),this.renderer.dispose()}},{key:"setStateMachineData",value:function(){var t=this;this.setDataTransfer({getMeasurementMode:function(){return t.measurementMode},checkSnappingPoint:function(e){return t.checkSnappingPoint(e)}})}},{key:"setDeafaultCursor",value:function(){switch(this.measurementMode){case ht.c.Free:this.svgCursorBuilder.setCursor(ht.b.Cross);break;case ht.c.ObjectToObject:this.svgCursorBuilder.setCursor(ht.b.Box);break;default:this.svgCursorBuilder.setCursor(ht.b.None)}}},{key:"isOtoMode",get:function(){return this.measurementMode===ht.c.ObjectToObject}},{key:"unit",get:function(){var t="GerberView"===this.viewId?100:1;switch(this.measurementUnit){case 0:return{k:2.54/t,name:"mm"};case 1:return{k:100/t,name:"mil"};default:return{k:1,name:""}}}},{key:"updateMeasurementUnitFromStorage",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=null!==(t=Ie.a.get())&&void 0!==t?t:"mm"),this.measurementUnit="mil"===e?ht.d.mil:ht.d.mm}},{key:"checkSnappingPoint",value:function(t){if(this.measurementMode!==ht.c.PointToPoint)return!1;var e={point:this.scene.viewportToWorld(t),result:{},snapped:!1};return Xe("Snapping:checkPoint",e),e.snapped?(this.snappingPoint.point=this.scene.worldToViewport(e.result.point),this.snappingPoint.cursor=e.result.cursor):(this.snappingPoint.point=null,this.snappingPoint.cursor=ht.b.Cross),e.snapped}},{key:"measuring",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.renderer.clearCursor(),this.screenMeasurement.to=t;var n=this.scene.viewportToWorld(this.screenMeasurement.to),r=[n[0],n[1],0];if("number"==typeof n[2]&&(r[2]=n[2]),this.currentID){var o=this.measurements.get(this.currentID);o.to=r,Object.assign(o,this.getMeasureById(this.currentID)),this.renderer.drawMeter(this.measurements.values(),e,this.snappingPoint.cursor),Xe("".concat(this.engineId,":measuring"),this.currentID,{to:r,x:null==o?void 0:o.x,y:null==o?void 0:o.y,xy:null==o?void 0:o.xy})}}},{key:"otoMeasuring",value:function(t){var e;if(this.currentID){this.renderer.clearCursor(),this.screenMeasurement.to=t;var n=this.scene.viewportToWorld(this.screenMeasurement.to),r=[n[0],n[1],0],o=this.measurements.get(this.currentID);o.to=r;var i=this.otoController.getPrimitiveByPos(r);i&&i.pcbId!==(null==o||null===(e=o.fromObject)||void 0===e?void 0:e.pcbId)?(Object.assign(o,this.getMeasureById(this.currentID)),this.otoRenderer.clearHighlight(),this.otoRenderer.addHighlight(i),Xe("".concat(this.engineId,":measuring"),this.currentID,{to:r,x:null==o?void 0:o.x,y:null==o?void 0:o.y,xy:null==o?void 0:o.xy})):this.otoRenderer.clearHighlight()}}},{key:"getOtoDistance",value:function(t){var e,n,r,o,i=[],a=null==t||null===(e=t.fromObject)||void 0===e?void 0:e.pcbId,s=null==t||null===(n=t.toObject)||void 0===n?void 0:n.pcbId;(null===(r=t.fromObject)||void 0===r?void 0:r.kind)===De.a.EmbeddedBoard&&i.push(a),(null===(o=t.toObject)||void 0===o?void 0:o.kind)===De.a.EmbeddedBoard&&i.push(s);var c={id1:a,id2:s,units:this.measurementUnit,allLayersIds:i};return Ye.bus.emit("SupportLibrary:getOtoDistance",c),c.result}},{key:"handleOtoDistanceResult",value:function(t){try{"Completed"!==t.state&&(qe.LogError("getOtoDistance failed"),this.dispatch(new be.b("Canceled")));var e=this.measurements.get(this.currentID);e.from=t.point1,e.to=t.point2,Object.assign(e,this.getMeasure(e.from,e.to)),this.dispatch({type:"OtoCalculated"})}catch(t){qe.LogError("Handle OtoDistanceResult error: ".concat(t.message)),this.dispatch(new be.b("Canceled"))}finally{this.pcbView.style.cursor=this.cursorStyle}}},{key:"getMeasureById",value:function(t){var e=this.measurements.get(t);if(!e)return null;var n=e.from,r=e.to;return this.getMeasure(n,r)}},{key:"getMeasure",value:function(t,e){var n,r,o=this.unit,i=o.k,a=o.name,s=null!==(n=t[2])&&void 0!==n?n:0,c=null!==(r=e[2])&&void 0!==r?r:0;return{x:Math.abs(t[0]-e[0])*i,y:Math.abs(t[1]-e[1])*i,xy:i*Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(s-c,2)),unitName:a}}},{key:"clearMeter",value:function(t){this.measurements.delete(t),this.isOtoMode?this.renderer.clearMeter():this.renderer.drawMeter(this.measurements.values()),this.otoRenderer.clear()}},{key:"clearAll",value:function(){var t=this;this.measurements.forEach((function(e){return t.measurements.delete(e.id)})),this.isOtoMode?(this.otoRenderer.clear(),this.renderer.hideMeter(),this.renderer.render()):this.renderer.drawMeter(this.measurements.values())}},{key:"render",value:function(){this.isOtoMode||this.renderer.drawMeter(this.measurements.values())}}])&&Ue(e.prototype,n),r&&Ue(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(d.a),Ke=n(239);function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tn=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Qe(this,"scene",void 0),Qe(this,"metadataRepository",Ke.a.instance),this.scene=null!==(n=e.parentScene)&&void 0!==n?n:e}var e,n,r;return e=t,(n=[{key:"getPrimitiveByPos",value:function(t){var e=this,n=this.scene.getNodeItemsAtPoint(t,this.scene.renderOptions).map((function(t){return e.metadataRepository.getPrimitiveById(t.GetId())})).filter((function(t){return t&&ht.f.has(Object(De.b)(t.kind))}));return null!=n&&n.length?(1===n.length||n.sort((function(t,n){var r=Object(De.b)(t.kind),o=Object(De.b)(n.kind);return e.getSortValue(r)-e.getSortValue(o)})),n[0]):null}},{key:"getSortValue",value:function(t){var e=1e4;switch(t){case De.a.Via:e=100;break;case De.a.Pad:e=200;break;case De.a.Track:e=300;break;case De.a.Arc:e=400;break;case De.a.Fill:e=500;break;case De.a.Region:e=600;break;case De.a.Poly:e=700;break;default:e=999}return e}}])&&Je(e.prototype,n),r&&Je(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"create",value:function(){return new t}}],(n=[{key:"cretateMeterController",value:function(t,e,n,r){var o=this.createOverlayScene(e),i=new de(t,o,n),a=new tn(o);return new Ze(o,i,a,r)}},{key:"createOverlayScene",value:function(t){return t.createOverlayScene("PCB_2D_Measurment_Scene",[{name:"Default_Measurement_Layer",z_range:[-1,1],is_keepout:!1,is_inverted:!1,is_cutout:!1,is_barrel:!1,show3d:!1}],[])}}])&&en(e.prototype,n),r&&en(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function on(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var an=window.__CORE__,sn=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),on(this,"zoomPrecision",100),on(this,"workspace",void 0),on(this,"renderer",void 0),on(this,"scene2d",void 0),on(this,"renderDocumentData",null),on(this,"logger",void 0),on(this,"eventBusListeners",void 0),on(this,"onTransformUpdate",void 0),this.renderer=e,this.workspace=n,this.logger=an.createLogger("PcbSvgOverlay"),this.onSetScenes=this.onSetScenes.bind(this),e.on("setScenes",this.onSetScenes),this.onSceneSizeChanged=this.onSceneSizeChanged.bind(this),this.onRenderModeChanged=this.onRenderModeChanged.bind(this),this.onSceneTransformed=this.onSceneTransformed.bind(this),this.eventBusListeners=new Be(an.bus),this.eventBusListeners.on("PcbEngine:renderDocumentData",(function(t){return t.renderDocumentData=r.renderDocumentData})),this.eventBusListeners.on("GerberEngine:renderDocumentData",(function(t){return t.renderDocumentData=r.renderDocumentData}))}var e,n,o;return e=t,(n=[{key:"dispose",value:function(){this.renderer.off("setScenes",this.onSetScenes),this.renderer.off("modeChanged",this.onRenderModeChanged),this.renderer.off("transformScene",this.onSceneTransformed),this.scene2d.off("resized",this.onSceneSizeChanged),this.eventBusListeners.removeAllListeners()}},{key:"onSetScenes",value:function(t){t.scene2d?(this.scene2d=t.scene2d,this.renderer.on("modeChanged",this.onRenderModeChanged),this.renderer.on("transformScene",this.onSceneTransformed),this.addOverlay(),this.renderDocumentData.svg.style.display="none",this.renderDocumentData.scene2d=t.scene2d,t.mode===r.b.Render2D&&(this.renderDocumentData.svg.style.display="",this.onSceneSizeChanged(this.scene2d.getSize()),this.scene2d.on("resized",this.onSceneSizeChanged))):this.logger.LogWarn("2D scene has not defined")}},{key:"onRenderModeChanged",value:function(t){switch(t){case r.b.Render2D:return this.renderDocumentData.svg.style.display="",this.onSceneSizeChanged(this.scene2d.getSize()),void this.scene2d.on("resized",this.onSceneSizeChanged);case r.b.Render3D:return this.renderDocumentData.svg.style.display="none",void this.scene2d.off("resized",this.onSceneSizeChanged)}}},{key:"onSceneSizeChanged",value:function(t){this.renderDocumentData.svg.setAttribute("width","".concat(t.width)),this.renderDocumentData.svg.setAttribute("height","".concat(t.height))}},{key:"onSceneTransformed",value:function(t){if(t.mode===r.b.Render2D){var e=this.scene2d.viewportToWorld([0,0]),n=this.scene2d.viewportToWorld([0,this.zoomPrecision]),o=this.scene2d.viewportToWorld([this.zoomPrecision,0]),i=1/Math.abs(e[0]-o[0]),a=1/Math.abs(e[1]-n[1]),s=this.scene2d.worldToViewport([0,0]);this.renderer.flipped?this.renderDocumentData.overlay.setAttribute("transform","matrix(".concat(-i," 0 0 ").concat(a," ").concat(s[0]," ").concat(s[1],")")):this.renderDocumentData.overlay.setAttribute("transform","matrix(".concat(i," 0 0 ").concat(a," ").concat(s[0]," ").concat(s[1],")")),this.onTransformUpdate&&this.onTransformUpdate()}}},{key:"addOverlay",value:function(){this.renderDocumentData={workspace:this.workspace,renderer:this.renderer};var t=document.getElementById("aov365_pcb_graphic_document_viewer_2D_svg_overlay");this.renderDocumentData.svg=t,this.workspace.appendChild(t);var e=document.createElementNS("http://www.w3.org/2000/svg","style");this.renderDocumentData.styles=e,t.appendChild(e);var n=document.createElementNS("http://www.w3.org/2000/svg","g");this.renderDocumentData.overlay=n;var r=new CustomEvent("didTransformChange",{detail:n.transform});n.didTransformChangeEvent=r,this.onTransformUpdate=function(){return n.dispatchEvent(r)},t.appendChild(n)}}])&&rn(e.prototype,n),o&&rn(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cn=n(339);function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ln=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"createElement",value:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}},{key:"setAttribute",value:function(t,e){for(var n in e)t.setAttribute(n,e[n.toString()]);return t}}],(n=null)&&un(e.prototype,n),r&&un(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),fn=n(452);function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return pn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */mn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==dn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function vn(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function yn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yn(Object(n),!0).forEach((function(e){Cn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wn(t,e){return(wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xn(t);if(e){var o=xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return On(this,n)}}function On(t,e){if(e&&("object"===dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Sn(t)}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var En=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}(c,t);var e,n,o,i,a,s=_n(c);function c(t,e,n,o,i){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Cn(Sn(a=s.call(this)),"renderModeChanged",new fn.a),Cn(Sn(a),"selectionChanged",new fn.a),Cn(Sn(a),"highlightChanged",new fn.a),Cn(Sn(a),"boardMoved3d",new fn.a),Cn(Sn(a),"documentId",void 0),Cn(Sn(a),"canvasControl",void 0),Cn(Sn(a),"scene2d",void 0),Cn(Sn(a),"scene3d",void 0),Cn(Sn(a),"sceneCurrent",void 0),Cn(Sn(a),"overlayRenderer",void 0),Cn(Sn(a),"selectionFactory",void 0),Cn(Sn(a),"renderOptions",void 0),Cn(Sn(a),"cameraController2d",void 0),Cn(Sn(a),"cameraController3d",void 0),Cn(Sn(a),"zoomSensitivity",.1),Cn(Sn(a),"zoomstep",10),Cn(Sn(a),"isBoardMoving",!1),Cn(Sn(a),"rotationEnabled",!0),Cn(Sn(a),"branches",void 0),Cn(Sn(a),"fsm",void 0),Cn(Sn(a),"svg",void 0),Cn(Sn(a),"viewId",void 0),Cn(Sn(a),"simulationManager",void 0),Cn(Sn(a),"svgOverlay",void 0),Cn(Sn(a),"onCanvasControlResized",void 0),Cn(Sn(a),"onCanvasControlInvalidate",void 0),Cn(Sn(a),"onZoomToFitChanged",(function(){})),Cn(Sn(a),"onScene2DResized",(function(){})),Cn(Sn(a),"eventBusListeners",void 0),Cn(Sn(a),"selectionManager2d",void 0),Cn(Sn(a),"selectionManager3d",void 0),Cn(Sn(a),"onInit",(function(){a.branches={"2D":new d.a("2D/IDLE",m.a),"3D":new d.a("3D/IDLE",y),"2D/MEASUREMENT":nn.create().cretateMeterController(a.svg,a.scene2d,a.canvasControl,a.viewId)},a.fsm=new g.a(a.canvasControl.canvas,"IDLE",p.a,a.branches),a.fsm.prependListener(d.a.TRANSITION_EVENT,(function(){})),a.fsm.on("2D",a.on2DIdle).on("3D",a.on3DIdle);var t=void 0;a.branches["2D"].prependListener(d.a.TRANSITION_EVENT,(function(){})).on("2D/IDLE",a.on2DIdle).on("2D/L_BUTTON_IS_PRESSED",a.on2DLeftButtonIsPressed).on("2D/COMPONENT_LAUNCH_SELECTION",(function(e){if(!t){var n=a.get2DElementSelection(e),r=null!=n&&n.selected?280:0;t=setTimeout((function(){a.on2DComponentLaunchSelection(e),t=void 0}),r)}})).on("2D/DBLCLICK",(function(e){clearTimeout(t),t=void 0,setTimeout((function(){return a.on2DComponentLaunchSelection(e,!0)}),0)})).on("2D/MOUSE_MOVES",(function(e){clearTimeout(t),t=void 0,a.cameraController2d.MouseUp(v.b.Left,e.clientX,e.clientY),a.on2DMouseMoves(e)})).on("2D/R_BUTTON_IS_PRESSED",a.on2DRightButtonIsPressed).on("2D/BOARD_TRANSLATES",a.on2DBoardTranslates).on("2D/BOARD_DID_TRANSLATE",a.on2DBoardDidTranslate).on("2D/BOARD_ZOOMS",a.on2DBoardZooms).on("2D/TOUCH_START",a.touchStart).on("2D/TOUCH_MOVE",a.touchMove).on("2D/TOUCH_END",a.touchEnd).on(d.a.TRANSITION_EVENT,(function(t){a.canvasControl.invalidate()})),a.branches["3D"].prependListener(d.a.TRANSITION_EVENT,(function(){})).on("3D/IDLE",a.on3DIdle).on("3D/L_BUTTON_IS_PRESSED",a.on3DLeftButtonIsPressed).on("3D/COMPONENT_LAUNCH_SELECTION",(function(t){return setTimeout((function(){return a.on3DComponentLaunchSelection(t)}),0)})).on("3D/BOARD_ROTATES",a.on3DBoardRotates).on("3D/BOARD_DID_ROTATE",a.on3DBoardDidRotate).on("3D/R_BUTTON_IS_PRESSED",a.on3DRightButtonIsPressed).on("3D/BOARD_TRANSLATES",a.on3DBoardsTranslates).on("3D/BOARD_DID_TRANSLATE",a.on3DBoardDidTranslate).on("3D/BOARD_ZOOMS",a.on3DBoardZooms).on("3D/TOUCH_START",a.touchStart).on("3D/TOUCH_MOVE",a.touchMove).on("3D/TOUCH_END",a.touchEnd).on(d.a.TRANSITION_EVENT,(function(t){a.canvasControl.invalidate()})),a.branches["2D/MEASUREMENT"].on("2D/BOARD_TRANSLATES",(function(t){a.on2DRightButtonIsPressed(t),a.on2DBoardTranslates(t)})).on("2D/BOARD_DID_TRANSLATE",a.on2DBoardDidTranslate).on("2D/BOARD_ZOOMS",a.on2DBoardZooms).on("2D/TOUCH_START",a.touchStart).on("2D/TOUCH_MOVE",a.touchMove).on("2D/TOUCH_END",a.touchEnd).on(d.a.TRANSITION_EVENT,(function(t){a.canvasControl.invalidate()})),a.fsm.on(d.a.TRANSITION_EVENT,(function(t){a.canvasControl.invalidate()}))})),Cn(Sn(a),"on2DIdle",(function(t){var e;b.a.bus.emit("Measurement:disable"),a.sceneCurrent=a.scene2d,a.overlayRenderer.setRenderMode(r.b.Render2D),a.canvasFocus(),"mouseup"===t.type&&a.cameraController2d.MouseUp(t.button,t.clientX,t.clientY),"mousemove"===t.type&&a.cameraController2d.MouseMove(t.clientX,t.clientY),a.renderModeChanged.emit(Sn(a)),a.emit("modeChanged",r.b.Render2D),b.a.bus.emit("PcbEngine:changedRenderMode",r.b.Render2D),null===(e=a.simulationManager)||void 0===e||e.changeRenderMode(r.b.Render2D)})),Cn(Sn(a),"on2DLeftButtonIsPressed",(function(t){a.cameraController2d.MouseDown(v.b.Right,t.clientX,t.clientY);var e={x:t.clientX,y:t.clientY},n=[t.clientX,t.clientY],r=a.simulationManager;if(null!=r&&r.simulationEnabled&&null!=r&&r.probeEnabled){var o=r.getSimulationValue2d(n);b.a.bus.emit("PcbEngine:simulationMouseData",gn(gn({},o),{},{isClick:!0}))}a.fsm.HEAD.setDataTransfer({clickPos:e}),b.a.bus.emit("PcbEngine:documentClick",gn(gn({},e),{},{type:"click"}))})),Cn(Sn(a),"get2DElementSelection",(function(t){var e=a.scene2d.viewportToWorld([t.clientX,t.clientY]),n=a.scene2d.getNodeItemsAtPoint(e,a.scene2d.renderOptions);return{selected:!!(n&&n.length&&e),nodeItems:n,cursorPos:e}})),Cn(Sn(a),"on2DComponentLaunchSelection",(function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.cameraController2d.MouseUp(t.button,t.clientX,t.clientY);var n=a.get2DElementSelection(t);if(null!=n&&n.selected){a.branches["2D/MEASUREMENT"].isSelected=!0;var r=n.nodeItems.map((function(t){return new f.a(t.GetId())})),o=new f.b({nodes:r,x:n.cursorPos[0],y:n.cursorPos[1],clickX:t.clientX,clickY:t.clientY,onlyNets:e});a.emitSelection(o)}else{a.branches["2D/MEASUREMENT"].isSelected=!1;var i=new f.b;a.emitSelection(i)}})),Cn(Sn(a),"on2DMouseMoves",(function(t){a.cameraController2d.MouseMove(t.clientX,t.clientY);var e=[t.clientX,t.clientY],n=a.scene2d.viewportToWorld(e),r=a.simulationManager;if(null!=r&&r.simulationEnabled&&null!=r&&r.probeEnabled){var o=r.getSimulationValue2d(e);b.a.bus.emit("PcbEngine:simulationMouseData",o)}else{var i=a.scene2d.getNodeItemsAtPoint(n,a.scene2d.renderOptions),s=i.length>0;if(!0===s){var c=i.map((function(t){return new f.a(t.GetId())})),u=new f.b({nodes:[c[0]],x:n[0],y:n[1],clickX:t.clientX,clickY:t.clientY});a.emitHighlight(u)}!0===t.hasNodeAtPoint&&!1===s&&a.clearHighlight(),a.fsm.HEAD.setDataTransfer({hasNodeAtPoint:s})}})),Cn(Sn(a),"on2DRightButtonIsPressed",(function(t){a.cameraController2d.MouseDown(v.b.Right,t.clientX,t.clientY)})),Cn(Sn(a),"on2DBoardTranslates",(function(t){a.cameraController2d.MouseMove(t.clientX,t.clientY),b.a.bus.emit("PcbEngine:documentMove",{type:"move",x:t.clientX,y:t.clientY}),a.debounceSceneInteracted2D()})),Cn(Sn(a),"on2DBoardDidTranslate",(function(t){a.cameraController2d.MouseUp(v.b.Right,t.clientX,t.clientY)})),Cn(Sn(a),"on2DBoardZooms",(function(t){a.cameraController2d.MouseMove(t.clientX,t.clientY),a.cameraController2d.MouseWheel(Math.sign(-t.deltaY)),b.a.bus.emit("PcbEngine:documentZoom",{type:"zoom",x:t.clientX,y:t.clientY,scale:a.scene2d.getZoom()}),a.debounceSceneInteracted2D()})),Cn(Sn(a),"debounceSceneInteracted2D",Object(cn.a)((function(){a.emitDocumentLocation2D()}),250)),Cn(Sn(a),"on3DIdle",(function(t){var e;b.a.bus.emit("Measurement:disable"),a.sceneCurrent=a.scene3d,a.overlayRenderer.setRenderMode(r.b.Render3D),a.canvasFocus(),"mouseup"===t.type&&a.cameraController3d.MouseUp(t.button,t.clientX,t.clientY),a.renderModeChanged.emit(Sn(a)),a.emit("modeChanged",r.b.Render3D),b.a.bus.emit("PcbEngine:changedRenderMode",r.b.Render3D),a.fsm.HEAD.setDataTransfer({hasNodeAtRay:!1}),null===(e=a.simulationManager)||void 0===e||e.changeRenderMode(r.b.Render3D)})),Cn(Sn(a),"on3DLeftButtonIsPressed",(function(t){a.cameraController3d.MouseDown(t.button,t.clientX,t.clientY);var e={x:t.clientX,y:t.clientY};a.fsm.HEAD.setDataTransfer({clickPos:e})})),Cn(Sn(a),"on3DComponentLaunchSelection",(function(t){a.cameraController3d.MouseUp(t.button,t.clientX,t.clientY);var e=a.scene3d.unproject([t.clientX,t.clientY]);if(e){var n=window.vec3,r=a.scene3d.getEye(),o=n.sub([],e,r);n.normalize(o,o);var i=a.scene3d.getNodeItemsAtRay(r,o);if(i&&i.length){var s=i.map((function(t){return new f.a(t.GetId())})),c=new f.b({nodes:[s[0]],x:e[0],y:e[1],clickX:t.clientX,clickY:t.clientY});return a.emitSelection(c),a.branches["2D/MEASUREMENT"].isSelected=!0,void a.cameraController3d.MouseUp(t.button,t.clientX,t.clientY)}var u=new f.b;a.emitSelection(u),a.branches["2D/MEASUREMENT"].isSelected=!1,a.cameraController3d.MouseUp(t.button,t.clientX,t.clientY)}})),Cn(Sn(a),"on3DBoardRotates",(function(t){a.rotationEnabled&&a.cameraController3d.MouseMove(t.clientX,t.clientY)})),Cn(Sn(a),"on3DBoardDidRotate",(function(t){a.cameraController3d.MouseUp(v.b.Left,t.clientX,t.clientY),b.a.bus.emit("PcbEngine:on3DBoardDidRotate")})),Cn(Sn(a),"on3DRightButtonIsPressed",(function(t){a.cameraController3d.MouseDown(t.button,t.clientX,t.clientY)})),Cn(Sn(a),"on3DBoardsTranslates",(function(t){a.cameraController3d.MouseMove(t.clientX,t.clientY),a.boardMoved3d.emit(a.scene3d.getView()),b.a.bus.emit("PcbEngine:documentMove",{type:"move",x:t.clientX,y:t.clientY}),a.debounceSceneInteracted3D()})),Cn(Sn(a),"on3DBoardDidTranslate",(function(t){a.cameraController3d.MouseUp(v.b.Right,t.clientX,t.clientY)})),Cn(Sn(a),"on3DBoardZooms",(function(t){a.cameraController3d.MouseMove(t.clientX,t.clientY),a.cameraController3d.MouseWheel(Math.sign(-t.deltaY)),b.a.bus.emit("PcbEngine:documentZoom",{type:"zoom",x:t.clientX,y:t.clientY,scale:a.scene3d.getZoom()}),a.debounceSceneInteracted3D()})),Cn(Sn(a),"debounceSceneInteracted3D",Object(cn.a)((function(){a.emitDocumentLocation3D()}),250)),Cn(Sn(a),"canvasFocus",(function(){a.canvasControl.canvas&&a.canvasControl.canvas.focus({preventScroll:!0})})),Cn(Sn(a),"initedEvents",!1),Cn(Sn(a),"touchStart",(function(t){a.cameraController.TouchStart(t.touches),a.canvasControl.invalidate(),a.isBoardMoving=t.touches.length>1,t.preventDefault(),t.stopPropagation()})),Cn(Sn(a),"touchMove",(function(t){a.cameraController.TouchMove(t.touches),a.canvasControl.invalidate(),a.isBoardMoving=!0,a.onBoardMoved3d(),t.preventDefault(),t.stopPropagation()})),Cn(Sn(a),"touchEnd",(function(t){a.cameraController.TouchEnd(t.touches),a.canvasControl.invalidate(),0!=t.touches.length||a.isBoardMoving||(a.launchSelection(t.changedTouches[0].clientX,t.changedTouches[0].clientY),a.isBoardMoving=!1),t.preventDefault(),t.stopPropagation()})),!e)throw new ReferenceError("Parameter canvasControl is null or undefined.");return a.documentId=t,a.canvasControl=e,a.selectionFactory=n,a.viewId=o,a.rotationEnabled=a.has3dRotationEnabled,a.simulationManager=i,a.initSvgOverlay(a.canvasControl),a.eventBusListeners=new Be(b.a.bus),a.eventBusListeners.on("Measurement:activate",(function(){return a.fsm.dispatch({type:"Measurement:activate"})})),a.eventBusListeners.on("Measurement:deactivate",(function(){return a.fsm.dispatch({type:"Measurement:deactivate"})})),a.onCanvasControlInvalidate=function(){return a.emit("transformScene",{mode:a.renderMode})},a.canvasControl.on("invalidate",a.onCanvasControlInvalidate),a.svgOverlay=new sn(Sn(a),a.canvasControl.canvas.parentNode),a}return e=c,(n=[{key:"dispose",value:function(){this.onCanvasControlResized.dispose(),this.scene2d.off("zoomToFitChanged",this.onZoomToFitChanged),this.scene3d.off("zoomToFitChanged",this.onZoomToFitChanged),this.scene2d.off("resized",this.onScene2DResized),this.svgOverlay.dispose(),this.scene2d.dispose(),this.scene3d.dispose(),this.scene2d=null,this.scene3d=null,this.eventBusListeners.removeAllListeners(),this.canvasControl.off("invalidate",this.onCanvasControlInvalidate),this.branches["2D"].removeAllListeners(),this.branches["3D"].removeAllListeners(),this.branches["2D/MEASUREMENT"].dispose(),this.fsm.removeAllListeners(),this.removeAllListeners()}},{key:"is2D",get:function(){return this.renderMode==r.b.Render2D}},{key:"is3D",get:function(){return this.renderMode==r.b.Render3D}},{key:"getSceneCurrent",value:function(){return this.sceneCurrent}},{key:"getScene3D",value:function(){return this.scene3d}},{key:"invalidate",value:function(){this.canvasControl.invalidate()}},{key:"initSvgOverlay",value:function(t){var e;this.svg||(this.svg=ln.createElement("svg"),ln.setAttribute(this.svg,{id:"aov365_pcb_graphic_document_viewer_2D_svg_overlay",width:"100%",height:"100%",style:"position: absolute"}),this.svg.addEventListener("mouseenter",this.canvasFocus),null===(e=t.canvas.parentNode)||void 0===e||e.appendChild(this.svg))}},{key:"emitSelection",value:function(t){b.a.bus.emit("PcbEngine:selectNodes",t),this.selectionChanged.emit(t)}},{key:"emitHighlight",value:function(t){b.a.bus.emit("PcbEngine:highlightNodes",t),this.highlightChanged.emit(t)}},{key:"emitDocumentLocation2D",value:function(){b.a.bus.emit("PcbEngine:documentLocation",{zoom:this.scene2d.getZoom(),top:this.scene2d.getCenter()[1],left:this.scene2d.getCenter()[0],flipped:this.flipped,type:"pcb"})}},{key:"toFloor",value:function(t){return t.reduce((function(t,e){return t.push(Math.floor(100*e)/100),t}),[])}},{key:"emitDocumentLocation3D",value:function(){b.a.bus.emit("PcbEngine:documentLocation",{matrix:{eye:this.toFloor(this.scene3d.getEye()),at:this.toFloor(this.scene3d.getAt()),up:this.toFloor(this.scene3d.getUp())},type:"3d"})}},{key:"renderMode",get:function(){return null==this.sceneCurrent?r.b.Render2D:this.sceneCurrent==this.scene3d?r.b.Render3D:r.b.Render2D},set:function(t){this.fsm.dispatch({type:"rendermodechange",mode:t})}},{key:"needRender",get:function(){return!!this.sceneCurrent&&(this.sceneCurrent==this.scene3d?this.scene3d.needRender:this.scene2d.needRender)}},{key:"flipped",get:function(){return this.scene2d.flipped},set:function(t){this.scene2d.flipped!=t&&(this.scene2d.flipped=t,this.canvasControl.invalidate())}},{key:"initScenes",value:function(t){var e,n,o,i,a,s=this;this.scene2d=t.scene2d,this.scene3d=t.scene3d,this.onScene2DResized=function(){return s.branches["2D/MEASUREMENT"].render()},this.scene2d.on("resized",this.onScene2DResized),this.onZoomToFitChanged=function(){var t;return null===(t=s.canvasControl)||void 0===t?void 0:t.invalidate()},this.scene2d.on("zoomToFitChanged",this.onZoomToFitChanged),this.scene3d.on("zoomToFitChanged",this.onZoomToFitChanged),this.onInit(),null===(e=this.selectionManager2d)||void 0===e||e.dispose(),null===(n=this.selectionManager3d)||void 0===n||n.dispose(),this.selectionManager2d=this.selectionFactory.cretateSelectionManager2d(this.scene2d),this.selectionManager3d=this.selectionFactory.cretateSelectionManager3d(this.scene3d),null===(o=this.overlayRenderer)||void 0===o||o.dispose(),this.overlayRenderer=new l(this.canvasControl,this.selectionManager2d,this.selectionManager3d),null===(i=this.simulationManager)||void 0===i||i.createSimulationScene2d(this.scene2d,this.selectionManager2d),null===(a=this.simulationManager)||void 0===a||a.createSimulationScene3d(this.scene3d,this.selectionManager3d),this.renderOptions=this.scene2d.renderOptions,this.renderMode=r.b.Render2D,this.cameraController3d=this.scene3d.cameraController,this.cameraController3d.SetOrbitingType(0),this.cameraController2d=this.scene2d.cameraController,this.initEvents(),this.emit("setScenes",{scene2d:this.scene2d,scene3d:this.scene3d,mode:this.renderMode}),b.a.bus.emit("PcbEngine:initScenes",this.scene2d,this.scene3d,this.renderMode)}},{key:"allZoomToFit",value:function(){0!=this.canvasControl.canvas.width&&0!=this.canvasControl.canvas.height&&(this.updateClientRectangle(),this.overlayRenderer.isSelected||(this.scene2d.zoomToFit(),this.scene3d.zoomToFit()),this.canvasControl.invalidate())}},{key:"setBackground",value:function(t){this.scene2d.background=t,this.scene3d.background=t,this.canvasControl.setBackground([255*t[0],255*t[1],255*t[2],255*t[3]])}},{key:"render",value:function(){this.sceneCurrent&&this.sceneCurrent.render()}},{key:"setSelected",value:function(t){this.overlayRenderer.isSelected=t}},{key:"addSelection",value:(i=mn().mark((function t(e,n){return mn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.overlayRenderer.addSelection(e,n);case 3:return t.abrupt("return",t.sent);case 4:return t.prev=4,this.canvasControl.invalidate(),t.finish(4);case 7:case"end":return t.stop()}}),t,this,[[0,,4,7]])})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){vn(o,n,r,a,s,"next",t)}function s(t){vn(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t,e){return a.apply(this,arguments)})},{key:"clearSelection",value:function(t){this.overlayRenderer.clearSelection(!0,!0,t)}},{key:"isHighlight",value:function(t){return this.overlayRenderer.isHighlight(t)}},{key:"addHighlight",value:function(t){this.overlayRenderer.addHighlight(t)}},{key:"clearHighlight",value:function(){this.overlayRenderer.clearHighlight()}},{key:"setRenderOptions",value:function(t){this.scene2d.renderOptions=t,this.canvasControl.invalidate()}},{key:"getZoom",value:function(){return this.sceneCurrent.getZoom()}},{key:"zoomStep",get:function(){return this.zoomstep},set:function(t){this.zoomstep=t,this.zoomSensitivity=1/this.zoomStep}},{key:"zoomToFit",value:function(){var t=this;this.sceneCurrent.zoomToFit(),this.canvasControl.invalidate(),setTimeout((function(){t.branches["2D/MEASUREMENT"].render()}),50)}},{key:"zoomToFitTargets",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?(e.fit2d&&this.zoomToFitNodes(t,this.scene2d),e.fit3d&&this.zoomToFitNodes(t,this.scene3d),this.is2D&&this.emitDocumentLocation2D(),this.is3D&&this.emitDocumentLocation3D()):this.zoomToFitNodes(t,this.sceneCurrent)}},{key:"zoomToFitNodes",value:function(t,e){if(t&&0!=t.length){var n=[];t.forEach((function(t){var r=e.getBoundingBoxForItem(t);r&&n.push(r)})),n.length>0&&this.zoomToFitBoundRects(n,e)}}},{key:"getMinMaxRectsForAssembly",value:function(t,e,n){var r=function(t){var e=t[3]-t[0],n=t[4]-t[1];return Math.sqrt(e*e+n*n)},o=function(t,e,n){return t[0]+=e,t[1]+=n,t},i=this.renderOptions.map((function(t){return t.layer})),a=this.scene3d.rootNode.GetBoxForLayers(i),s=a[3]-a[0],c=a[4]-a[1],u=window.vec3.clone(t),l=window.vec3.clone(e),f=.104167-.208333*function(t,e,n){return Math.min(Math.max(Math.abs(t),e),n)}(r(n)/r(a),0,.5),d=f*s,h=f*c;return o(u,-d,-h),o(l,d,h),{min:u,max:l}}},{key:"zoomToFitBoundRects",value:function(t,e){var n=this.getMinMaxBoundRects(t),o=[n[0],n[1],n[2]],i=[n[3],n[4],n[5]];if(this.zoomToFitParams){var a=this.getMinMaxRectsForAssembly(o,i,n),s=a.min,c=a.max;"fit-animate"===this.zoomToFitParams.mode&&this.renderMode===r.b.Render3D?this.startAnimationFit(500,s,c,.7):e.zoomToFit(s,c,.7)}else e.zoomToFit(o,i,.7)}},{key:"getMinMaxBoundRects",value:function(t){var e=hn(t[0],6),n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5];if(t.forEach((function(t){n>t[0]&&(n=t[0]),r>t[1]&&(r=t[1]),o>t[2]&&(o=t[2]),i<t[3]&&(i=t[3]),a<t[4]&&(a=t[4]),s<t[5]&&(s=t[5])})),n>i){var c=[i,n];n=c[0],i=c[1]}if(r>a){var u=[a,r];r=u[0],a=u[1]}if(o>s){var l=[s,o];o=l[0],s=l[1]}return[n,r,o,i,a,s]}},{key:"setRenderState",value:function(t){this.scene2d.viewport.SetZoom(t.scene2D.zoom),this.scene2d.viewportCenter_=t.scene2D.center,this.scene2d.viewport.SetCenter(t.scene2D.center),this.scene3d.viewport.ViewSetLookAt(t.scene3D.eye,t.scene3D.at,t.scene3D.up)}},{key:"getRenderState",value:function(){return{scene2D:{zoom:this.scene2d.viewport.GetZoom(),center:this.scene2d.getCenter()},scene3D:{eye:this.scene3d.viewport.GetEye(),at:this.scene3d.viewport.GetAt(),up:this.scene3d.viewport.GetUp()}}}},{key:"updateZoom",value:function(t){this.sceneCurrent&&(this.cameraController.MouseWheel(Math.sign(t)),this.canvasControl.invalidate())}},{key:"has3dRotationEnabled",get:function(){var t={value:null};return!b.a.tryGetAttributeValue("data-disable-3d-rotation",t)||!0===t.value}},{key:"zoomToFitParams",get:function(){var t={value:""};if(b.a.tryGetAttributeValue("data-zoom-to-fit-params",t)){if(!t.value)return;try{return JSON.parse(t.value)}catch(t){return}}}},{key:"cameraController",get:function(){return this.isRender2D?this.cameraController2d:this.cameraController3d}},{key:"isRender2D",get:function(){return this.renderMode==r.b.Render2D}},{key:"initEvents",value:function(){var t=this;this.initedEvents||(this.onCanvasControlResized=this.canvasControl.resized.on((function(){return t.onResize()})),this.initedEvents=!0)}},{key:"onResize",value:function(){this.updateClientRectangle(),this.canvasControl.invalidate()}},{key:"launchSelection",value:function(t,e){this.isBoardMoving||(this.isRender2D?this.launchSelection2d(t,e):this.launchSelection3d(t,e))}},{key:"launchSelection2d",value:function(t,e){var n=this.scene2d.viewportToWorld([t,e]),r=this.scene2d.getNodeItemsAtPoint(n,this.scene2d.renderOptions).map((function(t){return new f.a(t.GetId())})),o=new f.b({nodes:r,x:n[0],y:n[1],clickX:t,clickY:e});this.emitSelection(o)}},{key:"launchSelection3d",value:function(t,e){var n=window.vec3,r=this.scene3d.unproject([t,e]),o=this.scene3d.getEye(),i=n.sub([],r,o);n.normalize(i,i);var a=this.scene3d.getNodeItemsAtRay(o,i).map((function(t){return new f.a(t.GetId())})),s=new f.b({nodes:a,x:r[0],y:r[1],clickX:t,clickY:e});this.emitSelection(s)}},{key:"onBoardMoved3d",value:function(){this.isRender2D||this.boardMoved3d.emit(this.scene3d.getView())}},{key:"updateClientRectangle",value:function(){var t=this.canvasControl.canvas.width,e=this.canvasControl.canvas.height;this.scene2d.resize(t,e),this.scene3d.resize(t,e)}},{key:"startAnimationOrigin",value:function(t){var e=this;this.sceneCurrent.cameraController.StartAnimationOrigin(t);var n=setInterval((function(){e.canvasControl.invalidate(),setTimeout((function(){return clearInterval(n)}),t)}),1)}},{key:"startAnimationFocus",value:function(t){var e=this;this.sceneCurrent.cameraController.StartAnimationFocus(t);var n=setInterval((function(){e.canvasControl.invalidate(),setTimeout((function(){return clearInterval(n)}),t)}),1)}},{key:"startAnimationFit",value:function(t,e,n,r){var o=this;this.sceneCurrent.cameraController.StartAnimationFit(t,e,n,r);var i=setInterval((function(){o.canvasControl.invalidate(),setTimeout((function(){return clearInterval(i)}),t)}),1)}}])&&bn(e.prototype,n),o&&bn(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(h.a),kn=n(559),Tn=n(112),Pn=n(36),jn=n(552),An=n(462),Mn=n(101),Ln=n(465),In=n(258),Dn=n(102),Rn=n(460),Nn=n(226);function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Un(t,e){return(Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zn(t);if(e){var o=zn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gn(this,n)}}function Gn(t,e){if(e&&("object"===Bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vn(t)}function Vn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zn(t){return(zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hn=function(){},Wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Un(t,e)}(i,t);var e,n,r,o=$n(i);function i(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),e=Vn(t),r=Hn,(n="dispose")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=i,(n=[{key:"load",value:function(t,e){return this.loadData(t,e)}},{key:"loadData",value:function(t,e){var n,r,o,i,a=this;this.dispose(),this.dispose=Hn;try{var s={};switch(e){case Tn.b.Binary:case Tn.b.BinaryZip:case Tn.b.Json:var c=this.import(t,e);s.scene=c.Scene,s.node=c.Node,s.layerMap=c.LayerMap,s.materials2d=c.MaterialMap2D.Materials,s.materials3d=c.MaterialMap3D.Materials;break;case Tn.b.SceneBinZipFile:case Tn.b.SceneBinZipStream:var u=this.importScene(t,e);if(s.scene=u.scene,0==s.scene.GetRootNode().GetChildCount()){var l=s.scene.AddNodeData(new Nn.a([]),new Rn.a([]));s.node=s.node.AddChild(l)}s.node=u.scene.GetRootNode().GetChild(0),s.layerMap=s.node.GetNodeData().GetLayerMap(),s.materials2d=null!==(n=null===(r=u.materials[0])||void 0===r?void 0:r.Materials)&&void 0!==n?n:[],s.materials3d=null!==(o=null===(i=u.materials[1])||void 0===i?void 0:i.Materials)&&void 0!==o?o:[]}var f=s.scene,d=s.node,h=s.layerMap,p=s.materials2d,m=s.materials3d,v=this.createLayers(h),y=this.createSceneHandler(d,"GraphiteEngine:createdScene2D",(function(){return new jn.a(f,v.slice(),p,a.createRenderOptions(v).slice(),void 0,void 0,"Main2DScene")}));y.setOptions({min_text_size:18});var g=this.createSceneHandler(d,"GraphiteEngine:createdScene3D",(function(){return new An.a(f,v.slice(),m,a.createRenderOptions(v).slice(),void 0,void 0,"Main3DScene")}));return this.onAfterLoad(y,{scene2d:y,scene3d:g})}catch(e){throw new Pn.b("Error: Import PCB to scenes.\nDetail: "+e,null==t?void 0:t.byteLength,!0)}}},{key:"loadFont",value:function(t){t(!0)}},{key:"onAfterLoad",value:function(t,e){return this.loadFont((function(n,r){!n&&r&&(e.scene2d.polygonStringBuilder=new Ln.a(r,t))})),e}},{key:"import",value:function(t,e){var n,r=window.GraphiteResolverInstance.module,o=window.GraphiteResolverInstance.commonCore,i=r.CreateScene(o),a=i.GetRootNode();switch(e){case Tn.b.Json:n=r.ImportPcb(i,a,t);break;case Tn.b.Binary:n=r.ImportPcbBinMem(i,a,t);break;case Tn.b.BinaryZip:n=r.ImportPcbBinZipMem(i,a,t);break;default:throw new Error("Not implemented.")}return Object.assign({Scene:i},n)}},{key:"importScene",value:function(t,e){var n=window.GraphiteResolverInstance.module,r=window.GraphiteResolverInstance.commonCore;return e===Tn.b.SceneBinZipStream?n.ImportSceneBinZipStream(r,t):n.ImportSceneBinZipFile(r,t)}},{key:"createSceneHandler",value:function(t,e,n){var r=n();return r.antialiasing=yt.a.Temporal,r.updateRootNode(t),r.setRectangle(0,0,r.canvasWidth,r.canvasHeight),this.emitEventScene(e,r),r}},{key:"emitEventScene",value:function(t,e){Tn.a.bus.emit(t,e)}},{key:"createLayers",value:function(t){for(var e=t.GetLayersCount(),n=e+1,r=0;r<n;r++){var o=e+r,i=t.GetLayer(r);if(i){var a=r==n-1||i.show3d,s=new In.a(Dn.a.SelectionLayerName,o,i.z_range,i.is_cutout,i.is_barrel,i.is_keepout,i.is_inverted,a);t.AddLayer(s)}else{var c=new In.a(Dn.a.SelectionLayerName,o,[.5,1]);c.show3d=!0,t.AddLayer(c)}}for(var u=t.GetLayersCount(),l=new Array(u),f=u-1;f>=0;f--){var d=t.GetLayer(f),h=new In.a(d.name,f,d.z_range,d.is_cutout,d.is_barrel,d.is_keepout,d.is_inverted,d.show3d);l[f]=h}return l}},{key:"createRenderOptions",value:function(t){var e=new Array;if(Array.isArray(t))t.forEach((function(t){return e.push(new Mn.a(t.index,t.name))}));else for(var n=t.GetLayersCount()-1;n>=0;n--){var r=t.GetLayer(n);r.show3d&&e.push(new Mn.a(n,r.name))}return e}}])&&Fn(e.prototype,n),r&&Fn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(h.a);function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xn(t,e){return(Xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qn(t);if(e){var o=Qn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Kn(this,n)}}function Kn(t,e){if(e&&("object"===Yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jn(t)}function Jn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var er=[200/255,200/255,200/255,1],nr=[40/255,40/255,40/255,1],rr=[200/255,200/255,200/255,1],or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xn(t,e)}(i,t);var e,n,r,o=Zn(i);function i(t,e,n,r,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),tr(Jn(s=o.call(this,t,n)),"renderer",void 0),tr(Jn(s),"viewId",void 0),tr(Jn(s),"selectionFactory",void 0),tr(Jn(s),"simulationManager",void 0),tr(Jn(s),"rendererStateMap",void 0),s.viewId=r,s.selectionFactory=e,s.rendererStateMap=new Map,s.simulationManager=a,null==a||a.useCanvasControl(Jn(s)),s}return e=i,(n=[{key:"createRenderer",value:function(t){var e;return null===(e=this.renderer)||void 0===e||e.dispose(),this.renderer=new En(t,this,this.selectionFactory,this.viewId,this.simulationManager),this.renderer}},{key:"getRenderer",value:function(){return this.renderer}},{key:"getContainerId",value:function(){return this.containerId}},{key:"loadData",value:function(t,e){var n=this.getBackgroundColor(e),r=(new Wn).load(t,"string"==typeof t?Tn.b.Json:Tn.b.BinaryZip);this.renderer.initScenes(r),this.renderer.setBackground(n),b.a.bus.emit("".concat(ht.e.get(this.viewId),":afterImportPCB"),this.renderer),b.a.bus.emit("PcbEngine:rendererCreated",this.renderer,r),this.canvas.focus(),this.invalidate()}},{key:"saveRenderState",value:function(){this.renderer&&this.rendererStateMap.set(this.renderer.documentId,this.renderer.getRenderState())}},{key:"restoreRendererState",value:function(){this.renderer.allZoomToFit();var t=this.rendererStateMap.get(this.renderer.documentId);t&&this.renderer.setRenderState(t)}},{key:"onPaint",value:function(){this.renderer&&this.renderer.render()}},{key:"isDarkTheme",value:function(){var t={value:null};return!(!b.a.tryGetAttributeValue("data-theme",t)||"dark"!==t.value)}},{key:"getBackgroundColor",value:function(t){return this.isDarkTheme()?rr:"Eagle"==t||"KiCad"==t?nr:er}},{key:"initControl",value:function(t){var e,n;if(t instanceof HTMLDivElement?(n=t,e="aov365_pcb"):(n=document.getElementById(t),e=t),null==n)throw new Error("Parent with id ".concat(e," did not found at DOM."));var r=document.createElement("div");this.containerId=e+"_document_viewer",r.id=this.containerId,r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.backgroundColor=this.backgroundColor;var o=document.createElement("div");o.id=e+"_graphic_document_viewer",o.style.width="100%",o.style.height="100%",r.style.backgroundColor=this.backgroundColor;var i=this.canvas;i.id=e+"_graphic_document_viewer_canvas",i.tabIndex=0,i.style.backgroundColor=this.backgroundColor,i.oncontextmenu=function(){return!1},i.style.opacity="1",o.appendChild(this.canvas),r.appendChild(o),n.appendChild(r)}},{key:"initEvents",value:function(){var t=this;window.addEventListener("resize",(function(){return t.onResize()}))}},{key:"onResize",value:function(){0===document.body.clientWidth&&0===document.body.clientHeight||(this.canvas.hidden=!0,this.canvas.width=document.body.clientWidth,this.canvas.height=document.body.clientHeight,this.canvas.hidden=!1,this.resized.emit(this))}},{key:"needRender",get:function(){return this.renderer.needRender}}])&&qn(e.prototype,n),r&&qn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(kn.a)},function(t,e,n){var r=n(60),o=n(57).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){e.f=n(70)},function(t,e,n){var r=n(320)("keys"),o=n(228);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(57).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(60),o=n(59),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(155)(Function.call,n(158).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var r=n(60),o=n(393).set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},function(t,e,n){"use strict";var r=n(157),o=n(175);t.exports=function(t){var e=String(o(this)),n="",i=r(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(157),o=n(175);t.exports=function(t){return function(e,n){var i,a,s=String(o(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):i:t?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(229),o=n(11),i=n(123),a=n(142),s=n(251),c=n(480),u=n(249),l=n(234),f=n(70)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,p,m,v,y){c(n,e,p);var g,b,w,_=function(t){if(!d&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",S="values"==m,x=!1,C=t.prototype,E=C[f]||C["@@iterator"]||m&&C[m],k=E||_(m),T=m?S?_("entries"):k:void 0,P="Array"==e&&C.entries||E;if(P&&(w=l(P.call(new t)))!==Object.prototype&&w.next&&(u(w,O,!0),r||"function"==typeof w[f]||a(w,f,h)),S&&E&&"values"!==E.name&&(x=!0,k=function(){return E.call(this)}),r&&!y||!d&&!x&&C[f]||a(C,f,k),s[e]=k,s[O]=h,m)if(g={values:S?k:_("values"),keys:v?k:_("keys"),entries:T},y)for(b in g)b in C||i(C,b,g[b]);else o(o.P+o.F*(d||x),e,g);return g}},function(t,e,n){var r=n(402),o=n(175);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},function(t,e,n){var r=n(60),o=n(174),i=n(70)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(70)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(251),o=n(70)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){"use strict";var r=n(95),o=n(227);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var r=n(265),o=n(70)("iterator"),i=n(251);t.exports=n(89).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){"use strict";var r=n(113),o=n(231),i=n(79);t.exports=function(t){for(var e=r(this),n=i(e.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(235),o=n(485),i=n(251),a=n(143);t.exports=n(400)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r,o,i=n(325),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(t){var e,n,r,o,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),u&&(e=c.lastIndex),r=a.call(c,t),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),t.exports=c},function(t,e,n){"use strict";var r=n(399)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r,o,i,a=n(155),s=n(474),c=n(392),u=n(388),l=n(57),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,m=l.Dispatch,v=0,y={},g=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){g.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},h=function(t){delete y[t]},"process"==n(174)(f)?r=function(t){f.nextTick(a(g,t,1))}:m&&m.now?r=function(t){m.now(a(g,t,1))}:p?(i=(o=new p).port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(t){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){"use strict";var r=n(57),o=n(94),i=n(229),a=n(331),s=n(142),c=n(254),u=n(58),l=n(253),f=n(157),d=n(79),h=n(493),p=n(233).f,m=n(95).f,v=n(407),y=n(249),g=r.ArrayBuffer,b=r.DataView,w=r.Math,_=r.RangeError,O=r.Infinity,S=g,x=w.abs,C=w.pow,E=w.floor,k=w.log,T=w.LN2,P=o?"_b":"buffer",j=o?"_l":"byteLength",A=o?"_o":"byteOffset";function M(t,e,n){var r,o,i,a=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,l=23===e?C(2,-24)-C(2,-77):0,f=0,d=t<0||0===t&&1/t<0?1:0;for((t=x(t))!=t||t===O?(o=t!=t?1:0,r=c):(r=E(k(t)/T),t*(i=C(2,-r))<1&&(r--,i*=2),(t+=r+u>=1?l/i:l*C(2,1-u))*i>=2&&(r++,i/=2),r+u>=c?(o=0,r=c):r+u>=1?(o=(t*i-1)*C(2,e),r+=u):(o=t*C(2,u-1)*C(2,e),r=0));e>=8;a[f++]=255&o,o/=256,e-=8);for(r=r<<e|o,s+=e;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*d,a}function L(t,e,n){var r,o=8*n-e-1,i=(1<<o)-1,a=i>>1,s=o-7,c=n-1,u=t[c--],l=127&u;for(u>>=7;s>0;l=256*l+t[c],c--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[c],c--,s-=8);if(0===l)l=1-a;else{if(l===i)return r?NaN:u?-O:O;r+=C(2,e),l-=a}return(u?-1:1)*r*C(2,l-e)}function I(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function D(t){return[255&t]}function R(t){return[255&t,t>>8&255]}function N(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function B(t){return M(t,52,8)}function F(t){return M(t,23,4)}function U(t,e,n){m(t.prototype,e,{get:function(){return this[n]}})}function $(t,e,n,r){var o=h(+n);if(o+e>t[j])throw _("Wrong index!");var i=t[P]._b,a=o+t[A],s=i.slice(a,a+e);return r?s:s.reverse()}function G(t,e,n,r,o,i){var a=h(+n);if(a+e>t[j])throw _("Wrong index!");for(var s=t[P]._b,c=a+t[A],u=r(+o),l=0;l<e;l++)s[c+l]=u[i?l:e-l-1]}if(a.ABV){if(!u((function(){g(1)}))||!u((function(){new g(-1)}))||u((function(){return new g,new g(1.5),new g(NaN),"ArrayBuffer"!=g.name}))){for(var V,z=(g=function(t){return l(this,g),new S(h(t))}).prototype=S.prototype,H=p(S),W=0;H.length>W;)(V=H[W++])in g||s(g,V,S[V]);i||(z.constructor=g)}var Y=new b(new g(2)),q=b.prototype.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||c(b.prototype,{setInt8:function(t,e){q.call(this,t,e<<24>>24)},setUint8:function(t,e){q.call(this,t,e<<24>>24)}},!0)}else g=function(t){l(this,g,"ArrayBuffer");var e=h(t);this._b=v.call(new Array(e),0),this[j]=e},b=function(t,e,n){l(this,b,"DataView"),l(t,g,"DataView");var r=t[j],o=f(e);if(o<0||o>r)throw _("Wrong offset!");if(o+(n=void 0===n?r-o:d(n))>r)throw _("Wrong length!");this[P]=t,this[A]=o,this[j]=n},o&&(U(g,"byteLength","_l"),U(b,"buffer","_b"),U(b,"byteLength","_l"),U(b,"byteOffset","_o")),c(b.prototype,{getInt8:function(t){return $(this,1,t)[0]<<24>>24},getUint8:function(t){return $(this,1,t)[0]},getInt16:function(t){var e=$(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=$(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return I($(this,4,t,arguments[1]))},getUint32:function(t){return I($(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return L($(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return L($(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){G(this,1,t,D,e)},setUint8:function(t,e){G(this,1,t,D,e)},setInt16:function(t,e){G(this,2,t,R,e,arguments[2])},setUint16:function(t,e){G(this,2,t,R,e,arguments[2])},setInt32:function(t,e){G(this,4,t,N,e,arguments[2])},setUint32:function(t,e){G(this,4,t,N,e,arguments[2])},setFloat32:function(t,e){G(this,4,t,F,e,arguments[2])},setFloat64:function(t,e){G(this,8,t,B,e,arguments[2])}});y(g,"ArrayBuffer"),y(b,"DataView"),s(b.prototype,a.VIEW,!0),e.ArrayBuffer=g,e.DataView=b},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(498)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";n(267)},function(t,e,n){"use strict";n.r(e);var r=n(170);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function h(){}function p(){}function m(){}var v={};u(v,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,a)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(i,a){function s(){return new e((function(r,s){!function r(i,a,s,c){var u=f(t[i],t,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==o(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}(i,a,r,s)}))}return r=r?r.then(s,s):s()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,u(b,"constructor",m),u(m,"constructor",p),p.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),u(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function a(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=window.__CORE__;t=(0,window.__APP__.createModule)({type:"Plugin",description:"SearchButton",create:function(t){return new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(m,t);var e,n,o,l,d,p=u(m);function m(){var t,e,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),t=p.call(this,{name:"SearchButton",displayIcon:Object(r.a)("viewer-search-16","search-thin-16"),comment:"Search",description:"Search",order:2,hint:"Search",view:{type:"",config:{type:"aside-right",fullHeight:!1}}}),e=f(t),o=!0,(n="hidden")in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,t.logger=h.createLogger("Search Button Plugin"),t}return e=m,(n=[{key:"events",get:function(){return[]}},{key:"setup",value:(l=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})),d=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=l.apply(t,e);function i(t){a(o,n,r,i,s,"next",t)}function s(t){a(o,n,r,i,s,"throw",t)}i(void 0)}))},function(){return d.apply(this,arguments)})},{key:"initView",value:function(){this.hasView=!1}},{key:"activate",value:function(){this.logger.LogDebug("Search button ACTIVATED")}},{key:"deactivate",value:function(){this.logger.LogDebug("Search button DEACTIVATED")}}])&&s(e.prototype,n),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),m}(t))}});h.addModule(t)},function(t,e,n){"use strict";n(268)},function(t,e,n){"use strict";n(269)},function(t,e,n){"use strict";n(270)},function(t,e,n){"use strict";n(271)},function(t,e,n){"use strict";n(272)},function(t,e,n){"use strict";n(273)},function(t,e,n){"use strict";n(274)},function(t,e,n){"use strict";n(275)},function(t,e,n){"use strict";n(276)},function(t,e,n){"use strict";n(277)},function(t,e,n){"use strict";n(278)},function(t,e,n){"use strict";n(279)},function(t,e,n){"use strict";n(281)},function(t,e,n){"use strict";n(282)},function(t,e,n){"use strict";n(283)},function(t,e,n){"use strict";n(284)},function(t,e,n){"use strict";n(285)},function(t,e,n){"use strict";n(286)},function(t,e,n){"use strict";n(287)},function(t,e,n){"use strict";n(288)},function(t,e,n){"use strict";n(289)},function(t,e,n){"use strict";n(290)},function(t,e,n){"use strict";n(291)},function(t,e,n){"use strict";n(292)},function(t,e,n){"use strict";n(293)},function(t,e,n){"use strict";n(294)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(43),o={};o["2D/IDLE"]=[{to:"2D/MOUSE_MOVES",where:function(t){return["mousemove"===t.type]}},{to:"2D/BOARD_ZOOMS",where:function(t){return["wheel"===t.type]}},{to:"2D/R_BUTTON_IS_PRESSED",where:function(t){return["mousedown"===t.type,t.button===r.a.Right]}},{to:"2D/L_BUTTON_IS_PRESSED",where:function(t){return["mousedown"===t.type,t.button===r.a.Left]}},{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type]}},{to:"2D/DBLCLICK",where:function(t){var e,n;return["dblclick"===t.type,t.button===r.a.Left,(null===(e=t.clickPos)||void 0===e?void 0:e.x)===t.clientX,(null===(n=t.clickPos)||void 0===n?void 0:n.y)===t.clientY]}}],o["2D/MOUSE_MOVES"]=o["2D/IDLE"],o["2D/R_BUTTON_IS_PRESSED"]=[{to:"2D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type,t.button===r.a.Left]}},{to:"2D/IDLE",where:function(t){return["mousemove"!==t.type,t.button===r.a.Right]}}],o["2D/L_BUTTON_IS_PRESSED"]=[{to:"2D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type,t.button===r.a.Left,t.clickPos.x!==t.clientX||t.clickPos.y!==t.clientY]}},{to:"2D/COMPONENT_LAUNCH_SELECTION",where:function(t){return["mouseup"===t.type,t.button===r.a.Left,t.clickPos.x===t.clientX,t.clickPos.y===t.clientY]}}],o["2D/BOARD_TRANSLATES"]=[{to:"2D/BOARD_TRANSLATES",where:function(t){return["mousemove"===t.type]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(t){return["mouseup"===t.type,t.button===r.a.Right||t.button===r.a.Left]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(t){return["mouseleave"===t.type]}}],o["2D/COMPONENT_LAUNCH_SELECTION"]=o["2D/IDLE"],o["2D/DBLCLICK"]=o["2D/IDLE"],o["2D/BOARD_ZOOMS"]=o["2D/IDLE"],o["2D/BOARD_DID_TRANSLATE"]=o["2D/IDLE"],o["2D/TOUCH_END"]=o["2D/IDLE"],o["2D/TOUCH_START"]=[{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type]}},{to:"2D/TOUCH_MOVE",where:function(t){return["touchmove"===t.type]}},{to:"2D/TOUCH_END",where:function(t){return["touchend"===t.type]}}],o["2D/TOUCH_MOVE"]=[{to:"2D/TOUCH_START",where:function(t){return["touchstart"===t.type]}},{to:"2D/TOUCH_MOVE",where:function(t){return["touchmove"===t.type]}},{to:"2D/TOUCH_END",where:function(t){return["touchend"===t.type]}}]},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(51),o={};o.IDLE=[{to:"2D",where:function(t){return["rendermodechange"===t.type,t.mode===r.a.Render2D]}},{to:"3D",where:function(t){return["rendermodechange"===t.type,t.mode===r.a.Render3D]}}],o["2D"]=[{to:"2D/MEASUREMENT",where:function(t){return["Measurement:activate"===t.type]}},{to:"3D",where:function(t){return["rendermodechange"===t.type,t.mode===r.a.Render3D]}}],o["2D/MEASUREMENT"]=[{to:"2D",where:function(t){return["Measurement:deactivate"===t.type]}},{to:"3D",where:function(t){return["rendermodechange"===t.type,t.mode===r.a.Render3D]}}],o["3D"]=[{to:"2D",where:function(t){return["rendermodechange"===t.type,t.mode===r.a.Render2D]}}]},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(447),o=n(146),i=n(19);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=u(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(u,t);var e,n,r,a=f(u);function u(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),m(h(o=a.call(this,e,n,r)),"_offset",{left:0,top:0}),m(h(o),"canvas",void 0),o.canvas=t,o.dispatch=o.dispatch.bind(h(o)),o.bindUIEvents(),o}return e=u,(n=[{key:"isAbomMode",value:function(){var t={value:null};return!!i.a.tryGetAttributeValue("data-abom",t)&&"true"===t.value}},{key:"destroy",value:function(){this.unbindUIEvents()}},{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}},{key:"background",set:function(t){this.canvas.style.background=o.a.rgbaToHex(t)}},{key:"offset",get:function(){var t=document.body.getBoundingClientRect(),e=this.canvas.getBoundingClientRect();return this._offset.left=e.left-t.left,this._offset.top=e.top-t.top,this._offset}},{key:"bindUIEvents",value:function(){var t=this,e=this.canvas.parentElement;u.OWN_UI_EVENTS_TO_LISTEN.forEach((function(n){return e.addEventListener(n,t.dispatch)})),u.PARENT_UI_EVENTS_TO_LISTEN.forEach((function(n){return e.addEventListener(n,t.dispatch)})),u.GLOBAL_UI_EVENTS_TO_LISTEN.forEach((function(e){return document.addEventListener(e,t.dispatch)}))}},{key:"unbindUIEvents",value:function(){var t=this,e=this.canvas.parentElement;u.OWN_UI_EVENTS_TO_LISTEN.forEach((function(n){return e.removeEventListener(n,t.dispatch)})),u.PARENT_UI_EVENTS_TO_LISTEN.forEach((function(n){return e.removeEventListener(n,t.dispatch)})),u.GLOBAL_UI_EVENTS_TO_LISTEN.forEach((function(e){return document.removeEventListener(e,t.dispatch)}))}},{key:"dispatch",value:function(t){var e=this.isAbomMode()&&t instanceof MouseEvent;return!(t instanceof Event)||t instanceof KeyboardEvent||e||t.preventDefault(),c(p(u.prototype),"dispatch",this).call(this,t)}}])&&s(e.prototype,n),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(r.a);m(v,"OWN_UI_EVENTS_TO_LISTEN",["mousedown","mouseup","mousemove","wheel","touchstart","touchmove","touchend","mouseleave","click","dblclick"]),m(v,"PARENT_UI_EVENTS_TO_LISTEN",["resize"]),m(v,"GLOBAL_UI_EVENTS_TO_LISTEN",["keydown","keyup"])},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(18);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=s(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(l,t);var e,n,o,s=u(l);function l(t,e,n){var r,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),r=s.call(this,t,e),o=f(r),a=void 0,(i="branches")in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,r.branches=n,r}return e=l,(n=[{key:"HEAD",get:function(){var t=this.branches[this.state];return t instanceof r.a||null!=t&&t.isFsm?t:this}},{key:"addBranch",value:function(t,e){return this.branches[t]=e,this.branches}},{key:"deleteBranch",value:function(t){return this.branches.hasOwnProperty(t)&&delete this.branches[t],this.branches}},{key:"dispatch",value:function(t){return this.HEAD!==this&&this.HEAD.dispatch(t)&&a(d(l.prototype),"dispatch",this).call(this,t)||a(d(l.prototype),"dispatch",this).call(this,t)}}])&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}(r.a)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return k}));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"primitives",void 0),o(this,"pcbIndex",void 0),o(this,"schIndex",void 0),o(this,"subIndex",void 0),this.primitives=null!=e?e:[],this.pcbIndex=new Map,this.schIndex=new Map,this.subIndex=new Map,this.reindex()}var e,n,i;return e=t,(n=[{key:"add",value:function(t){var e=this;if(null!==t){var n=t.id,r=this.addPrim(t);return void 0===r||void 0===t.pcbId||(this.subIndex.set(n,r),t.primitives&&(t.primitives=t.primitives.map((function(t){return e.subIndex.get(t)})).filter((function(t){return void 0!==t})))),r}}},{key:"resetSubIndex",value:function(){this.subIndex.clear()}},{key:"addPrim",value:function(t){var e=this.getKeys(t);if(e.pcb){if(this.pcbIndex.has(e.pcb)){var n=this.pcbIndex.get(e.pcb);return t.schId&&!this.primitives[n].schId&&(t.id=n,this.primitives[n]=t),n}}else if(e.sch&&this.schIndex.has(e.sch))return this.schIndex.get(e.sch);return t.id=this.primitives.length,this.primitives.push(t),e.pcb&&this.pcbIndex.set(e.pcb,t.id),e.sch&&!this.schIndex.has(e.sch)&&this.schIndex.set(e.sch,t.id),t.id}},{key:"reindex",value:function(){var t=this;this.primitives.forEach((function(e){var n=t.getKeys(e);n.pcb&&(t.pcbIndex.has(n.pcb)||t.pcbIndex.set(n.pcb,e.id)),n.sch&&(t.schIndex.has(n.sch)||t.schIndex.set(n.sch,e.id))}))}},{key:"getKeys",value:function(t){var e=void 0;return t.schId&&t.schDocId&&(e="".concat(t.schDocId,"/").concat(t.schId)),{pcb:t.pcbId,sch:e}}}])&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),a=n(85),s=n(149);function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(){function t(e,n){var r,o,i,a,s,c=this,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,t),h(this,"fileName",void 0),h(this,"data",void 0),h(this,"primitives",void 0),h(this,"nets",void 0),h(this,"components",void 0),this.fileName=n,this.data=JSON.parse(JSON.stringify(e)),this.primitives=null!==(r=this.data.primitives)&&void 0!==r?r:[],this.components=null!==(o=null===(i=this.data.components)||void 0===i?void 0:i.map((function(t){return new v(t,c.Primitives,u)})))&&void 0!==o?o:[],this.nets=null!==(a=null===(s=this.data.nets)||void 0===s?void 0:s.map((function(t){return new m(t,c.Primitives)})))&&void 0!==a?a:[]}return d(t,[{key:"FileName",get:function(){return this.fileName}},{key:"Data",get:function(){return this.data}},{key:"Primitives",get:function(){return this.primitives}},{key:"Nets",get:function(){return this.nets},set:function(t){this.nets=t}},{key:"Components",get:function(){return this.components},set:function(t){this.components=t}},{key:"apply",value:function(t){return this.Data.nets=this.nets.map((function(e){return e.apply(t)})),this.Data.components=this.Components.map((function(e){return e.apply(t)})),this.Data.primitives=this.Primitives,this.Data}}]),t}(),m=function(){function t(e,n){var r,o;l(this,t),h(this,"net",void 0),h(this,"primitives",void 0),this.net=e,this.primitives=null!==(r=null===(o=e.primitives)||void 0===o?void 0:o.map((function(t){return n[t]})))&&void 0!==r?r:[]}return d(t,[{key:"Net",get:function(){return this.net}},{key:"Primitives",get:function(){return this.primitives}},{key:"add",value:function(t){null!=t&&this.primitives.push(t)}},{key:"join",value:function(t){if(!t)return this;try{this.joinNet(t.Net)}catch(t){console.error(t)}try{this.joinPrimitives(t)}catch(t){console.error(t)}return this}},{key:"joinPrimitives",value:function(t){var e=this;t.primitives&&t.primitives.forEach((function(t){if(y(t)){var n=g(e.Primitives,t.hash);n?b(n,t):e.primitives.push(t)}else e.primitives.push(t)}))}},{key:"joinNet",value:function(t){var e;(e=this.net).nameDefined||(e.nameDefined=t.nameDefined),t.layersUsed&&(this.net.layersUsed?this.net.layersUsed=c(new Set(this.net.layersUsed.concat(t.layersUsed))):this.net.layersUsed=t.layersUsed),t.boundRects&&(this.net.boundRects?this.net.boundRects=c(new Set(this.net.boundRects.concat(t.boundRects))):this.net.boundRects=t.boundRects),t.length&&(this.net.length=this.net.length?this.net.length+t.length:t.length),t.unroutedLength&&(this.net.unroutedLength=this.net.unroutedLength?this.net.unroutedLength+t.unroutedLength:t.unroutedLength)}},{key:"isValid",value:function(){if(0===this.Primitives.length)return!1;if(this.Primitives.filter((function(t){return y(t)})).length<=1){if(this.Net.nameDefined)return!0;var t=a.c.Port<<8;if(this.Primitives.find((function(e){return e.kind==t})))return!0;var e=a.c.Power<<8;return!!this.Primitives.find((function(t){return t.kind==e}))}return!0}},{key:"apply",value:function(t){if(t){var e=this.primitives.map((function(e){return t.add(e)})).filter((function(t){return void 0!==t}));this.Net.primitives=c(new Set(e))}return this.Net}}]),t}(),v=function(){function t(e,n,r){var o,i;l(this,t),h(this,"component",void 0),h(this,"primitives",void 0),h(this,"isSchSource",void 0),h(this,"logicalDesignator",void 0),h(this,"physicalDesignator",void 0),this.isSchSource=r,this.component=e,this.primitives=null!==(o=null===(i=e.primitives)||void 0===i?void 0:i.map((function(t){return n[t]})))&&void 0!==o?o:[],this.setupDesignator()}return d(t,[{key:"Component",get:function(){return this.component}},{key:"Primitives",get:function(){return this.primitives}},{key:"join",value:function(t){try{this.joinPrimitives(t)}catch(t){console.error(t)}try{this.joinParameters(t.Component,!!this.Component.schId)}catch(t){console.error(t)}try{this.joinComponent(t)}catch(t){console.error(t)}return this}},{key:"joinPrimitives",value:function(t){var e=this;t.Primitives.forEach((function(t){if(y(t)){var n=g(e.Primitives,t.hash);n&&b(n,t)}else e.Primitives.push(t)}))}},{key:"joinParameters",value:function(t,e){var n=this;t.parameters&&(this.Component.parameters?t.parameters.forEach((function(t){var r=t.name.toUpperCase(),o=n.Component.parameters.filter((function(t){return t.name.toUpperCase()===r}));0==o.length?n.Component.parameters.push(t):o.forEach((function(r){if(r.at|=t.at,e){if(n.sameValues(r,t))return;r.value?r.alternateValue=t.value:r.value=t.value}else{if(n.sameValues(r,t))return;r.alternateValue=r.value,r.value=t.value}}))})):this.Component.parameters=t.parameters)}},{key:"joinComponent",value:function(t){var e,n,r,o,i,a,s,u,l,f,d,h,p,m=this.isSchSource?this.logicalDesignator:t.logicalDesignator,v=this.isSchSource?this.physicalDesignator:t.physicalDesignator;(this.Component.designator=this.formatDesignator(m,v),this.Component.kind|=t.Component.kind,this.Component.pcbId=null!==(e=this.Component.pcbId)&&void 0!==e?e:t.Component.pcbId,this.Component.pcbUniqueId=null!==(n=this.Component.pcbUniqueId)&&void 0!==n?n:t.Component.pcbUniqueId,this.Component.layerId=null!==(r=this.Component.layerId)&&void 0!==r?r:t.Component.layerId,this.Component.schId=null!==(o=this.Component.schId)&&void 0!==o?o:t.Component.schId,this.Component.schDocId=null!==(i=this.Component.schDocId)&&void 0!==i?i:t.Component.schDocId,this.Component.designatorId=null!==(a=this.Component.designatorId)&&void 0!==a?a:t.Component.designatorId,this.Component.channel=null!==(s=this.Component.channel)&&void 0!==s?s:t.Component.channel,this.Component.designItemId=null!==(u=this.Component.designItemId)&&void 0!==u?u:t.Component.designItemId,this.Component.rotation=null!==(l=this.Component.rotation)&&void 0!==l?l:t.Component.rotation,this.Component.inDM=null!==(f=this.Component.inDM)&&void 0!==f?f:t.Component.inDM,t.Component.pcbId&&!t.Component.description)?this.Component.description=t.Component.description:this.Component.description=null!==(p=this.Component.description)&&void 0!==p?p:t.Component.description;this.Component.boundRect=null!==(d=this.Component.boundRect)&&void 0!==d?d:t.Component.boundRect,this.Component.layerName=null!==(h=this.Component.layerName)&&void 0!==h?h:t.Component.layerName,t.Component.subParts&&(this.Component.subParts?this.Component.subParts=this.Component.subParts.concat(t.Component.subParts):this.Component.subParts=t.Component.subParts),t.Component.primitives&&(this.Component.primitives?this.Component.primitives=c(new Set(this.Component.primitives.concat(t.Component.primitives))):this.Component.primitives=t.Component.primitives)}},{key:"sameValues",value:function(t,e){return!e.value||!!t.value&&t.value.toUpperCase()===e.value.toUpperCase()}},{key:"apply",value:function(t){if(t){var e=this.primitives.map((function(e){return t.add(e)})).filter((function(t){return void 0!==t}));this.Component.primitives=c(new Set(e))}return this.Component}},{key:"setupDesignator",value:function(){var t=this.Component.designator,e=t.indexOf("(");-1!=e?(this.logicalDesignator=t.substring(e+1,t.length-1),this.physicalDesignator=t.substring(0,e).trim()):(this.logicalDesignator=this.isSchSource?t:"",this.physicalDesignator=this.isSchSource?"":t)}},{key:"formatDesignator",value:function(t,e){return e&&t?t.startsWith(e)?e:"".concat(e," (").concat(t,")"):e||(t||"UNKNOWN")}}]),t}();function y(t){var e=a.b.Pad,n=a.c.Pin<<8;if(void 0===(null==t?void 0:t.kind))throw new s.a("primitive.kind");return t.kind===e||t.kind===n||t.kind===(e||n)}function g(t,e){return t.find((function(t){return y(t)&&t.hash===e}))}function b(t,e){var n,r,o,i,a,c,u,l,f,d,h;if(!t)throw new s.a("first");if(!e)throw new s.a("other");if(t.hash!==e.hash)throw new Error("Source objects should have same hash.");t.kind|=e.kind,t.pcbId=null!==(n=e.pcbId)&&void 0!==n?n:t.pcbId,t.pcbUniqueId=null!==(r=e.pcbUniqueId)&&void 0!==r?r:t.pcbUniqueId,t.layerId=null!==(o=e.layerId)&&void 0!==o?o:t.layerId,t.schId=null!==(i=e.schId)&&void 0!==i?i:t.schId,t.schDocId=null!==(a=e.schDocId)&&void 0!==a?a:t.schDocId,t.holeSize=null!==(c=e.holeSize)&&void 0!==c?c:t.holeSize,t.shape=null!==(u=e.shape)&&void 0!==u?u:t.shape,t.shapeSizeX=null!==(l=e.shapeSizeX)&&void 0!==l?l:t.shapeSizeX,t.shapeSizeY=null!==(f=e.shapeSizeY)&&void 0!==f?f:t.shapeSizeY,t.plated=null!==(d=e.plated)&&void 0!==d?d:t.plated,t.rotation=null!==(h=e.rotation)&&void 0!==h?h:t.rotation}function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(E([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==w(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function O(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k=function(){function t(){C(this,t),E(this,"logger",window.__CORE__.createLogger("FullMetadata")),E(this,"schParts",new Map),E(this,"pcbParts",new Map),E(this,"data",void 0),E(this,"prjPart",void 0),E(this,"prjInfo",void 0),E(this,"isLoaded",!1)}var e,n;return x(t,[{key:"metadata",get:function(){return this.data}},{key:"add",value:(e=_().mark((function t(e,n,r){var o;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.logger.LogDebug("Add [".concat(n,"] version [").concat(e.version,"] in file [").concat(r,"]")),!this.isLoaded){t.next=4;break}return this.logger.LogWarn("Metadata is fully loaded."),t.abrupt("return");case 4:t.t0=n,t.next="PrjMetadata"===t.t0?7:"PcbMetadata"===t.t0?13:"SchMetadata"===t.t0?15:17;break;case 7:if(!this.prjPart){t.next=10;break}return this.logger.LogError("File [".concat(r,"] already added")),t.abrupt("return");case 10:return this.prjPart=e,this.prjInfo=this.getProjectInfo(e),t.abrupt("break",19);case 13:return this.addPart(e,r,!1),t.abrupt("break",19);case 15:return this.addPart(e,r,!0),t.abrupt("break",19);case 17:return this.logger.LogWarn("Unknown kind [".concat(n,"]")),t.abrupt("return");case 19:this.prjPart&&this.schParts.size===this.prjInfo.schCount&&(o=!this.prjInfo.activePcb||this.pcbParts.has(this.prjInfo.activePcb),!this.data&&o&&this.tryMerge(!0),this.pcbParts.size===this.prjInfo.pcbCount&&(this.isLoaded=!0,this.prjInfo.pcbCount>1&&this.tryMerge(!1)));case 20:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){O(i,r,o,a,s,"next",t)}function s(t){O(i,r,o,a,s,"throw",t)}a(void 0)}))},function(t,e,r){return n.apply(this,arguments)})},{key:"addPart",value:function(t,e,n){var r=n?this.schParts:this.pcbParts;r.has(e)?this.logger.LogError("File [".concat(e,"] already added")):r.set(e,t)}},{key:"getProjectInfo",value:function(t){var e,n=t;return{activePcb:null===(e=n.documents.find((function(t){return t.kind===a.a.Pcb&&t.active})))||void 0===e?void 0:e.fileName,pcbCount:n.documents.filter((function(t){return t.kind===a.a.Pcb})).length,schCount:n.documents.filter((function(t){return t.kind===a.a.Sch})).length}}},{key:"tryMerge",value:function(t){var e=Date.now(),n=t?"Main":"Other PCBs";try{this.logger.LogDebug("".concat(n," merge started")),t?this.mergeMain():this.mergeOtherPcb()}catch(t){this.logger.LogError("".concat(n," merge error"),t)}finally{var r=Date.now();this.logger.LogDebug("".concat(n," merge completed in ").concat(r-e," ms."))}}},{key:"mergeMain",value:function(){this.data=this.convertV2ToV1(this.fullMerge(this.prjInfo.activePcb))}},{key:"mergeOtherPcb",value:function(){var t=this;this.data?this.pcbParts.forEach((function(e,n){if(n!==t.prjInfo.activePcb){t.logger.LogDebug("Merge ".concat(n," (").concat(e.pcbDocument.id,")"));var r=t.joinPcbPrims(t.fullMerge(n),t.data.primitives);r.pcbDocument.layers=r.layers,t.data.pcbDocuments.push(r.pcbDocument),t.joinDocument(r.pcbDocument,t.data.documents),t.joinGraphite(t.data.projectVariants,r.projectVariants,r.pcbDocument.id),r.nets.forEach((function(e){var n=e.name.toUpperCase(),o=t.data.nets.find((function(t){return t.name.toUpperCase()===n}));o?(o.otherPcb||(o.otherPcb=new Map),o.primitives=o.primitives.concat(e.primitives),o.otherPcb.set(r.pcbDocument.id,e)):t.logger.LogWarn("Net ".concat(n," not found in project."))})),r.components.forEach((function(e){var n,o=e.hash.toUpperCase(),i=t.data.components.find((function(t){return t.hash.toUpperCase()===o}));if(!i&&(o=e.designator.toUpperCase(),!(i=t.data.components.find((function(t){return t.designator.toUpperCase()===o})))||null!==(n=i.otherPcb)&&void 0!==n&&n.has(r.pcbDocument.id)))return void t.logger.LogWarn("Component ".concat(e.designator," (").concat(o,") not found in project."));i.otherPcb||(i.otherPcb=new Map),i.primitives=i.primitives.concat(e.primitives),i.otherPcb.set(r.pcbDocument.id,e)}))}})):this.logger.LogError("Main merge not completed yet")}},{key:"fullMerge",value:function(t){var e,n,r=this,o=new p(this.prjPart,"");o.Data.pcbDocuments=[],o.Data.schDocuments=[];var a=new i(o.Primitives),s=void 0;if(t){var c=this.pcbParts.get(t);c?(s=new p(c,t),this.fullPcbMerge(o,s,a)):this.logger.LogError("Pcb [".concat(t,"] not found"))}var u=[];this.schParts.forEach((function(t,e){return u.push(new p(t,e,!0))})),u.forEach((function(t){return r.mergeSch(o,t,a)}));var l=this.getNetIndex(o.Nets);this.joinNets(o.Nets,l,null===(e=s)||void 0===e?void 0:e.Nets,!0),u.forEach((function(t){return r.joinNets(o.Nets,l,t.Nets,!1)}));var f=this.getComponentStorage(null===(n=s)||void 0===n?void 0:n.Components),d=new Map;return u.forEach((function(t){return r.getComponentStorage(t.Components,d)})),o.Components=Array.from(this.joinComponents(d,f)),this.removeEmptyNets(o,l),this.updateVariants(o),o.apply(a),o.Data}},{key:"fullPcbMerge",value:function(t,e,n){var r=e.Data.pcbDocument;if(r){r.layers=e.Data.layers,t.Data.pcbDocuments.push(r),t.Data.layers=e.Data.layers,t.Data.pcbDocument=e.Data.pcbDocument,e.Primitives.forEach((function(t){return t.pcbDocId=r.id})),e.Components.forEach((function(t){return t.Component.pcbDocId=r.id}));var o=new Set(e.Nets.flatMap((function(t){return t.Net.primitives})).concat(e.Components.flatMap((function(t){return t.Component.primitives}))));e.Primitives.filter((function(t){return!o.has(t.id)})).map((function(t){return n.add(t)})),this.joinGraphite(t.Data.projectVariants,e.Data.projectVariants)}else this.logger.LogError("Pcb document is null")}},{key:"joinGraphite",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&e&&t.forEach((function(t){var r=e.find((function(e){return e.uniqueId===t.uniqueId}));r&&(n?t.otherPcb.set(n,{graphite:r.graphite,graphiteMapping:r.graphiteMapping}):(t.graphite=r.graphite,t.graphiteMapping=r.graphiteMapping,t.otherPcb=new Map))}))}},{key:"mergeSch",value:function(t,e,n){if(e.Data.schDocuments&&e.Data.schDocuments.length>0){var r=e.Data.schDocuments[0];t.Data.schDocuments.push(r)}var o=e.Primitives;if(o){var i=a.c.SheetEntry<<8,s=a.c.SheetSymbol<<8;o.filter((function(t){return t.kind==i||t.kind==s})).forEach((function(t){return n.add(t)}))}}},{key:"getNetIndex",value:function(t){var e=new Map;return t.forEach((function(t,n){t.Net.name&&e.set(t.Net.name.toUpperCase(),n)})),e}},{key:"joinNets",value:function(t,e,n,r){n&&n.forEach((function(n){var o=n.Net.name;if(o){var i=e.get(o.toUpperCase());if(void 0!==i)if(r)t[i]=n;else t[i].join(n)}}))}},{key:"getComponentStorage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e||(e=new Map),t&&t.forEach((function(t){var n,r,o=null===(n=e)||void 0===n?void 0:n.get(t.Component.hash);o||(o=[],null===(r=e)||void 0===r||r.set(t.Component.hash,o));o.push(t)})),e}},{key:"joinComponents",value:_().mark((function t(e,n){var r,o,i,a,s,c,u,l;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!n){t.next=22;break}r=Array.from(n.entries()),o=0;case 3:if(!(o<r.length)){t.next=22;break}if(i=r[o][0],a=r[o][1],!((s=e.get(i))&&s.length>0)){t.next=12;break}return e.delete(i),t.delegateYield(this.joinComponent(s,a),"t0",10);case 10:t.next=19;break;case 12:c=0;case 13:if(!(c<a.length)){t.next=19;break}return t.next=16,a[c];case 16:c++,t.next=13;break;case 19:o++,t.next=3;break;case 22:if(!e){t.next=37;break}u=Array.from(e.values()),o=0;case 25:if(!(o<u.length)){t.next=37;break}l=u[o],c=0;case 28:if(!(c<l.length)){t.next=34;break}return t.next=31,l[c];case 31:c++,t.next=28;break;case 34:o++,t.next=25;break;case 37:case"end":return t.stop()}}),t,this)}))},{key:"joinComponent",value:_().mark((function t(e,n){var r,o;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>1&&e.length==n.length)){t.next=10;break}r=0;case 2:if(!(r<e.length)){t.next=8;break}return t.next=5,n[r].join(e[r]);case 5:r++,t.next=2;break;case 8:t.next=19;break;case 10:o=e[0],r=0;case 12:if(!(r<n.length)){t.next=18;break}return t.next=15,n[r].join(o);case 15:r++,t.next=12;break;case 18:case 19:case"end":return t.stop()}}),t)}))},{key:"removeEmptyNets",value:function(t,e){t.Nets=t.Nets.filter((function(t){return t.isValid()}));var n=this.getNetIndex(t.Nets),r=new Map;n.forEach((function(t,n){e.has(n)&&r.set(e.get(n),t)})),t.Data.netClasses=this.reindexNets(t.Data.netClasses,r),t.Data.diffPairs=this.reindexNets(t.Data.diffPairs,r),t.Nets.filter((function(t){return t.Net.entries})).forEach((function(t){var e,n;t.Net.entries=null===(e=t.Net.entries)||void 0===e?void 0:e.filter((function(t){return r.has(t)})).map((function(t){return r.get(t)})),t.Net.entries=null!==(n=t.Net.entries)&&void 0!==n&&n.length?t.Net.entries:void 0}))}},{key:"reindexNets",value:function(t,e){if(!t)return[];var n=[];return t.forEach((function(t){var r=t.items.filter((function(t){return e.has(t)})).map((function(t){return e.get(t)}));r.length>0&&n.push({name:t.name,items:r})})),n}},{key:"updateVariants",value:function(t){var e;if(null!==(e=t.Data.projectVariants)&&void 0!==e&&e.length&&t.Components.length){var n=this.getComponentIndex(t.Components);t.Data.projectVariants.forEach((function(t){t.componentVariations&&t.componentVariations.forEach((function(t){if(t.uniqueId&&n.has(t.uniqueId)){var e=n.get(t.uniqueId);if(1==e.length)t.pcbId=e[0].pcbId;else if(e.length>1){if(!t.alternatePart)return;var r=e.find((function(e){return e.comment===t.alternatePart}));r&&(t.pcbId=r.pcbId)}}}))}))}}},{key:"getComponentIndex",value:function(t){var e=new Map;return t&&t.forEach((function(t){if(t.Component.hash){var n=null==e?void 0:e.get(t.Component.hash);n||(n=[],null==e||e.set(t.Component.hash,n)),n.push(t.Component)}})),e}},{key:"joinDocument",value:function(t,e){if(t){var n=t.fileName.toUpperCase(),r=e.find((function(t){return t.fileName.toUpperCase()===n}));r&&(r.id=t.id,t.order=r.order)}return t}},{key:"convertV2ToV1",value:function(t){var e=this,n=t.channels;return t.schDocuments.forEach((function(r){e.joinDocument(r,t.documents);var o=r.fileName.toUpperCase();n&&n.filter((function(t){return t.fileName.toUpperCase()===o})).forEach((function(t){return t.schId=r.id}))})),t.bomDocument=this.joinDocument(t.documents.find((function(t){return t.kind==a.a.ActiveBom})),t.documents),t.pcbDwfDocuments=t.documents.filter((function(t){return t.kind==a.a.Draftsman})).map((function(n){return e.joinDocument(n,t.documents)})),t.draftsman=t.pcbDwfDocuments.length,this.joinDocument(t.pcbDocument,t.documents),t}},{key:"joinPcbPrims",value:function(t,e){var n=new Map;return t.primitives.forEach((function(t){if(t.pcbDocId){var r=t.id;t.id=e.length,n.set(r,t.id),e.push(t),t.primitives&&(t.primitives=t.primitives.map((function(t){return n.get(t)})).filter((function(t){return void 0!==t})))}})),t.nets.forEach((function(t){t.primitives=t.primitives.map((function(t){return n.get(t)})).filter((function(t){return void 0!==t}))})),t.components=t.components.filter((function(t){return t.pcbId})),t.components.forEach((function(t){t.primitives=t.primitives.map((function(t){return n.get(t)})).filter((function(t){return void 0!==t}))})),t}}],[{key:"transformToMetadataV2",value:function(t){var e,n,r;t.pcbDocument&&(t.pcbDocument.layers=null==t?void 0:t.layers,null===(e=t.components)||void 0===e||e.forEach((function(e){return e.pcbDocId=t.pcbDocument.id})),null===(n=t.primitives)||void 0===n||n.forEach((function(e){return e.pcbDocId=t.pcbDocument.id})),null===(r=t.nets)||void 0===r||r.forEach((function(e){return e.pcbDocId=t.pcbDocument.id})));t.pcbDocuments=t.pcbDocument?[t.pcbDocument]:[]}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){var e=t.map((function(t){return Promise.resolve(t).then((function(t){return{status:"fulfilled",value:t}}),(function(t){return{status:"rejected",reason:t}}))}));return Promise.all(e)}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.d(e,"a",(function(){return i}));var i=o((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.boxMin=e,this.boxMax=n}))},function(t,e,n){"use strict";var r,o;n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),function(t){t[t.ThruVia=0]="ThruVia",t[t.BlindVia=1]="BlindVia",t[t.BuriedVia=2]="BuriedVia",t[t.StackedMicroVia=3]="StackedMicroVia",t[t.SkipMicroVia=4]="SkipMicroVia"}(r||(r={})),function(t){t[t.Standard=0]="Standard",t[t.Printed=1]="Printed"}(o||(o={}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}));var a=o((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"listeners",[]),i(this,"listenersOncer",[]),i(this,"on",(function(t){return e.listeners.push(t),{dispose:function(){return e.off(t)}}})),i(this,"once",(function(t){e.listenersOncer.push(t)})),i(this,"off",(function(t){var n=e.listeners.indexOf(t);n>-1&&e.listeners.splice(n,1)})),i(this,"emit",(function(t){e.listeners.forEach((function(e){return e(t)})),e.listenersOncer.forEach((function(e){return e(t)})),e.listenersOncer=[]})),i(this,"pipe",(function(t){return e.on((function(e){return t.emit(e)}))}))}))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}));var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),i(this,"height",void 0),i(this,"width",void 0),this.width=e,this.height=n}var e,n,a;return e=t,a=[{key:"empty",value:function(){return new t}},{key:"add",value:function(e,n){return new t(e.width+n.width,e.height+n.height)}},{key:"subtract",value:function(e,n){return new t(e.width-n.width,e.height-n.height)}},{key:"truncate",value:function(e){return new t(this.trunc(e.width),this.trunc(e.height))}},{key:"trunc",value:function(t){return t>0?Math.floor(t):Math.ceil(t)}}],(n=[{key:"add",value:function(t){return this.width+=t.width,this.height+=t.height,this}},{key:"subtract",value:function(t){return this.width-=t.width,this.height-=t.height,this}},{key:"equals",value:function(t){return this.width==t.width&&this.height==t.height}},{key:"truncate",value:function(){return this.width=t.trunc(this.width),this.height=t.trunc(this.height),this}},{key:"toString",value:function(){return"{width="+this.width+", height="+this.height+"}"}},{key:"isEmpty",value:function(){return 0==this.height&&0==this.width}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(18),o=n(91);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={where:function(t){return["Ready"===t.type]},to:"READY"},p={where:function(t){return["Load"===t.type]},to:"LOAD"},m={IDLE:[h,{where:function(t){return["Hidden"===t.type]},to:"HIDDEN"}],READY:[p],HIDDEN:[h],LOAD:[{where:function(t){return["Run"===t.type]},to:"RUN"},{where:function(t){return["Error"===t.type]},to:"CRASHED",error:!0}],CRASHED:[p]},v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,t);var e,n,r,i=c(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),d(l(t=i.call(this,"IDLE",m)),"logger",void 0),d(l(t),"domain",""),d(l(t),"designId",""),d(l(t),"metadata",null),d(l(t),"apiHeaders",void 0),t}return e=u,(n=[{key:"setup",value:function(t){var e=this;this.logger=t.createLogger("BOMEngine"),this.domain=t.domain,this.apiHeaders=t.apiHeaders;var n=t.response;if(n&&n.storage&&n.storage.files){this.metadata=n.metadata;var r=n.storage.files.findIndex((function(t){return"Bom"===t.fileType}));this.designId=n.designId,r>=0?this.dispatch({type:"Ready"}):(t.bus.on("storageResolveComplete",(function(t){t.files.findIndex((function(t){return"Bom"===t.fileType}))>=0&&e.dispatch({type:"Ready"})})),this.dispatch({type:"Hidden"}))}else this.dispatch({type:"Hidden"})}},{key:"load",value:function(){var t=this;return new Promise((function(e,n){var r=function e(r){t.off("CRASHED",e),n(r)};t.dispatch({type:"Load"})?t.loadBomData(!1).then((function(t){t&&e()})).catch((function(e){t.logger.LogError("Get BOM data error. ".concat(e.message,".")),t.dispatch({type:"Error",error:e}),n(e)})):"LOAD"===t.state?(t.on("CRASHED",r),t.on("RUN",(function(n){t.off("RUN",r),e()}))):e()}))}},{key:"getSelectData",value:function(t){if(!this.metadata)return null;if(!this.metadata.components)return null;var e=this.metadata.components.find((function(e){return e.designator===t}));return e?Object(o.a)("component",e,"BOMEngine"):null}},{key:"toViewItems",value:function(t){var e="",n=new Map;return t&&t.Variants&&t.Variants.length>0&&(e=t.Variants[0].Id,t.Variants.forEach((function(t){var e=[];n.set(t.Id,e),t.Items.forEach((function(t,n){var r,o;e.push({id:n,name:null!==(r=null!==(o=t.Name)&&void 0!==o?o:t.Comment)&&void 0!==r?r:"Unknown",url:t.OctopartUrl,price:t.Price,description:t.Description,designator:t.Designator.split(","),quantity:t.Quantity})}))}))),{variants:n,defaultId:e}}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return Bo}));var r=n(15),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-panel",attrs:{id:"comments-panel"}},[e("AppHeader"),t._v(" "),t.hasThreads?e("div",{staticClass:"comment-panel__btns"},[t.isAnonym?e("RegisterA365",{attrs:{link:t.saveTo,vertical:""}}):e("AfsButton",{attrs:{icon:"plus-16-2",wide:"","is-selected":t.isActiveAddComment,url:t.registerUrl},on:{click:t.onAddPlaceComment}},[t._v("\n      Place a Comment\n    ")])],1):t._e(),t._v(" "),t.filters&&t.hasThreads&&!t.isAnonym?e("AppFilters",{staticClass:"comment-panel__filters",attrs:{filters:t.filters},on:{"change-radio":t.onChangeFilters,"change-checkbox":t.onChangeFilters,"change-checkbox-user":t.onChangeFilters,"clear-filters":t.onClearFilters,"open-notifications":t.onOpenNotificationsSettings,"visibility-change":t.onVisibilityChange}}):t._e(),t._v(" "),e("ThreadList",{attrs:{"is-active-add-comment":t.isActiveAddComment,filters:t.filters},on:{"add-comment":t.onAddPlaceComment}}),t._v(" "),e("ModalAddComments",{ref:"modalAddComment",attrs:{"edit-modes":t.editModes,"active-comment-position":t.activeCommentPosition,"is-drawing":t.isDrawing,"update-posted-thread":t.updatePostedThread,"is-loading":t.isLoading,"has-comment-text":t.threadCommentHasText},on:{close:t.onClosePlaceComment,"close-all-modal":t.closeAllModal,"check-exist-text":t.hasCommentText,"set-open-modal":t.setOpenModal,"remove-open-modal":t.removeOpenModal,confirm:t.onConfirmCreateThread},scopedSlots:t._u([{key:"content",fn:function(){return[e("UserInfo",{attrs:{img:t.currentUser.avatarUrl,title:t.currentUser.name,ellipsis:""}}),t._v(" "),e("CommentForm",{ref:"commentForm",attrs:{"first-comment":!0},on:{submit:t.onCreateNewThread,cancel:t.onCloseModalAddComment}})]},proxy:!0}])}),t._v(" "),e("ModalEditComments",{ref:"modalEditComments",attrs:{"edit-modes":t.editModes}}),t._v(" "),e("ModalNotifications",{ref:"modalNotificationsSettings",attrs:{"user-settings":t.userSettings,"is-updating":t.isUpdatingNotifications},on:{update:t.onUpdateNotificationsSettings}}),t._v(" "),e("AddCommentToast",{ref:"addCommentToast",attrs:{"active-tab":t.activeViewTabs},on:{"close:esc":t.onClosePlaceComment}}),t._v(" "),e("div",{staticClass:"comment-panel__feedback"},[e("AfsLink",{attrs:{href:t.commentsSurveyUrl,target:"_blank"}},[t._v("\n      Leave Feedback\n    ")])],1)],1)};o._withStripped=!0;var i=n(26),a=n(38),s=n(100),c=n(20),u=n(6),l=n(92),f=function(){var t=this,e=t._self._c;return e("div",{ref:"threads",staticClass:"thread-list",class:{"thread-align":!t.groupedThreads.length}},[t._l(t.groupedThreads,(function(n,r){return e("ThreadGroup",{key:"".concat(n.id,"-").concat(r),attrs:{title:n.name,icon:n.icon,"icon-filled":n.iconFilled,count:n.threads.length},scopedSlots:t._u([{key:"default",fn:function(){return t._l(n.threads,(function(t){return e("ThreadItem",{key:t.id,attrs:{thread:t}})}))},proxy:!0}],null,!0)})})),t._v(" "),t.showPlaceholder?[e("ThreadPlaceholder",{attrs:{"is-anonymous":t.showAnonymousPlaceholder,"register-link":t.registerUrl,"is-active-add-comment":t.isActiveAddComment},on:{"add-comment":t.onAddComment}})]:t._e(),t._v(" "),t.showNoResultsPlaceholder?e("Placeholder",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("Icon",{staticClass:"placeholder__icon",attrs:{name:t.placeholderIcon}})]},proxy:!0},{key:"default",fn:function(){return[t._v("\n      "+t._s(t.placeholderMessage)+"\n    ")]},proxy:!0}],null,!1,3446532985)}):t._e(),t._v(" "),t.isLoading?e("Loader",{attrs:{"has-text":"",type:"overlay"}}):t._e()],2)};f._withStripped=!0;var d=n(54),h=n(4);function p(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var v=function(){var t=r.b.state,e=[].concat(p(r.b.getters.lwTasks),p(r.b.getters.threads));return r.b.getters.activeFilters.forEach((function(n){var o;("my"===n.id&&(e=e.filter((function(t){return t.comments.some((function(t){return!![u.x,u.k].includes(t.author.id)||(t.mentions?t.mentions.some((function(t){return t&&[u.x,u.k].includes(t.MentionGuid)})):void 0)}))}))),"from"===n.id&&n.user&&(e=e.filter((function(t){return t.comments.some((function(t){return t.author.id===n.user.id}))}))),"unresolved"===n.id&&(e=e.filter((function(t){return!t.resolved}))),"current"===n.id&&(e=e.filter((function(e){var n=e.docId;return n===r.b.getters.currentDocId||u.r&&n===t.docIdGerber}))),"tasksonly"===n.id&&(e=e.filter((function(t){var e;return!(null===(e=t.properties)||void 0===e||!e.LwTaskId)}))),"assignedto"===n.id)&&(null!==(o=n.users)&&void 0!==o&&o.length&&(e=e.filter((function(t){return n.users.some((function(e){return e.id===t.assignedTo||e.GlobalUserId===t.assignedTo}))}))))})),e},y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"thread-item"},[e("CommentItem",{attrs:{author:t.mainComment.author,"comment-data":t.mainComment.date,text:t.mainComment.text,counter:t.commentsCount,"is-active":t.isThreadActive,"has-drawing":t.hasDrawing,"has-user-screenshots":t.hasUserScreenshots,"is-resolved":t.isThreadResolved,"assigned-to":t.assignedTo,"thread-number":t.threadNumber,"replay-data":t.replayData,"release-guid":t.releaseGuid,label:t.threadLabel,"label-hint":t.threadLabelHint,thread:t.thread,"snapshot-vcs-revision":t.snapshotVcsRevision},on:{click:t.onThreadClick}})],1)};y._withStripped=!0;var g=n(87),b=n.n(g),w=n(68),_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-item",class:t.classes,on:{click:t.onCommentItemClick,mouseover:function(e){return t.onHover(!0)},mouseleave:function(e){return t.onHover(!1)}}},[e("div",{staticClass:"comment-item__header"},[t.hasTaskData?e("CommentHeaderAssignedTitle",{attrs:{"assigned-to":t.assignedToData,label:t.label,"label-hint":t.labelHint,"thread-number":t.threadNumber,"task-hrid":t.thread.properties.LwTaskHrid||"","task-priority":t.thread.properties.LwTaskPriority||"","task-status":t.thread.properties.LwTaskStatus||"","task-link":t.taskLink,"is-active":t.isActive,"is-hover":t.isHover}}):e("CommentHeaderTitle",{attrs:{"thread-number":t.threadNumber,"is-resolved":t.isResolved,"is-active":t.isActive,label:t.label,"label-hint":t.labelHint}}),t._v(" "),t.author.name?e("div",{staticClass:"comment-item__owner"},[e("UserInfo",{attrs:{"title-class":"comment-item__owner-name","meta-class":"comment-item__owner-data",img:t.author.avatarUrl,title:t.author.name,meta:t.commentData,ellipsis:""}})],1):t._e()],1),t._v(" "),e("div",{staticClass:"comment-item__body"},[t.releaseGuid?e("ReleaseLink",{staticClass:"comment-item__release-link",attrs:{"page-url":t.dataPageUrl,"project-src":t.dataProjectGuid||t.dataProjectSrc,"analytics-subject":t.analyticsSubject,"release-guid":t.releaseGuid,release:t.currentReleases}}):t._e(),t._v(" "),t.showDesignRevisionLink?e("DesignRevisionLink",{staticClass:"comment-item__revision-link",attrs:{"page-url":t.dataPageUrl,"project-src":t.dataProjectGuid||t.dataProjectSrc,"vcs-revision":t.snapshotVcsRevision,"analytics-subject":t.analyticsSubject}}):t._e(),t._v(" "),e("AfsText",{staticClass:"comment-item__text",domProps:{innerHTML:t._s(t.formatText)}}),t._v(" "),t.hasDrawing?e("AfsText",{staticClass:"comment-item__drawing",attrs:{inline:""}},[e("Icon",{staticClass:"comment-item__icon-drawing",attrs:{name:"img-16"}}),t._v("\n      includes a drawing\n    ")],1):t._e(),t._v(" "),t.hasUserScreenshots?e("AfsText",{staticClass:"comment-item__drawing",attrs:{inline:""}},[e("Icon",{staticClass:"comment-item__icon-drawing",attrs:{name:"img-16"}}),t._v("\n      includes images\n    ")],1):t._e(),t._v(" "),t.repliesText?e("AfsText",{staticClass:"comment-item__replay",attrs:{type:"single line"}},[t._v("\n      "+t._s(t.repliesText)+"\n    ")]):t._e()],1)])};_._withStripped=!0;var O=n(5),S=n(220),x=function(t,e){return"/designs/".concat(t,"#tasks_").concat(e)},C=function(){var t=this,e=t._self._c;return t.isFromRelease?e("AfsText",{attrs:{type:"single"}},[t._v("\n  From\n  "),t.releasesName?e("AfsLink",{directives:[{name:"hint",rawName:"v-hint",value:{id:"release-hint",delay:1},expression:"{ id: 'release-hint', delay: 1 }"}],staticClass:"release__link",attrs:{href:t.releaseLink,target:"_blank"}},[t._v("\n    "+t._s(t.releasesName)+"\n    "),e("Icon",{staticClass:"release__icon",attrs:{name:"open-16"}})],1):[t._v("release")],t._v(" "),t.releasesTooltip?e("ContextMenu",t._b({ref:"release-hint",attrs:{id:"release-hint"}},"ContextMenu",t.hintConfig,!1),[t._v("\n    "+t._s(t.releasesTooltip)+"\n  ")]):t._e()],2):t._e()};C._withStripped=!0;var E=n(8),k=n(16),T=n.n(k),P={name:"ReleaseLink",directives:{hint:T.a},components:{AfsText:O.a,Icon:h.a,AfsLink:i.a,ContextMenu:E.a},props:{pageUrl:{type:String,default:""},projectSrc:{type:String,default:""},analyticsSubject:{type:String,default:""},releaseGuid:{type:String,default:""},release:{type:[String,Object],default:null}},computed:{releasesPackages:function(){var t;return this.release&&(null===(t=this.release)||void 0===t?void 0:t.PackageItems)||""},currentPackage:function(){var t=this;return!!this.releasesPackages.length&&this.releasesPackages.find((function(e){return e.RevisionId===t.releaseGuid}))},releasesName:function(){var t;return this.currentPackage&&(null===(t=this.currentPackage)||void 0===t?void 0:t.Version)||""},releasesTooltip:function(){var t;return this.currentPackage&&(null===(t=this.currentPackage)||void 0===t?void 0:t.Name)||""},isFromRelease:function(){return"Project"===this.analyticsSubject&&this.releaseGuid},releaseLink:function(){return this.isFromRelease?(t={url:this.pageUrl,projectId:this.projectSrc,releaseGuid:this.releaseGuid},e=t.url,n=t.projectId,r=t.releaseGuid,"".concat(e,"/designs/Manufacturing-Portal-").concat(n,"/?projectSourceGuid=").concat(r,"#files")):"";var t,e,n,r},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"center"},offset:4}}},beforeDestroy:function(){this.$refs["release-hint"]&&this.$refs["release-hint"].close()}},j=(n(511),n(0)),A=Object(j.a)(P,C,[],!1,null,"8d8a5a72",null).exports,M=function(){var t=this,e=t._self._c;return t.showLink?e("AfsText",{attrs:{type:"single"}},[t._v("\n  From\n  "),e("AfsLink",{directives:[{name:"hint",rawName:"v-hint",value:{id:"tag-hint",delay:400},expression:"{ id: 'tag-hint', delay: 400 }"}],staticClass:"revision__link",attrs:{href:t.snapshotLink,target:"_blank"}},[t._v("\n    "+t._s(t.tagDisplayName)+"\n    "),e("Icon",{staticClass:"revision__icon",attrs:{name:"open-16"}})],1),t._v(" "),e("ContextMenu",t._b({ref:"tag-hint",attrs:{id:"tag-hint"}},"ContextMenu",t.hintConfig,!1),[t._v("\n    "+t._s(t.tagTooltip)+"\n  ")])],1):t._e()};M._withStripped=!0;function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R=window.__APP__.library.Vuex.mapGetters,N={name:"DesignRevisionLink",components:{AfsText:O.a,Icon:h.a,AfsLink:i.a,ContextMenu:E.a},directives:{hint:T.a},props:{pageUrl:{type:String,default:""},projectSrc:{type:String,default:""},analyticsSubject:{type:String,default:""},vcsRevision:{type:String,default:""}},computed:I(I({},R({tags:"tags"})),{},{tag:function(){var t=this;return this.tags.find((function(e){return e.vcsRevision===t.vcsRevision}))},tagName:function(){var t;return null===(t=this.tag)||void 0===t?void 0:t.tagName},tagAuthor:function(){var t;return null===(t=this.tag)||void 0===t?void 0:t.author},tagDate:function(){var t;return null===(t=this.tag)||void 0===t?void 0:t.dateFormatted},isFromCommit:function(){return"Project"===this.analyticsSubject&&this.vcsRevision},snapshotLink:function(){return t={url:this.pageUrl,projectId:this.projectSrc,vcsRevision:this.vcsRevision},e=t.url,n=t.projectId,r=t.vcsRevision,"".concat(e,"/designs/snapshot/").concat(n,"/").concat(r);var t,e,n,r},tagDisplayName:function(){return this.tagName||"commit"},showLink:function(){return this.isFromCommit&&this.tag},tagTooltip:function(){return"Tag created by ".concat(this.tagAuthor,", ").concat(this.tagDate)},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"center"},offset:4}}})},B=(n(512),Object(j.a)(N,M,[],!1,null,"48ee6f78",null).exports),F=n(315),U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-header",class:{"is-active":t.isActive,"is-hover":t.isHover}},[e("div",{staticClass:"comment-header__title"},[e("div",{staticClass:"comment-header__assigned"},[e("div",{staticClass:"comment-header__user-wrap"},[t.assignedTo&&t.assignedTo.name?e("UserAvatar",{directives:[{name:"hint",rawName:"v-hint",value:{id:t.hintConfig.id,delay:400},expression:"{ id: hintConfig.id, delay: 400 }"}],staticClass:"comment-header__user-avatar",attrs:{img:t.assignedTo.avatarUrl,title:t.assignedTo.name,size:"sm"}}):t._e(),t._v(" "),t.taskLink?e("a",{staticClass:"comment-header__task-link",class:{"comment-header__task-link_wide":!t.label},attrs:{href:t.taskLink,target:"_parent"}},[t._v("\n          "+t._s(t.taskHrid)+"\n        ")]):t.threadNumber?e("div",{staticClass:"comment-header__counter"},[t._v("\n          #"+t._s(t.threadNumber)+"\n        ")]):t._e()],1),t._v(" "),e("div",[t.taskPriority?e("TaskPriority",{attrs:{value:t.taskPriority}}):t._e(),t._v(" "),t.taskStatus?e("TaskStatus",{attrs:{value:t.taskStatus}}):t._e()],1),t._v(" "),t.label?e("div",{directives:[{name:"hint",rawName:"v-hint",value:t.labelHint&&{id:t.hintId,delay:100},expression:"\n          labelHint && {\n            id: hintId,\n            delay: 100\n          }\n        "}],staticClass:"comment-header__label"},[t._v("\n        "+t._s(t.label)+"\n      ")]):t._e()]),t._v(" "),t.labelHint?e("AfsContextMenu",t._b({},"AfsContextMenu",t.hintConfig,!1),[t._v("\n      "+t._s(t.labelHint)+"\n    ")]):t._e(),t._v(" "),t.assignedTo?e("AfsContextMenu",t._b({},"AfsContextMenu",t.hintConfig,!1),[t._v(" Assigned to "+t._s(t.assignedTo.name)+"\n    ")]):t._e()],1)])};U._withStripped=!0;var $=n(96),G=n(7),V=n.n(G),z=n(218),H=function(){var t=this,e=t._self._c;return t.statusIconName?e("span",[e("AfsIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"statusHint_".concat(t.id),delay:400},expression:"{ id: `statusHint_${id}`, delay: 400 }"}],staticClass:"task-status",class:t.statusIconClass,attrs:{"data-locator":t.dataLocator,name:t.statusIconName}}),t._v(" "),e("ContextMenu",{staticClass:"afs-input__hint",attrs:{id:"statusHint_".concat(t.id),modifiers:{y:"bottom",x:"start"},type:"hint"},scopedSlots:t._u([{key:"default",fn:function(){return[t._v("\n      Status: "+t._s(t.statusName)+"\n    ")]},proxy:!0}],null,!1,2242677990)})],1):t._e()};H._withStripped=!0;var W=n(122),Y=n(24),q=n(17),X=n(28),Z={undefined:{icon:"",name:"Undefined"},todo:{icon:"ellipse-16",name:"To Do"},inprogress:{icon:"clock2-16",name:"In progress"},resolved:{icon:"checkmark-circle",name:"Resolved"}},K={name:"TaskStatus",components:{AfsIcon:Y.a,ContextMenu:E.a},directives:{hint:X.a},props:{dataLocator:{type:String,default:"task-status"},value:{type:String,default:"Undefined",validator:function(t){return Object(W.a)(Z,t.toLowerCase())}},size:{type:String,default:"lg",validator:function(t){return["sm","lg"].includes(t)}}},data:function(){return{id:Object(q.a)()}},computed:{statusName:function(){return Z[this.value.toLowerCase()].name},statusIconName:function(){return Z[this.value.toLowerCase()].icon},statusIconClass:function(){return"task-status_".concat(this.value.toLowerCase()," task-status_").concat(this.size)}}},J=(n(513),Object(j.a)(K,H,[],!1,null,null,null).exports),Q={name:"CommentHeaderAssignedTitle",components:{AfsContextMenu:E.a,UserAvatar:$.a,TaskPriority:z.a,TaskStatus:J},directives:{hint:T.a},props:{assignedTo:{type:Object,default:null},label:{type:String,default:""},labelHint:{type:String,default:""},threadNumber:{type:String,default:""},taskHrid:{type:String,default:""},taskPriority:{type:String,default:""},taskStatus:{type:String,default:""},taskLink:{type:String,default:""},isActive:{type:Boolean,default:!1},isHover:{type:Boolean,default:!1}},computed:{repliesText:function(){var t=this.counter-1;if(t<=0)return!1;var e="".concat(t," ").concat(t>1?"replies":"reply");return this.replayData?"".concat(e,", ").concat(this.replayData):e},hintId:function(){return V()()},hintConfig:function(){return{type:"hint",id:this.hintId,modifiers:{y:"bottom",x:"start"},offset:12,viewboxOffset:0}}}},tt=(n(514),Object(j.a)(Q,U,[],!1,null,null,null).exports),et=function(t,e){return e&&(null==t?void 0:t.find((function(t){return t.ProjectSourceGuid===e})))||""},nt=n(14);function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){it(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var at=window.__APP__.library.Vuex,st=at.mapGetters,ct=at.mapState,ut={name:"CommentItem",components:{AfsText:O.a,Icon:h.a,ReleaseLink:A,DesignRevisionLink:B,UserInfo:s.a,CommentHeaderTitle:F.a,CommentHeaderAssignedTitle:tt},props:{thread:{type:Object,default:function(){return{}}},author:{type:Object,default:function(){return{}}},commentData:{type:String,default:""},text:{type:String,default:""},replayData:{type:String,default:""},assignedTo:{type:String,default:""},hasDrawing:{type:Boolean,default:!1},hasUserScreenshots:{type:Boolean,default:!1},threadNumber:{type:[Number,String],default:"#"},counter:{type:Number,default:null},isActive:{type:Boolean,default:!1},isResolved:{type:Boolean,default:!1},releaseGuid:{type:String,default:""},label:{type:String,default:""},labelHint:{type:String,default:""},snapshotVcsRevision:{type:String,default:""}},data:function(){return{localUserId:u.x,globalUserId:u.k,dataPageUrl:u.f,dataProjectSrc:u.h,dataProjectGuid:u.g,analyticsSubject:u.c,isHover:!1}},computed:ot(ot(ot({},ct(["releases"])),st(["users","usersDictionary","groupsDictionary"])),{},{hasTagsLicense:function(){return nt.a.getLicenseDetails(nt.a.names.tags).isEnabled},currentReleases:function(){return Array.isArray(this.releases)?et(this.releases,this.releaseGuid):""},classes:function(){return{"is-active":this.isActive,"is-resolved":this.isResolved}},taskLink:function(){var t,e;return null!==(t=this.thread)&&void 0!==t&&null!==(e=t.properties)&&void 0!==e&&e.LwTaskId?x(this.thread.packageId,this.thread.properties.LwTaskId):""},currentUser:function(){return{name:u.J,localId:this.localUserId,avatarUrl:u.H}},formatText:function(){return Object(S.textToPreviewHtml)(this.text,this.usersDictionary,this.groupsDictionary)},assignedToYou:function(){return this.assignedTo&&(this.assignedTo===this.localUserId||this.assignedTo===this.globalUserId)},assignedToData:function(){var t=this;return this.assignedToYou?this.currentUser:this.assignedTo&&this.users.find((function(e){return e.id===t.assignedTo}))||null},hasTaskData:function(){var t=this;return this.assignedToYou||!!this.users.find((function(e){return e.id===t.assignedTo}))||!!this.taskLink},repliesText:function(){var t=this.counter-1;if(t<=0)return!1;var e="".concat(t," ").concat(t>1?"replies":"reply");return this.replayData?"".concat(e,", ").concat(this.replayData):e},showDesignRevisionLink:function(){return u.E&&this.hasTagsLicense&&this.snapshotVcsRevision}}),methods:{onCommentItemClick:function(){this.$emit("click")},onHover:function(t){this.isHover=!this.isResolved&&t}}},lt=(n(515),Object(j.a)(ut,_,[],!1,null,null,null).exports),ft=n(12);function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mt=window.__APP__.library.Vuex,vt=mt.mapActions,yt=mt.mapGetters,gt=u.n||!u.D,bt=window.__CORE__,wt={PCB3D:"3D"},_t={PCB3D:"Comment left in 3D mode"},Ot={name:"ThreadItem",components:{CommentItem:lt},props:{thread:{type:Object,default:function(){return{}}}},computed:ht(ht({},yt(["activeThreadId","createNewThread","documents","otherDocuments"])),{},{mainComment:function(){var t=ht({},this.thread.comments[0]);return t.date=t.date?b()(t.date,{timeZoneOffset:gt?null:0}):"no timestamp",t.date=t.isEdited?"".concat(t.date,", edited"):t.date,this.isGeneralTaskThread&&(t.text=this.thread.title),t.author||(t.author={id:"",name:"User",proficePicture:""}),t},commentsCount:function(){return this.thread.comments.length},subComments:function(){return this.thread.comments.slice(1).map((function(t){var e=ht({},t);return e.date=e.date?b()(e.date,{timeZoneOffset:gt?null:0}):"no timestamp",e.author||(e.author={id:"",name:"User",proficePicture:""}),e}))},replayData:function(){var t="";if(Array.isArray(this.subComments)&&this.subComments.length){var e=this.subComments.length-1;t=this.subComments[e].date||""}return t},isThreadActive:function(){return this.thread.id===this.activeThreadId},isThreadResolved:function(){return this.thread.resolved},threadNumber:function(){return this.thread.threadNumber},assignedTo:function(){return this.thread.assignedTo||""},hasDrawing:function(){var t,e;return!!(this.thread.drawing&&null!==(t=this.thread.drawing)&&void 0!==t&&null!==(e=t.Items)&&void 0!==e&&e.length||"REDLINE"===this.thread.threadType)},hasUserScreenshots:function(){return this.thread.comments.some((function(t){var e;return(null===(e=t.userScreenshots)||void 0===e?void 0:e.length)>0}))},releaseGuid:function(){var t;return(null===(t=this.thread.properties)||void 0===t?void 0:t.releaseGuid)||""},snapshotVcsRevision:function(){var t;return(null===(t=this.thread.properties)||void 0===t?void 0:t.vcsRevision)||""},threadLabel:function(){var t;return(null==wt?void 0:wt[null===(t=this.thread.properties)||void 0===t?void 0:t.documentType])||""},threadLabelHint:function(){var t;return(null==_t?void 0:_t[null===(t=this.thread.properties)||void 0===t?void 0:t.documentType])||""},isGeneralTaskThread:function(){return"LWT"===this.thread.threadType}}),watch:{activeThreadId:{immediate:!0,handler:function(t){var e=this;setTimeout((function(){if(t){var n={id:t};if(bt.bus.emit("CommentsDrawingEngine:find",n),n.graphics&&n.graphics.hasDocument){var r=n.graphics.viewEngine.createUiThreadEditOptions();e.$root.$emit("open-modal-edit",r)}}}),0)}}},methods:ht(ht({},vt(["setActiveThreadId"])),{},{onThreadClick:function(){var t=this;this.$root.$emit("close-modal-add"),this.isThreadActive||this.$root.$emit("close-modal-edit"),setTimeout((function(){if(t.otherDocuments.find((function(e){return e.id===t.thread.docId})))return t.onActiveThreadId(null,(function(t){})),t.$root.$emit("close-modal-edit"),void ft.a.emit("CommentPanel:sendActiveThread",t.thread.id);t.isThreadActive||t.thread.id===t.activeThreadId?t.$root.$emit("close-modal-edit"):t.isGeneralTaskThread?(t.setActiveThreadId(t.thread.id),t.$root.$emit("open-modal-edit",{})):t.onActiveThreadId(t.thread.id,(function(e){if(e){var n=e.viewEngine.createUiThreadEditOptions();t.$root.$emit("open-modal-edit",n)}else t.$root.$emit("close-modal-edit")}))}),0)},onActiveThreadId:function(t,e){var n=this;window.__CORE__.bus.emit("CommentsDrawingEngine:activate",{id:t,zoomToFit:!0,callback:function(r){n.setActiveThreadId(t),e(r)}})}})},St=(n(516),Object(j.a)(Ot,y,[],!1,null,null,null).exports),xt=n(165),Ct=n(311),Et=n(182),kt=n(312),Tt=n(246),Pt=n(216);function jt(t){return function(t){if(Array.isArray(t))return At(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return At(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){It(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function It(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Dt=window.__APP__.library.Vuex,Rt=Dt.mapState,Nt=Dt.mapGetters,Bt=Dt.mapMutations,Ft={name:"ThreadList",components:{ThreadGroup:Ct.a,ThreadItem:St,Loader:d.a,Placeholder:Et.a,Icon:h.a,ThreadPlaceholder:kt.a},props:{isActiveAddComment:{type:Boolean,default:!1},filters:{type:Object,default:null}},data:function(){return{showResolvedComments:!1,registerUrl:u.B}},computed:Lt(Lt(Lt({},Rt(["isLoading","docIdGerber","updateViewTabs"])),Nt(["threads","users","currentDocId","documents","lwTasks","otherDocuments","createNewThread","activeThreadId"])),{},{showPlaceholder:function(){return 0===this.groupedThreads.length&&0===this.threads.length&&0===this.lwTasks.length&&!this.createNewThread&&!this.isLoading},showNoResultsPlaceholder:function(){return 0===this.groupedThreads.length&&(this.threads.length>0||this.lwTasks.length>0)&&!this.createNewThread&&!this.isLoading},groupedThreads:function(){var t=this,e=v(),n=this.getGroupedThreads(e)||[];return n.forEach((function(e){return e.threads=t.sortedThreads(e.threads)})),n.length?n.sort((function(t,e){return t.order-e.order})):n},showAnonymousPlaceholder:function(){return u.n||!u.D},isCurrentDocumentOptionSelected:function(){if(!this.filters)return!1;var t=this.filters.checkboxes.find((function(t){return"current"===t.id}));return null==t?void 0:t.isSelected},placeholderIcon:function(){return this.isCurrentDocumentOptionSelected?"slider-16":"filter-empty-16"},placeholderMessage:function(){return this.isCurrentDocumentOptionSelected?"There are no comments on this document. You can add the first one or customize the display above.":"No comments are matching. You can customize the filters above."},isPcbDwfEnabled:function(){return nt.a.getLicenseDetails(nt.a.names.draftsmanComment).isEnabled},isBomEnabled:function(){return nt.a.getLicenseDetails(nt.a.names.bomComment).isEnabled}}),watch:{activeThreadId:function(t){var e=this;t&&this.$nextTick((function(){e.scrollToThread(t)}))}},methods:Lt(Lt({},Bt(["setSortedThreads"])),{},{getGroupedThreads:function(t){var e=this,n=[],r=[].concat(jt(this.documents),jt(this.otherDocuments));return t.filter((function(t){var e;return!["PCBDWF","BOM"].includes(null===(e=t.properties)||void 0===e?void 0:e.documentType)})).forEach((function(t){var o=r.find((function(n){return n.id===t.docId&&n.id!==e.docIdGerber})),i=t.docId===e.docIdGerber,a=-1;if(o&&(a=n.findIndex((function(t){return t.id===o.id}))),o&&-1!==a)n[a].threads.push(t);else if(o&&-1===a){var s=null!=o&&o.name.toLowerCase().includes(".schdoc")?"schematic-16":null!=o&&o.name.toLowerCase().includes("stackup")?"stackup-16":"pcb",c={id:o.id,order:o.order,icon:s,iconFilled:"stackup-16"!==s,name:Object(Tt.a)(o.name),threads:[t]};n.push(c)}else if(!o&&i){if(u.l)return;var l=n.findIndex((function(t){return t.id===xt.a})),f=n.findIndex((function(t){return t.id===xt.b}));if(-1!==l)n[l].threads.push(t);else if(-1!==f)n[f].threads.push(t);else{var d={id:xt.a,icon:"fabrication-16",iconFilled:!0,name:"Fabrication"};n.push(Lt(Lt({id:xt.b},1===e.updateViewTabs.length&&e.updateViewTabs.includes("Gerber")?{}:d),{},{threads:[t]}))}}else if(!o){var h="LWT"===t.threadType,p=h?"lwt":"defaultId",m=n.findIndex((function(t){return t.id===p}));if(-1!==m)n[m].threads.push(t);else if(h){var v={id:"lwt",icon:"project-pcb-16",iconFilled:!0,name:u.z,threads:[t],order:-1};n.push(v)}else if(u.b){var y={id:p,name:"Project comments",threads:[t]};n.push(y)}}})),this.getDwfThreadGroups(t).forEach((function(t){return n.push(t)})),this.getFBOMThreadGroups(t).forEach((function(t){return n.push(t)})),this.setSortedThreadsIds(n),n.sort(Object(Pt.a)("name"))},sortedThreads:function(t){var e=jt(t);return this.showResolvedComments?e=[].concat(jt(e.filter((function(t){return!t.resolved})).sort(this.sortByCreationDateDesc)),jt(e.filter((function(t){return t.resolved})).sort(this.sortByCreationDateDesc))):e.sort(this.sortByCreationDateDesc),e},sortByCreationDateDesc:function(t,e){return void 0===t||void 0===e?-1:t.comments.length&&e.comments.length?t.comments[0].date>e.comments[0].date?-1:t.comments[0].date<e.comments[0].date?1:0:-1},scrollToThread:function(t){var e=this.$refs.threads.querySelector('[data-thread-id="'.concat(t,'"]'));this.showThreadInView(e)},showThreadInView:function(t){var e=this;t&&setTimeout((function(){var n=e.$refs.threads,r=e.$refs.threads.getBoundingClientRect(),o=t.getBoundingClientRect(),i=0;if(o.height>r.height||o.bottom>r.bottom){var a=n.scrollTop;i=o.bottom-r.bottom,n.scrollTo(0,a+i+40)}else if(o.top<r.top){var s=n.scrollTop;i=r.top-o.top,n.scrollTo(0,s-i-40)}}),0)},setSortedThreadsIds:function(t){var e={};t.forEach((function(t){return t.threads.forEach((function(t){return e[t.threadNumber]=t.id}))}));var n=Object.keys(e).sort().reduce((function(t,n){return t["_"+n]=e[n],t}),{});this.setSortedThreads(Object.values(n))},getDwfThreadGroups:function(t){var e=this,n={},r=t.filter((function(t){var n;return e.isPcbDwfEnabled&&"PCBDWF"===(null===(n=t.properties)||void 0===n?void 0:n.documentType)})),o=window.__CORE__,i={criteria:r.map((function(t){return{uniqueId:t.docId,fileName:t.properties.documentName,pageId:t.pageId||t.properties.pageId}})),documents:[],isReady:!1};return o.bus.emit("PCBDWFEngine:findDocuments",i),i.isReady?(r.forEach((function(t,e){var r;if(i.documents[e]){var o=Object(Tt.a)((null===(r=i.documents[e])||void 0===r?void 0:r.name)||"");n[o]||(n[o]={id:t.docId,name:o,icon:"draftsman-document-template",iconFilled:!0,threads:[],order:2e3}),n[o].threads.push(t)}})),Object.values(n)):(o.bus.on("PCBDWFEngine:documentsSetupCompleted",(function(){e.$forceUpdate()})),[])},getFBOMThreadGroups:function(t){var e=this,n={};return t.filter((function(t){var n;return e.isBomEnabled&&"BOM"===(null===(n=t.properties)||void 0===n?void 0:n.documentType)})).forEach((function(t){n[t.docId]=n[t.docId]||{id:t.docId,name:"BOM",icon:"bom-16",iconFilled:!0,threads:[],order:1e3},n[t.docId].threads.push(t)})),Object.values(n)},onAddComment:function(){this.$emit("add-comment")}})},Ut=(n(517),Object(j.a)(Ft,f,[],!1,null,"0cf1ac4d",null).exports),$t=function(){var t=this,e=t._self._c;return e("Modal",{ref:"modalEditComment",attrs:{id:"modalEditComment",y:t.modalCoords.y,x:t.modalCoords.x,"close-on-view-click":!t.isPaintMode},on:{close:t.onClose,"close-all-modal":t.closeAllModal}},[e("div",[t.isCommentTools?e("CommentsTools",{attrs:{"edit-modes":t.editModes,"has-text":t.threadCommentTextChange,"is-loading":t.isLoading,"is-drawing":t.isDrawing,thread:t.updatePostedThread},on:{"mode-text":t.setModeText,confirm:t.onPostThread,close:t.onCloseThreadEdit,"paint-mode":function(e){t.isPaintMode=e}}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modeText,expression:"modeText"}],staticClass:"edit-comment"},[t.isActiveThreadDetached?e("ModalDraggerTitle",{staticClass:"edit-comment__detached-comment-title",on:{drag:t.moveModal}},[e("DetachedCommentHeader")],1):t._e(),t._v(" "),e("ModalDraggerTitle",{class:{"is-detached-comment":t.isActiveThreadDetached},on:{drag:function(e){return t.moveModal(e,t.isActiveThreadDetached)}},scopedSlots:t._u([{key:"default",fn:function(){return[e("CommentEditHeaderPanel",{attrs:{"active-thread-id":t.activeThreadId,"active-thread":t.activeThread,"sorted-threads":t.sortedThreads,"task-link":t.taskLink,"is-anonymous":t.isAnonym},on:{"change-status":t.onTaskStatusChange,"handle-resolve":t.onHandleResolve,"set-active-thread":t.setActiveThreadId},scopedSlots:t._u([{key:"header",fn:function(){return[t.assignedTo?e("ModalEditCommentsSelectAssignee",{staticClass:"edit-comment__header",attrs:{"assigned-to":t.assignedTo,"thread-guid":t.activeThreadId,"active-thread":t.activeThread},on:{input:t.onCommentAssigneeChange}}):t._e()]},proxy:!0}])})]},proxy:!0}])}),t._v(" "),e("div",{staticClass:"edit-comment__body-wrapper"},[e("div",{ref:"modalBody",staticClass:"edit-comment__body"},[t._l(t.listActiveThreadComments,(function(n,r){return["separator"===n.type?e("div",{key:n.type,staticClass:"edit-comment__separator",on:{click:t.clickShowAllComments}},[e("div",{staticClass:"edit-comment__separator-text"},[t._v("\n                Show All "+t._s(t.countHideComments)+" Replies\n              ")])]):e("CommentReplyItem",{key:n.id,ref:"commentReplyItem",refInFor:!0,attrs:{comment:n,"is-assigned-to":t.isAssignedTo,"is-resolved":t.isResolved,"screenshot-url":t.screenshotUrl,"release-guid":t.releaseGuid,"snapshot-vcs-revision":t.snapshotVcsRevision,"is-main-comment":0===r},on:{"show-tools":t.showToggleCommentTools,"hide-tools":t.hideToggleCommentTools,edit:function(e){t.isEditing=e}}})]})),t._v(" "),t.shouldShowReply?e("div",{staticClass:"edit-comment__reply-block"},[t.isAnonym?e("RegisterA365",{staticClass:"edit-comment__register",attrs:{link:t.saveTo}}):e("CommentForm",{key:t.formTmpKey,attrs:{"is-disabled":t.isLoading,"hide-assigned-to":t.hideAssignedTo,"is-assigned-to":t.isAssignedTo,"has-buttons":!1,autofocusable:!1,placeholder:"Add others with @"},on:{submit:t.onReplySubmit,cancel:t.close},scopedSlots:t._u([{key:"accept",fn:function(){return[t._v(" Reply ")]},proxy:!0}],null,!1,939945935)})],1):t._e()],2)])],1)],1)])};$t._withStripped=!0;var Gt=function(){var t=this,e=t._self._c;return e("div",[e("CommentItem",t._g(t._b({ref:"commentItem",scopedSlots:t._u([{key:"contextMenu",fn:function(){return[t.hasActiveContextMenuEntries?e("CommentContextMenu",t._b({staticClass:"reply-item__context-menu",attrs:{"change-position":t.activeCommentPosition},on:{"copy-link":t.copyLink,edit:t.editComment,delete:t.confirmDelete,"convert-to-task":t.convertToTask}},"CommentContextMenu",t.contextMenuParams,!1)):t._e()]},proxy:!0},{key:"links",fn:function(){return[t.isMainComment&&t.releaseGuid?e("ReleaseLink",{staticClass:"reply-item__release-link",attrs:{"page-url":t.dataPageUrl,"project-src":t.dataProjectGuid||t.dataProjectSrc,"analytics-subject":t.analyticsSubject,"release-guid":t.releaseGuid,release:t.currentReleases}}):t._e(),t._v(" "),t.showDesignRevisionLink?e("DesignRevisionLink",{staticClass:"reply-item__revision-link",attrs:{"page-url":t.dataPageUrl,"project-src":t.dataProjectGuid||t.dataProjectSrc,"vcs-revision":t.snapshotVcsRevision,"analytics-subject":t.analyticsSubject}}):t._e()]},proxy:!0},{key:"form",fn:function(){return[t.isEdited?e("CommentForm",{ref:"commentForm",attrs:{text:t.commentText,"is-assigned-to":t.isAssignedTo,"initial-mentions":t.mentions,"hide-assigned-to":t.hideAssignedTo,"edit-mode":!0},on:{submit:t.onUpdateSubmit,cancel:t.closeEdit},scopedSlots:t._u([{key:"accept",fn:function(){return[t._v(" Update ")]},proxy:!0}],null,!1,2058383244)}):t._e()]},proxy:!0}])},"CommentItem",[t.$attrs,t.commentItemBindProps],!1),t.$listeners)),t._v(" "),e("ModalConfirmation",{ref:"threadModal",attrs:{id:"modalConfirmation_".concat(t.modalId)},on:{accept:t.onConfirmThreadDelete,reject:t.onConfirmThreadCancel},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[e("div",{class:r("content")},[e("Icon",{class:r("icon"),attrs:{name:"attention-32",filled:""}}),t._v(" "),t.isMainComment?e("AfsText",[t._v("\n          Are you sure you want to delete this comment?"),e("br"),t._v("\n          This will delete all of its replies as well.\n        ")]):e("AfsText",[t._v("\n          Are you sure you want to delete this comment?\n        ")])],1)]}},{key:"accept",fn:function(){return[t._v(" Delete ")]},proxy:!0},{key:"reject",fn:function(){return[t._v(" Cancel ")]},proxy:!0}])})],1)};Gt._withStripped=!0;var Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reply-item"},[e("div",{staticClass:"reply-item__header"},[e("UserInfo",{attrs:{"title-class":"reply-item__user-name","meta-class":"reply-item__user-time",img:t.author.avatarUrl,title:t.author.name,meta:t.author.time,ellipsis:""}}),t._v(" "),t._t("contextMenu")],2),t._v(" "),t._t("links"),t._v(" "),t.isEdited?t._t("form"):e("AfsText",{ref:"replyItemText",staticClass:"reply-item__text",class:{"is-short":t.isShort,"is-system-message":t.isSystemMessage},attrs:{type:"text"},domProps:{innerHTML:t._s(t.formatText)},on:{"!click":function(e){return t.$emit("comment-message-click",e)}}}),t._v(" "),!t.isEdited&&t.isTruncated?e("div",{staticClass:"reply-item__more",on:{click:t.clickShowMore}},[e("div",{staticClass:"reply-item__more-text"},[t._v("\n      "+t._s(t.isShort?"Show More":"Show less")+"\n    ")])]):t._e(),t._v(" "),t.hasUserScreenshots?e("ScreenshotImageList",{attrs:{list:t.userScreenshots,"read-only":""}}):t._e(),t._v(" "),t.hasScreenshot?e("Snapshot",{ref:"screenshotDropdown",attrs:{"screenshot-url":t.screenshotUrl}}):t._e()],2)};Vt._withStripped=!0;var zt=function(){var t=this,e=t._self._c;return t.screenshotUrl?e("div",{staticClass:"snapshot"},[e("AfsText",{ref:"screenshotText",staticClass:"snapshot__text",class:{"none-events":t.isDropdownOpen},attrs:{inline:""},on:{click:t.openDropdown}},[t._v("\n    Original Snapshot\n  ")]),t._v(" "),e("ContextMenu",{ref:"screenshotDropdown",staticClass:"snapshot__dropdown",attrs:{type:"dropdown","init-width":240,"max-height-limit":200,modifiers:{y:"bottom",x:"start"}},on:{close:t.closeDropdown}},[e("div",{staticClass:"snapshot__figure"},[e("img",{staticClass:"snapshot__img",attrs:{src:t.screenshotUrl,alt:"screenshot"},on:{click:t.openModal}}),t._v(" "),e("Icon",{staticClass:"snapshot__open",attrs:{name:"open-16"},nativeOn:{click:function(e){return t.openModal.apply(null,arguments)}}})],1)]),t._v(" "),e("Modal",{ref:"screenshotModal",attrs:{id:"screenshot-".concat(t._uid),"close-by-esc":!1,level:"4",size:"xxl",type:"gallery"},on:{close:t.closeModal}},[e("img",{staticClass:"snapshot__img details-modal-img",attrs:{src:t.screenshotUrl,alt:"screenshot"}})])],1):t._e()};zt._withStripped=!0;var Ht=n(86);window.__viewerOpenedComponents=[];var Wt=function(t){window.__viewerOpenedComponents.push(t)},Yt=function(t){window.__viewerOpenedComponents=window.__viewerOpenedComponents.filter((function(e){return e!==t}))},qt=function(t){return window.__viewerOpenedComponents[window.__viewerOpenedComponents.length-1]===t},Xt={name:"Snapshot",components:{AfsText:O.a,Icon:h.a,ContextMenu:E.a,Modal:Ht.a},props:{screenshotUrl:{type:String,default:""}},data:function(){return{isDropdownOpen:!1,isModalOpen:!1}},watch:{isModalOpen:{immediate:!0,handler:function(t){t?(document.addEventListener("keyup",this.handleKeyUp,!0),Wt(this.$refs.screenshotModal)):(document.removeEventListener("keyup",this.handleKeyUp,!0),Yt(this.$refs.screenshotModal))}}},methods:{openDropdown:function(){this.$refs.screenshotDropdown&&this.$refs.screenshotDropdown.open(this.$refs.screenshotText.$el),this.isDropdownOpen=!0},closeDropdown:function(t){this.isDropdownOpen=!1},openModal:function(){this.$refs.screenshotModal&&this.$refs.screenshotModal.open(),this.$refs.screenshotModal&&this.$emit("open-modal",this.$refs.screenshotModal),this.isModalOpen=!0},closeModal:function(){this.isModalOpen=!1,this.openDropdown(),this.$emit("close-modal",this.$refs.screenshotModal)},handleKeyUp:function(t){t.stopPropagation(),t.preventDefault(),27===t.keyCode&&qt(this.$refs.screenshotModal)&&this.$refs.screenshotModal&&this.$refs.screenshotModal.close()}}},Zt=(n(518),Object(j.a)(Xt,zt,[],!1,null,null,null).exports),Kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"screenshot-image-list"},[t._l(t.list,(function(n,r){return e("div",{key:"".concat(n.id,"-item-list-").concat(r),staticClass:"figure"},[t.canShowImage(n)||t.canShowFailedPlaceholder(n)?[t.readOnly?t._e():e("div",{directives:[{name:"hint",rawName:"v-hint",value:{id:t.hintId,onOpen:t.setRemoveHint,delay:400},expression:"{\n          id: hintId,\n          onOpen: setRemoveHint,\n          delay: 400\n        }"}],staticClass:"image-action image-close",on:{click:function(e){return t.onRemoveImage(n)}}},[e("Icon",{attrs:{name:"cross-s-8"}})],1)]:t._e(),t._v(" "),t.canShowImage(n)?[e("div",{staticClass:"image-container"},[e("img",{staticClass:"image is-zoomable",attrs:{alt:n.name,src:n.previewSrc,draggable:"false"},on:{error:function(e){return t.handleError(n)},contextmenu:function(t){t.preventDefault()},click:function(e){return t.openScreenshotModal(n)}}})])]:t.canShowFailedPlaceholder(n)?[e("div",{staticClass:"image-container"},[e("Icon",{directives:[{name:"hint",rawName:"v-hint",value:{id:t.hintId,onOpen:function(){return t.setImageErrorHint(n)},delay:400},expression:"{\n            id: hintId,\n            onOpen: () => setImageErrorHint(image),\n            delay: 400\n          }"}],staticClass:"image-placeholder",attrs:{name:"picture-16"}})],1)]:[e("div",{staticClass:"image-action"},[e("Icon",{staticClass:"image-processing",attrs:{name:"loader-16",filled:""}})],1),t._v(" "),e("div",{staticClass:"image-container"},[e("Icon",{staticClass:"image-placeholder",attrs:{name:"picture-16"}})],1)]],2)})),t._v(" "),e("ContextMenu",{ref:"hint",attrs:{id:t.hintId,modifiers:{y:"bottom",x:"center"},type:"hint"}},[t._v("\n    "+t._s(t.hintText)+"\n  ")]),t._v(" "),e("Modal",{ref:"screenshotModal",attrs:{id:"screenshot-gallery","close-by-esc":!1,level:"4",size:"xxl",type:"gallery"}},[e("img",{staticClass:"image",attrs:{alt:t.selectedImage.name,src:t.selectedImage.src}})])],2)};Kt._withStripped=!0;var Jt={name:"ScreenshotImageList",components:{Icon:h.a,Modal:Ht.a,ContextMenu:E.a},directives:{hint:X.a},props:{list:{type:Array,default:function(){return[]}},readOnly:{type:Boolean,default:!1}},emits:["remove"],data:function(){return{hintId:Object(q.a)(),hintText:"",failedImages:{},selectedImage:{}}},methods:{canShowImage:function(t){return t.src&&!this.canShowFailedPlaceholder(t)},canShowFailedPlaceholder:function(t){return this.failedImages[t.id]||t.hasUploadFailed},setRemoveHint:function(){this.hintText="Remove"},setImageErrorHint:function(){this.hintText="Image did not save"},openScreenshotModal:function(t){var e;this.selectedImage=t,null===(e=this.$refs.screenshotModal)||void 0===e||e.open()},doesImageExists:function(t){return-1!==this.list.findIndex((function(e){return e.id===t.id}))},onRemoveImage:function(t){var e;null===(e=this.$refs.hint)||void 0===e||e.close(),this.doesImageExists(t)&&this.$delete(this.failedImages,t.id),this.$emit("remove",t)},handleError:function(t){this.doesImageExists(t)&&this.$set(this.failedImages,t.id,!0)}}},Qt=(n(519),Object(j.a)(Jt,Kt,[],!1,null,"56a3fa58",null).exports),te=/\d\d(:\d\d){1,2}/,ee=/[+-]\d\d:\d\d/,ne=[{long:"January",short:"Jan"},{long:"February",short:"Feb"},{long:"March",short:"Mar"},{long:"April",short:"Apr"},{long:"May",short:"May"},{long:"June",short:"Jun"},{long:"July",short:"Jul"},{long:"August",short:"Aug"},{long:"September",short:"Sept"},{long:"October",short:"Oct"},{long:"November",short:"Nov"},{long:"December",short:"Dec"}],re=function(t,e){var n=t.getHours(),r=t.getMinutes();return{years:t.getFullYear(),month:e[t.getMonth()].short,days:t.getDate(),hours:0===n||12===n||24===n?12:n%12,minutes:r<10?"0"+r:r,postfix:n<12?"AM":"PM"}},oe={second:"just now",seconds:"1 minute %s",minute:"minute %s",minutes:"%s minutes %s",hour:"an hour %s",hours:"%s hours %s",yesterday:"Yesterday"},ie=function(t){var e=te.test(t);return ee.test(t)?t.replace(ee,"+00:00"):e?t+"+00:00":t},ae=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(e.ignoreTimeZone||0===e.timeZoneOffset)&&(t=ie(t));var n=e.afterSuffix||"later",r=e.beforeSuffix||"ago",o=e.messages||oe,i=e.months||ne,a=new Date(t).getTime(),s=new Date,c=s.getFullYear(),u=new Date(a),l=s.getTime()-u.getTime(),f=Math.floor,d=1e3,h=60*d,p=60*h,m=24*p,v=365*m,y=l>0;l=l<0?d-l:l;var g=o.yesterday,b=re(u,i),w=b.years,_=b.month,O=b.days,S=b.hours,x=b.minutes,C=b.postfix,E=l<20*d?o.second:l<h?o.seconds:l<2*h?o.minute:l<p?o.minutes.replace("%s",f(l/h)):l<2*p?o.hour:l<m?o.hours.replace("%s",f(l/p)):l<2*m&&y?"".concat(g,", ").concat(S,":").concat(x," ").concat(C):l<v&&w===c?"".concat(_," ").concat(O,", ").concat(S,":").concat(x," ").concat(C):"".concat(_," ").concat(O," ").concat(w,", ").concat(S,":").concat(x," ").concat(C);return E.replace("%s",y?r:n)},se=/(\b(https?|ftp|file|dxp):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi,ce=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"link";return(t||"").replace(se,'<a class="'.concat(e,'" target="_blank" href="$1">$1</a>'))},ue={user:1,group:2,system:3},le="System",fe=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},de=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gim,he=/@(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\s/gim,pe=function(t){return t.match(de)||[]},me=function(t){var e=t.name;return"@".concat(void 0===e?"":e)},ve=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mentionKey";return t.mentionType===ue.user?"@".concat(t[e]||t.email):t.mentionType===ue.system?t.email:"{@".concat(t.name,"}")},ye=function(t,e){return!t.keys.includes(e)&&t.keys.push(e)},ge=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.reduce((function(t,n){var r=e?me(n):ve(n),o=e?ve(n):me(n);if(t.map.set(r.toLowerCase(),o),n.email){var i=ve(n,"email");r!==i&&(t.map.set(i.toLowerCase(),o),ye(t,fe(i)))}return ye(t,fe(r)),t}),{map:new Map,keys:[]}),r=n.map,o=n.keys;return r.size?{map:r,regex:new RegExp("(".concat(o.join("|"),")(?=\\s|$)"),"gmi")}:null},be=function(t,e){if(!e)return t;return t.replace(e.regex,(function(t){if(t){var n=e.map.get(t.toLowerCase());return'<span class="full-match" data-mention="'.concat(n,'">').concat(n,"</span>")}}))},we={name:"CommentItem",components:{AfsText:O.a,UserInfo:s.a,Snapshot:Zt,ScreenshotImageList:Qt},props:{comment:{type:Object,required:!0},isAnonymous:{type:Boolean,default:!1},isEdited:{type:Boolean,default:!1},isMainComment:{type:Boolean,default:!1},screenshotUrl:{type:String,default:""},userScreenshots:{type:Array,default:function(){return[]}},groupsDictionary:{type:Object,default:function(){}},usersDictionary:{type:Object,default:function(){}}},data:function(){return{isShort:!0,isTruncated:!1}},computed:{hasScreenshot:function(){return this.isMainComment&&this.screenshotUrl},hasUserScreenshots:function(){var t;return null===(t=this.userScreenshots)||void 0===t?void 0:t.length},mentions:function(){return this.comment.mentions||[]},isSystemMessage:function(){var t;return(null===(t=this.comment)||void 0===t?void 0:t.type)===le},author:function(){var t,e,n,r,o,i,a={avatarUrl:(null===(t=this.comment)||void 0===t||null===(e=t.author)||void 0===e?void 0:e.avatarUrl)||"",name:(null===(n=this.comment)||void 0===n||null===(r=n.author)||void 0===r?void 0:r.name)||"",time:null!==(o=this.comment)&&void 0!==o&&o.date?ae(this.comment.date,{timeZoneOffset:this.isAnonymous?null:0}):"no timestamp"};return a.time=null!==(i=this.comment)&&void 0!==i&&i.isEdited?"".concat(a.time,", edited"):a.time,a},commentText:function(){var t;return(null===(t=this.comment)||void 0===t?void 0:t.text)||""},formatText:function(){return function(t){for(var e=ce(t),n=pe(t).map((function(t){return{email:t,name:t,mentionType:ue.user}})),r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(n.length){var a=ge(n);o.push(a)}return o.filter(Boolean).reduce((function(t,e){return be(t,e)}),e)}(this.commentText,this.groupsDictionary,this.usersDictionary)}},watch:{commentText:function(){this.checkIfTruncated()}},mounted:function(){this.checkIfTruncated()},methods:{checkIfTruncated:function(){var t=this;this.$nextTick((function(){t.isTruncated=!t.isEdited&&(t.$refs.replyItemText.$el&&t.$refs.replyItemText.$el.scrollHeight>t.$refs.replyItemText.$el.offsetHeight)}))},clickShowMore:function(){this.isShort=!this.isShort}}},_e=(n(520),Object(j.a)(we,Vt,[],!1,null,null,null).exports),Oe=function(){var t=this;return(0,t._self._c)("CommentFormField",t._g(t._b({ref:"commentFormField",scopedSlots:t._u([t._l(t.$scopedSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,null,e)]}}}))],null,!0)},"CommentFormField",[t.$attrs,t.commentBindProps],!1),t.$listeners))};Oe._withStripped=!0;var Se=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-form"},[e("PasteImageFromClipboard",{attrs:{"limit-count":1,"limit-size":2,disabled:!t.canPasteImages},on:{"images-changed":t.handleImagesList},scopedSlots:t._u([{key:"default",fn:function(n){n.onPaste;return[e("Mention",{key:t.mentionCounter,ref:"mentionsRef",attrs:{suggestions:t.deps.teamUsers,"map-insert":t.mapInsertMention,"text-to-html":t.textToHtml,placeholder:t.fieldPlaceholder,"custom-mention-reg-exp":t.customMentionRegExp,disabled:t.isDisabled,autofocusable:t.autofocusable},on:{"model-changed":t.withDebounce.onCommentUpdate,apply:t.updateMentions,search:t.onSearch,applyAll:t.onApplyAll,focusStateChange:function(e){t.isFocused=e},suggestionsClose:t.onSuggestionsClose,suggestionsOpen:t.onSuggestionsOpen,shortcut:t.onShortcut},scopedSlots:t._u([{key:"suggestion",fn:function(t){var n=t.suggestion,r=t.applyMention;return[e("button",{staticClass:"afs-context-menu__item-clickable afs-context-menu__item-in",attrs:{type:"button"},on:{click:function(t){return r(t,n)}}},[e("UserInfo",{attrs:{img:n.avatarUrl,title:n.name,meta:n.email}})],1)]}}],null,!0),model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})]}}])}),t._v(" "),t.hideAssignedTo?t._e():[t.showTaskAssignment?e("div",{ref:"assignedToBlock",staticClass:"comment-form__assigned",on:{mouseover:function(e){t.mouseOverBtn=!0},mouseleave:function(e){t.mouseOverBtn=!1}}},[e("Checkbox",{attrs:{disabled:t.isBusy||t.deps.isLoading},model:{value:t.assignCheckbox,callback:function(e){t.assignCheckbox=e},expression:"assignCheckbox"}},[e("AfsText",{staticClass:"comment-form__assigned-text",attrs:{type:"single line"}},[t.areTasksEnabled?[t._v("\n            "+t._s(t.isAssignedTo?"Reassign":"Assign")+" a task to\n          ")]:[t._v("\n            "+t._s(t.isAssignedTo?"Reassign":"Assign")+" to\n          ")]],2)],1),t._v(" "),e("span",{staticClass:"comment-form__assigned-user",on:{click:t.onClickOpenDropdown}},[e("span",{staticClass:"comment-form__assigned-user-name"},[t.areTasksEnabled?[t._v("\n            "+t._s(t.assignedToYou?"Me":t.userAssignedTo)+"\n          ")]:[t._v("\n            "+t._s(t.assignedToYou?"You":t.userAssignedTo)+"\n          ")]],2),t._v(" "),e("AfsButtonIcon",{attrs:{transparent:"",icon:"chevron-down-8"}})],1)],1):t._e(),t._v(" "),e("ContextMenu",{ref:"assignedToDropdown",staticClass:"comment-form__assignee-context-menu",attrs:{type:"dropdown","full-width":"",modifiers:{y:"bottom",x:"start"}},on:{close:t.onClickCloseDropdown},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[e("div",{class:r("section")},[e("div",{class:r("item")},[e("div",{class:r("item-in")},[e("AfsSearch",{ref:"assigneeSearch",staticClass:"comment-form__assignee-search",attrs:{placeholder:"Search people","has-remove-btn":!1},on:{keydown:function(e){return e.stopPropagation(),t.findUsersOrGroup(t.assigneeSearch,"assignee")},keyup:function(t){t.stopPropagation()}},model:{value:t.assigneeSearch,callback:function(e){t.assigneeSearch=e},expression:"assigneeSearch"}})],1)])]),t._v(" "),t.assignableMentions.length?e("UserList",t._l(t.assignableMentions,(function(n){return e("UserListItem",{key:n.id,attrs:{"avatar-url":n.avatarUrl,email:n.username||n.email,name:n.name},on:{click:function(e){return t.onClickAssignedTo(n)}}})})),1):t._e()]}}],null,!1,1184776470)})],t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.statusButtons,expression:"statusButtons"}],staticClass:"comment-form__buttons"},[e("div",[e("AfsButton",{attrs:{disabled:!t.canConfirm,"is-busy":t.isBusy||t.deps.isLoading,primary:""},on:{click:t.onConfirm}},[t._t("accept",(function(){return[t._v("Post")]}))],2)],1)])],2)};Se._withStripped=!0;var xe=function(){return(0,this._self._c)("ul",{class:[this.getBEMClass("section"),this.getBEMClass("scrollbar")]},[this._t("default")],2)};xe._withStripped=!0;var Ce=n(1),Ee={name:"UserList",methods:{getBEMClass:function(t){return Object(Ce.a)("afs-context-menu",t)}}},ke=Object(j.a)(Ee,xe,[],!1,null,null,null).exports,Te=function(){var t=this,e=t._self._c;return e("li",{class:t.rootClass},[e("button",{class:[t.getBEMClass("item-clickable"),t.getBEMClass("item-in")],attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("click")}}},[e("UserInfo",{attrs:{img:t.avatarUrl,title:t.name,meta:t.email,"avatar-size":t.size}})],1)])};function Pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Te._withStripped=!0;var je={name:"UserListItem",components:{UserInfo:s.a},props:{isSelected:{type:Boolean,required:!0,default:!1},avatarUrl:{type:String,required:!0,default:""},name:{type:String,required:!0,default:""},email:{type:String,default:""},size:{type:String,default:"lg",validator:function(t){return["lg","sm"].includes(t)}}},computed:{rootClass:function(){var t;return Pe(t={},this.getBEMClass("item"),!0),Pe(t,"usercard",!0),Pe(t,"usercard_".concat(this.size),!0),Pe(t,"is-selected",this.isSelected),t}},methods:{getBEMClass:function(t){return Object(Ce.a)("afs-context-menu",t)}}},Ae=(n(521),Object(j.a)(je,Te,[],!1,null,null,null).exports),Me=function(){var t=this,e=t._self._c;return e("div",{staticClass:"afs-mention",attrs:{disabled:t.disabled}},[e("ContextMenu",{ref:"dropdown",attrs:{type:"dropdown","full-width":"",modifiers:{y:"bottom",x:"start"},"max-height-limit":200},on:{open:function(e){return t.$emit("suggestionsOpen")},close:t.onDropdownClose}},[t.suggestions.length?e("ul",{ref:"suggestionsRef",staticClass:"afs-context-menu__section"},t._l(t.suggestions,(function(n,r){return e("li",{key:n.id,staticClass:"afs-context-menu__item",class:{"is-selected":r===t.selectedSuggestionIndex}},[t._t("suggestion",null,{suggestion:n,applyMention:t.withDebounce.applyMention})],2)})),0):t._e()]),t._v(" "),e("div",{ref:"editable",staticClass:"afs-mention__input",attrs:{contenteditable:!t.disabled},domProps:{innerHTML:t._s(t.value)},on:{focus:function(e){t.isActive=!0},blur:function(e){t.isActive=!1},input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.moveSuggestionFocus(e,1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.moveSuggestionFocus(e,-1)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.withDebounce.applyMention.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.withDebounce.applyMention.apply(null,arguments)},function(e){return e.stopPropagation(),t.onKeydown.apply(null,arguments)}],keyup:[function(t){t.stopPropagation()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),e.preventDefault(),t.closeSuggestions.apply(null,arguments))}],paste:function(e){return e.preventDefault(),t.onPaste.apply(null,arguments)},drop:function(t){t.preventDefault()}}}),t._v(" "),t.modelValue?t._e():e("div",{staticClass:"afs-mention__placeholder"},[t._v("\n    "+t._s(t.placeholder)+"\n  ")])],1)};Me._withStripped=!0;var Le=n(173);function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */De=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Ie(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function Re(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ne(t){return function(t){if(Array.isArray(t))return Fe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Be(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(t,e){if(t){if("string"==typeof t)return Fe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(t,e):void 0}}function Fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ue={childList:!0,characterData:!0,subtree:!0},$e={name:"Mention",components:{ContextMenu:E.a},model:{event:"model-changed",prop:"modelValue"},props:{placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},customMentionRegExp:{type:RegExp,default:null},symbol:{type:String,default:"@"},suggestions:{type:Array,default:function(){return[]}},mapInsert:{type:Function,default:function(t){return t.value}},textToHtml:{type:Function,default:function(t){return t}},modelValue:{type:String,default:""},autofocusable:{type:Boolean,default:!0}},data:function(){return{isActive:!1,isInput:!1,value:this.textToHtml(this.modelValue),searchText:null,selectedSuggestionIndex:0}},computed:{selection:function(){return window.getSelection()},withDebounce:function(){return{applyMention:Object(Le.b)(this.applyMention,1e3,!0)}}},watch:{isActive:function(t){this.$emit("focusStateChange",t)},suggestions:function(t){this.symbol&&t&&t.length&&this.$refs.dropdown.open(this.$el)}},mounted:function(){var t=this;this.input=this.$refs.editable,this.observer=new MutationObserver(this.onNodeChange),this.addNodesWatcher(),this.$emit("model-changed",this.input.textContent),document.addEventListener("selectionchange",this.onSelectionChange),this.autofocusable&&this.$nextTick((function(){t.focusCommentField()}))},beforeDestroy:function(){document.removeEventListener("selectionchange",this.onSelectionChange),this.observer.disconnect(),this.observer=null},methods:{addNodesWatcher:function(t){var e=this;(t||this.input.querySelectorAll(".".concat("full-match"))).forEach((function(t){e.observer.observe(t,Ue)}))},onNodeChange:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Be(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;"characterData"===r.type?this.onMentionTextChange(r):"childList"===r.type&&this.onMentionStructureChange(r)}}catch(t){n.e(t)}finally{n.f()}},onInput:function(t){if(("div"===this.selection.anchorNode.localName&&"deleteContentBackward"!==t.inputType||"insertParagraph"===t.inputType)&&this.addNewLine(),"insertLineBreak"===t.inputType&&this.isInsideElement()){var e=this.selection,n=e.anchorNode,r=e.anchorOffset;this.unwrapElement(n),this.selection.setPosition(n,r)}this.fontTagRemove(),this.isInput=!0,this.checkKey(),this.$emit("model-changed",this.input.textContent),window.requestAnimationFrame(this.checkCustomMentions)},onPaste:function(t){var e=t.clipboardData.getData("text/plain"),n=this.selection.getRangeAt(0),r=document.createTextNode(e);n.insertNode(r),this.selection.setPosition(r,e.length),this.$emit("model-changed",this.input.textContent),window.requestAnimationFrame(this.checkCustomMentions)},onKeydown:function(t){var e=t.ctrlKey?"Ctrl":"",n=t.altKey?"Alt":"",r=t.shiftKey?"Shift":"";13===t.which&&this.$emit("shortcut","".concat(e).concat(n).concat(r,"Enter"))},moveSuggestionFocus:function(t,e){if(this.$refs.suggestionsRef){t.preventDefault();var n=this.$refs.suggestionsRef.childNodes,r=this.selectedSuggestionIndex+e,o=n.length-1;this.selectedSuggestionIndex=r<0?o:r>o?0:r;var i=n[this.selectedSuggestionIndex];i.offsetTop<this.$refs.dropdown.$el.scrollTop?i.scrollIntoView():i.offsetTop>this.$refs.dropdown.$el.scrollTop+this.$refs.dropdown.$el.offsetHeight-i.offsetHeight&&i.scrollIntoView(!1)}},onDropdownClose:function(){this.$emit("suggestionsClose")},closeSuggestions:function(){this.$refs.dropdown&&this.$refs.dropdown.close()},onSelectionChange:function(){this.isInput?this.isInput=!1:this.closeSuggestions()},checkKey:function(){var t=this.selection.anchorOffset;if(t>=0){var e=this.getSearchText(t);if(null!=e)return this.selectedSuggestionIndex=0,this.searchText=e,this.$emit("search",{key:this.symbol,searchText:e}),!0}return this.closeSuggestions(),!1},appendMention:function(t){var e=t;if(e){var n="".concat(this.symbol).concat(this.mapInsert(e,this.symbol));this.input.contains(this.selection.anchorNode)||this.input.focus();try{var r=this.moveCursorToTheInputEnd();this.insertSpace(r),r.insertNode(document.createTextNode(n));var o=this.wrapFullMatch(r,n);r.setStartAfter(o),this.insertSpace(r),this.moveCursorToTheInputEnd(),this.$emit("model-changed",this.input.textContent),this.$emit("apply",e,n)}catch(t){console.log(t)}}},moveCursorToTheInputEnd:function(){var t=document.createRange(),e=window.getSelection();return t.selectNodeContents(this.input),t.collapse(!1),e.removeAllRanges(),e.addRange(t),t},applyMention:function(t,e){var n=e||this.suggestions[this.selectedSuggestionIndex];if(n){t.preventDefault();var r="".concat(this.symbol).concat(this.mapInsert(n,this.symbol));this.input.contains(this.selection.anchorNode)||this.input.focus();try{var o=this.selection.getRangeAt(0),i=o.startOffset-this.symbol.length-(this.searchText?this.searchText.length:0);o.setStart(o.startContainer,i>0?i:0),o.deleteContents(),o.insertNode(document.createTextNode(r));var a=this.wrapFullMatch(o,r);o.setStartAfter(a),this.insertSpace(o),this.input.focus(),this.$emit("model-changed",this.input.textContent),this.$emit("apply",n,r)}catch(t){console.log(t)}}},appendCharacter:function(t){var e=document.createTextNode(t);this.input.appendChild(e),this.selection.setPosition(e,t.length),this.checkKey(),this.$emit("model-changed",this.input.textContent),this.isInput=!0},handleMentionEdit:function(t){var e=t.parentElement.dataset.mention;e&&t.textContent&&t.parentElement.textContent!==e&&this.unwrapElement(t)},handleInsertBefore:function(t,e){var n=this.selection.anchorNode,r=t.textContent.slice(0,this.selection.anchorOffset);n.textContent=e;var o=document.createTextNode(r);n.parentElement.before(o),this.selection.setPosition(o,r.length)},handleInsertAfter:function(t,e){var n=this.selection.anchorNode,r=t.textContent.slice(e.length);n.textContent=e;var o=document.createTextNode(r);n.parentElement.after(o),this.selection.setPosition(o,r.length)},wrapFullMatch:function(t,e){var n=document.createElement("span");return n.classList.add("full-match"),n.dataset.mention=e,t.surroundContents(n),this.observer.observe(n,Ue),n},unwrapElement:function(t){var e=t.parentElement;e.before.apply(e,Ne(e.childNodes)),e.remove()},isInsideElement:function(){return!!this.getMentionContent(this.selection.anchorNode.parentElement)},getMentionContent:function(t){return t.dataset&&t.dataset.mention},insertSpace:function(t){var e=document.createTextNode(" ");t.insertNode(e),this.selection.setPosition(e,e.textContent.length)},onMentionTextChange:function(t){var e=t.target.parentElement.dataset.mention;if(e!==t.target.textContent){var n=t.target.textContent.indexOf(e);if(n<0){var r=this.selection,o=r.anchorNode,i=r.anchorOffset;return this.handleMentionEdit(t.target),void this.selection.setPosition(o,i)}n>0?this.handleInsertBefore(t.target,e):this.handleInsertAfter(t.target,e)}},onMentionStructureChange:function(t){var e=this.selection,n=e.anchorNode,r=e.anchorOffset;t.target.firstChild&&this.handleMentionEdit(t.target.firstChild),t.addedNodes.forEach(this.handleMentionEdit),this.selection.setPosition(n,r)},getSearchText:function(t){var e=this.getValue().substring(0,t).split(/(^|\s|\W)@/).slice(1).pop();return null==e&&/(\s{2}|\n|\r)/.test(e)?null:e},checkCustomMentions:function(){var t,e=this;return(t=De().mark((function t(){var n,r,o,i,a,s,c;return De().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getValue(),(r=e.customMentionRegExp&&n.match(e.customMentionRegExp))&&(e.$emit("applyAll",r),o=e.selection.anchorNode,i=e.selection.anchorOffset,a=e.textToHtml(n.slice(0,i)),s=document.createTextNode(" "+n.slice(i)),c=document.createRange().createContextualFragment(a.replace(/[\s\uFEFF\xA0]+$/g,"")),e.addNodesWatcher(c.querySelectorAll(".".concat("full-match"))),o.before.apply(o,Ne(c.childNodes).concat([s])),o.remove(),e.selection.setPosition(s,1));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Re(i,r,o,a,s,"next",t)}function s(t){Re(i,r,o,a,s,"throw",t)}a(void 0)}))})()},fontTagRemove:function(){var t=this,e=function e(n){return t.input.contains(n)?n.tagName&&"font"===n.tagName.toLowerCase()?n:e(n.parentElement):null}(this.selection.anchorNode);if(e){var n=e.textContent,r=document.createTextNode(n);e.parentElement.replaceChild(r,e),this.selection.setPosition(r,n.length)}},getValue:function(){return this.selection.anchorNode.textContent},cancelEvent:function(t){this.cancelKeyUp=t.key},addNewLine:function(){var t=document.createTextNode("\n"),e=this.selection.getRangeAt(0);e.deleteContents(),e.insertNode(t),e.setStartAfter(t)},focusCommentField:function(){this.input&&this.input.focus()}}},Ge=(n(522),Object(j.a)($e,Me,[],!1,null,"30e5f968",null).exports),Ve=n(23),ze=n(65),He=n(75),We=function(){var t=this,e=t._self._c;return e("div",{class:t.componentName,on:{paste:function(e){return e.stopPropagation(),t.handlePaste.apply(null,arguments)}}},[t._t("default",null,{onPaste:t.handleSlotPaste}),t._v(" "),e("ScreenshotImageList",{attrs:{list:t.images},on:{remove:t.handleRemoveImage}})],2)};function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){Xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}We._withStripped=!0;var Ze={name:"PasteImageFromClipboard",components:{ScreenshotImageList:Qt},inject:["imageUploadService","notificationService"],props:{limitCount:{type:Number,default:null},limitSize:{type:Number,default:2},readOnly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!0}},emits:["images-changed"],data:function(){return{componentName:"paste-image-from-clipboard",images:[]}},watch:{images:function(t){this.$emit("images-changed",(t||[]).filter((function(t){return t.serverGuid})).map((function(t){return t.serverGuid})))}},methods:{handleSlotPaste:function(t){var e=this,n=Array.from(t.clipboardData.items).some((function(t){return e.isDataTransferAFile(t)}));(this.disabled||n)&&t.preventDefault()},isDataTransferAFile:function(t){return!!/image/i.test(t.type)},addImage:function(t){if(t.size<1024*this.limitSize*1024)if(this.images.length<this.limitCount){var e=Object(q.a)();this.images.push({id:e}),this.imageUploadService.uploadImage({id:e,data:t}).then(this.updateImage,this.updateImageError)}else this.emitNotification("pasteImageFromClipboard.errors.countLimitExceeded",{count:this.limitCount});else this.emitNotification("pasteImageFromClipboard.errors.sizeLimitExceeded",{size:this.limitSize})},handleRemoveImage:function(t){var e=this.images.findIndex((function(e){return e.id===(null==t?void 0:t.id)}));-1!==e&&this.images.splice(e,1)},handlePaste:function(t){if(!this.readOnly&&!this.disabled){var e=t.clipboardData.items[0];e&&this.isDataTransferAFile(e)&&this.addImage(e.getAsFile())}},updateImage:function(t){var e=this.images.findIndex((function(e){return e.id===t.id}));-1!==e&&this.images.splice(e,1,qe(qe({},this.images[e]),t))},updateImageError:function(t){var e=this.images.findIndex((function(e){return e.id===t.id}));-1!==e&&this.images.splice(e,1,qe(qe({},this.images[e]),{},{hasUploadFailed:!0}))},emitNotification:function(t,e){this.notificationService.show({id:this.componentName+"-notification",i18nKey:t,i18nVars:e})}}},Ke=Object(j.a)(Ze,We,[],!1,null,null,null).exports,Je=n(153),Qe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[<>"']/g,(function(t){return e[t]}))};function tn(t){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function en(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */en=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==tn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function nn(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function rn(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){nn(i,r,o,a,s,"next",t)}function s(t){nn(i,r,o,a,s,"throw",t)}a(void 0)}))}}function on(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||ln(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?an(Object(n),!0).forEach((function(e){cn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function un(t){return function(t){if(Array.isArray(t))return fn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ln(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(t,e){if(t){if("string"==typeof t)return fn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fn(t,e):void 0}}function fn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var dn={name:"CommentFormField",directives:{hint:X.a,dropdown:Je.a},components:{PasteImageFromClipboard:Ke,UserList:ke,UserListItem:Ae,UserInfo:s.a,AfsButton:a.a,AfsButtonIcon:Ve.a,AfsText:O.a,AfsSearch:He.a,Checkbox:ze.a,Mention:Ge,ContextMenu:E.a},props:{text:{type:String,default:""},hideAssignedTo:{type:Boolean,default:!1},isAssignedTo:{type:String,default:""},isDisabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Add others with @"},initialMentions:{type:Array,default:function(){return[]}},hasButtons:{type:Boolean,default:!0},autofocusable:{type:Boolean,default:!0},deps:{type:Object,default:function(){}},activeCommentPosition:{type:Object,default:function(){}},firstComment:{type:Boolean,default:!1},editMode:{type:Boolean,default:!1}},data:function(t){return{commentText:t.text,isBusy:!1,isClickConfirm:!1,assignCheckbox:!t.areTasksEnabled,initialAssignCheckbox:!t.areTasksEnabled,isAssignedDropdownOpen:!1,cancelableRequest:{},assignedToUserId:t.isAssignedTo?t.isAssignedTo:t.areTasksEnabled?t.deps.localUserId:null,mentions:{},customEmails:{},initialMentionsMap:{},cancelSharing:!1,isFocused:!1,mouseOverBtn:!1,mentionCounter:0,assigneeSearch:"",assigneeUserList:[],imagesList:[]}},computed:{screenshotPasteEnabled:function(){return this.deps.screenshotPasteEnabled&&!this.editMode},customMentionRegExp:function(){return he},mentionTypes:function(){return ue},assignableMentions:function(){var t=this;return[].concat(un(this.mentionsList.filter((function(e){return e.mentionType!==t.mentionTypes.group}))),un(this.assigneeUserList.filter((function(e){return!t.mentionsList.some((function(t){return t.id===e.id}))}))))},mentionsList:function(){return Object.values(this.mentions)},statusButtons:function(){return this.hasButtons||this.commentText||this.isFocused||this.mouseOverBtn||this.assignCheckboxChanged||this.isAssignedDropdownOpen},showTaskAssignment:function(){return this.areTasksEnabled?this.isAssignedTo?this.hasUsersInMentions&&this.statusButtons:this.statusButtons:this.hasUsersInMentions},assignCheckboxChanged:function(){return this.areTasksEnabled&&this.assignCheckbox!==this.initialAssignCheckbox},assignedToYou:function(){return this.assignedToUserId===this.deps.localUserId||this.assignedToUserId===this.deps.globalUserId},userAssignedTo:function(){return this.assignedToUserId?this.assignedToYou?this.deps.userName:(this.mentions[this.assignedToUserId]||{}).name||"":""},hasUsersInMentions:function(){return this.mentionsList.some((function(t){return t.mentionType===ue.user}))},canConfirm:function(){return(this.areTasksEnabled?this.assignCheckbox&&!this.firstComment:this.assignCheckbox!==!!this.isAssignedTo)||this.commentText&&this.commentText!==this.text||this.deps.updatePostedThread.length},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"right"},offset:4}},hasMentions:function(){return this.mentionsList.length>1},isReleasePage:function(){var t,e;return null===(t=this.deps)||void 0===t||null===(e=t.analyticsSubject)||void 0===e?void 0:e.includes("Release")},isUpload:function(){var t,e;return null===(t=this.deps)||void 0===t||null===(e=t.analyticsSubject)||void 0===e?void 0:e.includes("Upload")},hasWorkspaceContext:function(){return"Upload"!==this.deps.analyticsSubject&&"MfgPackage"!==this.deps.analyticsSubject},withDebounce:function(){return{handleSearch:Object(Le.b)(this.handleSearch,300),onCommentUpdate:Object(Le.b)(this.onCommentUpdate,500)}},isResharingEnabled:function(){return this.deps.LicenseService.getLicenseDetails(this.deps.LicenseService.names.resharing).isEnabled},areTasksEnabled:function(){return this.deps.LicenseService.getLicenseDetails(this.deps.LicenseService.names.lightWeightTasks).isEnabled},areCommentsImagesEnabled:function(){return this.deps.LicenseService.getLicenseDetails(this.deps.LicenseService.names.commentsImages).isEnabled},hasCommentText:function(){return!!this.commentText},hasTextChange:function(){return this.canConfirm},canPasteImages:function(){return this.areCommentsImagesEnabled&&this.screenshotPasteEnabled},fieldPlaceholder:function(){return this.placeholder+(this.canPasteImages?" or paste an image":"")}},watch:{activeCommentPosition:{deep:!0,handler:function(t){this.$refs.mentionsRef&&this.$refs.mentionsRef.closeSuggestions(),this.onClickCloseDropdown()}},assignableMentions:{immediate:!0,handler:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.areTasksEnabled&&!t.length&&(this.assignedToUserId=this.deps.localUserId,t.sort().toString()!==e.sort().toString()&&(this.assignCheckbox=this.initialAssignCheckbox=!1))}}},created:function(){var t=this.getInitialMentions();this.initialMentionsMap=sn({},t),this.mentions=t,this.assignCheckbox=this.initialAssignCheckbox=!1},beforeDestroy:function(){this.isClickConfirm&&this.setDefaultParams()},methods:{getInitialMentions:function(){var t,e=(cn(t={},ue.group,this.deps.groups),cn(t,ue.user,this.deps.users),t);return this.initialMentions.reduce((function(t,n){var r=n.MentionGuid,o=n.MentionType,i=e[o].find((function(t){return t.id===r}));return t[i.id]=sn(sn({},i),{},{viewKey:me(i)}),t}),{})},onCommentUpdate:function(){var t=this;this.removeUnusedMentions();var e=this.mentionsList.reduce((function(e,n){return n.mentionType===ue.user&&e.userMentionList.push(n),n.id===t.assignedToUserId&&(e.isAssigned=!0),e}),{userMentionList:[]}),n=e.isAssigned,r=void 0!==n&&n,o=e.userMentionList;!r&&o.length&&(this.assignedToUserId=o[0].id,this.assignCheckbox=!1)},onApplyAll:function(t){var e=this;t.forEach((function(t){if(t=t.replace(/^@|[\s\uFEFF\xA0]+$/g,""),!e.mentions[t]&&!e.mentionsList.find((function(e){return e.mentionKey===t}))){var n={email:t,id:t,name:t,username:t,mentionType:ue.user};n.viewKey=me(n),e.$set(e.customEmails,n.email,n)}}))},textToHtml:function(t){return function(t,e){var n=ge(e);return be(t,n)}(t,[].concat(un(this.mentionsList),un(Object.values(this.customEmails))))},cancel:function(){this.$emit("cancel")},onSearch:function(t){var e=t.key,n=t.searchText;e&&this.findUsersOrGroup(n)},onSuggestionsClose:function(){Yt(this),this.deps.setTeamUsers([])},onSuggestionsOpen:function(){Wt(this)},mapInsertMention:function(t){return[ue.user,ue.group].includes(t.mentionType)?t.name:""},commentToText:function(t){return function(t,e){var n=ge(e,!0);if(!n)return t;return t.replace(n.regex,(function(t){return n.map.get(t.toLowerCase())}))}(t,this.mentionsList).trim()},updateMentions:function(t,e){this.$set(this.mentions,t.id,sn(sn({},t),{},{viewKey:e}))},removeUnusedMentions:function(){var t=this;this.mentions=this.mentionsList.reduce((function(e,n){return t.commentText.includes(n.viewKey)&&(e[n.id]=n),e}),{})},filterByPayload:function(t,e){var n=t.toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))},findUsersOrGroup:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this.withDebounce.handleSearch(t,e)},handleSearch:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deps",r=[];this.deps.analytics&&this.deps.analytics.dispatchMetricEventStart("Performance.Place.Comment.LoadSuggestions");var o={query:t,getWorkspaceUsersSuggestions:this.hasWorkspaceContext,getWorkspaceGroupsSuggestions:"deps"===n&&this.hasWorkspaceContext};this.deps.isWipSharingMode||this.isUpload?o.subjectGuid=this.deps.suggestionsContextGuid:o.projectGuid=this.deps.suggestionsContextGuid,this.deps.generateRequest?(r=this.deps.generateRequest(this.cancelableRequest,[this.deps.requestUserSuggestions],o),Promise.all(r).then((function(t){var r=on(t,1)[0];e.processUsers(null==r?void 0:r.data,n)})).catch((function(t){console.log(t)}))):this.deps.requestUserSuggestions(o).then((function(t){var r=t.data;e.processUsers(r,n)})).catch((function(){}))},processUsers:function(t,e){var n=this,r=function(t){return Array.isArray(t)&&t.length?t.map((function(t){return{id:t.id,username:t.name,name:t.fullName||t.name,email:t.email,mentionType:1===t.suggestionType?ue.group:ue.user,avatarUrl:t.ProfilePicture?(e=t.ProfilePicture,e?"".replace("{name}",e).replace("{size}","px48x48"):""):""};var e})):[]}(t||[]).map((function(t){return sn(sn({},t),{},{mentionKey:n.deps.isCCV?t.email:t.username})}));"deps"===e?this.deps.setTeamUsers(r):this.assigneeUserList=r,this.deps.analytics&&this.deps.analytics.dispatchMetricEventEnd("Performance.Place.Comment.LoadSuggestions")},onShortcut:function(t){"CtrlEnter"===t&&this.canConfirm&&this.onConfirm()},onConfirm:function(){var t=this;return rn(en().mark((function e(){var n,r,o,i,a,s,c,u,l,f,d,h,p,m,v,y;return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isBusy=!0,t.isClickConfirm=!0,t.removeUnusedMentions(),r=pe(t.commentText).filter((function(e){return!t.mentions[e]})).map((function(t){return{email:t}})),o={Text:Qe(t.commentToText(t.commentText)),AssignedTo:!t.hideAssignedTo&&t.assignCheckbox?t.assignedToUserId:null,Mentions:[],Images:null===(n=t.imagesList)||void 0===n?void 0:n.map((function(t){return{Guid:t}}))},i=[],t.mentionsList.forEach((function(e){t.initialMentionsMap[e.id]||(o.Mentions.push({OperationType:"add",MentionGuid:e.id,MentionType:e.mentionType}),i.push(e))})),t.initialMentions.forEach((function(e){t.mentions[e.MentionGuid]||o.Mentions.push({OperationType:"remove",MentionGuid:e.MentionGuid,MentionType:e.MentionType})})),t.deps.requestUsers&&t.deps.requestUsers([t.assignedToUserId].concat(un(o.Mentions.map((function(t){return t.MentionGuid}))))),a=i.length||r.length,!t.deps.isCcvViewer||!a){e.next=30;break}return e.prev=11,s=i.reduce((function(t,e){return e.mentionType===ue.user&&(t.ids.push(e.id),t.names.push(e.username)),t}),{ids:[],names:[]}),e.next=15,t.deps.checkProjectUsersPermission({ProjectGuid:t.isReleasePage?t.deps.packageId:t.deps.dataProjectSrc,Level:1,UsersIds:s.ids,UsersNames:un(new Set([].concat(un(s.names),un(r.map((function(t){return t.email}))))))});case 15:if(c=e.sent,(u=c.data)&&Array.isArray(u.UsersHavePermissions)&&u.UsersHavePermissions.forEach((function(e){if(e.UserId&&!t.mentions[e.UserId]&&(o.Mentions.push({OperationType:"add",MentionGuid:e.UserId,MentionType:1}),e.HasPermission)){var n=r.find((function(t){return(null==t?void 0:t.email.toLowerCase())===e.UserName.toLowerCase()}));null!=n&&n.email&&(o.Text=t.replaceUserEmail(o.Text,n.email))}})),!u||!(u.CurrentUserCanShare||!u.CurrentUserCanShare&&t.isResharingEnabled)){e.next=24;break}for(d in l=[],f=(u.UsersHavePermissions||[]).reduce((function(t,e){return t[e.UserName]?t[e.UserName].push(e):t[e.UserName]=[e],t}),{}))(h=f[d]).find((function(t){return t.HasPermission}))||l.push({id:h[0].UserId,email:h[0].UserName});return e.next=24,t.handleSharing(l);case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(11),console.log(e.t0),"cancelSharing"===e.t0.message&&(t.cancelSharing=!0);case 30:if(!t.deps.isKernelViewer||!a){e.next=45;break}if(e.prev=31,m=null===(p=t.deps.projectDetails)||void 0===p?void 0:p.CanShare,v=i.reduce((function(e,n){return t.deps.accessListUsersMap.has((n.id||"").toLowerCase())||t.deps.accessListUsersMap.has((n.username||"").toLowerCase())||t.deps.accessListUsersMap.has((n.name||"").toLowerCase())||e.push({email:n.email}),e}),r.filter((function(e){return!t.deps.accessListUsersMap.has((e.email||"").toLowerCase())}))),!(m||!m&&t.isResharingEnabled)){e.next=37;break}return e.next=37,t.handleSharing(v);case 37:(y=r.filter((function(e){return t.deps.accessListUsersMap.has((e.email||"").toLowerCase())}))).length&&y.forEach((function(e){null!=e&&e.email&&(o.Text=t.replaceUserEmail(o.Text,e.email))})),e.next=45;break;case 41:e.prev=41,e.t1=e.catch(31),console.log(e.t1),"cancelSharing"===e.t1.message&&(t.cancelSharing=!0);case 45:t.cancelSharing?t.setDefaultParams():t.$emit("submit",o);case 46:case"end":return e.stop()}}),e,null,[[11,26],[31,41]])})))()},setDefaultParams:function(){this.isBusy=!1,this.isClickConfirm=!1,this.cancelSharing=!1,this.assignCheckbox=this.initialAssignCheckbox=!this.areTasksEnabled,this.isAssignedDropdownOpen=!1,this.assignedToUserId=this.areTasksEnabled?this.deps.localUserId:null,this.clear()},handleSharing:function(t){var e=this;return rn(en().mark((function n(){var r;return en().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.deps.enabledSharing&&t.length){n.next=2;break}return n.abrupt("return");case 2:return r=Symbol("modalPlaceholder"),Wt(r),n.abrupt("return",new Promise((function(n,o){var i=function(){Yt(r),n()};e.deps.parentEvents.emit.call(e,"modal-share-project:open",t);e.deps.parentEvents.on.call(e,"modal-share-project:close",(function t(){e.deps.parentEvents.off.call(e,"modal-share-project:close",t),e.deps.isKernelViewer&&e.deps.requestGetAccessListUser(),i()}))})));case 5:case"end":return n.stop()}}),n)})))()},onClickOpenDropdown:function(){var t=this;this.$refs.assignedToDropdown&&this.$refs.assignedToDropdown.open(this.$refs.assignedToBlock),this.isAssignedDropdownOpen=!0,this.$nextTick((function(){return t.$refs.assigneeSearch.focus()})),this.handleSearch("","assignee")},onClickCloseDropdown:function(){this.$refs.assignedToDropdown&&this.$refs.assignedToDropdown.close(),this.isAssignedDropdownOpen=!1,this.assigneeUserList=[],this.assigneeSearch=""},onClickAssignedTo:function(t){this.$refs.mentionsRef.appendMention(t),this.assignedToUserId=t.id,this.assignCheckbox=!0,this.onClickCloseDropdown()},clear:function(){this.commentText="",this.mentionCounter++},replaceUserEmail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return t.includes("@".concat(e))?t:t.replaceAll(e,"@".concat(e))},handleImagesList:function(t){this.imagesList=t}}},hn=(n(523),n(524),Object(j.a)(dn,Se,[],!1,null,"9af2d842",null).exports),pn=function(t,e,n){if(t||e)return e.map((function(e){var r,o;return o=e,null!=(r=t)&&Object.prototype.hasOwnProperty.call(r,o)&&(t[e].cancel(),delete t[e]),t[e]=e(n),t[e].call()}))},mn=n(171);function vn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(n),!0).forEach((function(e){gn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bn=window.__APP__.library.Vuex,wn=bn.mapState,_n=bn.mapGetters,On=bn.mapMutations,Sn=bn.mapActions,xn=window.__APP__.analytics,Cn={name:"CommentForm",components:{CommentFormField:hn},computed:yn(yn(yn({},wn(["isLoading","groups","activeCommentPosition","updatePostedThread"])),_n(["teamUsers","users","accessListUsersMap","projectDetails"])),{},{commentBindProps:function(){return{activeCommentPosition:this.activeCommentPosition,deps:{accessListUsersMap:this.accessListUsersMap,analytics:xn,analyticsSubject:u.c,checkProjectUsersPermission:c.c,dataProjectSrc:u.h,enabledSharing:u.j,generateRequest:pn,globalUserId:u.k,groups:this.groups,isCCV:Object(mn.a)(u.o),isCcvViewer:u.p,isKernelViewer:u.t,isLoading:this.isLoading,isWipSharingMode:u.v,LicenseService:nt.a,localUserId:u.x,packageId:u.y,parentEvents:ft.a,projectDetails:this.projectDetails,requestGetAccessListUser:this.requestGetAccessListUser,requestUsers:this.requestUsers,requestUserSuggestions:c.n,setTeamUsers:this.setTeamUsers,suggestionsContextGuid:u.G,teamUsers:this.teamUsers,updatePostedThread:this.updatePostedThread,userName:u.J,users:this.users,screenshotPasteEnabled:!this.$attrs.editMode}}},hasCommentText:function(){return this.$refs.commentFormField.hasCommentText},hasTextChange:function(){return this.$refs.commentFormField.hasTextChange}}),methods:yn(yn(yn({},On(["setTeamUsers"])),Sn(["requestUsers","requestGetAccessListUser"])),{},{onConfirm:function(){return this.$refs.commentFormField.onConfirm()}})},En=Object(j.a)(Cn,Oe,[],!1,null,null,null).exports,kn=n(301),Tn=function(t){var e=document.createElement("span");return e.innerHTML=t,e.innerText},Pn=n(313);function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */An=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==jn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function Mn(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ln(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Mn(i,r,o,a,s,"next",t)}function s(t){Mn(i,r,o,a,s,"throw",t)}a(void 0)}))}}function In(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?In(Object(n),!0).forEach((function(e){Rn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nn=u.n||!u.D,Bn=window.__APP__.library.Vuex,Fn=Bn.mapState,Un=Bn.mapGetters,$n=Bn.mapMutations,Gn=Bn.mapActions,Vn={name:"CommentReplyItem",components:{CommentItem:_e,CommentForm:En,CommentContextMenu:Pn.a,ReleaseLink:A,DesignRevisionLink:B,Icon:h.a,ModalConfirmation:kn.a},props:{comment:{type:Object,required:!0},isResolved:{type:Boolean,default:!1},isMainComment:{type:Boolean,default:!1},isAssignedTo:{type:String,default:""},screenshotUrl:{type:String,default:""},releaseGuid:{type:String,default:""},snapshotVcsRevision:{type:String,default:""}},data:function(){return{modalId:V()(),isEdited:!1,hideAssignedTo:!1,dataPageUrl:u.f,dataProjectSrc:u.h,analyticsSubject:u.c,dataProjectGuid:u.g}},computed:Dn(Dn(Dn({},Fn(["activeCommentPosition","updatePostedThread","releases"])),Un(["activeThread","activeThreadId","groupsDictionary","usersDictionary"])),{},{commentItemBindProps:function(){return{comment:this.comment,isEdited:this.isEdited,isAnonymous:Nn,isMainComment:this.isMainComment,screenshotUrl:this.screenshotUrl,groupsDictionary:this.groupsDictionary,usersDictionary:this.usersDictionary,userScreenshots:this.comment.userScreenshots}},currentReleases:function(){return Array.isArray(this.releases)?et(this.releases,this.releaseGuid):""},mentions:function(){return this.comment.mentions||[]},isSystemMessage:function(){return this.comment.type===w.mentionStrings.system},contextMenuParams:function(){return{"hide-copy-link":!this.isMainComment,"hide-edit":!this.isCurrentUser||this.isResolved||this.isSystemMessage||this.isLWTTask&&this.isMainComment,"hide-delete":!(this.isCurrentUser||this.isAdministrator)||this.isSystemMessage&&!this.isMainComment,"hide-convert":!nt.a.getLicenseDetails(nt.a.names.lightWeightTasks).isEnabled||!(this.isMainComment&&!this.isAssignedTo)}},hasActiveContextMenuEntries:function(){return!Object.values(this.contextMenuParams).every((function(t){return t}))},isAdministrator:function(){return u.u},isCurrentUser:function(){var t,e,n,r;return u.J&&(u.x&&u.x===(null===(t=this.comment)||void 0===t||null===(e=t.author)||void 0===e?void 0:e.id)||u.k&&u.k===(null===(n=this.comment)||void 0===n||null===(r=n.author)||void 0===r?void 0:r.id))},commentText:function(){var t;return(null===(t=this.comment)||void 0===t?void 0:t.text)||""},isLWTTask:function(){var t;return"LWT"===(null===(t=this.activeThread)||void 0===t?void 0:t.threadType)},hasTagsLicense:function(){return nt.a.getLicenseDetails(nt.a.names.tags).isEnabled},showDesignRevisionLink:function(){return u.E&&this.hasTagsLicense&&this.isMainComment&&this.snapshotVcsRevision}}),watch:{activeCommentPosition:{immediate:!0,deep:!0,handler:function(t){this.$refs.screenshotDropdown&&this.$refs.screenshotDropdown.closeDropdown()}}},methods:Dn(Dn(Dn({},$n(["setLoading","setUpdatePostedThread","setOpenModal","removeOpenModal"])),Gn(["requestModifyThread","requestThreadRemove","requestRemoveComment","requestModifyComment","requestRemoveTask","requestRemoveTaskMessage","requestModifyTaskMessage"])),{},{confirmDelete:function(){this.$refs.threadModal&&this.$refs.threadModal.open(),this.$refs.threadModal&&this.setOpenModal(this.$refs.threadModal)},onConfirmThreadCancel:function(){this.$refs.threadModal&&this.$refs.threadModal.close()},onConfirmThreadDelete:function(){this.isLWTTask?this.isMainComment?this.onTaskRemove():this.onTaskMessageRemove():this.isMainComment?this.onThreadDelete():this.onCommentRemove(),this.onConfirmThreadCancel()},onThreadDelete:function(){this.requestThreadRemove({threadId:this.activeThreadId})},onCommentRemove:function(){var t=this;this.setLoading(!0),this.requestRemoveComment({threadId:this.activeThreadId,commentId:this.comment.id}).finally((function(){t.setLoading(!1)}))},onTaskRemove:function(){var t=this;this.setLoading(!0),this.requestRemoveTask({taskId:this.activeThreadId}).finally((function(){t.setLoading(!1)}))},onTaskMessageRemove:function(){var t=this;this.setLoading(!0),this.requestRemoveTaskMessage({taskId:this.activeThreadId,messageId:this.comment.id}).finally((function(){t.setLoading(!1)}))},editComment:function(){this.isEdited=!0,this.$emit("edit",this.isEdited),this.isMainComment&&this.$emit("show-tools")},convertToTask:function(){var t=this;return Ln(An().mark((function e(){var n;return An().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={threadId:t.activeThreadId,commentId:t.comment.id,value:{Text:"",AssignedTo:u.x,Mentions:[]}},e.prev=1,t.setLoading(!0),e.next=5,t.requestModifyThread(Dn(Dn({},n),{},{updateThread:t.updatePostedThread}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:return e.prev=10,t.setLoading(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})))()},closeEdit:function(){this.isEdited=!1,this.$emit("edit",this.isEdited),this.isMainComment&&this.$emit("hide-tools"),this.setUpdatePostedThread()},onConfirm:function(){return this.$refs.commentForm&&this.$refs.commentForm.onConfirm()},onUpdateSubmit:function(t){var e=this;return Ln(An().mark((function n(){var r;return An().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.Text=Tn(t.Text),r={threadId:e.activeThreadId,commentId:e.comment.id,value:t},e.setLoading(!0),!(e.isMainComment||!e.isMainComment&&r.value.AssignedTo&&e.isAssignedTo!==r.value.AssignedTo)){n.next=11;break}if(!e.isLWTTask){n.next=9;break}return n.next=7,Object(c.D)({taskId:r.threadId,fieldName:"assigneeGuid",value:r.value.AssignedTo});case 7:n.next=11;break;case 9:return n.next=11,e.requestModifyThread(Dn(Dn({},r),{},{updateThread:e.updatePostedThread}));case 11:e.isLWTTask?e.requestModifyTaskMessage(r).finally((function(){e.setLoading(!1),e.closeEdit()})):e.requestModifyComment(r).finally((function(){e.setLoading(!1),e.closeEdit()}));case 12:case"end":return n.stop()}}),n)})))()},hasTextChange:function(){return this.$refs.commentForm&&this.$refs.commentForm.hasTextChange},copyLink:function(){ft.a.emit("copy-link-to-thread",this.activeThreadId)}})},zn=(n(525),Object(j.a)(Vn,Gt,[],!1,null,null,null).exports),Hn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detached-comment-header"},[t._v("\n  Comment from a removed row\n  "),e("Icon",{directives:[{name:"hint",rawName:"v-hint:[`${commentHintId}`]",arg:"".concat(t.commentHintId)}],staticClass:"detached-comment-header__icon",attrs:{name:"info-2-16"}}),t._v(" "),e("ContextMenu",{attrs:{id:t.commentHintId,type:"hint",modifiers:{y:"bottom",x:"start"}}},[t._v("\n    This commented row was removed"),e("br"),t._v("\n    due to design and BOM changes\n    "),e("hr"),t._v(" "),e("ul",[e("li",[t._v("Name: "+t._s(t.tooltip.comment))]),t._v(" "),e("li",[t._v("Designator: "+t._s(t.tooltip.designator))]),t._v(" "),e("li",[t._v("Quantity: "+t._s(t.tooltip.quantity))])])])],1)};function Wn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wn(Object(n),!0).forEach((function(e){qn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Hn._withStripped=!0;var Xn=window.__APP__.library.Vuex.mapGetters,Zn={name:"DetachedCommentHeader",directives:{hint:T.a},components:{Icon:h.a,ContextMenu:E.a},computed:Yn(Yn({},Xn({tooltip:"detachedThreadTooltip"})),{},{commentHintId:function(){return V()()}})},Kn=(n(526),Object(j.a)(Zn,Hn,[],!1,null,null,null).exports),Jn=function(){var t=this,e=t._self._c;return e("div",[t.assignedTo?e("UserAvatar",{directives:[{name:"hint",rawName:"v-hint",value:{id:"assignedTo_".concat(t.id),delay:400},expression:"{ id: `assignedTo_${id}`, delay: 400 }"}],ref:"avatar",staticClass:"edit-comment__user-avatar",attrs:{img:t.assignedTo.avatarUrl,title:t.assignedTo.name,size:"sm",tag:"button"},on:{click:t.openUserSelect}}):t._e(),t._v(" "),e("ContextMenu",{attrs:{id:"assignedTo_".concat(t.id),modifiers:t.menuPosition,type:"hint"},scopedSlots:t._u([{key:"default",fn:function(){return[t._v("\n      "+t._s(t.assignedTo.name)+"\n    ")]},proxy:!0}])}),t._v(" "),e("ContextMenu",{ref:"dropdown",attrs:{type:"dropdown","max-height-limit":t.maxHeight,"init-width":t.initWidth,modifiers:t.menuPosition},on:{close:t.closeUserSelect},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.getBEMClass;return[e("div",{class:r("section")},[e("div",{class:r("item")},[e("div",{class:r("item-in")},[e("AfsSearch",{class:{"edit-comment__user-query_with-result":t.users.length},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1)])]),t._v(" "),t.users.length?e("UserList",t._l(t.users,(function(n){return e("UserListItem",{key:n.id,attrs:{"avatar-url":n.avatarUrl,name:n.name,email:n.email},on:{click:function(e){return t.handleAssigneeSelect(n)}}})})),1):t._e(),t._v(" "),t.showEmptyText?e("div",{class:r("section")},[e("div",{class:r("item")},[e("div",{class:r("item-in")},[e("AfsText",{staticClass:"edit-comment__user-query-empty",attrs:{type:"single line"}},[t._v("\n              No results for your search\n            ")])],1)])]):t._e()]}}])})],1)};Jn._withStripped=!0;var Qn=n(382),tr=n.n(Qn);function er(t){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */nr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==er(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function rr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var or={name:"ModalEditCommentsSelectAssignee",components:{ContextMenu:E.a,UserList:ke,UserListItem:Ae,AfsSearch:He.a,AfsText:O.a,UserAvatar:$.a},directives:{hint:T.a},props:{assignedTo:{type:Object,required:!0,default:function(){}},threadGuid:{type:String,required:!0,default:""},activeThread:{type:Object,default:function(){return{}}}},data:function(){return{users:[],query:"",isLoading:!1,id:V()()}},computed:{maxHeight:function(){return 464},initWidth:function(){return 288},menuPosition:function(){return{y:"bottom",x:"start"}},withDebounce:function(){return{handleSearch:tr()(this.handleSearch,1e3,!0)}},showEmptyText:function(){return!this.isLoading&&this.query.length>0&&this.users.length<=0},taskHrid:function(){var t,e;return(null===(t=this.activeThread)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.LwTaskHrid)||""},isLWTTask:function(){var t;return"LWT"===(null===(t=this.activeThread)||void 0===t?void 0:t.threadType)}},watch:{query:function(t){this.withDebounce.handleSearch(t)}},created:function(){this.taskHrid&&this.handleSearch("")},methods:{openUserSelect:function(){this.taskHrid&&this.$refs.dropdown.open(this.$refs.avatar)},closeUserSelect:function(){var t;null===(t=this.$refs.dropdown)||void 0===t||t.close()},handleSearch:function(t){var e,n=this;return(e=nr().mark((function e(){var r,o,i,a,s,u;return nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"function"==typeof n.$_previousRequestCancel&&n.$_previousRequestCancel(),r=Object(c.l)(t),o=r.call,i=r.cancel,n.$_previousRequestCancel=i,n.isLoading=!0,e.next=7,o();case 7:a=e.sent,s=a.data,u=void 0===s?[]:s,n.users=Object(l.e)(u),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),n.users=[],console.error("User fetch failed: ".concat(e.t0.message));case 17:return e.prev=17,n.isLoading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){rr(i,r,o,a,s,"next",t)}function s(t){rr(i,r,o,a,s,"throw",t)}a(void 0)}))})()},handleAssigneeSelect:function(t){var e=this;(this.isLWTTask?Object(c.D)({taskId:this.threadGuid,fieldName:"assigneeGuid",value:t.id}):Object(c.a)({threadId:this.threadGuid,userGuid:t.id})).then((function(){e.$emit("input",t),e.closeUserSelect()}))}}},ir=(n(527),Object(j.a)(or,Jn,[],!1,null,null,null).exports),ar=n(299),sr=n(147),cr=n(183),ur=n(181),lr=n(184),fr=function(){var t=this._self._c;return t("div",{staticClass:"register",class:this.classList},[t("AfsText",{staticClass:"register__wrap"},[t("LibIcon",{staticClass:"register__logo",attrs:{name:"icon-logo",filled:""}}),this._v("\n    Register for Altium 365 to comment on the design\n  ")],1),this._v(" "),t("SignupButton",{staticClass:"register__btn",attrs:{"btn-props":{primary:!0,wide:this.vertical},url:this.link}},[this._v("\n    Register\n  ")])],1)};fr._withStripped=!0;var dr=n(238),hr=n(178),pr={name:"RegisterA365",components:{LibIcon:dr.default,SignupButton:hr.default,AfsText:O.a},props:{vertical:{type:Boolean,default:!1},hideBg:{type:Boolean,default:!1},link:{type:String,default:""}},computed:{classList:function(){return{"is-vertical":this.vertical,"is-bg-hide":this.hideBg}}}},mr=(n(528),Object(j.a)(pr,fr,[],!1,null,"10154261",null).exports);function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */yr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==vr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function gr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function br(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?br(Object(n),!0).forEach((function(e){_r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Or=window.__CORE__,Sr=window.__APP__.library.Vuex,xr=Sr.mapState,Cr=Sr.mapGetters,Er=Sr.mapMutations,kr=Sr.mapActions,Tr={name:"ModalEditComments",components:{CommentEditHeaderPanel:ar.a,Modal:lr.a,CommentReplyItem:zn,CommentsTools:ur.a,CommentForm:En,ModalDraggerTitle:cr.a,ModalEditCommentsSelectAssignee:ir,RegisterA365:mr,DetachedCommentHeader:Kn},props:{editModes:{type:Array,default:function(){return["area"]}}},data:function(){return{isOpened:!1,isEditing:!1,isCommentTools:!1,threadCommentTextChange:!1,modeText:!0,isBusy:!1,showAllComments:!1,isMovePosition:!1,moveModalPosition:{x:0,y:0},localUserId:u.x,globalUserId:u.k,menuStartHeight:200,threadEditOptions:null,hideAssignedTo:!1,isPaintMode:!1,formTmpKey:(new Date).getTime(),isAnonymous:u.n,sessionId:u.D,saveTo:u.C}},computed:wr(wr(wr({},xr(["sortedThreads","activeCommentPosition","isLoading","updatePostedThread","isDrawing"])),Cr(["activeThreadId","activeThread","threads","users","isActiveThreadDetached"])),{},{currentUser:function(){return{name:u.J,localId:this.localUserId,avatarUrl:u.H}},packageId:function(){var t;return(null===(t=this.activeThread)||void 0===t?void 0:t.packageId)||""},activeThreadComments:function(){var t;return(null===(t=this.activeThread)||void 0===t?void 0:t.comments)||[]},taskLink:function(){return x(this.packageId,this.taskId)},firstComment:function(){return!!this.activeThreadComments.length&&this.activeThreadComments[0]},lastComment:function(){return!!(this.activeThreadComments.length&&this.activeThreadComments.length>2)&&this.activeThreadComments[this.activeThreadComments.length-1]},shortListThreadComments:function(){var t=[];return this.activeThreadComments.length&&(t.push(this.firstComment),this.lastComment&&(t.push({type:"separator"}),t.push(this.lastComment))),t},listActiveThreadComments:function(){return this.activeThreadComments.length<3||this.showAllComments?this.activeThreadComments:this.shortListThreadComments},countHideComments:function(){return this.activeThreadComments.length-2},screenshotUrl:function(){var t;return(null===(t=this.activeThread)||void 0===t?void 0:t.screenshotUrl)||null},hasThreadComments:function(){return this.activeThreadComments.length},isAssignedTo:function(){var t;return(null===(t=this.activeThread)||void 0===t?void 0:t.assignedTo)||""},assignedToYou:function(){return this.isAssignedTo&&(this.isAssignedTo===this.localUserId||this.isAssignedTo===this.globalUserId)},assignedTo:function(){if(this.assignedToYou)return this.currentUser;var t=this.isAssignedTo||!1;return t&&this.users.find((function(e){return e.id===t}))||!1},isResolved:function(){var t;return(null===(t=this.activeThread)||void 0===t?void 0:t.resolved)||!1},isLWTTask:function(){var t;return"LWT"===(null===(t=this.activeThread)||void 0===t?void 0:t.threadType)},rightCornerModalCoords:function(){var t={right:16,top:48};return{x:parseInt(window.innerWidth-sr.c-Object(sr.a)()-t.right),y:t.top}},modalCoords:function(){var t;return this.isMovePosition?this.moveModalPosition:this.isLWTTask?this.rightCornerModalCoords:Object(sr.b)({data:null===(t=this.activeCommentPosition)||void 0===t?void 0:t.iconRect,isTools:this.isCommentTools,isDetached:this.isActiveThreadDetached,menuStartHeight:this.menuStartHeight})},releaseGuid:function(){var t,e;return(null===(t=this.activeThread)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.releaseGuid)||""},snapshotVcsRevision:function(){var t,e;return(null===(t=this.activeThread)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.vcsRevision)||""},shouldShowReply:function(){return!this.isResolved&&!this.isEditing},taskId:function(){var t,e;return(null===(t=this.activeThread)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.LwTaskId)||""},layersConfig:function(){var t;return(null===(t=this.activeThread.properties)||void 0===t?void 0:t.layersConfiguration)||""},taskAvatarUrl:function(){return this.assignedTo.avatarUrl},taskAvatarName:function(){return this.assignedTo.name},isAnonym:function(){return this.isAnonymous||!this.sessionId}}),watch:{hasThreadComments:{immediate:!0,handler:function(t){t||this.close()}},activeCommentPosition:{immediate:!0,deep:!0,handler:function(t){this.isMovePosition=!1}},activeThread:{immediate:!0,deep:!0,handler:function(t){t&&(this.updateFlipBoard(),this.updateLayers())}}},methods:wr(wr(wr({},Er(["setLoading","setUpdatePostedThread","setIsDrawing","setOpenModal","removeOpenModal","closeAllModal"])),kr(["requestModifyThread","requestAddComment","requestAddTaskMessage","setActiveThreadId","requestResolveThread","setActiveThreadTaskStatus","setActiveThreadAssignee"])),{},{open:function(){var t;this.isOpened||(this.isOpened=!0,this.modeText=!0,this.showAllComments=!1,this.isCommentTools=!1,this.isMovePosition=!1,this.moveModalPosition={x:0,y:0},null===(t=this.$refs.modalEditComment)||void 0===t||t.open(),this.setOpenModal(this),this.setStartMenuHeight())},close:function(){var t=this;this.isOpened?(this.isOpened=!1,this.$refs.commentReplyItem&&this.$refs.commentReplyItem.forEach((function(t){return t.onConfirmThreadCancel()})),this.$nextTick((function(){t.$refs.modalEditComment&&t.$refs.modalEditComment.close()})),this.removeOpenModal(this),this.isEditing=!1):this.activeThreadId&&this.onActiveThreadId(null)},onClose:function(){this.onActiveThreadId(null),this.setIsDrawing(!1)},onActiveThreadId:function(t){this.setActiveThreadId(t),window.__CORE__.bus.emit("CommentsDrawingEngine:activate",{id:t,zoomToFit:!0})},onReplySubmit:function(t){var e,n=this;return(e=yr().mark((function e(){var r;return yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Text=Tn(t.Text),r={threadId:n.activeThreadId,value:t},n.setLoading(!0),!r.value.AssignedTo||n.isAssignedTo===r.value.AssignedTo){e.next=11;break}if(!n.isLWTTask){e.next=9;break}return e.next=7,Object(c.D)({taskId:r.threadId,fieldName:"assigneeGuid",value:r.value.AssignedTo});case 7:e.next=11;break;case 9:return e.next=11,n.requestModifyThread(wr(wr({},r),{},{updateThread:n.updatePostedThread}));case 11:if(t.Text){e.next=15;break}n.setLoading(!1),e.next=22;break;case 15:if(!n.isLWTTask){e.next=20;break}return e.next=18,n.requestAddTaskMessage(r).finally((function(){n.setLoading(!1)}));case 18:e.next=22;break;case 20:return e.next=22,n.requestAddComment(r).finally((function(){n.setLoading(!1)}));case 22:n.formTmpKey=(new Date).getTime();case 23:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){gr(i,r,o,a,s,"next",t)}function s(t){gr(i,r,o,a,s,"throw",t)}a(void 0)}))})()},onHandleResolve:function(){var t=this;this.$refs.commentReplyItem&&this.$refs.commentReplyItem.forEach((function(t){return t.closeEdit()})),this.setLoading(!0),this.requestResolveThread({threadId:this.activeThreadId,resolve:!this.isResolved}).catch((function(){t.setLoading(!1)})).finally((function(){t.isResolved||t.close()}))},showToggleCommentTools:function(){this.isCommentTools=!0,Or.bus.emit("CommentsDrawingEngine:startEdit")},hideToggleCommentTools:function(){this.isCommentTools=!1},onPostThread:function(){var t=this;this.$refs.commentReplyItem&&this.$refs.commentReplyItem[0].onConfirm(),this.$nextTick((function(){return t.setActiveThreadId(null)}))},onCloseThreadEdit:function(){this.setModeText(!0),Or.bus.emit("CommentsDrawingEngine:stopEdit"),this.$refs.commentReplyItem&&this.$refs.commentReplyItem[0].closeEdit()},onTaskStatusChange:function(t){var e=this;this.activeThread&&Or.bus.emit("CommentsDrawingEngine:resolve",{Guid:this.activeThreadId,Status:"Resolved"===t.id?1:0}),Object(c.b)(this.packageId,this.taskId,t.id).then((function(){e.setActiveThreadTaskStatus(t.id)}))},onCommentAssigneeChange:function(t){this.setActiveThreadAssignee(t)},hasCommentText:function(){this.threadCommentTextChange=this.$refs.commentReplyItem[0].hasTextChange},setModeText:function(t){this.modeText=t,t||this.hasCommentText()},clickShowAllComments:function(){this.showAllComments=!0},moveModal:function(t,e){e||(this.moveModalPosition=t,this.isMovePosition=!0)},setStartMenuHeight:function(){var t=this;this.$nextTick((function(){t.menuStartHeight=t.$refs.modalEditComment.$el.offsetHeight}))},updateFlipBoard:function(){if(this.layersConfig){var t=this.layersConfig.flipped;Or.bus.emit("BoardItemsVisibility:viewChange",t?"bottom":"top")}},updateLayers:function(){var t,e;this.layersConfig&&Or.bus.emit("PcbEngine:updateLayers",{active:(null===(t=this.layersConfig)||void 0===t?void 0:t.active)||null,visible:(null===(e=this.layersConfig)||void 0===e?void 0:e.visible)||[]})}})},Pr=(n(529),Object(j.a)(Tr,$t,[],!1,null,null,null).exports),jr=n(302),Ar=function(){var t=this,e=t._self._c;return e("AfsModal",{ref:"modalNotifications",attrs:{id:"modal-notifications",size:"sm"},on:{"after-close":t.onCancel}},[e("div",[e("div",{staticClass:"app-modal-notifications"},[e("div",{staticClass:"app-modal-notifications__header"},[e("AfsText",{attrs:{type:"title"}},[t._v(" Notification Settings ")])],1),t._v(" "),e("div",{staticClass:"app-modal-notifications__body"},[e("div",{staticClass:"app-modal-notifications__section"},[e("AfsText",[t._v("\n            Select which comments in this project you will receive email\n            notifications for.\n          ")])],1),t._v(" "),e("ul",{staticClass:"app-modal-notifications__section"},t._l(t.settings,(function(n){return e("li",{key:n.id,staticClass:"app-modal-notifications__checkbox"},[e("AfsRadio",{attrs:{"model-value":t.selectedSetting.text,value:n.text,name:"notifications"},on:{change:function(e){return t.onSettingsChange(e,n)}}},[e("AfsText",{attrs:{type:"paragraph",inline:""}},[t._v("\n                "+t._s(n.text)+"\n                "),n.description?e("AfsText",{staticClass:"app-modal-notifications__item-description",attrs:{type:"text",inline:""}},[t._v("\n                  "+t._s(n.description)+"\n                ")]):t._e()],1)],1)],1)})),0)]),t._v(" "),e("div",{staticClass:"app-modal-notifications__footer"},[e("AfsButton",{staticClass:"app-modal-notifications__footer-btn",attrs:{type:"button",primary:!0,disabled:!t.hasChanges,"is-busy":t.isUpdating},on:{click:function(e){return e.preventDefault(),t.onUpdate.apply(null,arguments)}}},[t._v("\n          Update\n        ")]),t._v(" "),e("AfsButton",{staticClass:"app-modal-notifications__footer-btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.onCancel.apply(null,arguments)}}},[t._v("\n          Cancel\n        ")])],1)])])])};Ar._withStripped=!0;var Mr=n(217);function Lr(t){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ir(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ir=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Lr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function Dr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rr(Object(n),!0).forEach((function(e){Br(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Br(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fr=0,Ur=1,$r=2,Gr={0:"All",1:"My",2:"None"},Vr={name:"AppModaCommentsNotifications",components:{AfsModal:Ht.a,AfsText:O.a,AfsRadio:Mr.a,AfsButton:a.a},props:{userSettings:{type:Object,required:!0,default:function(){return{}}},isUpdating:{type:Boolean,default:!1}},data:function(){return{isOpened:!1,hasChanges:!1,settings:[{id:Fr,isSelected:!1,text:"All"},{id:Ur,isSelected:!0,text:"My",description:"(you are involved in)"},{id:$r,isSelected:!1,text:"None"}],tempSettings:""}},computed:{selectedSetting:function(){return this.settings.find((function(t){return t.isSelected}))}},watch:{userSettings:{immediate:!0,handler:function(t){var e=t.NotificationType;e&&Gr[+e.Value]&&this.setSelectedSetting(+e.Value)}}},methods:{open:function(){this.tempSettings=JSON.stringify(this.settings),this.$refs.modalNotifications&&this.$refs.modalNotifications.open()},close:function(){this.hasChanges&&(this.settings=this.tempSettings&&JSON.parse(this.tempSettings)),this.setIsChanges(!1),this.tempSettings="",this.$refs.modalNotifications&&this.$refs.modalNotifications.close()},onSettingsChange:function(t,e){this.setIsChanges(!0),this.setSelectedSetting(e.id)},setSelectedSetting:function(t){this.settings=this.settings.map((function(e){return Nr(Nr({},e),{},{isSelected:e.id===t})}))},onUpdate:function(){var t,e=this;return(t=Ir().mark((function t(){return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$emit("update",[Nr(Nr({},e.selectedSetting),{},{name:"NotificationType"})]);case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Dr(i,r,o,a,s,"next",t)}function s(t){Dr(i,r,o,a,s,"throw",t)}a(void 0)}))})()},onCancel:function(){this.close()},setIsChanges:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hasChanges=t}}},zr=(n(530),Object(j.a)(Vr,Ar,[],!1,null,null,null).exports),Hr=n(298),Wr=n(303),Yr=n(304),qr=n(305);function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Xr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function Kr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Jr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Kr(i,r,o,a,s,"next",t)}function s(t){Kr(i,r,o,a,s,"throw",t)}a(void 0)}))}}function Qr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function to(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qr(Object(n),!0).forEach((function(e){eo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function eo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var no=window.__APP__.library.Vuex,ro=no.mapActions,oo=no.mapGetters,io=no.mapState,ao=no.mapMutations,so=window.__CORE__,co={name:"CommentPanel",components:{AfsLink:i.a,ThreadList:Ut,AfsButton:a.a,AppHeader:Wr.a,ModalAddComments:jr.a,ModalEditComments:Pr,ModalNotifications:zr,AddCommentToast:Yr.a,RegisterA365:mr,AppFilters:Hr.a,UserInfo:s.a,CommentForm:En},data:function(){return{sessionId:u.D,isAnonymous:u.n,saveTo:u.C,isUpdatingNotifications:!1,isActiveAddComment:!1,commentsSurveyUrl:"https://surveys.hotjar.com/f843176a-0650-4c5c-9a04-4095ead18f84",registerUrl:u.B,pluginName:"comments",threadOptions:null,threadCommentHasText:null}},computed:to(to(to({},io(["activeViewTabs","userSettings","activeCommentPosition","isDrawing","updatePostedThread","isLoading"])),oo(["filters","threads","lwTasks"])),{},{hasThreads:function(){return this.threads.length||this.lwTasks.length},isAnonym:function(){return this.isAnonymous||!this.sessionId},currentUser:function(){return{name:u.J,localId:u.x,avatarUrl:u.H}},editModes:function(){return this.threadOptions&&this.threadOptions.disableCustomDraw?["area"]:["area","draw"]}}),mounted:function(){var t=this;this.$root.$on("open-modal-edit",this.openModalEdit),this.$root.$on("close-modal-edit",this.closeModalEdit),this.$root.$on("close-modal-add",this.onClosePlaceComment),so.bus.on("CommentsDrawingEngine:cancelEdit",this.onCloseModalAddComment),so.bus.on("CommentPanel:placeAComment",(function(){return t.onAddPlaceComment()})),so.bus.on("CommentPanel:cancelAComment",this.onClosePlaceComment)},beforeDestroy:function(){this.$root.$off("open-modal-edit",this.openModalEdit),this.$root.$off("close-modal-edit",this.closeModalEdit),this.$root.$off("close-modal-add",this.onClosePlaceComment)},created:function(){!u.n&&u.D&&(this.requestGetAccessListUser(),u.t&&this.requestProjectDetails())},methods:to(to(to({},ao(["setActiveCommentPosition","setIsDrawing","setLoading","setOpenModal","removeOpenModal","closeAllModal"])),ro(["setActiveCommentControl","updateFilters","clearFilters","setCreateNewThread","requestGetUserSettings","requestGetAccessListUser","requestProjectDetails","requestAddThread"])),{},{onAddPlaceComment:function(){var t=this;if(!this.isActiveAddComment){this.setActiveCommentControl({}),this.$refs.addCommentToast&&this.$refs.addCommentToast.open(),this.isActiveAddComment=!0,so.bus.on("CommentsDrawingEngine:didCreate",(function e(n){var r=n.data;so.bus.off("CommentsDrawingEngine:didCreate",e),t.$refs.addCommentToast&&t.$refs.addCommentToast.close(),r?(r.on("WAIT_FOR_POST",(function(e){t.setCreateNewThread(!0),t.setActiveCommentPosition(e),t.$refs.modalAddComment&&(t.threadOptions=e.threadEditOptions,t.$refs.modalAddComment.open())})),r.on("REMOVE",(function(e){t.isActiveAddComment=!1,t.onCloseModalAddComment()})),r.on("UPDATE_ICON_POSITION",(function(e){setTimeout((function(){return t.setActiveCommentPosition(e)}),0)})),r.on("UPDATE_DRAWINGS",(function(e){t.setIsDrawing(!!e.count)}))):t.isActiveAddComment=!1}))}},onClosePlaceComment:function(){this.isActiveAddComment=!1,this.onCloseModalAddComment(),this.$refs.addCommentToast&&this.$refs.addCommentToast.close(),this.setActiveCommentControl(null),this.setCreateNewThread(!1)},onVisibilityChange:function(t){so.bus.emit("CommentPanel:visibilityChange",t)},onChangeFilters:function(t){var e=this;return Jr(Zr().mark((function n(){var r,o,i;return Zr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.updateFilters(t);try{"AssignedTo"===t.forSave.Name&&((i=null===(r=e.userSettings)||void 0===r?void 0:r.AssignedTo)||(i=e.userSettings.AssignedTo={Name:"AssignedTo",Value:null}),Array.isArray(null===(o=i)||void 0===o?void 0:o.Value)||(i.Value=[]),t.isItemUserSelected&&!i.Value.includes(t.forSave.Value)?i.Value.push(t.forSave.Value):i.Value=i.Value.filter((function(e){return e!==t.forSave.Value})),t.forSave.Value=JSON.stringify(i.Value)),Object(c.j)([t.forSave]),so.bus.emit("CommentPanel:filterChange")}catch(t){console.error(t)}case 2:case"end":return n.stop()}}),n)})))()},onClearFilters:function(){var t=this;return Jr(Zr().mark((function e(){return Zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.clearFilters();try{so.bus.emit("CommentPanel:filterChange")}catch(t){console.error(t)}case 2:case"end":return e.stop()}}),e)})))()},openModalEdit:function(t){this.threadOptions=t,this.$refs.modalEditComments.open()},closeModalEdit:function(){this.$refs.modalEditComments.close(),this.threadOptions=null},onOpenNotificationsSettings:function(){this.$refs.modalNotificationsSettings&&this.$refs.modalNotificationsSettings.open()},onCloseModalAddComment:function(){this.$refs.modalAddComment&&this.$refs.modalAddComment.close(),this.setIsDrawing(!1),this.threadOptions=null},onUpdateNotificationsSettings:function(t){var e=this;return Jr(Zr().mark((function n(){return Zr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.isUpdatingNotifications=!0,n.next=4,Promise.all([Object(c.j)(Object(l.g)(t)),e.resolveWithTimeout()]);case 4:if(e.$refs.modalNotificationsSettings){n.next=6;break}return n.abrupt("return");case 6:e.$refs.modalNotificationsSettings.setIsChanges(),e.$refs.modalNotificationsSettings.close(),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0);case 13:return n.prev=13,e.isUpdatingNotifications=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,10,13,16]])})))()},resolveWithTimeout:function(){return new Promise((function(t){return setTimeout(t,1500)}))},onConfirmCreateThread:function(){this.$refs.commentForm&&this.$refs.commentForm.onConfirm()},onCreateNewThread:function(t){var e=this;return Jr(Zr().mark((function n(){var r;return Zr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setLoading(!0),n.next=3,Object(qr.a)(e.threadOptions);case 3:r=n.sent,t.Text=Tn(t.Text),e.requestAddThread(to(to({},t),{},{screen:r})).finally((function(){e.setLoading(!1),e.onCloseModalAddComment()}));case 6:case"end":return n.stop()}}),n)})))()},hasCommentText:function(){this.threadCommentHasText=this.$refs.commentForm&&this.$refs.commentForm.hasCommentText}})},uo=(n(531),Object(j.a)(co,o,[],!1,null,null,null).exports),lo=function(){var t=this,e=t._self._c;return e("ContextMenu",{ref:"tooltip",attrs:{type:"hint",modifiers:{y:"bottom",x:"start"}},scopedSlots:t._u([{key:"default",fn:function(){return[e("AfsText",{staticClass:"comment-tooltip",attrs:{type:"tooltip"}},[t.computedTooltip.task?e("span",[t._v("\n        Task "+t._s(t.computedTooltip.task)+",\n        "),t.computedTooltip.assignedTo?e("span",[t._v("\n          assigned to "+t._s(t.computedTooltip.assignedTo)+"\n        ")]):t._e()]):e("span",[t._v("\n        "+t._s(t.tooltipText)+"\n      ")])])]},proxy:!0}])})};function fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ho(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(n),!0).forEach((function(e){po(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function po(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}lo._withStripped=!0;var mo=window.__APP__.library.Vuex.mapGetters,vo={name:"AppTooltip",components:{AfsText:O.a,ContextMenu:E.a},computed:ho(ho({},mo(["tooltip"])),{},{computedTooltip:function(){return this.tooltip?this.tooltip:{value:""}},tooltipText:function(){var t,e,n=null===(t=this.tooltip)||void 0===t||null===(e=t.text)||void 0===e?void 0:e.trim();return n||"Сomment…"}}),watch:{tooltip:{immediate:!0,handler:function(t){this.$refs.tooltip&&(t&&t.id?this.$refs.tooltip.showByCoordinates({x:t.x,y:t.y}):this.$refs.tooltip.close())}}}},yo=(n(532),Object(j.a)(vo,lo,[],!1,null,"5f31d7c9",null).exports),go=n(383),bo=n(148);function wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _o(t,e,n){return e&&wo(t.prototype,e),n&&wo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Oo=_o((function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sessionId=e||"";var i=Object(bo.a)({baseURL:r,withCredentials:!1,headers:{Accept:"*/*",Authorization:"AFSSessionID ".concat(e),PageType:o}});return new go.ScreenshotUploadService({apiClient:i,entityGuid:n})})),So={"pasteImageFromClipboard.errors.countLimitExceeded":"Only one image can be added per reply","pasteImageFromClipboard.errors.sizeLimitExceeded":"Image size larger than {size} MB"},xo={snackbar:null,show:function(t){var e="";this.snackbar||(this.snackbar=window.__APP__.snackbar(document.querySelector(".app__container"))),So[t.i18nKey]&&(e=So[t.i18nKey].replace(/{[a-z]+}/i,(function(e){return t.i18nVars[e.slice(1,-1)]}))),this.snackbar.update({text:e,position:"top",autoClose:!0,zIndex:101,primary:!0,type:"error",iconSprite:"cross-circle",spriteFilled:!1}),this.snackbar.open()}},Co=window.__APP__,Eo=n(179),ko=n(180);function To(t){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Po(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Po=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==To(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function jo(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ao(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mo(t,e){return(Mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Do(t);if(e){var o=Do(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Io(this,n)}}function Io(t,e){if(e&&("object"===To(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Do(t){return(Do=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ro=function(){return nt.a.getLicenseDetails(nt.a.names.lightWeightTasks).isEnabled},No=u.n||!u.D;function Bo(t,e,n){return new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mo(t,e)}(f,t);var o,i,a,s,c,l=Lo(f);function f(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(t=l.call(this,{name:"CommentPanel",displayIcon:"comment-bubble-text",comment:"CommentPanel",description:"CommentPanel",dependencies:["comment.engine"],hint:Ro()?"Comments and Tasks":"Comments",order:1,owner:e,localType:"primary",view:{type:"modal",title:Ro()?"Comments and Tasks":"Comments",config:{type:"aside-right",hasCloseOnOutsideClick:!1,hasCustomHeader:!0}}})).engineCreator=n,t.viewTabs={SCHView:"",PCBDWFView:"",PCBView:"",PCBView3D:"",GerberView:"",LsmView:"",FBOM:""},t.isHidden=!1,t}return o=f,(i=[{key:"events",get:function(){return["CommentPanel:requestAddThread","CommentPanel:didViewChange","CommentPanel:didDocumentChanged","CommentPanel:didCommentEditCompleted","CommentPanel:filterChange","CommentPanel:visibilityChange","CommentPanel:initView","CommentPanel:placeAComment","CommentPanel:cancelAComment","CommentPanel:showPanelWhenNoComments","CommentPanel:setDocumentLocation","CommentPanel:setDocumentLayers"]}},{key:"hidden",get:function(){return this.isHidden}},{key:"setupDrawingEngine",value:(s=Po().mark((function t(e){var n=this;return Po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.bus.on("CommentsDrawingEngine:cancelEdit",(function(t){Object(r.n)(!1)})),e.bus.on("CommentsDrawingEngine:changeActiveState",(function(t){Object(r.n)(!1),t&&!n.hasView&&n.initView(),Object(r.l)(t),e.bus.emit("CommentsDrawingEngine:activate",{id:t,zoomToFit:!1})})),e.bus.on("CommentsDrawingEngine:didCreate",(function(t){var e=t.data;e?Object(r.k)(e):Object(r.i)(null)})),e.bus.on("CommentsDrawingEngine:documentClick",(function(t){Object(r.a)()})),o=void 0,o=document.createElement("div"),document.body.appendChild(o),new Co.library.Vue({store:r.b,data:{afsConfig:{assets:"assets/"}},render:function(t){return t(yo)}}).$mount(o),e.bus.on("CommentsDrawingEngine:showTooltip",(function(t){Object(r.v)(t)})),e.bus.on("CommentsDrawingEngine:hideTooltip",(function(t){Object(r.d)()})),e.bus.on("CommentsDrawingEngine:didAdd",(function(t){var e=t.data;e&&(e.on("PROGRESS_ACTIVE",(function(t){t.iconRect&&Object(r.j)(t)})),e.on("RESOLVE_ACTIVE",(function(t){t.iconRect&&Object(r.j)(t)})),e.on("UPDATE_ICON_POSITION",(function(t){setTimeout((function(){return Object(r.j)(t)}),0)})),e.on("UPDATE_DRAWINGS",(function(t){Object(r.r)(!!t.count)})),e.on("UPDATE_THREAD",(function(t){Object(r.t)(t)})))})),e.bus.on("CommentPanel:setDocumentLocation",(function(t){Object(r.q)({key:"location",value:t}),Object(r.q)({key:"flipped",value:(null==t?void 0:t.flipped)||!1})})),e.bus.on("CommentPanel:setDocumentLayers",(function(t){Object(r.q)({key:"layers",value:t})})),!e.engines.CommentsDrawingEngine){t.next=13;break}return t.next=13,e.engines.CommentsDrawingEngine.setupComment(this.engineCreator?this.engineCreator(r.b):null,{store:r.b,colorPickerData:Eo.a,lineThicknessData:ko.a,getActiveThreads:v});case 13:if(!No){t.next=18;break}return t.next=16,Object(r.g)();case 16:t.next=20;break;case 18:return t.next=20,Object(r.f)();case 20:if(u.a&&setTimeout((function(){e.bus.emit("CommentsDrawingEngine:activate",{id:u.a,zoomToFit:!0,callback:function(t){t&&(Object(r.l)(u.a),e.bus.emit("CommentPanel:enable"))}})}),0),No){t.next=24;break}return t.next=24,Object(r.h)();case 24:case"end":return t.stop()}var o}),t,this)})),c=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=s.apply(t,e);function i(t){jo(o,n,r,i,a,"next",t)}function a(t){jo(o,n,r,i,a,"throw",t)}i(void 0)}))},function(t){return c.apply(this,arguments)})},{key:"setup",value:function(t){var n=this;return u.s?(this.setPluginHidden(!0,t),Promise.resolve()):(Object(r.p)(),t.bus.on("CommentPanel:filterChange",(function(e){return t.bus.emit("CommentsDrawingEngine:filterChange")})),t.bus.on("CommentPanel:visibilityChange",(function(e){return t.bus.emit("CommentsDrawingEngine:visibilityChange",e)})),t.bus.on("CommentPanel:didCommentEditCompleted",(function(){return Object(r.i)(null)})),t.bus.on("CommentPanel:initView",(function(t){n.activate()})),t.bus.on("SCHView:documentChanged",(function(t){Object(r.o)(t),n.viewTabs.SCHView=t})),t.bus.on("PCBView:documentChanged",(function(t){Object(r.o)(t),n.viewTabs.PCBView=t,n.viewTabs.PCBView3D=t})),t.bus.on("PCBDWFView:documentChanged",(function(t){Object(r.o)(t.documentId)})),t.bus.on("FBOM:documentChanged",(function(t){Object(r.o)("BOM"),n.viewTabs.FBOM="BOM"})),t.bus.on("LSMView:documentChanged",(function(t){Object(r.o)("Lsm"),n.viewTabs.LsmView="Lsm"})),t.bus.on("ParentConnection:documentChange",(function(){Object(r.a)()})),t.bus.on("ParentConnection:variantsChange",(function(){Object(r.a)()})),t.bus.on("View:activate",(function(o){var i=o.name;Object(r.q)({key:"location",value:""}),Object(r.q)({key:"layers",value:""}),Object(r.q)({key:"flipped",value:!1}),n.activeView=i,e.toLowerCase().includes(i.toLowerCase())?n.isOpened&&n.setViewsPadding():t.bus.emit("CommentPanel:disable"),Object(r.m)(i);var a=n.viewTabs[i]||!1;a&&Object(r.o)(a)})),t.bus.on("Views:update",(function(t){Object(r.u)(t.map((function(t){return t.text})))})),t.bus.on("CommentPanel:disable",(function(){Object(r.a)()})),t.bus.on("CommentPanel:showPanelWhenNoComments",(function(){Object(r.c)()||t.bus.emit("CommentPanel:enable")})),t.bus.on("Modal:panelWidth",(function(t){var e=t.id,r=t.width;"CommentPanel"===e&&n.setViewsPadding(r)})),ft.a.on("View:setViewerDocuments",(function(t){t.data&&Object(r.s)(t.data)})),ft.a.on("CommentPanel:updateAllThreads",(function(){No?Object(r.g)():Object(r.f)()})),ft.a.on("CommentPanel:setActiveThread",(function(e){e.data&&t.bus.emit("CommentsDrawingEngine:activate",{id:e.data,zoomToFit:!0,callback:function(n){n&&(Object(r.l)(e.data),t.bus.emit("CommentPanel:enable"))}})})),ft.a.on("CommentPanel:sendActiveThread"),ft.a.on("CommentPanel:triggerUpdateAllThreads"),Object(r.e)(),function(t){var e=!1,n=!1,r=function(){var r=t.views.LSMView;r&&(e&&n?r.lockPlugin("CommentPanel"):r.lockPlugin(""))};t.bus.on("CommentPanel:activate",(function(o){e=!0,r(),n&&t.bus.emit("Views:updatePadding",{top:32,right:240})})),t.bus.on("CommentPanel:deactivate",(function(o){e=!1,r(),n&&t.bus.emit("Views:updatePadding",{top:0,right:0})})),t.bus.on("CommentPanel:disable",(function(o){e=!1,r(),n&&t.bus.emit("Views:updatePadding",{top:0,right:0})})),t.bus.on("View:activate",(function(o){"LSMView"===o.name&&(n=!0,r(),e&&t.bus.emit("Views:updatePadding",{top:32,right:240}))})),t.bus.on("View:deactivate",(function(t){"LSMView"===t.name&&(n=!1,r())}))}(t),this.setupDrawingEngine(t),Promise.resolve())}},{key:"initView",value:function(){var t;this.hasView=!0,this.view=(t=this.metaInfo.name,new Co.library.Vue({store:r.b,provide:{imageUploadService:new Oo(u.D,u.y,u.e,u.c),notificationService:xo},data:{afsConfig:window.__APP__.afsConfig},render:function(t){return t(uo)}}).$mount("#".concat(t)))}},{key:"activate",value:function(){this.hasView||this.initView(),this.isOpened=!0,this.setViewsPadding()}},{key:"setPluginHidden",value:function(t,e){this.isHidden=t,e.bus.emit("CommentPanel:updateInterface",{hidden:t})}},{key:"getOffsetWidth",value:function(t){var e=document.querySelector('[data-modal-id="'.concat(t,'"]'));return(null==e?void 0:e.offsetWidth)||0}},{key:"setViewsPadding",value:function(t){if("FBOM"===this.activeView){var e=this.isOpened&&!this.isHidden?t||this.getOffsetWidth(this.metaInfo.name)||this.getOffsetWidth("DetailsPanel"):0;window.__CORE__.bus.emit("Views:updatePadding",{right:e})}}},{key:"deactivate",value:function(){this.isOpened=!1,this.setViewsPadding()}}])&&Ao(o.prototype,i),a&&Ao(o,a),Object.defineProperty(o,"prototype",{writable:!1}),f}(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return he}));var r,o,i=0,a=1,s=2,c=3,u={10:"all",12:"demand"},l=10,f=12,d={Error:0,Progress:1,Complete:2},h="Pdf_Sch",p="Step",m="Bom",v="AssemblyDoc",y="Gerber",g="Ansys",b=n(7),w=n.n(b),_=n(87),O=n.n(_),S=n(14),x=window.__CORE__,C=function(t){var e=[],n=ct();return n&&e.push(E(n)),e.push(T(t)),(null==n?void 0:n.releases)&&e.push(A(n.releases,n.baseMfgUrl)),e},E=function(t){return{id:w()(),title:{text:"Project Source Files"},isSource:!0,items:[j({name:null==t?void 0:t.projectName,icon:"project-pcb-16",status:c,isSource:!0,url:null==t?void 0:t.exportUrl,analyticsEvent:"Design",hint:k(t),fileName:"".concat(null==t?void 0:t.projectName,".zip")})]}},k=function(t){var e="";(null!=t&&t.lastModified||null!=t&&t.modifiedDisplayName)&&(e="last modified "+[(null==t?void 0:t.modifiedDisplayName)&&"by ".concat(t.modifiedDisplayName)||"",(null==t?void 0:t.lastModified)&&O()(null==t?void 0:t.lastModified,{timeZoneOffset:0})||""].filter(Boolean).join(", "));return[null==t?void 0:t.projectName,e].filter(Boolean).join(" ")},T=function(t){var e,n=(null==t||null===(e=t.currentVariant)||void 0===e?void 0:e.name)||"No variants";return{id:w()(),title:{text:"Derived Files"},isSource:!1,items:P(t,n)}},P=function(t,e){var n,r,o,i,a,s,c,u,l,f,b,w,_,O,C,E,k,T,P,A,M,L,I,D,R,N,B,F,U,$,G,V,z=[],H=!(null===(n=x.response)||void 0===n||null===(r=n.metadata)||void 0===r||!r.pcbDocument),W=!(null===(o=x.response)||void 0===o||null===(i=o.metadata)||void 0===i||null===(a=i.schDocuments)||void 0===a||!a.length),Y=!(null===(s=x.response)||void 0===s||null===(c=s.metadata)||void 0===c||!c.draftsman),q=null===(u=S.a.getLicenseDetails(S.a.names.killSwitch_Simulation_Download_Edb))||void 0===u?void 0:u.isEnabled;return H&&z.push(j({name:"Gerber",icon:"gerber-16",status:null==d?void 0:d[null==t||null===(l=t.files)||void 0===l||null===(f=l[y])||void 0===f?void 0:f.status],type:y,url:(null==t||null===(b=t.files)||void 0===b||null===(w=b[y])||void 0===w?void 0:w.url)||null,analyticsEvent:"Gerber",hint:"Gerber",noVariant:!0,fileName:"Gerber.zip"})),H&&q&&z.push(j({name:"Ansys EDB",icon:"ansys-edb-16",status:null==d?void 0:d[null==t||null===(_=t.files)||void 0===_||null===(O=_[g])||void 0===O?void 0:O.status],type:g,url:(null==t||null===(C=t.files)||void 0===C||null===(E=C[g])||void 0===E?void 0:E.url)||null,analyticsEvent:"EDB",hint:"Ansys EDB",noVariant:!0,fileName:"AnsysEDB"})),H&&z.push(j({name:"Assembly Docs",shortName:"Assembly",icon:Y?"draftsman-document-template":"assembly-16",status:null==d?void 0:d[null==t||null===(k=t.files)||void 0===k||null===(T=k[v])||void 0===T?void 0:T.status],type:v,url:(null==t||null===(P=t.files)||void 0===P||null===(A=P[v])||void 0===A?void 0:A.url)||null,analyticsEvent:"Assembly",hint:Y?"Full documentation generated from project Draftsman document":"Assembly Drawings generated only. Full documentation requires a Draftsman document.",noVariant:Y,fileName:Y?"Draftsman.pdf":"Assembly Drawings_".concat(e,".pdf")})),W&&z.push(j({name:"PDF Schematic",shortName:"PDF",icon:"schematic-16",status:null==d?void 0:d[null==t||null===(M=t.files)||void 0===M||null===(L=M[h])||void 0===L?void 0:L.status],type:h,url:(null==t||null===(I=t.files)||void 0===I||null===(D=I[h])||void 0===D?void 0:D.url)||null,analyticsEvent:"SCH.PDF",hint:"Download PDF Schematic_".concat(e),fileName:"Schematic PDF_".concat(e,".pdf")})),H&&z.push(j({name:"STEP",icon:"mcad-16",status:null==d?void 0:d[null==t||null===(R=t.files)||void 0===R||null===(N=R[p])||void 0===N?void 0:N.status],type:p,url:(null==t||null===(B=t.files)||void 0===B||null===(F=B[p])||void 0===F?void 0:F.url)||null,hint:"Download STEP_".concat(e),analyticsEvent:"STEP",fileName:"STEP_".concat(e,".step")})),z.push(j({name:"BOM",icon:"bom-16",status:null==d?void 0:d[null==t||null===(U=t.files)||void 0===U||null===($=U[m])||void 0===$?void 0:$.status],type:m,url:(null==t||null===(G=t.files)||void 0===G||null===(V=G[m])||void 0===V?void 0:V.url)||null,hint:"Download BOM_".concat(e),analyticsEvent:"BOM",fileName:"BOM_".concat(e,".csv")})),z},j=function(t){var e=t.name,n=t.icon,r=t.iconFilled,o=void 0===r||r,i=t.status,a=void 0===i?0:i,s=t.type,c=t.url,u=t.isSource,l=void 0!==u&&u,f=t.hint,d=void 0===f?"":f,h=t.analyticsEvent,p=t.link,m=void 0===p?null:p,v=t.fileName,y=void 0===v?"":v,g=t.noVariant,b=void 0!==g&&g,_=t.shortName,O=void 0===_?"":_;return{id:w()(),name:e,icon:n,iconFilled:o,status:a,type:s,url:c,isSource:l,hint:d,analyticsEvent:h,link:m,fileName:y,noVariant:b,shortName:O}},A=function(t,e){return{id:w()(),title:{isPrimary:!0,text:"Releases"},isSource:!1,items:M(t,e),hasLimitedItems:!0}},M=function(t,e){var n=[];for(var r in t){var o=L(t[r]);n.push({id:w()(),name:r,link:e+o.srcGUID,hint:o.hintText,description:O()(o.date,{timeZoneOffset:0}),color:o.assemblyColor})}return n},L=function(t){return t.reduce((function(t,e){var n,r,o;return t.hintText+="".concat(t.hintText?", ":"").concat(e.pcbAssemblyHRID||e.srcHRID),t.date||(t.date=e.date),t.assemblyColor||(t.assemblyColor=(null===(n=e.releaseItems.find((function(t){return"Assembly"===t.type})))||void 0===n?void 0:n.color)||(null===(r=e.releaseItems.find((function(t){return"Fabrication"===t.type})))||void 0===r?void 0:r.color)||(null===(o=e.releaseItems.find((function(t){return"Source"===t.type})))||void 0===o?void 0:o.color)),t.srcGUID||(t.srcGUID=e.srcGUID),t}),{hintText:"",date:null,assemblyColor:"",srcGUID:""})},I=function(t){return t.reduce((function(t,e){return t[e.kind]||(t[e.kind]=e),e.statusId=d[e.status],t}),{})},D=window.__CORE__,R=function(){var t,e,n,r,o,i,a,s={noVariation:[],variation:[]},c=!(null===(t=D.response)||void 0===t||null===(e=t.metadata)||void 0===e||!e.pcbDocument),u=!(null===(n=D.response)||void 0===n||null===(r=n.metadata)||void 0===r||null===(o=r.schDocuments)||void 0===o||!o.length),l=!(null===(i=D.response)||void 0===i||null===(a=i.metadata)||void 0===a||!a.draftsman);return u&&s.variation.push(h),c&&(l?s.noVariation.push(v):s.variation.push(v))&&s.variation.push(p)&&s.noVariation.push(y)&&s.noVariation.push(g),s.variation.push(m),s},N=function(t,e){var n=R();return n.noVariation.length&&n.noVariation.includes(t)?"No_Variant_Unique_Id":e},B=n(10),F=window.__CORE__,U=Object(B.c)("data-subject-guid","")||(null===(r=F.response)||void 0===r||null===(o=r.designId)||void 0===o?void 0:o.toUpperCase())||"",$=Object(B.c)("data-session-id",""),G=Object(B.c)("data-parent-url",""),V=Object(B.c)("data-local-user-id",""),z=n(148),H=function(){return Object(z.a)({baseURL:"https://viewer.altium.com/api/outputter/",type:"json",withCredentials:!1,headers:W()})};function W(){var t={"X-Auth":"".concat($)};return G||(t.projectid=U),t}var Y=function(t,e){return H().get("list/".concat(U),{params:{type:t,variant:e,urlScheme:window.currentHttpScheme}})};function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */X=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==q(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){J(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var tt={requestExportData:function(t,e){return(n=X().mark((function n(){var r,o,i,a,s,c;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.data,o=e.forceUpdate,i=R(),r.files={},a=[],i.noVariation.length&&(s=i.noVariation.join(","),a.push(Y(s,"No_Variant_Unique_Id"))),c=i.variation.join(","),a.push(Y(c,t.state.currentVariantId)),Promise.all(a).then((function(e){e.forEach((function(t){r.files=K(K({},r.files),I(t.data))}));var n=C(r);if(!t.state.sections.length||o)t.commit("setExportData",n);else{var i=t.state.sections.map((function(t){return K(K({},t),{},{items:t.items.map((function(t){var e,n,o,i,a,s;return K(K({},t),{},{status:t.type&&(null===(e=r.files)||void 0===e||null===(n=e[t.type])||void 0===n?void 0:n.kind)===t.type&&(null===(o=r.files)||void 0===o||null===(i=o[t.type])||void 0===i?void 0:i.statusId)!==t.status?r.files[t.type].statusId:t.status,url:(null===(a=r.files)||void 0===a||null===(s=a[t.type])||void 0===s?void 0:s.url)||t.url})}))})}));t.commit("setExportData",i)}t.commit("setStatusData",J({},t.state.currentVariantId,n.reduce((function(t,e){return e.items.forEach((function(e){return t.push(K(K({},e),{},{autoDownload:!o}))})),t}),[])))})).catch((function(t){return console.error(t)}));case 8:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){Q(i,r,o,a,s,"next",t)}function s(t){Q(i,r,o,a,s,"throw",t)}a(void 0)}))})();var n},requestDownload:function(t,e){var n,r,o,i=e.data,a=e.id,s=N(i.type,t.state.currentVariantId);try{!function(t,e,n){H().get("export/".concat(U),{params:{url:n.exportUrl,type:t,variant:e,email:n.userEmail,userId:V,projectHrid:n.projectHrid,projectName:n.projectName,urlScheme:window.currentHttpScheme}})}(i.type,s,t.state.data)}catch(t){console.error(t)}!(null===(n=t.state)||void 0===n||null===(r=n.statusData)||void 0===r||null===(o=r[s])||void 0===o?void 0:o.some((function(t){return 1===t.status})))&&t.commit("setFirstProcessing",i);var c=t.state.sections.map((function(t){return K(K({},t),{},{items:t.id===a?t.items.map((function(t){return K(K({},t),{},{status:t.id===i.id?1:t.status})})):t.items})}));t.commit("setExportData",c),t.commit("setStatusData",J({},t.state.currentVariantId,c.reduce((function(t,e){return e.items.forEach((function(e){return t.push(e)})),t}),[])))}};function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ot=new(0,window.__APP__.library.Vuex.Store)({state:{sections:[],currentVariantId:"",data:{},statusData:{},firstProcessing:{},footerLinks:[{id:"vote",text:"Vote for New Format",icon:"checkmark-square-16",link:"https://surveys.hotjar.com/92644e3f-4265-436e-81e6-652049871a8b"},{id:"help",text:"How It Works",icon:"question-16",link:"https://www.altium.com/documentation/altium-designer/altium-365-workspace-web-viewer#!downloading"}],enabledFooterLinks:[],disabledKind:null},mutations:{setExportData:function(t,e){t.sections=e},setVariantId:function(t,e){t.currentVariantId=e},setData:function(t,e){t.data=e},setStatusData:function(t,e){t.statusData=nt(nt({},t.statusData),e)},setFirstProcessing:function(t,e){t.firstProcessing=e},setEnabledFooterLinks:function(t,e){t.enabledFooterLinks=e},setDisabledKind:function(t,e){t.disabledKind=e}},actions:tt,getters:{getFooterLinks:function(t){return t.footerLinks.filter((function(e){return t.enabledFooterLinks.includes(e.id)}))}}}),it=function(t,e){return ot.dispatch("requestExportData",{data:t,forceUpdate:e})},at=function(t){return ot.commit("setVariantId",t)},st=function(t){return ot.commit("setData",t)},ct=function(){return ot.state.data},ut=function(t){return ot.commit("setDisabledKind",t)},lt=ot,ft=function(){var t=this,e=t._self._c;return e("div",{ref:"export",staticClass:"app-export"},[e("BaseHeader"),t._v(" "),t.sections.length&&t.data.canDownload?e("div",{staticClass:"app-export__content"},[e("div",{staticClass:"app-export__sections"},t._l(t.visibleSections,(function(n){return e("ExportSection",{key:n.id,attrs:{section:n},on:{"click-btn":t.onClickBtn}})})),1),t._v(" "),t.hasFooter?e("BaseFooter"):t._e()],1):t._e(),t._v(" "),t.data.canDownload?t._e():e("div",{staticClass:"forbidden"},[e("div",{staticClass:"forbidden__icon"},[e("AfsIcon",{attrs:{size:"lg",name:"download-v2-16"}})],1),t._v(" "),e("div",{staticClass:"forbidden__text"},[t._v("\n      You don't have permissions to download project files\n    ")])]),t._v(" "),e("AfsSnackbar",{ref:"exportSnackbar",staticClass:"app-export__snackbar",attrs:{autoclose:"","autoclose-delay":"5000"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AfsIcon",{attrs:{name:t.snackbarIcon,filled:""}})]},proxy:!0},{key:"default",fn:function(){return[t._v("\n      "+t._s(t.snackbarText)+"\n    ")]},proxy:!0}])})],1)};ft._withStripped=!0;var dt=n(115),ht=n(4),pt=n(119),mt=n.n(pt),vt=n(219),yt=function(){return(0,this._self._c)("AfsSubHeader",{staticClass:"app-export-header",attrs:{center:!1}},[this._v("\n  Download\n")])};yt._withStripped=!0;var gt={name:"AppBaseHeader",components:{AfsSubHeader:n(69).a}},bt=(n(534),n(0)),wt=Object(bt.a)(gt,yt,[],!1,null,null,null).exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-export-section",attrs:{id:"app-export-section"}},[e("div",{staticClass:"app-export-section__title-container"},[t.section.title.text?e("AfsText",{staticClass:"app-export-section__title",attrs:{tag:"span",ellipsis:"",type:"title"}},[t._v("\n      "+t._s(t.section.title.text)+"\n    ")]):t._e()],1),t._v(" "),t.section.items.length?e("div",{staticClass:"app-export-section__item-list"},[t._l(t.computedItems,(function(n){return e("DownloadItem",{key:n.id,attrs:{item:n,"section-id":t.section.id,"disabled-kind":t.disabledKind,"has-loading-label":t.hasProcessingLabel(n)},on:{"click-btn":t.onClickBtn}})})),t._v(" "),t.hasShowMore?e("div",{staticClass:"app-export-section__show-more"},[e("AfsLink",{on:{click:t.toggleShowMore}},[t._v("\n        "+t._s(t.showMore?"Show More":"Show Less")+"\n      ")])],1):t._e()],2):t._e()])};_t._withStripped=!0;var Ot=n(5),St=n(26),xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-export-item-container"},[e("button",{staticClass:"app-export-item",attrs:{disabled:t.isDisabled},on:{click:t.onClickBtn}},[t.item.icon?e("AfsIcon",{staticClass:"app-export-item__icon",attrs:{name:t.item.icon,filled:t.item.iconFilled}}):t._e(),t._v(" "),t.item.color?e("span",{staticClass:"app-export-item__color",style:{background:t.item.color}}):t._e(),t._v(" "),t.item.name&&!t.item.link?e("AfsText",{directives:[{name:"trim",rawName:"v-trim",value:!t.item.hint&&{id:t.hintId,hint:t.item.name,delay:50},expression:"!item.hint && { id: hintId, hint: item.name, delay: 50 }"},{name:"hint",rawName:"v-hint",value:t.item.hint&&{id:t.hintId,delay:100,onOpen:t.onHintOpen(t.item),onClose:t.onHintClose()},expression:"\n        item.hint && {\n          id: hintId,\n          delay: 100,\n          onOpen: onHintOpen(item),\n          onClose: onHintClose()\n        }\n      "}],staticClass:"app-export-item__name",attrs:{tag:"span"}},[t._v(t._s(t.item.name))]):t._e(),t._v(" "),t.item.link?e("AfsLink",{directives:[{name:"hint",rawName:"v-hint",value:t.item.hint&&{id:t.hintId,delay:100,onOpen:t.onHintOpen(t.item),onClose:t.onHintClose()},expression:"\n        item.hint && {\n          id: hintId,\n          delay: 100,\n          onOpen: onHintOpen(item),\n          onClose: onHintClose()\n        }\n      "}],staticClass:"app-export-item__link",attrs:{href:t.item.link,target:"_blank"}},[t._v(t._s(t.item.name))]):t._e(),t._v(" "),t.item.description?e("AfsText",{staticClass:"app-export-item__description",attrs:{tag:"span"}},[t._v(t._s(t.item.description))]):t._e(),t._v(" "),"number"==typeof t.item.status&&1!==t.item.status?e("button",{staticClass:"app-export-item__btn",class:{"is-visible":t.isChecked},attrs:{disabled:t.isDisabled},on:{click:function(e){return e.stopPropagation(),t.onClickBtn()}}},[e("AfsIcon",{attrs:{name:t.statusIcon}})],1):t._e(),t._v(" "),1===t.item.status?e("AfsLoader",{directives:[{name:"hint",rawName:"v-hint",value:{id:t.hintId,delay:100,onOpen:t.onHintOpen(),onClose:t.onHintClose()},expression:"{\n        id: hintId,\n        delay: 100,\n        onOpen: onHintOpen(),\n        onClose: onHintClose()\n      }"}],staticClass:"app-export-item__loader"}):t._e()],1),t._v(" "),t.hasLoadingLabel?e("div",{staticClass:"app-export-item__desc"},[t._v("\n    "+t._s(t.loadingText)+"\n  ")]):t._e(),t._v(" "),e("AfsContextMenu",t._b({ref:t.menuId},"AfsContextMenu",t.hintConfig,!1),[t.hintText?e("div",{staticClass:"app-export-item__hint"},[t._v("\n      "+t._s(t.hintText)+"\n    ")]):t._e()])],1)};xt._withStripped=!0;var Ct=n(8),Et=n(54),kt=n(16),Tt=n.n(kt),Pt=n(84),jt=n.n(Pt),At={name:"DownloadItem",components:{AfsText:Ot.a,AfsIcon:ht.a,AfsLink:St.a,AfsContextMenu:Ct.a,AfsLoader:Et.a},directives:{hint:Tt.a,trim:jt.a},props:{item:{type:Object,default:function(){return{}}},hasLoadingLabel:{type:Boolean,default:!0},sectionId:{type:String,default:""},disabledKind:{type:String,default:""}},data:function(){return{hintId:w()(),hintText:null,menuId:w()(),isChecked:!1,isLongWait:!1}},computed:{hintConfig:function(){return{type:"hint",id:this.hintId,modifiers:{y:"bottom",x:"start"},offset:8,parentContainerId:"app-export-section",viewboxOffset:0}},statusIcon:function(){return this.isChecked?"checkmark-circle":"download-v2-16"},status:function(){return this.item.status},loadingText:function(){var t=this.item.shortName||this.item.name;return this.isLongWait&&this.hasLoadingLabel?"You can wait or close the panel. We will email you the ".concat(t," file download link..."):"The download will start after the ".concat(t," file generation. It will take a few moments...")},isDisabled:function(){var t;return this.disabledKind&&(this.isRequiredDisabled||this.isAllDisabled)&&!(null!==(t=this.item)&&void 0!==t&&t.link)},isRequiredDisabled:function(){return this.disabledKind===(null==u?void 0:u[f])&&this.status!==c},isAllDisabled:function(){return this.disabledKind===(null==u?void 0:u[l])&&this.status!==c}},watch:{status:function(t,e){var n=this;e===a&&t===s&&this.setIsChecked(),e===i&&t===a&&setTimeout((function(){n.isLongWait=!0}),4e3)}},mounted:function(){this.status===a&&(this.isLongWait=!0)},methods:{onHintOpen:function(t){var e=this;return function(){e.hintText=e.isRequiredDisabled&&e.status!==c&&!t.link?"New visualization is generating now...":e.isAllDisabled&&e.status!==c&&!t.link?"New visualization is available. Please, refresh page and try again":(null==t?void 0:t.hint)||e.loadingText}},onHintClose:function(){var t=this;return function(){t.hintText=null}},onClickBtn:function(){this.$emit("click-btn",this.item,this.sectionId),this.item.status!==s&&this.item.status!==c||this.setIsChecked(),this.$refs[this.menuId].close()},setIsChecked:function(){var t=this;this.isChecked=!0,setTimeout((function(){t.isChecked=!1}),4e3)}}},Mt=(n(535),Object(bt.a)(At,xt,[],!1,null,null,null).exports);function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(n),!0).forEach((function(e){Dt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rt=window.__APP__.library.Vuex.mapState,Nt={name:"AppExportSection",components:{AfsText:Ot.a,AfsLink:St.a,DownloadItem:Mt},props:{section:{type:Object,default:function(){}}},data:function(){return{showMore:!0,maxItems:4}},computed:It(It({},Rt(["firstProcessing","disabledKind"])),{},{showEmailNotification:function(){return vt.a.showEmailNotification},computedItems:function(){return this.section.hasLimitedItems&&this.showMore&&this.section.items.length>this.maxItems?this.section.items.slice(0,this.maxItems):this.section.items},hasShowMore:function(){return this.section.hasLimitedItems&&this.section.items.length>this.maxItems}}),methods:{toggleShowMore:function(){this.showMore=!this.showMore},hasProcessingLabel:function(t){return 1===t.status&&this.showEmailNotification&&this.firstProcessing.name===t.name},onClickBtn:function(t,e){this.$emit("click-btn",t,e)}}},Bt=(n(536),Object(bt.a)(Nt,_t,[],!1,null,null,null).exports),Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-export-footer"},t._l(t.getFooterLinks,(function(n){return e("AfsLink",{key:n.id,staticClass:"app-export-footer__item",attrs:{target:"_blank",href:n.link}},[e("AfsIcon",{staticClass:"app-export-footer__item-icon",attrs:{name:n.icon}}),t._v(" "),e("AfsText",{staticClass:"app-export-footer__item-text"},[t._v(" "+t._s(n.text)+" ")]),t._v(" "),e("AfsIcon",{staticClass:"app-export-footer__item-icon_right",attrs:{name:"external-link-rounded-16"}})],1)})),1)};function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ft._withStripped=!0;var Gt=window.__APP__.library.Vuex.mapGetters,Vt={name:"ExportFooter",components:{AfsIcon:ht.a,AfsText:Ot.a,AfsLink:St.a},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach((function(e){$t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Gt(["getFooterLinks"]))},zt=(n(537),Object(bt.a)(Vt,Ft,[],!1,null,null,null).exports);function Ht(t){return function(t){if(Array.isArray(t))return Wt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){Xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zt=window.__CORE__,Kt=window.__APP__,Jt=Kt.analytics,Qt=Kt.library.Vuex,te=Qt.mapState,ee=Qt.mapActions,ne={name:"Export",components:{BaseHeader:wt,BaseFooter:zt,ExportSection:Bt,AfsSnackbar:dt.a,AfsIcon:ht.a},data:function(){return{snackbarText:null,snackbarIcon:"warning",hasTimeout:!1}},computed:qt(qt({},te(["sections","statusData","currentVariantId","data"])),{},{visibleSections:function(){var t=this;return this.sections.filter((function(e){return!t.data.hideDownloadSource||!e.isSource}))},outputterItems:function(){return this.visibleSections.reduce((function(t,e){return[].concat(Ht(t),Ht(e.items))}),[])},hasFooter:function(){return vt.a.showVote}}),watch:{outputterItems:function(t){var e=this;t.some((function(t){return t.status===a}))&&!this.hasTimeout&&(this.hasTimeout=!0,setTimeout((function(){Zt.bus.emit("Export:updateOutputters"),e.hasTimeout=!1}),7e3))},statusData:function(t,e){this.checkStatuses(null==e?void 0:e[this.currentVariantId],null==t?void 0:t[this.currentVariantId])}},methods:qt(qt({},ee(["requestDownload"])),{},{onClickBtn:function(t,e){var n=[];Zt.bus.emit("Export:downloadItemRequest",{handlers:n,item:t}),n.length>0?n.forEach((function(e){return e(t)})):(t.status===i&&this.requestDownload({data:t,id:e}),t.status!==s&&t.status!==c||this.downloadItem(t),t.analyticsEvent&&Jt.dispatchPanelsEvent("Download",{action:t.analyticsEvent}))},downloadItem:function(t){var e,n,r=this;if(t.isSource)Zt.bus.emit("Export:downloadSource");else{var o=N(t.type,this.currentVariantId);(e=t.type,n=o,H().get("directDownloadUrl/".concat(U),{params:{type:e,variant:n,urlScheme:window.currentHttpScheme}})).then((function(e){var n;null!==(n=e.data)&&void 0!==n&&n.url?r.downloadItemViaDirectUrl(e.data.url,t.fileName):r.setError()}))}},downloadItemViaDirectUrl:function(t,e){var n=this;fetch(t).then((function(t){if(!t.ok){var r=403===t.status?"Download link has expired. Please, try again later":"Something went wrong during export";return n.setError(r)}t.blob().then((function(t){mt()(t,e)})).catch((function(){return n.setError()}))})).catch((function(){return n.setError()}))},checkStatuses:function(t,e){var n=this;t&&e&&e.forEach((function(e,r){e.status===i&&(null==t?void 0:t[r].status)===a?n.setError():e.status===s&&(null==t?void 0:t[r].status)===a&&e.autoDownload&&n.downloadItem(e)}))},setError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong during export";this.snackbarText=t,this.$refs.exportSnackbar.open()}})},re=(n(538),Object(bt.a)(ne,ft,[],!1,null,null,null).exports),oe=window.__APP__;function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e){return(se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fe(t);if(e){var o=fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(t,e){if(e&&("object"===ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return le(t)}function le(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var de=window.__CORE__;function he(t){return new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}(i,t);var e,n,r,o=ce(i);function i(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,{name:"Export",displayIcon:"download-v2-16",comment:"Export plugin with on demand requests",description:"Download",order:4,hint:"Downloads",view:{type:"modal",config:{type:"aside-right",hasCustomHeader:!0}}}),e=le(t),r=function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];at(null===(e=t.variantData.currentVariant)||void 0===e?void 0:e.uniqueId),it(t.variantData,n)},(n="updateOutputters")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,de.bus.on("Variants:changed",(function(e){null==e||!e.projectVariant||null!=e&&e.forceUpdate||(t.variantData.currentVariant=e.projectVariant,t.updateOutputters(!0))})),de.bus.on("Export:updateOutputters",t.updateOutputters),de.bus.on("Export:setParentExportData",st),de.bus.on("Export:setEnabled",(function(e){var n=t.shouldBeVisible(e);t.setPluginHidden(!n)})),de.bus.on("ParentConnection:projectStatusChange",(function(t){return ut(u[t]||null)})),t.isHidden=!0,t.variantData={},t}return e=i,(n=[{key:"hidden",get:function(){return this.isHidden}},{key:"events",get:function(){return["Export:updateOutputters","Export:requestParentExportData","Export:setParentExportData","Export:downloadItemRequest","Export:setParentExportData","Export:downloadSource","Export:setEnabled"]}},{key:"setup",value:function(){var t=this.isEnabledByAttribute();this.setPluginHidden(!this.shouldBeVisible(t));var e,n=["help"];return"PartialComplete"===de.response.sourceStatus&&ut(u[f]),de.bus.on("storageResolveComplete",(function(){return ut(null)})),e=n,ot.commit("setEnabledFooterLinks",e),Promise.resolve()}},{key:"activate",value:function(){var t,e;this.inited||this.initView(),de.bus.emit("Variants:getCurrent",this.variantData),de.bus.emit("Export:requestParentExportData"),this.updateOutputters(!0),(null===(t=de.views)||void 0===t||null===(e=t.LSMView)||void 0===e?void 0:e.active)&&de.bus.emit("Views:updatePadding",{top:32,right:240})}},{key:"deactivate",value:function(){var t,e;(null===(t=de.views)||void 0===t||null===(e=t.LSMView)||void 0===e?void 0:e.active)&&de.bus.emit("Views:updatePadding",{top:0,right:0})}},{key:"initView",value:function(){var t;this.inited=!0,this.view=(t=this.metaInfo.name,new oe.library.Vue({store:lt,data:{afsConfig:window.__APP__.afsConfig},render:function(t){return t(re)}}).$mount("#".concat(t)))}},{key:"shouldBeVisible",value:function(t){return t&&$}},{key:"setPluginHidden",value:function(t){this.isHidden=t,de.bus.emit("Export:updateInterface",{hidden:t})}},{key:"isEnabledByAttribute",value:function(){var t=Object(B.c)("data-export-enabled",!0);return t&&"false"!==t}}])&&ae(e.prototype,n),r&&ae(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(t))}},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return Et}));var c=window.__APP__.library.Vuex.Store,u={name:function(t,e,n){var r=t.name.toLowerCase().localeCompare(e.name.toLowerCase());return n?r:-r},price:function(t,e,n){return n?null===t.price?-1:t.price-e.price:null===e.price?-1:e.price-t.price},quantity:function(t,e,n){return n?t.quantity-e.quantity:e.quantity-t.quantity}},l=function(t){return Math.round(100*+t)/100},f=[{id:"number",text:"№",width:44},{id:"name",text:"Name",width:"18%",sorted:!0},{id:"price",text:"Price",width:60,sorted:!0,align:"right"},{id:"description",text:"Description",width:"62%"},{id:"designator",text:"Designator",width:"20%"},{id:"quantity",text:"Quantity",width:82,sorted:!0,align:"right"}],d=new c({state:{search:"",sortBy:null,items:[],columns:f},getters:{search:function(t){return t.search.trim()},sortedItems:function(t){return t.items.sort((function(e,n){var r;return u[null===(r=t.sortBy)||void 0===r?void 0:r.col]?u[t.sortBy.col](e,n,t.sortBy.state):0}))},body:function(t,e){return e.sortedItems.reduce((function(t,n,r){return[n.name,n.description].concat(a(n.designator)).some((function(t){var n;return!(null!==(n=e.search)&&void 0!==n&&n.length)&&!(null!=t&&t.length)||(null==t?void 0:t.length)&&t.toLowerCase().includes(e.search.toLowerCase())}))?(t.rows.push(n),t.totalNames++,t.totalQuantity+=+n.quantity,t.totalPrice+=n.price*+n.quantity,t):t}),{rows:[],totalNames:0,totalQuantity:0,totalPrice:0})},items:function(t,e){var n;return null==e||null===(n=e.body)||void 0===n?void 0:n.rows},totalNames:function(t,e){var n;return null==e||null===(n=e.body)||void 0===n?void 0:n.totalNames},totalPrice:function(t,e){var n;return l(null==e||null===(n=e.body)||void 0===n?void 0:n.totalPrice)},totalQuantity:function(t,e){var n;return Math.ceil(null==e||null===(n=e.body)||void 0===n?void 0:n.totalQuantity)}},mutations:{setItems:function(t,e){t.items=Array.isArray(e)?e.map((function(t,e){return o(o({},t),{},{number:e+1,price:"number"==typeof t.price?l(t.price):null})})):[],t.columns=t.items.some((function(t){return"number"==typeof t.price}))?f:f.filter((function(t){return"price"!==t.id}))},setSort:function(t,e){var n,r;t.sortBy={col:e.id,state:e.id===(null===(n=t.sortBy)||void 0===n?void 0:n.col)&&!(null!==(r=t.sortBy)&&void 0!==r&&r.state)}},setSearch:function(t,e){t.search=e}}}),h=d,p=function(){var t=this._self._c;return t("div",{staticClass:"bom"},[this.items.length?[t("BaseSearch",{staticClass:"bom__search"}),this._v(" "),t("BaseContent",{staticClass:"bom__content"})]:t("div",{staticClass:"bom__empty"},[this._v("BOM data is empty")])],2)};p._withStripped=!0;var m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("AfsSearch",{ref:"input",attrs:{"has-remove-btn":""},on:{input:t.onInput,keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)};m._withStripped=!0;var v=n(75);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=window.__APP__,_=w.analytics,O=w.library.Vuex,S=O.mapState,x=O.mapMutations,C=w.utils.debounce,E=window.__CORE__,k={name:"BaseSearch",components:{AfsSearch:v.a},computed:g(g({},S(["search"])),{},{value:{get:function(){return this.search},set:function(t){var e=this;C("search",(function(){return e.setSearch(t)}),150)}}}),created:function(){E.bus.on("BOM:focusSearch",this.onFocus)},destroyed:function(){E.bus.off("BOM:focusSearch",this.onFocus)},methods:g(g({},x(["setSearch"])),{},{onFocus:function(){var t=this.$refs.input;t&&t.focus()},onInput:function(){_.dispatchViewNavigationEvent("Bom",{event:"input",action:"Search"})}})},T=(n(507),n(0)),P=Object(T.a)(k,m,[],!1,null,"6c57978a",null).exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[t.items.length?e("LibTable",{ref:"table",staticClass:"content__table",attrs:{columns:t.columns,items:t.computedItems,"sort-by":t.sortBy,"has-hover":""},on:{sort:t.onSort,"body:click":t.onTableBodyClick},scopedSlots:t._u([{key:"body__number",fn:function(n){var r=n.data;return[e("div",{staticClass:"content__number"},[t._v(t._s(r.number))])]}},{key:"body__name",fn:function(n){var r=n.data;return[r.url?e("AfsLink",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.search,value:r.name},expression:"{\n          query: search,\n          value: data.name\n        }"}],staticClass:"content__ellipsis prevent-blur",attrs:{href:r.url,target:"_blank"},nativeOn:{click:function(e){return t.onNameClick.apply(null,arguments)}}}):e("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.search,value:r.name},expression:"{\n          query: search,\n          value: data.name\n        }"}],staticClass:"content__ellipsis"})]}},{key:"body__price",fn:function(e){var n=e.data;return[t._v("\n      "+t._s(t.getConvertedPrice(n.price))+"\n    ")]}},{key:"body__description",fn:function(n){var r=n.data;return[e("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.search,value:r.description},expression:"{\n          query: search,\n          value: data.description\n        }"}],staticClass:"content__ellipsis"})]}},{key:"body__designator",fn:function(n){var r=n.data,o=n.index;return t._l(r.designator,(function(n){return e("AfsLink",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:t.search,value:n},expression:"{\n          query: search,\n          value: item\n        }"}],key:n,ref:o+n,refInFor:!0,staticClass:"content__link prevent-blur",attrs:{"is-focused":t.isFocusedDesignator(o+n),tabindex:"-1"},on:{click:function(e){return e.preventDefault(),t.onDesignatorClick(n,r)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.onDesignatorClick(n,r))}}})}))}},{key:"footer__number",fn:function(){return[e("strong",[t._v("Total")])]},proxy:!0},{key:"footer__name",fn:function(){return[t._v(" "+t._s(t.totalNames)+" Names ")]},proxy:!0},t.totalPrice?{key:"footer__price",fn:function(){return[t._v("\n      "+t._s(t.getConvertedPrice(t.totalPrice))+"\n    ")]},proxy:!0}:null,{key:"footer__quantity",fn:function(){return[t._v(" "+t._s(t.totalQuantity)+" ")]},proxy:!0}],null,!0)}):t.search.length&&!t.items.length?e("div",{staticClass:"content__not-found"},[e("div",{staticClass:"content__not-found-container"},[t._v(t._s(t.notFound))])]):t._e()],1)};j._withStripped=!0;var A=n(26);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */L=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==M(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function I(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function D(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){I(i,r,o,a,s,"next",t)}function s(t){I(i,r,o,a,s,"throw",t)}a(void 0)}))}}function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=window.__APP__,U=F.analytics,$=F.library.Vuex,G=$.mapState,V=$.mapGetters,z=$.mapMutations,H=F.utils,W=H.directives.highlight,Y=H.debounce,q=window.__CORE__,X={name:"BaseContent",components:{AfsLink:A.a},directives:{highlight:W},data:function(){return{focusedRow:null,focusedDesignator:null}},computed:N(N(N({},G(["columns","sortBy"])),V(["search","items","totalPrice","totalQuantity","totalNames"])),{},{computedItems:function(){var t=this;return this.items.map((function(e){return N(N({},e),{},{isFocused:e.id===t.focusedRow})}))},notFound:function(){return'"'.concat(this.search,'" not found')},hasFocus:function(){return null!==this.focusedRow&&null!==this.focusedDesignator}}),created:function(){q.bus.on("BOMView:selectDesignator",this.selectDesignator)},beforeDestroy:function(){q.bus.off("BOMView:selectDesignator",this.selectDesignator)},methods:N(N({},z(["setSort"])),{},{isFocusedDesignator:function(t){return t===this.focusedDesignator},getConvertedPrice:function(t){return t?"$".concat(t.toFixed(2)):"N/A"},selectDesignator:function(){var t=arguments,e=this;return D(L().mark((function n(){var r,o,i,a,s,c,u,l,f;return L().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.id,s=void 0===a?null:a,c=i.designator,u=void 0===c?null:c,null!==s&&null!==u){n.next=5;break}return e.focusedRow=null,e.focusedDesignator=null,n.abrupt("return");case 5:return n.next=7,e.$nextTick();case 7:l=e.items.findIndex((function(t){return t.id===s})),f=null===(r=e.$refs[l+u])||void 0===r||null===(o=r[0])||void 0===o?void 0:o.$el,e.focusedRow=s,e.focusedDesignator=l+u,f&&f.focus();case 12:case"end":return n.stop()}}),n)})))()},onTableBodyClick:function(t){!t.target.closest(".prevent-blur")&&this.hasFocus&&(q.bus.emit("BOMView:designatorBlur"),this.focusedRow=null,this.focusedDesignator=null)},onNameClick:function(){U.dispatchViewNavigationEvent("Bom",{action:"OctopartClick"})},onSort:function(t){var e=this;Y("sort",(function(){return e.setSort(t)}),20)},onDesignatorClick:function(t,e){this.focusedRow=e.id,this.focusedDesignator=t,q.bus.emit("BOMView:designator",{name:t,item:e}),U.dispatchViewNavigationEvent("Bom",{action:"CrossProbe"})}})};n(508);function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var J={name:"BOM",components:{BaseSearch:P,BaseContent:Object(T.a)(X,j,[],!1,null,"90e03fb6",null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,window.__APP__.library.Vuex.mapState)(["items"]))},Q=(n(509),n(510),Object(T.a)(J,p,[],!1,null,"37ef5032",null).exports),tt=window.__APP__,et=n(18);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,e){return(ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct(t);if(e){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}function at(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return st(t)}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lt=window.__CORE__,ft={where:function(t){return["Activate"===t.type]},to:"ACTIVE"},dt={where:function(t){return["Load"===t.type]},to:"LOAD"},ht={where:function(t){return["Select"===t.type]},to:"SELECTED"},pt={where:function(t){return["Deactivate"===t.type]},to:"NONACTIVE"},mt={HIDDEN:[{where:function(t){return["Ready"===t.type]},to:"READY"}],READY:[{where:function(t){return["Init"===t.type]},to:"INIT"}],INIT:[ft,dt],LOAD:[dt,ft,{where:function(t){return["Error"===t.type]},to:"CRASHED",error:!0}],ACTIVE:[ft,pt,ht],SELECTED:[pt,ft,ht],NONACTIVE:[ft,dt],CRASHED:[pt]},vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ot(t,e)}(i,t);var e,n,r,o=it(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ut(st(e=o.call(this,"HIDDEN",mt)),"logger",void 0),ut(st(e),"creator",void 0),ut(st(e),"engine",void 0),ut(st(e),"bus",void 0),ut(st(e),"items",null),ut(st(e),"bomData",void 0),ut(st(e),"selectedData",null),ut(st(e),"selectedVariant",void 0),e.logger=lt.createLogger("BomViewManager"),e.creator=t,e.events.forEach((function(t){return lt.bus.registerEvent(t)})),lt.bus.on("BOMEngine:setup",(function(t){return e.setup(t)})),lt.bus.on("BOMEngine:activate",(function(t){return e.activate(t)})),lt.bus.on("BOMEngine:deactivate",(function(t){return e.deactivate()})),lt.bus.on("BOMEngine:select",(function(t){return e.select(t)})),lt.bus.on("BOMEngine:checkSelection",(function(t){return e.canBeSelect(t)})),lt.bus.on("BOMEngine:setVariant",(function(t){return e.setVariant(t)})),e.on(et.a.TRANSITION_EVENT,(function(t){return e.emitDidStateChange(e.state,t)})),e.on(et.a.ERROR_EVENT,(function(t){return e.emitDidStateChange(e.state,t)})),e}return e=i,(n=[{key:"events",get:function(){return["BOMEngine:setup","BOMEngine:activate","BOMEngine:deactivate","BOMEngine:select","BOMEngine:checkSelection","BOMEngine:didStateChange","BOMEngine:setVariant"]}},{key:"emitDidStateChange",value:function(t,e){lt.bus.emit("BOMEngine:didStateChange",{state:t,message:e})}},{key:"setup",value:function(t){var e=this;return new Promise((function(n){e.logger.LogDebug("Setup"),e.bus=t.bus,e.bus.on("select",(function(t){return e.onSelect(t)})),e.setupEngine(t),n()}))}},{key:"activate",value:function(t){var e=this;this.toInit(t).then((function(t){return"RUN"===e.engine.getState()?e.toActive():e.toLoad()})).then((function(t){return e.toSelected()})).catch((function(t){return e.dispatch({type:"Error",error:t})}))}},{key:"deactivate",value:function(){this.dispatch({type:"Deactivate"})}},{key:"select",value:function(t){var e=this;if(t&&t.name){var n=this.engine.getSelectData(t.name);this.bus.emit("select",n)}else if(Array.isArray(t)){var r=t.map((function(t){return e.engine.getSelectData(t.name)}));this.bus.emit("select",r)}else this.bus.emit("select",null)}},{key:"canBeSelect",value:function(t){if(!t)return{item:null,can:!1};t.item&&Object.getOwnPropertyDescriptor(t.item,"designator")&&this.items?t.can=this.findItemByName(t.item.designator):t.can=!1}},{key:"toInit",value:function(t){var e=this;return new Promise((function(n){e.dispatch({type:"Init",div:t}),n()}))}},{key:"toActive",value:function(){var t=this;return new Promise((function(e){t.dispatch({type:"Activate",items:t.items}),e()}))}},{key:"toLoad",value:function(){var t=this;return new Promise((function(e,n){t.dispatch({type:"Load"})?t.engine.load().then((function(e){return t.toActive()})).then((function(t){return e()})).catch((function(t){return n(t)})):n(new Error("Can not go to [LOAD] state from [".concat(t.state,"]. ")))}))}},{key:"toSelected",value:function(){var t=this;return new Promise((function(e){if(t.selectedData){var n=t.selectedData;if(n&&n.item&&n.item.designator&&t.items){var r=t.findItemByName(n.item.designator);if(r){var o={item:r,designator:n.item.designator};return t.dispatch({type:"Select",data:o}),void e()}}}t.dispatch({type:"Activate",items:null}),e()}))}},{key:"setupEngine",value:function(t){var e=this;this.engine=new this.creator,this.engine.on("READY",(function(t){return e.onEngineReady()})),this.engine.on("RUN",(function(t){return e.onEngineRun(t)})),this.engine.setup(t)}},{key:"onEngineReady",value:function(){var t=this;setTimeout((function(){t.dispatch({type:"Ready"}),t.engine.load()}),1)}},{key:"onEngineRun",value:function(t){this.bomData=t.data.variants,this.selectedVariant=t.data.defaultId,this.items=this.bomData.get(this.selectedVariant)}},{key:"onSelect",value:function(t){this.selectedData=t,this.toSelected()}},{key:"findItemByName",value:function(t){return this.items.find((function(e){return e.designator.find((function(e){return e===t}))}))}},{key:"setVariant",value:function(t){if(t){var e;if(this.selectedVariant=t.projectVariant.uniqueId,!this.bomData)return;this.items=null!==(e=this.bomData.get(this.selectedVariant))&&void 0!==e?e:[],this.dispatch({type:"Activate",items:this.items})}}}])&&rt(e.prototype,n),r&&rt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(et.a),yt=n(36);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return(wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){if(e&&("object"===gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return St(t)}function St(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ct=window.__CORE__;function Et(t,e){return new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(a,t);var n,r,o,i=_t(a);function a(){var t,n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,{name:"BOMView",displayName:"BOM",comment:"BOM View",order:14,description:"BOM View"}),n=St(t),o=function(t){var e={item:t,can:!1};return Ct.bus.emit("BOMEngine:checkSelection",e),e.can},(r="canBeSelect")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.logger=window.__CORE__.createLogger("BOMView"),t.isHidden=!0,t.viewManager=new vt(e),t.prevView=null,t.currentVariant=null,t.isActive=!1,Ct.bus.on("View:activate",(function(e){e.name!==t.metaInfo.name&&(t.prevView=e.name)})),Ct.bus.on("BOMEngine:didStateChange",(function(e){return t.onEngineStateChanged(e)})),Ct.bus.on("BOMView:designator",(function(e){Ct.bus.emit("BOMEngine:select",e),t.prevView&&Ct.bus.emit("View:set",t.prevView)})),Ct.bus.on("BOMView:designatorBlur",(function(t){return Ct.bus.emit("BOMEngine:select",null)})),Ct.bus.on("Search:display",(function(e){t.isActive&&(e.can=!1,Ct.bus.emit("BOM:focusSearch"))})),Ct.bus.on("Variants:changed",(function(e){t.currentVariant=e,Ct.bus.emit("BOMEngine:setVariant",e)})),t}return n=a,(r=[{key:"events",get:function(){return["BOMView:designator","BOMView:designatorBlur","BOMView:selectDesignator","BOM:focusSearch"]}},{key:"hidden",get:function(){return this.isHidden}},{key:"hasControls",value:function(t){t.push({type:"select"})}},{key:"setup",value:function(t){var e=this;return new Promise((function(n,r){try{Ct.bus.emit("BOMEngine:setup",t),n()}catch(t){e.logger.LogError("Setup error. "+t.message),r(new Error("BOM view setup error."))}}))}},{key:"activate",value:function(t){try{this.isActive=!0,Ct.bus.emit("BOMEngine:activate",t),Ct.bus.emit("Logo:hide")}catch(t){this.logger.LogError("Activate error. "+t.message),t.innerError&&t.innerError.code===yt.a.StoreExpired?this.updateLoader("error",t.message,"info-16","small"):this.updateLoader("error","Something went wrong. Please try again later.")}}},{key:"deactivate",value:function(){try{this.isActive=!1,Ct.bus.emit("BOMEngine:deactivate"),Ct.bus.emit("Logo:show")}catch(t){this.logger.LogError("Deactivate error. "+t.message)}}},{key:"onEngineStateChanged",value:function(t){switch(t.state){case"HIDDEN":this.isHidden=!0,Ct.bus.emit("BOMView:updateInterface",{hidden:!0});break;case"READY":Ct.bus.emit("BOMView:updateInterface",{hidden:!1}),this.isHidden=!1;break;case"INIT":this.div=t.message.div,this.view=(n=t.message.div,r=document.createElement("div"),n.appendChild(r),new tt.library.Vue({store:h,data:{afsConfig:window.__APP__.afsConfig},render:function(t){return t(Q)}}).$mount(r)),this.currentVariant&&Ct.bus.emit("BOMEngine:setVariant",this.currentVariant);break;case"ACTIVE":t.message.items&&(e=t.message.items,d.commit("setItems",e),this.updateLoader()),Ct.bus.emit("BOMView:selectDesignator");break;case"LOAD":this.updateLoader("large","Loading BOM data");break;case"CRASHED":this.updateLoader("error","Something went wrong. Please try again later.");break;case"NONACTIVE":Ct.bus.emit("BOMView:selectDesignator"),this.updateLoader();break;case"SELECTED":Ct.bus.emit("BOMView:selectDesignator",{id:t.message.data.item.id,designator:t.message.data.designator})}var e,n,r}},{key:"updateLoader",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"large";this.loader&&(this.loader.destroy(),this.loader=null),this.isActive&&t&&e&&(this.logger.LogDebug("Logger "+t+" "+e),this.loader=window.__APP__.loader(this.div,{message:e,type:t,icon:n,size:r}))}}])&&bt(n.prototype,r),o&&bt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),a}(t))}},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"afs-kv-list",class:t.classes,attrs:{"data-locator":t.dataLocator}},t._l(t.items,(function(n){return e("li",{key:n.id,staticClass:"afs-kv-list__item"},[e("div",{staticClass:"afs-kv-list__key"},[t._t("key",(function(){return[t._v(t._s(n.key))]}),{listItem:n,getBEMClass:t.getBEMClass})],2),t._v(" "),e("div",{staticClass:"afs-kv-list__value"},[t._t("value",(function(){return[t._v(t._s(n.value))]}),{listItem:n,getBEMClass:t.getBEMClass})],2)])})),0)};r._withStripped=!0;var o=n(1),i=n(3),a={name:"AfsKeyValueList",props:{dataLocator:{type:String,default:"kv-list"},items:{type:Array,default:function(){return[]}},align:{type:String,default:"center",validator:function(t){return["center","left","right","inherit","left-right"].includes(t)}},width:{type:String,default:"half",validator:function(t){return["half","auto"].includes(t)}}},computed:{classes:function(){return["afs-kv-list_".concat(this.align),"afs-kv-list_".concat(this.width),this.themeClass]},themeClass:function(){var t=Object(i.a)(this.$root);return Object(o.c)(t.theme)}},methods:{getBEMClass:function(t){return Object(o.a)("afs-kv-list",t)}}},s=(n(539),n(0)),c=Object(s.a)(a,r,[],!1,null,null,null).exports;e.a=c},function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",[t._t("header",null,{isOpened:t.isOpened,open:t.open,close:t.close}),t._v(" "),e("transition",{attrs:{name:"fade","enter-class":"afs-layers-accordion-enter","leave-to-class":"afs-layers-accordion-leave-to","enter-active-class":"afs-layers-accordion-enter-active","leave-active-class":"afs-layers-accordion-leave-active"},on:{enter:t.enter,"after-enter":t.afterEnter,leave:t.leave,"after-leave":t.afterLeave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpened,expression:"isOpened"}]},[t._t("body")],2)])],2)};r._withStripped=!0;var o={name:"AfsLayersSectionAccordion",props:{opened:{type:Boolean,default:!1}},data:function(t){return{isOpened:t.opened}},methods:{open:function(){this.isOpened=!0},close:function(){this.isOpened=!1},enter:function(t){var e=window.getComputedStyle(t).width;t.style.width=e,t.style.position="absolute",t.style.visibility="hidden",t.style.height="auto";var n=window.getComputedStyle(t).height;t.style.width=null,t.style.position=null,t.style.visibility=null,t.style.height=0,this.$nextTick((function(){return t.style.height=n}))},afterEnter:function(t){var e=this;t.style.height="auto",this.$nextTick((function(){t.removeAttribute("style"),e.$emit("open")}))},leave:function(t){var e=window.getComputedStyle(t).height;t.style.height=e,this.$nextTick((function(){return t.style.height=0}))},afterLeave:function(){this.$emit("close")}}},i=(n(533),n(0)),a=Object(i.a)(o,r,[],!1,null,"45c1d4a2",null);e.a=a.exports},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return o}));var o=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=void 0,(r="layers")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.layers=e}var e,n,o;return e=t,(n=[{key:"GetLayersCount",value:function(){return this.layers.length}},{key:"GetLayer",value:function(t){return this.layers[t]}},{key:"SetLayer",value:function(t,e){this.layers[t]=e}},{key:"AddLayer",value:function(t){throw new Error("Method not implemented.")}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}));var a=o((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));i(a,"BackgroundColor",[.18,.18,.18,.5]),i(a,"DegreesToRadians",Math.PI/180),i(a,"ViewportFov",45)},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(259),o=n(453),i=n(338),a=n(450),s=n(464),c=n(461);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=d(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function d(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(d,t);var e,n,s,u=p(d);function d(t,e,n,r,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),g(v(s=u.call(this,t,e,n,r,o,i,a)),"showRotationBall",!1),g(v(s),"viewportQuat",window.quat.create()),g(v(s),"viewportAt",window.vec3.create()),g(v(s),"viewportOffset",10),g(v(s),"viewportNear",1.2),g(v(s),"viewportFar",700),g(v(s),"viewportCenter_",[0,0]),g(v(s),"rotationSensitivity",.005*Math.PI),s.updatePerspectiveMatrix(),s.setZoom(.4),s.logger.LogInfo("".concat(i?"Overlay":"Main"," 3D [").concat(s.id,"] scene successfully initialized.")),s}return e=d,(n=[{key:"viewport",get:function(){return f(y(d.prototype),"viewport",this)}},{key:"renderPath",get:function(){return f(y(d.prototype),"renderPath",this)}},{key:"parentScene",get:function(){return f(y(d.prototype),"parentScene",this)}},{key:"createRenderPath",value:function(){return this.scene.CreateRenderPath()}},{key:"addViewport",value:function(t){return this.scene.AddViewport(t)}},{key:"getForward",value:function(){return this.viewport.GetForward()}},{key:"getEye",value:function(){return this.viewport.GetEye()}},{key:"getAt",value:function(){return this.viewport.GetAt()}},{key:"getUp",value:function(){return this.viewport.GetUp()}},{key:"getView",value:function(){return this.viewport.GetView()}},{key:"getInverseView",value:function(){return this.viewport.GetInverseView()}},{key:"renderScene",value:function(){this.renderPath.SelectViewport(this.viewport),this.renderPath.ShowRotationBall(this.showRotationBall),this.renderPath.Render(this.rootNode)}},{key:"getNodeItemsAtRay",value:function(t,e){return this.scene.GetNodeItemsAtRay(t,e)}},{key:"setCenter",value:function(t,e){this.viewportCenter_="number"==typeof t?[t,e]:t,this.viewportAt=window.vec3.fromValues(this.viewportCenter[0],this.viewportCenter[1],0),this.updateViewMatrix(),this.emit("centerChanged",new r.a(this.viewportCenter[0],this.viewportCenter[1]))}},{key:"viewportCenter",get:function(){return this.isRoot?this.viewportCenter_:this.parentScene.viewportCenter}},{key:"setCenterOffset",value:function(t,e){var n=window.vec2,o=window.vec3,i=window.quat,a=n.fromValues(t,e),s=n.scale(n.create(),a,this.rotationSensitivity),c=o.transformQuat(o.create(),o.fromValues(0,1,0),this.viewportQuat);o.normalize(c,c);var u=i.setAxisAngle(i.create(),c,s[0]);i.mul(this.viewportQuat,u,this.viewportQuat);var l=o.transformQuat(o.create(),o.fromValues(1,0,0),this.viewportQuat);o.normalize(l,l);var f=i.setAxisAngle(i.create(),l,s[1]);i.mul(this.viewportQuat,f,this.viewportQuat),this.updateViewMatrix(),this.emit("centerChanged",new r.a(t,e))}},{key:"setRectangle",value:function(t,e,n,r){this.viewport.SetRectangle([t,e,n,r]),this.updatePerspectiveMatrix(),this.emit("resized",new o.a(n,r))}},{key:"resize",value:function(t,e){this.viewport.SetRectangle([0,0,t,e]),this.scene.Resize(t,e),this.updatePerspectiveMatrix(),this.emit("resized",new o.a(t,e))}},{key:"setZoom",value:function(t){t=this.defZoom/t,this.viewportOffset=t,this.updateViewMatrix()}},{key:"getZoom",value:function(){return this.viewportOffset}},{key:"setFitFixedView",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;if(n||(n=.8),null==t||null==e){var r=this.renderOptions.map((function(t){return t.layer})),o=this.rootNode.GetBoxForLayers(r);null==t&&(t=[o[0],o[1],o[2]]),null==e&&(e=[o[3],o[4],o[5]])}this.viewport.FitFixedView(t,e,n)}},{key:"zoomToFit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=.8;if(null==t||null==e){var o=this.getRenderLayers(),i=this.rootNode.GetBoxForLayers(o);null==t&&(t=[i[0],i[1],i[2]]),null==e&&(e=[i[3],i[4],i[5]])}if(1!=n){n/=this.getRelativeAspect(t,e);var s=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],c=(s[0]/n-s[0])/2,u=(s[1]/n-s[1])/2,l=(s[2]/n-s[2])/2;t=[t[0]-c,t[1]-u,t[2]-l],e=[e[0]+c,e[1]+u,e[2]+l]}this.fitFixedView_={boxMin:t,boxMax:e,fixedScale:r},this.viewport.FitFixedView(t,e,r),this.emit("zoomToFitChanged",new a.a(t,e))}},{key:"zoomToFitFixedView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=this.rootNode.GetBoxForLayers(this.getRenderLayers());null!=e&&null!=n||(null==e&&(e=[o[0],o[1],o[2]]),null==n&&(n=[o[3],o[4],o[5]]));var s=window.vec3.clone(e),c=window.vec3.clone(n),u=1!=r?r:.8;switch(this.fitFixedView_={boxMin:e,boxMax:n,fixedScale:u,view:t},t){case i.a.Back:var l=Math.max(Math.abs(c[2]),Math.abs(s[2]));s[2]=-l,c[2]=l,this.viewport.FitFixedView(s,c,u);var f=this.viewport.GetEye();f[2]=-f[2],this.viewport.ViewSetLookAt(f,this.viewport.GetAt(),this.viewport.GetUp()),this.viewport.SetDirty(!0);break;default:this.viewport.FitFixedView(s,c,u)}this.emit("zoomToFitChanged",new a.a(e,n))}},{key:"getRelativeAspect",value:function(t,e){var n=window.vec2,r=n.sub([0,0],e,t);n.scale(r,r,.5);var o=this.viewport.GetRectangle(),i=r[0]/r[1],a=o[2]/o[3],s=i>a?i/a*1.2:1;return s>2&&(s=1),s}},{key:"getRenderLayers",value:function(){var t={};return this.layers.forEach((function(e,n){return t[n]=e.show3d})),this.renderOptions.filter((function(e){return t[e.layer]})).map((function(t){return t.layer}))}},{key:"viewportToWorld",value:function(t){return this.viewport.Unproject(t)}},{key:"unproject",value:function(t){return this.viewport.Unproject(t)}},{key:"project",value:function(t){var e=this.viewport,n=window.vec4.fromValues(t[0],t[1],t[2],1),r=e.GetRectangle(),o=e.GetProjection(),i=e.GetView(),a=window.mat4.multiply([],o,i),s=r[2]/2,c=r[3]/2;return window.vec4.transformMat4(n,n,a),[s+s*(n[0]/n[3]),c-c*(n[1]/n[3])]}},{key:"getViewportQuat",value:function(){return this.viewportQuat}},{key:"getViewportAt",value:function(){return this.viewportAt}},{key:"getViewportOffset",value:function(){return this.viewportOffset}},{key:"setSelection",value:function(t){this.renderPath.SetSelection(t)}},{key:"viewportIntersectWithZ",value:function(t,e){var n=window.vec3,r=this.unproject(t),o=[0,0,1],i=[0,0,e],a=this.getEye(),s=n.normalize([],n.sub([],r,a)),c=n.dot(n.sub([],i,a),o)/n.dot(s,o);return n.scaleAndAdd([],a,s,c)}},{key:"updateViewMatrix",value:function(){var t=window.vec3,e=t.transformQuat([0,0,0],[0,0,1],this.viewportQuat);t.scale(e,e,this.viewportOffset);var n=this.viewportAt,r=t.transformQuat([0,0,0],[0,1,0],this.viewportQuat),o=t.sub([0,0,0],n,e);this.viewport.ViewSetLookAt(o,n,r)}},{key:"updatePerspectiveMatrix",value:function(){var t=c.a.ViewportFov*Math.PI/180,e=this.canvasWidth/this.canvasHeight;this.viewport.ProjectionSetPerspective(t,e,this.viewportNear,this.viewportFar),this.scene.Resize(this.canvasWidth,this.canvasHeight)}}])&&l(e.prototype,n),s&&l(e,s),Object.defineProperty(e,"prototype",{writable:!1}),d}(s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(18),o=n(44),i=n(67),a=n(316);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function h(){}function p(){}function m(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==s(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,u(b,"constructor",m),u(m,"constructor",p),p.displayName=u(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),u(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,a,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function u(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,s,"next",t)}function s(t){u(i,r,o,a,s,"throw",t)}a(void 0)}))}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=y(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w={where:function(t){return["PENDING"===t.type]},to:"PENDING"},_={IDLE:[w],PENDING:[{where:function(t){return["COMPLETED"===t.type]},to:"COMPLETED"},{where:function(t){return["Error"===t.type]},to:"CRASHED",error:!0}],CRASHED:[w]},O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(y,t);var e,n,r,s,u=h(y);function y(){var t,e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),b(m(n=u.call(this,"IDLE",_)),"module",void 0),b(m(n),"commonCore",void 0),b(m(n),"error",void 0),b(m(n),"logger",window.__CORE__.createLogger("GraphiteResolver")),b(m(n),"onPending",function(){var r=l(c().mark((function r(i){var a;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=window.__CORE__,r.next=4,n.resolveModulePathByUrl("./js/graphite.js?v=1.0.0.122");case 4:return a.bus.emit("GraphiteEngine:afterGraphiteLoad","./js/graphite.js?v=1.0.0.122"),r.prev=5,window.GraphiteModule.print=function(t){return n.logger.LogInfo(t)},window.GraphiteModule.printErr=function(t){return n.logger.LogError(t)},r.next=10,Promise.resolve(window.GraphiteModule);case 10:n.module=r.sent,a.bus.emit("GraphiteEngine:beforeGraphiteInit",n.module),n.commonCore=n.module.Initialize(),n.module.LoadComplete=!0,a.bus.emit("GraphiteEngine:afterGraphiteInit",{module:n.module,commonCore:n.commonCore}),n.dispatch({type:"COMPLETED",payload:{graphiteResolver:m(n)}}),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(5),n.logger.LogError("Initialize Graphite module error.",r.t0),v((t=m(n),g(y.prototype)),"dispatch",t).call(t,new o.a("Graphics engine load error."));case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(0),n.logger.LogError("Resolve Graphite module error.",r.t1),v((e=m(n),g(y.prototype)),"dispatch",e).call(e,new o.a("Graphics engine load error."));case 28:case"end":return r.stop()}}),r,null,[[0,24],[5,18]])})));return function(t){return r.apply(this,arguments)}}()),window.GraphiteResolverInstance?p(n,window.GraphiteResolverInstance):(n.on("PENDING",n.onPending),n.on("CRASHED",(function(t){return n.error=t})),window.GraphiteResolverInstance=m(n),n)}return e=y,(n=[{key:"dispatch",value:function(t){return v(g(y.prototype),"dispatch",this).call(this,t)}},{key:"init",value:function(){var t=this;return Object(i.a)((function(){return t.dispatch({type:"PENDING",moduleName:"GraphiteModule"})})),this}},{key:"resolve",value:(s=l(c().mark((function t(){var e=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(a.a)(),this.init(),"IDLE"!==this.state){t.next=5;break}return t.next=5,new Promise((function(t){return e.once("PENDING",t)}));case 5:if("PENDING"!==this.state){t.next=8;break}return t.next=8,new Promise((function(t,n){return e.once("#Transition",(function(r){"COMPLETED"===r.type&&t(),"CRASHED"===r.type&&n(e.error)}))}));case 8:if("CRASHED"!==this.state){t.next=10;break}throw this.error;case 10:return t.abrupt("return",this);case 11:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"resolveModulePathByUrl",value:function(t){return new Promise((function(e,n){window.__CORE__.bus.emit("GraphiteEngine:beforeGraphiteLoad",t);var r=document.createElement("script");r.src=t,r.async=!0,r.onload=e,r.onerror=n,document.getElementsByTagName("body")[0].appendChild(r)}))}}])&&f(e.prototype,n),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),y}(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return q}));var r=n(30),o=n(105),i=n(453),a=n(258),s=n(460),c=n(226),u=n(140),l=n(553);function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"vertices",[]),d(this,"indices",[]),d(this,"outlineIndices",[])}var e,n,r;return e=t,(n=[{key:"GetVertices",value:function(){return this.vertices}},{key:"GetIndices",value:function(){return this.indices}},{key:"GetOutlineIndices",value:function(){return this.outlineIndices}}])&&f(e.prototype,n),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),p=n(34),m=n(465);function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"geometries",void 0),y(this,"meshParts",void 0),this.geometries=e,this.meshParts=n}var e,n,r;return e=t,(n=[{key:"GetLayerGeometry",value:function(){return this.geometries}},{key:"GetMeshParts",value:function(){return this.meshParts}}])&&v(e.prototype,n),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return x(t)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(i,t);var e,n,r,o=O(i);function i(t,e,n){var r,a,s,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this)).renderPath=t,r.cameraController=e,r.renderScene=n,a=x(r),c=void 0,(s="logger")in a?Object.defineProperty(a,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[s]=c,r.logger=window.__CORE__.createLogger("SceneRenderHelper"),r}return e=i,(n=[{key:"render",value:function(){this.prepareRender();try{this.emitBeforeRender(),this.cameraController().UpdateAnimation(),this.renderPath().BeginRender()&&(this.renderScene(),this.renderPath().EndRender(),this.emitRendered())}finally{this.finalizeRender()}}},{key:"prepareRender",value:function(){}},{key:"finalizeRender",value:function(){}},{key:"emitBeforeRender",value:function(){try{this.emit("beforeRender")}catch(t){this.logger.LogError("Event [beforeRender] emit error.",t)}}},{key:"emitRendered",value:function(){try{this.emit("afterRender")}catch(t){this.logger.LogError("Event [afterRender] emit error.",t)}}}])&&w(e.prototype,n),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(r.a),k=n(101);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=L(t);if(e){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(i,t);var e,n,r,o=A(i);function i(t,e,n,r){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,t,e,r)).renderPath=t,a.cameraController=e,a.clear=n,a.renderScene=r,a}return e=i,(n=[{key:"prepareRender",value:function(){var t=window.GraphiteResolverInstance.module.canvas;window.GraphiteResolverInstance.commonCore.PrepareCompositor(t.width,t.height),this.clear()}},{key:"finalizeRender",value:function(){window.GraphiteResolverInstance.commonCore.Present()}}])&&P(e.prototype,n),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(E),D=n(461);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=H(t);if(e){var o=H(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}function V(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return z(t)}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Y=new Int32Array([0,0,300,300]),q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(d,t);var e,n,r,f=G(d);function d(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,h=arguments.length>6?arguments[6]:void 0;F(this,d),W(z(t=f.call(this)),"background",void 0),W(z(t),"hiddenNodes",[]),W(z(t),"polygonStringBuilder",void 0),W(z(t),"sceneRenderOptions",void 0),W(z(t),"scene",void 0),W(z(t),"rootNode",void 0),W(z(t),"viewport_",void 0),W(z(t),"renderPath_",void 0),W(z(t),"sceneMustDisposed",!1),W(z(t),"disposed",!1),W(z(t),"defZoom",7),W(z(t),"antiAliasingMethod",o.a.None),W(z(t),"fitFixedView_",void 0),W(z(t),"id_",void 0),W(z(t),"parentScene_",void 0),W(z(t),"logger",window.__CORE__.createLogger("Scene")),W(z(t),"clonedPolygons",new Map),W(z(t),"rootNodeData",void 0),W(z(t),"renderHelper",void 0),W(z(t),"materials",[]),W(z(t),"materialMap",void 0);var p=window.GraphiteResolverInstance,v=p.module;if(t.id_=null!=h?h:"Default_Scene",t.background=D.a.BackgroundColor,u&&(t.polygonStringBuilder=new m.a(u,z(t))),null!=e)t.scene=e,t.rootNode=t.scene.GetRootNode().GetChild(0),t.rootNodeData=t.rootNode.GetNodeData(),r&&t.setMaterials(r),t.sceneMustDisposed=!1;else{var y;t.logger.LogInfo("Initializing scene.");var g=p.commonCore;t.scene=v.CreateScene(g),(y=t.materials).push.apply(y,N(r||[])),t.materialMap=new c.a(t.materials,t.materialMapName);var b=new s.a(n||a.a.createLayerArray(1));t.rootNodeData=t.scene.AddNodeData(t.materialMap,b),t.rootNode=t.scene.GetRootNode().AddChild(t.rootNodeData),t.sceneMustDisposed=!0}var w=function(){return t.renderPath}.bind(z(t)),_=function(){return t.cameraController}.bind(z(t));return l?(t.parentScene_=l,t.parentScene_.on("resized",(function(e){return t.resize(e.width,e.height)})),t.renderHelper=new E(w,_,t.renderScene.bind(z(t))),t.viewport_=l.viewport):(t.renderHelper=new I(w,_,t.clear.bind(z(t)),t.renderScene.bind(z(t))),t.viewport_=t.addViewport(v.canvas?new Int32Array([0,0,v.canvas.width,v.canvas.height]):Y)),t.renderHelper.on("beforeRender",(function(){return t.emit("beforeRender",z(t))})),t.renderHelper.on("afterRender",(function(){return t.emit("rendered",z(t))})),t.renderPath_=t.createRenderPath(),t.sceneRenderOptions=i||k.a.createRenderOptions(t.layers),t}return e=d,(n=[{key:"layerMap",get:function(){return this.rootNodeData.GetLayerMap()}},{key:"layers",get:function(){var t=this.layerMap,e=t.GetLayersCount();return Array.from(Array(e).keys()).map((function(e){return t.GetLayer(e)})).map((function(t,e){return new a.a(t.name,e,t.z_range,t.is_cutout,t.is_barrel,t.is_keepout,t.is_inverted,t.show3d)}))}},{key:"viewport",get:function(){return this.viewport_}},{key:"renderPath",get:function(){return this.renderPath_}},{key:"fitFixedView",get:function(){return this.isRoot?this.fitFixedView_:this.parentScene_.fitFixedView}},{key:"id",get:function(){return this.id_}},{key:"parentScene",get:function(){return this.parentScene_}},{key:"isRoot",get:function(){return null==this.parentScene}},{key:"materialMapName",get:function(){return"".concat(this.id,"_MaterialMap")}},{key:"render",value:function(){this.renderHelper.render()}},{key:"antialiasing",get:function(){return this.antiAliasingMethod},set:function(t){this.scene.GetRenderSmoother().SelectMethod(t),this.antiAliasingMethod=t}},{key:"canvasHeight",get:function(){return window.GraphiteResolverInstance.module.canvas?window.GraphiteResolverInstance.module.canvas.height:300}},{key:"canvasWidth",get:function(){return window.GraphiteResolverInstance.module.canvas?window.GraphiteResolverInstance.module.canvas.width:300}},{key:"needRender",get:function(){return this.scene.NeedRender()}},{key:"getSystemScene",value:function(){return this.scene}},{key:"cameraController",get:function(){return this.viewport.DefaultCameraController()}},{key:"clear",value:function(t){t&&(this.background=t),this.renderPath&&window.GraphiteResolverInstance.commonCore.Clear(this.background)}},{key:"renderOptions",get:function(){return this.sceneRenderOptions},set:function(t){this.sceneRenderOptions=t,this.viewport.SetDirty(!0)}},{key:"getNodeItemById",value:function(t){return this.rootNodeData.GetNodeItemById(t)}},{key:"getNodeItemsByIds",value:function(t){return this.rootNodeData.GetNodeItemsByIds(t)}},{key:"getLayersCount",value:function(){return this.layers.length}},{key:"setRectangle",value:function(t,e,n,r){this.viewport.SetRectangle([t,e,n,r]),this.emit("resized",new i.a(n,r))}},{key:"getRectangle",value:function(){return this.viewport.GetRectangle()}},{key:"getSize",value:function(){var t=this.getRectangle();return new i.a(t[2],t[3])}},{key:"resize",value:function(t,e){this.parentScene||this.viewport.SetRectangle([0,0,t,e]),this.scene.Resize(t,e),this.emit("resized",new i.a(t,e))}},{key:"addPolygon",value:function(t){return this.scene.AddPolygon(t)}},{key:"addPolygonContours",value:function(t){return this.scene.AddPolygonContours(t)}},{key:"getPolygonGenerator",value:function(){return this.scene.GetPolygonGenerator()}},{key:"getPolygonByID",value:function(t){return this.scene.GetPolygonByID(t)}},{key:"addMesh",value:function(t){return this.scene.AddMesh(t)}},{key:"addItem",value:function(t,e,n,r,o,i,a){n=n||[],r=r||[],o=o||[],i=i||[],a=a||[];try{var s={GetArcs:function(){return n||[]},GetLabels:function(){return o||[]},GetLayerIndex:function(){return t},GetLines:function(){return i||[]},GetPolygons:function(){return r||[]},GetUnis:function(){return e}};return this.rootNodeData.AddItem(new g([s],a))}catch(t){throw t}}},{key:"addNode",value:function(t,e){return this.addItem(t,e.unis,e.arcs,e.polygons,e.labels,e.lines,e.meshes)}},{key:"removeItem",value:function(t){t&&this.getNodeItemById(t.GetId())&&this.rootNodeData.DeleteItem(t)}},{key:"deleteItem",value:function(t){t&&this.getNodeItemById(t.GetId())&&this.rootNodeData.DeleteItem(t)}},{key:"deleteItems",value:function(t){this.rootNodeData.DeleteItems(t)}},{key:"deleteItemsByIds",value:function(t){this.rootNodeData.DeleteItemsByIds(t)}},{key:"updateRootNode",value:function(t){this.rootNode=t,this.rootNodeData=t.GetNodeData()}},{key:"setCurrentMaterials",value:function(t){var e;this.materials.length=0,(e=this.materials).push.apply(e,N(t)),this.materialMap=new c.a(this.materials,this.materialMapName)}},{key:"setCurrentMaterialMap",value:function(t){var e;this.materials.length=0,(e=this.materials).push.apply(e,N(c.a.getMaterials(t))),this.materialMap=t}},{key:"updateMaterials",value:function(t){this.setCurrentMaterials(t),this.rootNodeData.UpdateMaterialMap(this.materialMap)}},{key:"updateMaterialMap",value:function(t){this.setCurrentMaterialMap(t),this.rootNodeData.UpdateMaterialMap(this.materialMap)}},{key:"setMaterials",value:function(t){this.setCurrentMaterials(t),this.rootNodeData.SetMaterialMap(this.materialMap)}},{key:"getMaterials",value:function(){return this.materials.slice()}},{key:"setMaterialMap",value:function(t){this.setCurrentMaterialMap(t),this.rootNodeData.SetMaterialMap(this.materialMap)}},{key:"getMaterialMap",value:function(){return this.materialMap}},{key:"addMaterial",value:function(t){var e=this.getMaterials(),n=e.push(t)-1;return this.setMaterials(e),this.emit("materialAdded",t),n}},{key:"removeMaterial",value:function(t){var e=this.getMaterials(),n=e.findIndex((function(e){return e===t}));n>=0&&e.splice(n,1),this.setMaterials(e),this.emit("materialRemoved",t)}},{key:"setZoomRatio",value:function(t){var e=this.getZoom()*t;this.setZoom(e)}},{key:"setDirty",value:function(t){this.viewport.SetDirty(t)}},{key:"getBoxForLayers",value:function(){var t=this.renderOptions.map((function(t){return t.layer}));return this.rootNode.GetBoxForLayers(t)}},{key:"getBoundingBoxForItem",value:function(t){return this.rootNode.GetItemBBox(t)}},{key:"getBoundingUniForItem",value:function(t,e){var n=this.rootNode.GetItemBBox(t),r=Math.min(n[0],n[3]),o=Math.max(n[1],n[4]),i=Math.max(n[0],n[3]),a=Math.min(n[1],n[4]);return new p.a([(i+r)/2,(o+a)/2],[1,0],[i-r,o-a],0,e,[0,0])}},{key:"cloneNodeItemToLayerToAnotherScene",value:function(t,e,n,r,o){var i=this;if(!e)return e;var a=[],s=[],c=[],f=[],d=e.GetLayersCount();0==d&&f.push(this.getBoundingUniForItem(e,r));for(var h=function(n){var o=e.GetLayerGeometry(n);if(!o)return"continue";var d=Array.from(Array(o.GetArcsCount()).keys()).map((function(t){return o.GetArc(t)})).filter((function(t){return t})).map((function(t){return new u.a(t.center,t.angles,t.radius,t.width,r<0?t.material:r,t.z)}));a.push.apply(a,N(d));var h=Array.from(Array(o.GetLinesCount()).keys()).map((function(t){return o.GetLine(t)})).filter((function(t){return t})).map((function(t){return{from:t.from,to:t.to,material:r<0?t.material:r,width:t.width,dash:t.dash}}));s.push.apply(s,N(h));var m=Array.from(Array(o.GetPolysCount()).keys()).map((function(t){return o.GetPoly(t)})).filter((function(t){return t})).map((function(e){var n=i.clonePolygon(t,e.polygon);return new l.a(n,e.position,r<0?e.material:r,e.z,e.angle,e.scale)}));c.push.apply(c,N(m));var v=Array.from(Array(o.GetUnisCount()).keys()).map((function(t){return o.GetUni(t)})).filter((function(t){return t})).map((function(t){return new p.a(t.position,t.direction,t.size,t.radius,r<0?t.material:r,t.z)}));f.push.apply(f,N(v))},m=0;m<d;m++)h(m);if(o)throw new Error("Not Implemented");return t.addItem(n,f,a,c,[],s,[])}},{key:"cloneNodeItemToLayer",value:function(t,e,n,r,o){return o&&o!==this?this.cloneNodeItemToLayerToAnotherScene(o,t,e,n,!1):this.rootNodeData.CloneToLayer(t,e,n,r)}},{key:"cloneNodeItemToMultiLayers",value:function(t,e,n){return this.rootNodeData.CloneToMultiLayers(t,e,n)}},{key:"cloneNodeItemsToMultiLayers",value:function(t,e,n){return this.rootNodeData.CloneNodesToMultiLayers(t,e,n)}},{key:"cloneNodeItemsToMultiLayersByIds",value:function(t,e,n){return this.rootNodeData.CloneNodesToMultiLayersByIds(t,e,n)}},{key:"setNodeItemsVisibility",value:function(t,e){this.rootNodeData.SetNodeItemsVisibility(t,e),this.hiddenNodes=this.hiddenNodes.filter((function(e){return!t.includes(e)})),e||(this.hiddenNodes=[].concat(N(this.hiddenNodes),N(t)))}},{key:"dispose",value:function(){this.disposed||(this.sceneMustDisposed&&this.scene.delete(),this.disposed=!0)}},{key:"clonePolygon",value:function(t,e){var n=this.clonedPolygons.get(t.id);n||(n=new Map,this.clonedPolygons.set(t.id,n));var r=n.get(e);if(r)return r;var o=this.scene.GetPolygonByID(e),i=new h;return o&&(i.outlineIndices=N(o.GetOutlineIndices()),i.indices=N(o.GetFillIndices()),i.vertices=N(o.GetVertices().map((function(t){return t.position})))),r=t.addPolygon(i),n.set(e,r),r}}])&&U(e.prototype,n),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),d}(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r,o=n(553);!function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"}(r||(r={}));var i=r;function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"scene",void 0),s(this,"fontSymbols",void 0),s(this,"fontDataView",void 0),s(this,"module",void 0),e.fontDataView&&e.fontSymbols||console.error("Font data not initialized.");var r=window.GraphiteResolverInstance;this.module=r.module,this.scene=n,this.fontSymbols=e.fontSymbols,this.fontDataView=e.fontDataView}var e,n,r;return e=t,(n=[{key:"getStringWidth",value:function(t,e){for(var n=0,r=0;r<t.length;++r){var o=t.charAt(r),i=this.fontSymbols[o];i&&(n+=i.advance*e.size*e.spacing)}return n}},{key:"createPolygonString",value:function(t,e){var n=[];e.flipped&&(e.size=-e.size,e.height=-e.height);var r=Math.sin(e.angle),o=Math.cos(e.angle);if(e.align!=i.Right){var a=this.getStringWidth(t,e);e.x+=.5*(e.align-1)*a*o,e.y+=.5*(e.align-1)*a*r}var s=e.baseline/100;e.x-=s*e.size*e.height*1.431641*-r,e.y-=s*e.size*e.height*1.431641*o;for(var c=0;c<t.length;++c){var u=this.createPolygonSymbol(t.charAt(c),e);u&&n.push(u)}return n}},{key:"pixelsToUnits",value:function(t){return t*this.scene.getZoom()/this.module.canvas.height}},{key:"unitsToPixels",value:function(t){return t*this.module.canvas.height/this.scene.getZoom()/2}},{key:"createPolygonSymbol",value:function(t,e){var n=this.fontSymbols[t];if(null==n)return console.log("Symbol "+t+" ("+t.charCodeAt(0)+") not found"),null;var r=this.scene.getPolygonGenerator().GetPolygon(t.charCodeAt(0));if(0==r){var i=n.offset,a=this.fontDataView.getUint32(i,!0);if(0!=a){var s=[];i+=4;for(var c=0;c<a;++c)s.push([this.fontDataView.getFloat32(i+0,!0),this.fontDataView.getFloat32(i+4,!0)]),i+=8;var u=this.fontDataView.getUint32(i,!0),l=[];i+=4;for(var f=0;f<u;++f)l.push(this.fontDataView.getUint32(i,!0)),i+=4;var d=this.fontDataView.getUint32(i,!0),h=[];i+=4;for(var p=0;p<d;++p)h.push(this.fontDataView.getUint32(i,!0)),i+=4;r=this.scene.getPolygonGenerator().GeneratePolygon(t.charCodeAt(0),s,l,h)}}var m=e.angle,v=Math.sin(m),y=Math.cos(m),g=[e.x,e.y];e.x+=n.advance*e.size*e.spacing*y,e.y+=n.advance*e.size*e.spacing*v;var b=[e.size,e.size*e.height];return 0==r?null:new o.a(r,g,e.material,[0,0],m,b)}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){t.exports=!n(94)&&!n(58)((function(){return 7!=Object.defineProperty(n(388)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(57),o=n(89),i=n(229),a=n(389),s=n(95).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(141),o=n(143),i=n(321)(!1),a=n(390)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){var r=n(95),o=n(59),i=n(230);t.exports=n(94)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),s=a.length,c=0;s>c;)r.f(t,n=a[c++],e[n]);return t}},function(t,e,n){var r=n(143),o=n(233).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(r(t))}},function(t,e,n){"use strict";var r=n(94),o=n(230),i=n(322),a=n(264),s=n(113),c=n(263),u=Object.assign;t.exports=!u||n(58)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r}))?function(t,e){for(var n=s(t),u=arguments.length,l=1,f=i.f,d=a.f;u>l;)for(var h,p=c(arguments[l++]),m=f?o(p).concat(f(p)):o(p),v=m.length,y=0;v>y;)h=m[y++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:u},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(156),o=n(60),i=n(474),a=[].slice,s={},c=function(t,e,n){if(!(e in s)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(e,r.length,r):i(e,r,t)};return o(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(57).parseInt,o=n(250).trim,i=n(394),a=/^[-+]?0[xX]/;t.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(t,e){var n=o(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(57).parseFloat,o=n(250).trim;t.exports=1/r(n(394)+"-0")!=-1/0?function(t){var e=o(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(174);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(60),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){"use strict";var r=n(232),o=n(227),i=n(249),a={};n(142)(a,n(70)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(653);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(156),o=n(113),i=n(263),a=n(79);t.exports=function(t,e,n,s,c){r(e);var u=o(t),l=i(u),f=a(u.length),d=c?f-1:0,h=c?-1:1;if(n<2)for(;;){if(d in l){s=l[d],d+=h;break}if(d+=h,c?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;c?d>=0:f>d;d+=h)d in l&&(s=e(s,l[d],d,u));return s}},function(t,e,n){"use strict";var r=n(113),o=n(231),i=n(79);t.exports=[].copyWithin||function(t,e){var n=r(this),a=i(n.length),s=o(t,a),c=o(e,a),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?a:o(u,a))-c,a-s),f=1;for(c<s&&s<c+l&&(f=-1,c+=l-1,s+=l-1);l-- >0;)c in n?n[s]=n[c]:delete n[s],s+=f,c+=f;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(409);n(11)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){n(94)&&"g"!=/./g.flags&&n(95).f(RegExp.prototype,"flags",{configurable:!0,get:n(325)})},function(t,e,n){"use strict";var r,o,i,a,s=n(229),c=n(57),u=n(155),l=n(265),f=n(11),d=n(60),h=n(156),p=n(253),m=n(328),v=n(266),y=n(411).set,g=n(673)(),b=n(489),w=n(674),_=n(329),O=n(490),S=c.TypeError,x=c.process,C=x&&x.versions,E=C&&C.v8||"",k=c.Promise,T="process"==l(x),P=function(){},j=o=b.f,A=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n(70)("species")]=function(t){t(P,P)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==E.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(t){}}(),M=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},L=function(t,e){if(!t._n){t._n=!0;var n=t._c;g((function(){for(var r=t._v,o=1==t._s,i=0,a=function(e){var n,i,a,s=o?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(o||(2==t._h&&R(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?u(S("Promise-chain cycle")):(i=M(n))?i.call(n,c,u):c(n)):u(r)}catch(t){l&&!a&&l.exit(),u(t)}};n.length>i;)a(n[i++]);t._c=[],t._n=!1,e&&!t._h&&I(t)}))}},I=function(t){y.call(c,(function(){var e,n,r,o=t._v,i=D(t);if(i&&(e=w((function(){T?x.emit("unhandledRejection",o,t):(n=c.onunhandledrejection)?n({promise:t,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=T||D(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(t){y.call(c,(function(){var e;T?x.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})}))},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),L(e,!0))},B=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=M(t))?g((function(){var r={_w:n,_d:!1};try{e.call(t,u(B,r,1),u(N,r,1))}catch(t){N.call(r,t)}})):(n._v=t,n._s=1,L(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};A||(k=function(t){p(this,k,"Promise","_h"),h(t),r.call(this);try{t(u(B,this,1),u(N,this,1))}catch(t){N.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(254)(k.prototype,{then:function(t,e){var n=j(v(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=u(B,t,1),this.reject=u(N,t,1)},b.f=j=function(t){return t===k||t===a?new i(t):o(t)}),f(f.G+f.W+f.F*!A,{Promise:k}),n(249)(k,"Promise"),n(252)("Promise"),a=n(89).Promise,f(f.S+f.F*!A,"Promise",{reject:function(t){var e=j(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(t){return O(s&&this===a?k:this,t)}}),f(f.S+f.F*!(A&&n(324)((function(t){k.all(t).catch(P)}))),"Promise",{all:function(t){var e=this,n=j(e),r=n.resolve,o=n.reject,i=w((function(){var n=[],i=0,a=1;m(t,!1,(function(t){var s=i++,c=!1;n.push(void 0),a++,e.resolve(t).then((function(t){c||(c=!0,n[s]=t,--a||r(n))}),o)})),--a||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=j(e),r=n.reject,o=w((function(){m(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(t,e,n){"use strict";var r=n(156);function o(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new o(t)}},function(t,e,n){var r=n(59),o=n(60),i=n(489);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(95).f,o=n(232),i=n(254),a=n(155),s=n(253),c=n(328),u=n(400),l=n(485),f=n(252),d=n(94),h=n(189).fastKey,p=n(236),m=d?"_s":"size",v=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var l=t((function(t,r){s(t,l,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[m]=0,null!=r&&c(r,n,t[u],t)}));return i(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var n=p(this,e),r=v(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[m]--}return!!r},forEach:function(t){p(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(p(this,e),t)}}),d&&r(l.prototype,"size",{get:function(){return p(this,e)[m]}}),l},def:function(t,e,n){var r,o,i=v(t,e);return i?i.v=n:(t._l=i={i:o=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[m]++,"F"!==o&&(t._i[o]=i)),t},getEntry:v,setStrong:function(t,e,n){u(t,e,(function(t,n){this._t=p(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(254),o=n(189).getWeak,i=n(59),a=n(60),s=n(253),c=n(328),u=n(160),l=n(141),f=n(236),d=u(5),h=u(6),p=0,m=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},y=function(t,e){return d(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var n=y(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,i){var u=t((function(t,r){s(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=r&&c(r,n,t[i],t)}));return r(u.prototype,{delete:function(t){if(!a(t))return!1;var n=o(t);return!0===n?m(f(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=o(t);return!0===n?m(f(this,e)).has(t):n&&l(n,this._i)}}),u},def:function(t,e,n){var r=o(i(e),!0);return!0===r?m(t).set(e,n):r[t._i]=n,t},ufstore:m}},function(t,e,n){var r=n(157),o=n(79);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(233),o=n(322),i=n(59),a=n(57).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(i(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(79),o=n(396),i=n(175);t.exports=function(t,e,n,a){var s=String(i(t)),c=s.length,u=void 0===n?" ":String(n),l=r(e);if(l<=c||""==u)return s;var f=l-c,d=o.call(u,Math.ceil(f/u.length));return d.length>f&&(d=d.slice(0,f)),a?d+s:s+d}},function(t,e,n){var r=n(94),o=n(230),i=n(143),a=n(264).f;t.exports=function(t){return function(e){for(var n,s=i(e),c=o(s),u=c.length,l=0,f=[];u>l;)n=c[l++],r&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";n(340)},function(t,e,n){"use strict";n(341)},function(t,e,n){"use strict";n(342)},function(t,e,n){"use strict";n(343)},function(t,e,n){"use strict";n(344)},function(t,e,n){"use strict";n(345)},function(t,e,n){"use strict";n(346)},function(t,e,n){"use strict";n(347)},function(t,e,n){"use strict";n(348)},function(t,e,n){"use strict";n(349)},function(t,e,n){"use strict";n(350)},function(t,e,n){"use strict";n(351)},function(t,e,n){"use strict";n(352)},function(t,e,n){"use strict";n(353)},function(t,e,n){"use strict";n(354)},function(t,e,n){"use strict";n(355)},function(t,e,n){"use strict";n(356)},function(t,e,n){"use strict";n(357)},function(t,e,n){"use strict";n(358)},function(t,e,n){"use strict";n(359)},function(t,e,n){"use strict";n(360)},function(t,e,n){"use strict";n(361)},function(t,e,n){"use strict";n(362)},function(t,e,n){"use strict";n(363)},function(t,e,n){"use strict";n(364)},function(t,e,n){"use strict";n(365)},function(t,e,n){"use strict";n(366)},function(t,e,n){"use strict";n(367)},function(t,e,n){"use strict";n(368)},function(t,e,n){"use strict";n(369)},function(t,e,n){"use strict";n(370)},function(t,e,n){"use strict";n(371)},function(t,e,n){"use strict";n(372)},function(t,e,n){"use strict";n(373)},function(t,e,n){"use strict";n(374)},function(t,e,n){"use strict";n(375)},function(t,e,n){"use strict";n(376)},function(t,e,n){"use strict";n(377)},function(t,e,n){"use strict";n(378)},function(t,e,n){"use strict";n(379)},function(t,e,n){"use strict";n(380)},function(t,e,n){(function(e,n,r){t.exports=function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return o(e[a][1][t]||t)}),u,u.exports,t,e,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";var r=t("./utils"),o=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,o,a,s,c,u,l=[],f=0,d=t.length,h=d,p="string"!==r.getTypeOf(t);f<t.length;)h=d-f,o=p?(e=t[f++],n=f<d?t[f++]:0,f<d?t[f++]:0):(e=t.charCodeAt(f++),n=f<d?t.charCodeAt(f++):0,f<d?t.charCodeAt(f++):0),a=e>>2,s=(3&e)<<4|n>>4,c=1<h?(15&n)<<2|o>>6:64,u=2<h?63&o:64,l.push(i.charAt(a)+i.charAt(s)+i.charAt(c)+i.charAt(u));return l.join("")},n.decode=function(t){var e,n,r,a,s,c,u=0,l=0,f="data:";if(t.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var d,h=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===i.charAt(64)&&h--,t.charAt(t.length-2)===i.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=o.uint8array?new Uint8Array(0|h):new Array(0|h);u<t.length;)e=i.indexOf(t.charAt(u++))<<2|(a=i.indexOf(t.charAt(u++)))>>4,n=(15&a)<<4|(s=i.indexOf(t.charAt(u++)))>>2,r=(3&s)<<6|(c=i.indexOf(t.charAt(u++))),d[l++]=e,64!==s&&(d[l++]=n),64!==c&&(d[l++]=r);return d}},{"./support":30,"./utils":32}],2:[function(t,e,n){"use strict";var r=t("./external"),o=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function s(t,e,n,r,o){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=o}s.prototype={getContentWorker:function(){var t=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,n){return t.pipe(new i).pipe(new a("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){"use strict";var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(t){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){"use strict";var r=t("./utils"),o=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==r.getTypeOf(t)?function(t,e,n,r){var i=o,a=0+n;t^=-1;for(var s=0;s<a;s++)t=t>>>8^i[255&(t^e[s])];return-1^t}(0|e,t,t.length):function(t,e,n,r){var i=o,a=0+n;t^=-1;for(var s=0;s<a;s++)t=t>>>8^i[255&(t^e.charCodeAt(s))];return-1^t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:r}},{lie:37}],7:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=t("pako"),i=t("./utils"),a=t("./stream/GenericWorker"),s=r?"uint8array":"array";function c(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",i.inherits(c,a),c.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(s,t.data),!1)},c.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new c("Deflate",t)},n.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){"use strict";function r(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r}function o(t,e,n,o,a,l){var f,d,h=t.file,p=t.compression,m=l!==s.utf8encode,v=i.transformTo("string",l(h.name)),y=i.transformTo("string",s.utf8encode(h.name)),g=h.comment,b=i.transformTo("string",l(g)),w=i.transformTo("string",s.utf8encode(g)),_=y.length!==h.name.length,O=w.length!==g.length,S="",x="",C="",E=h.dir,k=h.date,T={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(T.crc32=t.crc32,T.compressedSize=t.compressedSize,T.uncompressedSize=t.uncompressedSize);var P=0;e&&(P|=8),m||!_&&!O||(P|=2048);var j=0,A=0;E&&(j|=16),"UNIX"===a?(A=798,j|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(h.unixPermissions,E)):(A=20,j|=function(t){return 63&(t||0)}(h.dosPermissions)),f=k.getUTCHours(),f<<=6,f|=k.getUTCMinutes(),f<<=5,f|=k.getUTCSeconds()/2,d=k.getUTCFullYear()-1980,d<<=4,d|=k.getUTCMonth()+1,d<<=5,d|=k.getUTCDate(),_&&(x=r(1,1)+r(c(v),4)+y,S+="up"+r(x.length,2)+x),O&&(C=r(1,1)+r(c(b),4)+w,S+="uc"+r(C.length,2)+C);var M="";return M+="\n\0",M+=r(P,2),M+=p.magic,M+=r(f,2),M+=r(d,2),M+=r(T.crc32,4),M+=r(T.compressedSize,4),M+=r(T.uncompressedSize,4),M+=r(v.length,2),M+=r(S.length,2),{fileRecord:u.LOCAL_FILE_HEADER+M+v+S,dirRecord:u.CENTRAL_FILE_HEADER+r(A,2)+M+r(b.length,2)+"\0\0\0\0"+r(j,4)+r(o,4)+v+S+b}}var i=t("../utils"),a=t("../stream/GenericWorker"),s=t("../utf8"),c=t("../crc32"),u=t("../signature");function l(t,e,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(l,a),l.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,a.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=o(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=o(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,o=function(t,e,n,o,a){var s=i.transformTo("string",a(o));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(t,2)+r(t,2)+r(e,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:o,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!a.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},l.prototype.lock=function(){a.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){"use strict";var r=t("../compressions"),o=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var i=new o(e.streamFiles,n,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,n){a++;var o=function(t,e){var n=t||e,o=r[n];if(!o)throw new Error(n+" is not a valid compression method !");return o}(n.options.compression,e.compression),s=n.options.compressionOptions||e.compressionOptions||{},c=n.dir,u=n.date;n._compressWorker(o,s).withStreamInfo("file",{name:t,dir:c,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(i)})),i.entriesCount=a}catch(t){i.error(t)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.7.1",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=t("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){"use strict";var r=t("./utils"),o=t("./external"),i=t("./utf8"),a=t("./zipEntries"),s=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function u(t){return new o.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new s);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=r.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),c.isNode&&c.isStream(t)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new a(e);return n.load(t),n})).then((function(t){var n=[o.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var i=0;i<r.length;i++)n.push(u(r[i]));return o.Promise.all(n)})).then((function(t){for(var r=t.shift(),o=r.files,i=0;i<o.length;i++){var a=o[i];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){"use strict";var r=t("../utils"),o=t("../stream/GenericWorker");function i(t,e){o.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}r.inherits(i,o),i.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){"use strict";var r=t("readable-stream").Readable;function o(t,e,n){r.call(this,e),this._helper=t;var o=this;t.on("data",(function(t,e){o.push(t)||o._helper.pause(),n&&n(e)})).on("error",(function(t){o.emit("error",t)})).on("end",(function(){o.push(null)}))}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},e.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,r){"use strict";n.exports={isNode:void 0!==e,newBufferFrom:function(t,n){if(e.from&&e.from!==Uint8Array.from)return e.from(t,n);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new e(t,n)},allocBuffer:function(t){if(e.alloc)return e.alloc(t);var n=new e(t);return n.fill(0),n},isBuffer:function(t){return e.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){"use strict";function r(t,e,n){var r,o=i.getTypeOf(e),s=i.extend(n||{},c);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=m(t)),s.createFolders&&(r=p(t))&&v.call(this,r,!0);var f,y="string"===o&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!y),(e instanceof u&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",o="string"),f=e instanceof u||e instanceof a?e:d.isNode&&d.isStream(e)?new h(t,e):i.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var g=new l(t,f,s);this.files[t]=g}var o=t("./utf8"),i=t("./utils"),a=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),c=t("./defaults"),u=t("./compressedObject"),l=t("./zipObject"),f=t("./generate"),d=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},v=function(t,e){return e=void 0!==e?e:c.createFolders,t=m(t),this.files[t]||r.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function y(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var g={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r)},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,r.call(this,t,e,n),this;if(y(t)){var o=t;return this.filter((function(t,e){return!e.dir&&o.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null},folder:function(t){if(!t)return this;if(y(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=v.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=i.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=f.generateWorker(this,n,r)}catch(t){(e=new a("error")).error(t)}return new s(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=g},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){"use strict";var r=t("./DataReader");function o(t){r.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(o,r),o.prototype.byteAt=function(t){return this.data[this.zero+t]},o.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),o=t.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===e&&this.data[i+1]===n&&this.data[i+2]===r&&this.data[i+3]===o)return i-this.zero;return-1},o.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),o=t.charCodeAt(3),i=this.readData(4);return e===i[0]&&n===i[1]&&r===i[2]&&o===i[3]},o.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){"use strict";var r=t("../utils");function o(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=o},{"../utils":32}],19:[function(t,e,n){"use strict";var r=t("./Uint8ArrayReader");function o(t){r.call(this,t)}t("../utils").inherits(o,r),o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){"use strict";var r=t("./DataReader");function o(t){r.call(this,t)}t("../utils").inherits(o,r),o.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},o.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){"use strict";var r=t("./ArrayReader");function o(t){r.call(this,t)}t("../utils").inherits(o,r),o.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){"use strict";var r=t("../utils"),o=t("../support"),i=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");e.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||o.uint8array?"nodebuffer"===e?new s(t):o.uint8array?new c(r.transformTo("uint8array",t)):new i(r.transformTo("array",t)):new a(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){"use strict";var r=t("./GenericWorker"),o=t("../utils");function i(t){r.call(this,"ConvertWorker to "+t),this.destType=t}o.inherits(i,r),i.prototype.processChunk=function(t){this.push({data:o.transformTo(this.destType,t.data),meta:t.meta})},e.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){"use strict";var r=t("./GenericWorker"),o=t("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,r),i.prototype.processChunk=function(t){this.streamInfo.crc32=o(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){"use strict";var r=t("../utils"),o=t("./GenericWorker");function i(t){o.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}r.inherits(i,o),i.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}o.prototype.processChunk.call(this,t)},e.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){"use strict";var r=t("../utils"),o=t("./GenericWorker");function i(t){o.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=r.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){"use strict";function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=r},{}],29:[function(t,n,r){"use strict";var o=t("../utils"),i=t("./ConvertWorker"),a=t("./GenericWorker"),s=t("../base64"),c=t("../support"),u=t("../external"),l=null;if(c.nodestream)try{l=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function f(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,o.checkSupport(r),this._worker=t.pipe(new i(r)),t.lock()}catch(t){this._worker=new a("error"),this._worker.error(t)}}f.prototype={accumulate:function(t){return function(t,n){return new u.Promise((function(r,i){var a=[],c=t._internalType,u=t._outputType,l=t._mimeType;t.on("data",(function(t,e){a.push(t),n&&n(e)})).on("error",(function(t){a=[],i(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return o.newBlob(o.transformTo("arraybuffer",e),n);case"base64":return s.encode(e);default:return o.transformTo(t,e)}}(u,function(t,n){var r,o=0,i=null,a=0;for(r=0;r<n.length;r++)a+=n[r].length;switch(t){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(i=new Uint8Array(a),r=0;r<n.length;r++)i.set(n[r],o),o+=n[r].length;return i;case"nodebuffer":return e.concat(n);default:throw new Error("concat : unsupported type '"+t+"'")}}(c,a),l);r(t)}catch(t){i(t)}a=[]})).resume()}))}(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){o.delay(e,arguments,n)})),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(o.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==e,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=0===new Blob([o],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),r.blob=0===i.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){"use strict";for(var r=t("./utils"),o=t("./support"),i=t("./nodejsUtils"),a=t("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function l(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(t){return o.nodebuffer?i.newBufferFrom(t,"utf-8"):function(t){var e,n,r,i,a,s=t.length,c=0;for(i=0;i<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=o.uint8array?new Uint8Array(c):new Array(c),i=a=0;a<c;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e}(t)},n.utf8decode=function(t){return o.nodebuffer?r.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,o,i,a=t.length,c=new Array(2*a);for(e=n=0;e<a;)if((o=t[e++])<128)c[n++]=o;else if(4<(i=s[o]))c[n++]=65533,e+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&e<a;)o=o<<6|63&t[e++],i--;1<i?c[n++]=65533:o<65536?c[n++]=o:(o-=65536,c[n++]=55296|o>>10&1023,c[n++]=56320|1023&o)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),r.applyFromCharCode(c)}(t=r.transformTo(o.uint8array?"uint8array":"array",t))},r.inherits(u,a),u.prototype.processChunk=function(t){var e=r.transformTo(o.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var i=e;(e=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),e.set(i,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var a=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}(e),c=e;a!==e.length&&(o.uint8array?(c=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(c=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:n.utf8decode(c),meta:t.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(l,a),l.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){"use strict";var r=t("./support"),o=t("./base64"),i=t("./nodejsUtils"),a=t("set-immediate-shim"),s=t("./external");function c(t){return t}function u(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(t,e,n){var r=[],o=0,i=t.length;if(i<=n)return String.fromCharCode.apply(null,t);for(;o<i;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(o,Math.min(o+n,i)))):r.push(String.fromCharCode.apply(null,t.subarray(o,Math.min(o+n,i)))),o+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,r=n.getTypeOf(t),o=!0;if("uint8array"===r?o=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(o=l.applyCanBeUsed.nodebuffer),o)for(;1<e;)try{return l.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return l.stringifyByChar(t)}function d(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=f;var h={};h.string={string:c,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return h.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,i.allocBuffer(t.length))}},h.array={string:f,array:c,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return i.newBufferFrom(t)}},h.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:c,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return i.newBufferFrom(new Uint8Array(t))}},h.uint8array={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:c,nodebuffer:function(t){return i.newBufferFrom(t)}},h.nodebuffer={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return h.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:c},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var r=n.getTypeOf(e);return h[r][t](e)},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":r.nodebuffer&&i.isBuffer(t)?"nodebuffer":r.uint8array&&t instanceof Uint8Array?"uint8array":r.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!r[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},n.delay=function(t,e,n){a((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,i,a,c){return s.Promise.resolve(e).then((function(t){return r.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(e){var l=n.getTypeOf(e);return l?("arraybuffer"===l?e=n.transformTo("uint8array",e):"string"===l&&(c?e=o.decode(e):i&&!0!==a&&(e=function(t){return u(t,r.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./signature"),a=t("./zipEntry"),s=(t("./utf8"),t("./support"));function c(t){this.files=[],this.loadOptions=t}c.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(e)+", expected "+o.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",n=o.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(0<r)this.isSignature(e,i.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=r(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),c=t("./compressions"),u=t("./support");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in c)if(c.hasOwnProperty(e)&&c[e].magic===t)return c[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,o=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<o;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r};t.setIndex(o)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=o.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=r(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=r(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){"use strict";function r(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var o=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),a=t("./utf8"),s=t("./compressedObject"),c=t("./stream/GenericWorker");r.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(e=e.pipe(new a.Utf8EncodeWorker)),!i&&r&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new c("error")).error(t)}return new o(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof s&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof c?this._data:new i(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<u.length;f++)r.prototype[u[f]]=l;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,r){(function(t){"use strict";var n,r,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var c=new t.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var t,e;r=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}r=!1}e.exports=function(t){1!==u.push(t)||r||n()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){"use strict";var r=t("immediate");function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==o&&h(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(t,e,n){r((function(){var r;try{r=e(n)}catch(r){return i.reject(t,r)}r===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,r)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function h(t,e){var n=!1;function r(e){n||(n=!0,i.reject(t,e))}function o(e){n||(n=!0,i.resolve(t,e))}var a=p((function(){e(o,r)}));"error"===a.status&&r(a.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?f(n,this.state===s?t:e,this.outcome):this.queue.push(new l(n,t,e)),n},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){i.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},i.resolve=function(t,e){var n=p(d,e);if("error"===n.status)return i.reject(t,n.value);var r=n.value;if(r)h(t,r);else{t.state=s,t.outcome=e;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:i.resolve(new this(o),t)},u.reject=function(t){var e=new this(o);return i.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(o);++c<n;)l(t[c],c);return u;function l(t,o){e.resolve(t).then((function(t){a[o]=t,++s!==n||r||(r=!0,i.resolve(u,a))}),(function(t){r||(r=!0,i.reject(u,t))}))}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r,a=-1,s=new this(o);++a<e;)r=t[a],this.resolve(r).then((function(t){n||(n=!0,i.resolve(s,t))}),(function(t){n||(n=!0,i.reject(s,t))}));return s}},{immediate:36}],38:[function(t,e,n){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){"use strict";var r=t("./zlib/deflate"),o=t("./utils/common"),i=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),c=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?i.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=r.deflateSetDictionary(this.strm,l)))throw new Error(a[n]);this._dict_set=!0}}function l(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}u.prototype.push=function(t,e){var n,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=i.string2buf(t):"[object ArrayBuffer]"===c.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(i.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(s.avail_out=0))},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=u,n.deflate=l,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){"use strict";var r=t("./zlib/inflate"),o=t("./utils/common"),i=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),c=t("./zlib/zstream"),u=t("./zlib/gzheader"),l=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function d(t,e){var n=new f(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(t,e){var n,s,c,u,f,d,h=this.strm,p=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?h.input=i.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new o.Buf8(p),h.next_out=0,h.avail_out=p),(n=r.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(d="string"==typeof m?i.string2buf(m):"[object ArrayBuffer]"===l.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,d)),n===a.Z_BUF_ERROR&&!0===v&&(n=a.Z_OK,v=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&n!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(c=i.utf8border(h.output,h.next_out),u=h.next_out-c,f=i.buf2string(h.output,c),h.next_out=u,h.avail_out=p-u,u&&o.arraySet(h.output,h.output,c,u,0),this.onData(f)):this.onData(o.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(v=!0)}while((0<h.avail_in||0===h.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(h.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=f,n.inflate=d,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,r,o){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),o);else for(var i=0;i<r;i++)t[o+i]=e[n+i]},flattenChunks:function(t){var e,n,r,o,i,a;for(e=r=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),e=o=0,n=t.length;e<n;e++)i=t[e],a.set(i,o),o+=i.length;return a}},i={arraySet:function(t,e,n,r,o){for(var i=0;i<r;i++)t[o+i]=e[n+i]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],42:[function(t,e,n){"use strict";var r=t("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){i=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(t,e){if(e<65537&&(t.subarray&&i||!t.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,n.string2buf=function(t){var e,n,o,i,a,s=t.length,c=0;for(i=0;i<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(c),i=a=0;a<c;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e},n.buf2binstring=function(t){return c(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,o=e.length;n<o;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,o,i,s=e||t.length,u=new Array(2*s);for(n=r=0;n<s;)if((o=t[n++])<128)u[r++]=o;else if(4<(i=a[o]))u[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&n<s;)o=o<<6|63&t[n++],i--;1<i?u[r++]=65533:o<65536?u[r++]=o:(o-=65536,u[r++]=55296|o>>10&1023,u[r++]=56320|1023&o)}return c(u,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var o=65535&t|0,i=t>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;i=i+(o=o+e[r++]|0)|0,--a;);o%=65521,i%=65521}return o|i<<16|0}},{}],44:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,o){var i=r,a=o+n;t^=-1;for(var s=o;s<a;s++)t=t>>>8^i[255&(t^e[s])];return-1^t}},{}],46:[function(t,e,n){"use strict";var r,o=t("../utils/common"),i=t("./trees"),a=t("./adler32"),s=t("./crc32"),c=t("./messages"),u=-2,l=258,f=262,d=113;function h(t,e){return t.msg=c[e],e}function p(t){return(t<<1)-(4<t?9:0)}function m(t){for(var e=t.length;0<=--e;)t[e]=0}function v(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(o.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function y(t,e){i._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,v(t.strm)}function g(t,e){t.pending_buf[t.pending++]=e}function b(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function w(t,e){var n,r,o=t.max_chain_length,i=t.strstart,a=t.prev_length,s=t.nice_match,c=t.strstart>t.w_size-f?t.strstart-(t.w_size-f):0,u=t.window,d=t.w_mask,h=t.prev,p=t.strstart+l,m=u[i+a-1],v=u[i+a];t.prev_length>=t.good_match&&(o>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(n=e)+a]===v&&u[n+a-1]===m&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do{}while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<p);if(r=l-(p-i),i=p-l,a<r){if(t.match_start=e,s<=(a=r))break;m=u[i+a-1],v=u[i+a]}}}while((e=h[e&d])>c&&0!=--o);return a<=t.lookahead?a:t.lookahead}function _(t){var e,n,r,i,c,u,l,d,h,p,m=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=m+(m-f)){for(o.arraySet(t.window,t.window,m,m,0),t.match_start-=m,t.strstart-=m,t.block_start-=m,e=n=t.hash_size;r=t.head[--e],t.head[e]=m<=r?r-m:0,--n;);for(e=n=m;r=t.prev[--e],t.prev[e]=m<=r?r-m:0,--n;);i+=m}if(0===t.strm.avail_in)break;if(u=t.strm,l=t.window,d=t.strstart+t.lookahead,p=void 0,(h=i)<(p=u.avail_in)&&(p=h),n=0===p?0:(u.avail_in-=p,o.arraySet(l,u.input,u.next_in,p,d),1===u.state.wrap?u.adler=a(u.adler,l,p,d):2===u.state.wrap&&(u.adler=s(u.adler,l,p,d)),u.next_in+=p,u.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=3)for(c=t.strstart-t.insert,t.ins_h=t.window[c],t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+3-1])&t.hash_mask,t.prev[c&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=c,c++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<f&&0!==t.strm.avail_in)}function O(t,e){for(var n,r;;){if(t.lookahead<f){if(_(t),t.lookahead<f&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-f&&(t.match_length=w(t,n)),t.match_length>=3)if(r=i._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(y(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(y(t,!1),0===t.strm.avail_out)?1:2}function S(t,e){for(var n,r,o;;){if(t.lookahead<f){if(_(t),t.lookahead<f&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-f&&(t.match_length=w(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(o=t.strstart+t.lookahead-3,r=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(y(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=i._tr_tally(t,0,t.window[t.strstart-1]))&&y(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(y(t,!1),0===t.strm.avail_out)?1:2}function x(t,e,n,r,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=o}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(1146),this.dyn_dtree=new o.Buf16(122),this.bl_tree=new o.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(16),this.heap=new o.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:d,t.adler=2===e.wrap?0:1,e.last_flush=0,i._tr_init(e),0):h(t,u)}function k(t){var e=E(t);return 0===e&&function(t){t.window_size=2*t.w_size,m(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function T(t,e,n,r,i,a){if(!t)return u;var s=1;if(-1===e&&(e=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),i<1||9<i||8!==n||r<8||15<r||e<0||9<e||a<0||4<a)return h(t,u);8===r&&(r=9);var c=new C;return(t.state=c).strm=t,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=i+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new o.Buf8(2*c.w_size),c.head=new o.Buf16(c.hash_size),c.prev=new o.Buf16(c.w_size),c.lit_bufsize=1<<i+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new o.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=a,c.method=n,k(t)}r=[new x(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,y(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-f&&(y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(y(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(y(t,!1),t.strm.avail_out),1)})),new x(4,4,8,4,O),new x(4,5,16,8,O),new x(4,6,32,32,O),new x(4,4,16,16,S),new x(8,16,32,32,S),new x(8,16,128,128,S),new x(8,32,128,256,S),new x(32,128,258,1024,S),new x(32,258,258,4096,S)],n.deflateInit=function(t,e){return T(t,e,8,15,8,0)},n.deflateInit2=T,n.deflateReset=k,n.deflateResetKeep=E,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,0):u},n.deflate=function(t,e){var n,o,a,c;if(!t||!t.state||5<e||e<0)return t?h(t,u):u;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||666===o.status&&4!==e)return h(t,0===t.avail_out?-5:u);if(o.strm=t,n=o.last_flush,o.last_flush=e,42===o.status)if(2===o.wrap)t.adler=0,g(o,31),g(o,139),g(o,8),o.gzhead?(g(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),g(o,255&o.gzhead.time),g(o,o.gzhead.time>>8&255),g(o,o.gzhead.time>>16&255),g(o,o.gzhead.time>>24&255),g(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),g(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(g(o,255&o.gzhead.extra.length),g(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=s(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(g(o,0),g(o,0),g(o,0),g(o,0),g(o,0),g(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),g(o,3),o.status=d);else{var f=8+(o.w_bits-8<<4)<<8;f|=(2<=o.strategy||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(f|=32),f+=31-f%31,o.status=d,b(o,f),0!==o.strstart&&(b(o,t.adler>>>16),b(o,65535&t.adler)),t.adler=1}if(69===o.status)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),v(t),a=o.pending,o.pending!==o.pending_buf_size));)g(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),v(t),a=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,g(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),0===c&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),v(t),a=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,g(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),0===c&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&v(t),o.pending+2<=o.pending_buf_size&&(g(o,255&t.adler),g(o,t.adler>>8&255),t.adler=0,o.status=d)):o.status=d),0!==o.pending){if(v(t),0===t.avail_out)return o.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(n)&&4!==e)return h(t,-5);if(666===o.status&&0!==t.avail_in)return h(t,-5);if(0!==t.avail_in||0!==o.lookahead||0!==e&&666!==o.status){var w=2===o.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(y(t,!1),0===t.strm.avail_out)?1:2}(o,e):3===o.strategy?function(t,e){for(var n,r,o,a,s=t.window;;){if(t.lookahead<=l){if(_(t),t.lookahead<=l&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(r=s[o=t.strstart-1])===s[++o]&&r===s[++o]&&r===s[++o]){a=t.strstart+l;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<a);t.match_length=l-(a-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=i._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(y(t,!1),0===t.strm.avail_out)?1:2}(o,e):r[o.level].func(o,e);if(3!==w&&4!==w||(o.status=666),1===w||3===w)return 0===t.avail_out&&(o.last_flush=-1),0;if(2===w&&(1===e?i._tr_align(o):5!==e&&(i._tr_stored_block(o,0,0,!1),3===e&&(m(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),v(t),0===t.avail_out))return o.last_flush=-1,0}return 4!==e?0:o.wrap<=0?1:(2===o.wrap?(g(o,255&t.adler),g(o,t.adler>>8&255),g(o,t.adler>>16&255),g(o,t.adler>>24&255),g(o,255&t.total_in),g(o,t.total_in>>8&255),g(o,t.total_in>>16&255),g(o,t.total_in>>24&255)):(b(o,t.adler>>>16),b(o,65535&t.adler)),v(t),0<o.wrap&&(o.wrap=-o.wrap),0!==o.pending?0:1)},n.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==d&&666!==e?h(t,u):(t.state=null,e===d?h(t,-3):0):u},n.deflateSetDictionary=function(t,e){var n,r,i,s,c,l,f,d,h=e.length;if(!t||!t.state)return u;if(2===(s=(n=t.state).wrap)||1===s&&42!==n.status||n.lookahead)return u;for(1===s&&(t.adler=a(t.adler,e,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new o.Buf8(n.w_size),o.arraySet(d,e,h-n.w_size,n.w_size,0),e=d,h=n.w_size),c=t.avail_in,l=t.next_in,f=t.input,t.avail_in=h,t.next_in=0,t.input=e,_(n);n.lookahead>=3;){for(r=n.strstart,i=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--i;);n.strstart=r,n.lookahead=2,_(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=l,t.input=f,t.avail_in=c,n.wrap=s,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,o,i,a,s,c,u,l,f,d,h,p,m,v,y,g,b,w,_,O,S,x,C,E;n=t.state,r=t.next_in,C=t.input,o=r+(t.avail_in-5),i=t.next_out,E=t.output,a=i-(e-t.avail_out),s=i+(t.avail_out-257),c=n.dmax,u=n.wsize,l=n.whave,f=n.wnext,d=n.window,h=n.hold,p=n.bits,m=n.lencode,v=n.distcode,y=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;t:do{p<15&&(h+=C[r++]<<p,p+=8,h+=C[r++]<<p,p+=8),b=m[h&y];e:for(;;){if(h>>>=w=b>>>24,p-=w,0==(w=b>>>16&255))E[i++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(h&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=65535&b,(w&=15)&&(p<w&&(h+=C[r++]<<p,p+=8),_+=h&(1<<w)-1,h>>>=w,p-=w),p<15&&(h+=C[r++]<<p,p+=8,h+=C[r++]<<p,p+=8),b=v[h&g];n:for(;;){if(h>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=v[(65535&b)+(h&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(O=65535&b,p<(w&=15)&&(h+=C[r++]<<p,(p+=8)<w&&(h+=C[r++]<<p,p+=8)),c<(O+=h&(1<<w)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=w,p-=w,(w=i-a)<O){if(l<(w=O-w)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(x=d,(S=0)===f){if(S+=u-w,w<_){for(_-=w;E[i++]=d[S++],--w;);S=i-O,x=E}}else if(f<w){if(S+=u+f-w,(w-=f)<_){for(_-=w;E[i++]=d[S++],--w;);if(S=0,f<_){for(_-=w=f;E[i++]=d[S++],--w;);S=i-O,x=E}}}else if(S+=f-w,w<_){for(_-=w;E[i++]=d[S++],--w;);S=i-O,x=E}for(;2<_;)E[i++]=x[S++],E[i++]=x[S++],E[i++]=x[S++],_-=3;_&&(E[i++]=x[S++],1<_&&(E[i++]=x[S++]))}else{for(S=i-O;E[i++]=E[S++],E[i++]=E[S++],E[i++]=E[S++],2<(_-=3););_&&(E[i++]=E[S++],1<_&&(E[i++]=E[S++]))}break}}break}}while(r<o&&i<s);r-=_=p>>3,h&=(1<<(p-=_<<3))-1,t.next_in=r,t.next_out=i,t.avail_in=r<o?o-r+5:5-(r-o),t.avail_out=i<s?s-i+257:257-(i-s),n.hold=h,n.bits=p}},{}],49:[function(t,e,n){"use strict";var r=t("../utils/common"),o=t("./adler32"),i=t("./crc32"),a=t("./inffast"),s=t("./inftrees"),c=-2;function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):c}function d(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,f(t)):c}function h(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?c:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,d(t))):c}function p(t,e){var n,r;return t?(r=new l,(t.state=r).window=null,0!==(n=h(t,e))&&(t.state=null),n):c}var m,v,y=!0;function g(t){if(y){var e;for(m=new r.Buf32(512),v=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,v,0,t.work,{bits:5}),y=!1}t.lencode=m,t.lenbits=9,t.distcode=v,t.distbits=5}function b(t,e,n,o){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),o>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(o<(i=a.wsize-a.wnext)&&(i=o),r.arraySet(a.window,e,n-o,i,a.wnext),(o-=i)?(r.arraySet(a.window,e,n-o,o,0),a.wnext=o,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}n.inflateReset=d,n.inflateReset2=h,n.inflateResetKeep=f,n.inflateInit=function(t){return p(t,15)},n.inflateInit2=p,n.inflate=function(t,e){var n,l,f,d,h,p,m,v,y,w,_,O,S,x,C,E,k,T,P,j,A,M,L,I,D=0,R=new r.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;12===(n=t.state).mode&&(n.mode=13),h=t.next_out,f=t.output,m=t.avail_out,d=t.next_in,l=t.input,p=t.avail_in,v=n.hold,y=n.bits,w=p,_=m,M=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(2&n.wrap&&35615===v){R[n.check=0]=255&v,R[1]=v>>>8&255,n.check=i(n.check,R,2,0),y=v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){t.msg="unknown compression method",n.mode=30;break}if(y-=4,A=8+(15&(v>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,t.adler=n.check=1,n.mode=512&v?10:12,y=v=0;break;case 2:for(;y<16;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(n.flags=v,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(R[0]=255&v,R[1]=v>>>8&255,n.check=i(n.check,R,2,0)),y=v=0,n.mode=3;case 3:for(;y<32;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}n.head&&(n.head.time=v),512&n.flags&&(R[0]=255&v,R[1]=v>>>8&255,R[2]=v>>>16&255,R[3]=v>>>24&255,n.check=i(n.check,R,4,0)),y=v=0,n.mode=4;case 4:for(;y<16;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(R[0]=255&v,R[1]=v>>>8&255,n.check=i(n.check,R,2,0)),y=v=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(R[0]=255&v,R[1]=v>>>8&255,n.check=i(n.check,R,2,0)),y=v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(O=n.length)&&(O=p),O&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,l,d,O,A)),512&n.flags&&(n.check=i(n.check,l,O,d)),p-=O,d+=O,n.length-=O),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break t;for(O=0;A=l[d+O++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A)),A&&O<p;);if(512&n.flags&&(n.check=i(n.check,l,O,d)),p-=O,d+=O,A)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break t;for(O=0;A=l[d+O++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A)),A&&O<p;);if(512&n.flags&&(n.check=i(n.check,l,O,d)),p-=O,d+=O,A)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(v!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}y=v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;y<32;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}t.adler=n.check=u(v),y=v=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=h,t.avail_out=m,t.next_in=d,t.avail_in=p,n.hold=v,n.bits=y,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){v>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}switch(n.last=1&v,y-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(g(n),n.mode=20,6!==e)break;v>>>=2,y-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}v>>>=2,y-=2;break;case 14:for(v>>>=7&y,y-=7&y;y<32;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,y=v=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(O=n.length){if(p<O&&(O=p),m<O&&(O=m),0===O)break t;r.arraySet(f,l,d,O,h),p-=O,d+=O,m-=O,h+=O,n.length-=O;break}n.mode=12;break;case 17:for(;y<14;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(n.nlen=257+(31&v),v>>>=5,y-=5,n.ndist=1+(31&v),v>>>=5,y-=5,n.ncode=4+(15&v),v>>>=4,y-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}n.lens[N[n.have++]]=7&v,v>>>=3,y-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,L={bits:n.lenbits},M=s(0,n.lens,0,19,n.lencode,0,n.work,L),n.lenbits=L.bits,M){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=(D=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,k=65535&D,!((C=D>>>24)<=y);){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(k<16)v>>>=C,y-=C,n.lens[n.have++]=k;else{if(16===k){for(I=C+2;y<I;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(v>>>=C,y-=C,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],O=3+(3&v),v>>>=2,y-=2}else if(17===k){for(I=C+3;y<I;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}y-=C,A=0,O=3+(7&(v>>>=C)),v>>>=3,y-=3}else{for(I=C+7;y<I;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}y-=C,A=0,O=11+(127&(v>>>=C)),v>>>=7,y-=7}if(n.have+O>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;O--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,L={bits:n.lenbits},M=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,L),n.lenbits=L.bits,M){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,L={bits:n.distbits},M=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L),n.distbits=L.bits,M){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=p&&258<=m){t.next_out=h,t.avail_out=m,t.next_in=d,t.avail_in=p,n.hold=v,n.bits=y,a(t,_),h=t.next_out,f=t.output,m=t.avail_out,d=t.next_in,l=t.input,p=t.avail_in,v=n.hold,y=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;E=(D=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,k=65535&D,!((C=D>>>24)<=y);){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(E&&0==(240&E)){for(T=C,P=E,j=k;E=(D=n.lencode[j+((v&(1<<T+P)-1)>>T)])>>>16&255,k=65535&D,!(T+(C=D>>>24)<=y);){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}v>>>=T,y-=T,n.back+=T}if(v>>>=C,y-=C,n.back+=C,n.length=k,0===E){n.mode=26;break}if(32&E){n.back=-1,n.mode=12;break}if(64&E){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&E,n.mode=22;case 22:if(n.extra){for(I=n.extra;y<I;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=(D=n.distcode[v&(1<<n.distbits)-1])>>>16&255,k=65535&D,!((C=D>>>24)<=y);){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(0==(240&E)){for(T=C,P=E,j=k;E=(D=n.distcode[j+((v&(1<<T+P)-1)>>T)])>>>16&255,k=65535&D,!(T+(C=D>>>24)<=y);){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}v>>>=T,y-=T,n.back+=T}if(v>>>=C,y-=C,n.back+=C,64&E){t.msg="invalid distance code",n.mode=30;break}n.offset=k,n.extra=15&E,n.mode=24;case 24:if(n.extra){for(I=n.extra;y<I;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break t;if(O=_-m,n.offset>O){if((O=n.offset-O)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}S=O>n.wnext?(O-=n.wnext,n.wsize-O):n.wnext-O,O>n.length&&(O=n.length),x=n.window}else x=f,S=h-n.offset,O=n.length;for(m<O&&(O=m),m-=O,n.length-=O;f[h++]=x[S++],--O;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break t;f[h++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===p)break t;p--,v|=l[d++]<<y,y+=8}if(_-=m,t.total_out+=_,n.total+=_,_&&(t.adler=n.check=n.flags?i(n.check,f,_,h-_):o(n.check,f,_,h-_)),_=m,(n.flags?v:u(v))!==n.check){t.msg="incorrect data check",n.mode=30;break}y=v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===p)break t;p--,v+=l[d++]<<y,y+=8}if(v!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}y=v=0}n.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;case 32:default:return c}return t.next_out=h,t.avail_out=m,t.next_in=d,t.avail_in=p,n.hold=v,n.bits=y,(n.wsize||_!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&b(t,t.output,t.next_out,_-t.avail_out)?(n.mode=31,-4):(w-=t.avail_in,_-=t.avail_out,t.total_in+=w,t.total_out+=_,n.total+=_,n.wrap&&_&&(t.adler=n.check=n.flags?i(n.check,f,_,t.next_out-_):o(n.check,f,_,t.next_out-_)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===_||4===e)&&0===M&&(M=-5),M)},n.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,0},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?c:((n.head=e).done=!1,0):c},n.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?c:11===n.mode&&o(1,e,r,0)!==n.check?-3:b(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):c},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){"use strict";var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,c,u,l,f,d){var h,p,m,v,y,g,b,w,_,O=d.bits,S=0,x=0,C=0,E=0,k=0,T=0,P=0,j=0,A=0,M=0,L=null,I=0,D=new r.Buf16(16),R=new r.Buf16(16),N=null,B=0;for(S=0;S<=15;S++)D[S]=0;for(x=0;x<c;x++)D[e[n+x]]++;for(k=O,E=15;1<=E&&0===D[E];E--);if(E<k&&(k=E),0===E)return u[l++]=20971520,u[l++]=20971520,d.bits=1,0;for(C=1;C<E&&0===D[C];C++);for(k<C&&(k=C),S=j=1;S<=15;S++)if(j<<=1,(j-=D[S])<0)return-1;if(0<j&&(0===t||1!==E))return-1;for(R[1]=0,S=1;S<15;S++)R[S+1]=R[S]+D[S];for(x=0;x<c;x++)0!==e[n+x]&&(f[R[e[n+x]]++]=x);if(g=0===t?(L=N=f,19):1===t?(L=o,I-=257,N=i,B-=257,256):(L=a,N=s,-1),S=C,y=l,P=x=M=0,m=-1,v=(A=1<<(T=k))-1,1===t&&852<A||2===t&&592<A)return 1;for(;;){for(b=S-P,_=f[x]<g?(w=0,f[x]):f[x]>g?(w=N[B+f[x]],L[I+f[x]]):(w=96,0),h=1<<S-P,C=p=1<<T;u[y+(M>>P)+(p-=h)]=b<<24|w<<16|_|0,0!==p;);for(h=1<<S-1;M&h;)h>>=1;if(0!==h?(M&=h-1,M+=h):M=0,x++,0==--D[S]){if(S===E)break;S=e[n+f[x]]}if(k<S&&(M&v)!==m){for(0===P&&(P=k),y+=C,j=1<<(T=S-P);T+P<E&&!((j-=D[T+P])<=0);)T++,j<<=1;if(A+=1<<T,1===t&&852<A||2===t&&592<A)return 1;u[m=M&v]=k<<24|T<<16|y-l|0}}return 0!==M&&(u[y+M]=S-P<<24|64<<16|0),d.bits=k,0}},{"../utils/common":41}],51:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){"use strict";var r=t("../utils/common");function o(t){for(var e=t.length;0<=--e;)t[e]=0}var i=256,a=286,s=30,c=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);o(h);var p=new Array(60);o(p);var m=new Array(512);o(m);var v=new Array(256);o(v);var y=new Array(29);o(y);var g,b,w,_=new Array(s);function O(t,e,n,r,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=t&&t.length}function S(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function x(t){return t<256?m[t]:m[256+(t>>>7)]}function C(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function E(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,C(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function k(t,e,n){E(t,n[2*e],n[2*e+1])}function T(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function P(t,e,n){var r,o,i=new Array(16),a=0;for(r=1;r<=c;r++)i[r]=a=a+n[r-1]<<1;for(o=0;o<=e;o++){var s=t[2*o+1];0!==s&&(t[2*o]=T(i[s]++,s))}}function j(t){var e;for(e=0;e<a;e++)t.dyn_ltree[2*e]=0;for(e=0;e<s;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function A(t){8<t.bi_valid?C(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function M(t,e,n,r){var o=2*e,i=2*n;return t[o]<t[i]||t[o]===t[i]&&r[e]<=r[n]}function L(t,e,n){for(var r=t.heap[n],o=n<<1;o<=t.heap_len&&(o<t.heap_len&&M(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!M(e,r,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=r}function I(t,e,n){var r,o,a,s,c=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],o=t.pending_buf[t.l_buf+c],c++,0===r?k(t,o,e):(k(t,(a=v[o])+i+1,e),0!==(s=u[a])&&E(t,o-=y[a],s),k(t,a=x(--r),n),0!==(s=l[a])&&E(t,r-=_[a],s)),c<t.last_lit;);k(t,256,e)}function D(t,e){var n,r,o,i=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==i[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):i[2*n+1]=0;for(;t.heap_len<2;)i[2*(o=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[o]=0,t.opt_len--,s&&(t.static_len-=a[2*o+1]);for(e.max_code=l,n=t.heap_len>>1;1<=n;n--)L(t,i,n);for(o=u;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],L(t,i,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,i[2*o]=i[2*n]+i[2*r],t.depth[o]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,i[2*n+1]=i[2*r+1]=o,t.heap[1]=o++,L(t,i,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,o,i,a,s,u=e.dyn_tree,l=e.max_code,f=e.stat_desc.static_tree,d=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,m=e.stat_desc.max_length,v=0;for(i=0;i<=c;i++)t.bl_count[i]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)m<(i=u[2*u[2*(r=t.heap[n])+1]+1]+1)&&(i=m,v++),u[2*r+1]=i,l<r||(t.bl_count[i]++,a=0,p<=r&&(a=h[r-p]),s=u[2*r],t.opt_len+=s*(i+a),d&&(t.static_len+=s*(f[2*r+1]+a)));if(0!==v){do{for(i=m-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[m]--,v-=2}while(0<v);for(i=m;0!==i;i--)for(r=t.bl_count[i];0!==r;)l<(o=t.heap[--n])||(u[2*o+1]!==i&&(t.opt_len+=(i-u[2*o+1])*u[2*o],u[2*o+1]=i),r--)}}(t,e),P(i,l,t.bl_count)}function R(t,e,n){var r,o,i=-1,a=e[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=e[2*(r+1)+1],++s<c&&o===a||(s<u?t.bl_tree[2*o]+=s:0!==o?(o!==i&&t.bl_tree[2*o]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,i=o,u=(s=0)===a?(c=138,3):o===a?(c=6,3):(c=7,4))}function N(t,e,n){var r,o,i=-1,a=e[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),r=0;r<=n;r++)if(o=a,a=e[2*(r+1)+1],!(++s<c&&o===a)){if(s<u)for(;k(t,o,t.bl_tree),0!=--s;);else 0!==o?(o!==i&&(k(t,o,t.bl_tree),s--),k(t,16,t.bl_tree),E(t,s-3,2)):s<=10?(k(t,17,t.bl_tree),E(t,s-3,3)):(k(t,18,t.bl_tree),E(t,s-11,7));i=o,u=(s=0)===a?(c=138,3):o===a?(c=6,3):(c=7,4)}}o(_);var B=!1;function F(t,e,n,o){E(t,0+(o?1:0),3),function(t,e,n,o){A(t),C(t,n),C(t,~n),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}n._tr_init=function(t){B||(function(){var t,e,n,r,o,i=new Array(16);for(r=n=0;r<28;r++)for(y[r]=n,t=0;t<1<<u[r];t++)v[n++]=r;for(v[n-1]=r,r=o=0;r<16;r++)for(_[r]=o,t=0;t<1<<l[r];t++)m[o++]=r;for(o>>=7;r<s;r++)for(_[r]=o<<7,t=0;t<1<<l[r]-7;t++)m[256+o++]=r;for(e=0;e<=c;e++)i[e]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,i[8]++;for(;t<=255;)h[2*t+1]=9,t++,i[9]++;for(;t<=279;)h[2*t+1]=7,t++,i[7]++;for(;t<=287;)h[2*t+1]=8,t++,i[8]++;for(P(h,287,i),t=0;t<s;t++)p[2*t+1]=5,p[2*t]=T(t,5);g=new O(h,u,257,a,c),b=new O(p,l,0,s,c),w=new O(new Array(0),f,0,19,7)}(),B=!0),t.l_desc=new S(t.dyn_ltree,g),t.d_desc=new S(t.dyn_dtree,b),t.bl_desc=new S(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,j(t)},n._tr_stored_block=F,n._tr_flush_block=function(t,e,n,r){var o,a,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<i;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),D(t,t.l_desc),D(t,t.d_desc),s=function(t){var e;for(R(t,t.dyn_ltree,t.l_desc.max_code),R(t,t.dyn_dtree,t.d_desc.max_code),D(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*d[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),o=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=o&&(o=a)):o=a=n+5,n+4<=o&&-1!==e?F(t,e,n,r):4===t.strategy||a===o?(E(t,2+(r?1:0),3),I(t,h,p)):(E(t,4+(r?1:0),3),function(t,e,n,r){var o;for(E(t,e-257,5),E(t,n-1,5),E(t,r-4,4),o=0;o<r;o++)E(t,t.bl_tree[2*d[o]+1],3);N(t,t.dyn_ltree,e-1),N(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),I(t,t.dyn_ltree,t.dyn_dtree)),j(t),r&&A(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(v[n]+i+1)]++,t.dyn_dtree[2*x(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){E(t,2,3),k(t,256,h),function(t){16===t.bi_valid?(C(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){"use strict";e.exports="function"==typeof r?r:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)}).call(this,n(745).Buffer,n(64),n(185).setImmediate)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return u}));var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(c,t);var e,n,r,s=a(c);function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),s.call(this)}return e=c,(n=[{key:"unitFactor",get:function(){return.1}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(n(261).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return B}));var r=n(30),o=n(149),i=n(262),a=n(120),s=n(36);function c(t){var e=t.match(/^.+\/(.+)\?/)||t.match(/^.+\/(.+)$/);return e&&e[1]}var u=n(449);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function m(){}var v={};s(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,o)&&(v=g);var b=m.prototype=d.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,d=f.value;return d&&"object"==l(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(d).then((function(t){f.value=t,a(f)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,s(b,"constructor",m),s(m,"constructor",p),p.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function p(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){p(i,r,o,a,s,"next",t)}function s(t){p(i,r,o,a,s,"throw",t)}a(void 0)}))}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _(t){var e="function"==typeof Map?new Map:void 0;return(_=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return O(t,arguments,C(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),x(r,t)})(t)}function O(t,e,n){return(O=S()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&x(o,n.prototype),o}).apply(null,arguments)}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function x(t,e){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(o,t);var e,n,r=(e=o,n=S(),function(){var t,r=C(e);if(n){var o=C(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return w(this,t)});function o(t,e){var n;return b(this,o),(n=r.call(this,"[".concat(t,"] ").concat(e))).status=t,n.statusText=e,n}return g(o)}(_(Error)),k=function(){function t(e,n,r,o,i){var a=this;b(this,t),this.storage=e,this.storageResolver=n,this.apiHost=r,this.apiHeaders=o,this.sourceId=i,v(this,"runningJobs",new Map),v(this,"expirationReason",void 0),n.on("COMPLETED",(function(t){return a.setStorageData(t.payload)})),n.on("PENDING",(function(t){"refresh"===t.reason&&(a.expirationReason="timeout",a.isStorageExpired=!0)}))}var e,n,r,l,d,p;return g(t,[{key:"isStorageExpired",get:function(){return this.storage.isExpired},set:function(t){this.storage.isExpired=t}},{key:"loadDocument",value:(p=m(h().mark((function t(e,n){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getFileData(e,n),t.next=3,this.loadDocumentByFileData(r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return p.apply(this,arguments)})},{key:"loadDocumentsByType",value:(d=m(h().mark((function t(e){var n,r,i=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new o.a("fileType");case 2:if(n=this.storage.files.filter((function(t){return t.fileType===e})),"function"!=typeof Promise.allSettled){t.next=9;break}return t.next=6,Promise.allSettled(n.map((function(t){return i.loadDocumentByFileData(t)})));case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,Object(u.a)(n.map((function(t){return i.loadDocumentByFileData(t)})));case 11:t.t0=t.sent;case 12:return r=t.t0,t.abrupt("return",r.map((function(t){return"fulfilled"===t.status?t.value:t.reason})));case 14:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"loadDocumentByFileData",value:(l=m(h().mark((function t(e){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new o.a("fileData");case 2:if(!e.response){t.next=4;break}return t.abrupt("return",e.response.clone());case 4:return t.prev=4,t.next=7,null!==(n=this.runningJobs.get(e))&&void 0!==n?n:this.runFetchWithRetries(e);case 7:return r=t.sent,this.runningJobs.delete(e),t.abrupt("return",r);case 12:if(t.prev=12,t.t0=t.catch(4),this.runningJobs.delete(e),!(t.t0 instanceof s.d)){t.next=19;break}throw t.t0;case 19:throw new i.a("File data loading unexpected error.",e,t.t0);case 20:case"end":return t.stop()}}),t,this,[[4,12]])}))),function(t){return l.apply(this,arguments)})},{key:"setStorageData",value:function(t){var e=this.storage,n=function(t){return Object.assign({state:"idle"},t)};t.hasOwnProperty("expirationTime")&&(e.expirationTime=t.expirationTime);var r=[],o=[];t.hasOwnProperty("files")?e.files?t.files.forEach((function(t){var i=e.files.find((function(e){return r=t,!(n=e)&&!r||!(!n||!r)&&n.fileType===r.fileType&&n.originalName===r.originalName&&c(n.dataFileUrl)===c(r.dataFileUrl);var n,r}));if(i)i.dataFileUrl=t.dataFileUrl,o.push(i);else{var a=n(t);e.files.push(a),r.push(a)}})):(e.files=t.files.map((function(t){return n(t)})),r.push.apply(r,f(e.files))):e.files||(e.files=[]),t.hasOwnProperty("hasAlternatePath")&&(e.hasAlternatePath=t.hasAlternatePath),this.isStorageExpired=!1,e.emit("updated",{added:r,changed:o})}},{key:"getFileData",value:function(t,e){if(!t)throw new o.a("originalName");if(!e)throw new o.a("fileType");var n=this.storage.files.find((function(n){return n.fileType===e&&n.originalName===t}));if(!n)throw new i.a("Data is undefined.",{originalName:t,fileType:e,dataFileUrl:""});if(!n.dataFileUrl)throw new i.a("Url is undefined.",n);return n}},{key:"runFetchWithRetries",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=this.runJob(t,e);return this.runningJobs.set(t,n),n}},{key:"runJob",value:(r=m(h().mark((function t(e,n){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.refreshStorage();case 2:return r=!1,t.prev=3,t.prev=4,t.next=7,this.fetchWithRetries(e,n,r);case 7:return t.abrupt("return",t.sent);case 10:if(t.prev=10,t.t0=t.catch(4),!(t.t0 instanceof E&&404===t.t0.status)){t.next=14;break}throw t.t0;case 14:if(!this.storage.hasAlternatePath){t.next=19;break}return r=!0,t.next=18,this.fetchWithRetries(e,n,r);case 18:return t.abrupt("return",t.sent);case 19:throw t.t0;case 20:t.next=41;break;case 22:if(t.prev=22,t.t1=t.catch(3),!(t.t1 instanceof E)){t.next=40;break}t.t2=t.t1.status,t.next=401===t.t2?28:403===t.t2?30:404===t.t2?36:40;break;case 28:return window.__CORE__.bus.emit("unAuthorized"),t.abrupt("break",40);case 30:if(!n||r){t.next=35;break}return this.storageResolver.refresh(),t.next=34,this.runJob(e,n-1);case 34:return t.abrupt("return",t.sent);case 35:return t.abrupt("break",40);case 36:throw this.storage.isExpired=!0,this.expirationReason="new",window.__CORE__.bus.emit("newDesignVersionReady"),new s.d;case 40:throw t.t1;case 41:case"end":return t.stop()}}),t,this,[[3,22],[4,10]])}))),function(t,e){return r.apply(this,arguments)})},{key:"fetchWithRetries",value:(n=m(h().mark((function t(e,n,r){var o,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(--n,o=1e3*Math.pow(4,3-n),t.prev=2,!r){t.next=9;break}return t.next=6,fetch("".concat(this.apiHost,"/api/widget/downloadData/").concat(this.sourceId),{method:"POST",headers:Object.assign({},this.apiHeaders,{"Content-Type":"application/json"}),body:JSON.stringify({url:e.dataFileUrl})});case 6:i=t.sent,t.next=12;break;case 9:return t.next=11,fetch(e.dataFileUrl,{method:"GET"});case 11:i=t.sent;case 12:t.next=23;break;case 14:if(t.prev=14,t.t0=t.catch(2),n){t.next=18;break}throw t.t0;case 18:return t.next=20,Object(a.a)(o);case 20:return t.next=22,this.runFetchWithRetries(e,n);case 22:return t.abrupt("return",t.sent);case 23:if(!i){t.next=34;break}if(!i.ok){t.next=28;break}return e.state="loaded",e.response=i,t.abrupt("return",i.clone());case 28:t.t1=i.status,t.next=401===t.t1||403===t.t1||404===t.t1?31:32;break;case 31:throw new E(i.status,i.statusText);case 32:if(n){t.next=34;break}throw new E(i.status,i.statusText);case 34:return t.next=36,Object(a.a)(o);case 36:return t.next=38,this.runFetchWithRetries(e,n);case 38:return t.abrupt("return",t.sent);case 39:case"end":return t.stop()}}),t,this,[[2,14]])}))),function(t,e,r){return n.apply(this,arguments)})},{key:"refreshStorage",value:(e=m(h().mark((function t(){var e=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.storage.isExpired){t.next=2;break}return t.abrupt("return");case 2:if("new"!==this.expirationReason){t.next=4;break}throw new s.d;case 4:if("timeout"!==this.expirationReason){t.next=7;break}return t.next=7,new Promise((function(t,n){var r=function r(){e.storageResolver.off("COMPLETED",r),e.storageResolver.off("CRASHED",r),"COMPLETED"===e.storageResolver.getState()?t():n()};e.storageResolver.on("COMPLETED",r),e.storageResolver.on("CRASHED",r),e.storageResolver.refresh()}));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return I(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(i,t);var e,n,r,o=M(i);function i(){var t;j(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return R(I(t=o.call.apply(o,[this].concat(n))),"files",[]),R(I(t),"isExpired",!1),R(I(t),"expirationTime",void 0),R(I(t),"hasAlternatePath",!1),R(I(t),"documentLoader",void 0),t}return e=i,n&&P(e.prototype,n),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(r.a);function B(t,e,n,r){var o=new N;return o.documentLoader=new k(o,t,e,n,r),o}},,,function(t,e,n){"use strict";var r,o,i;function a(){return{pcbDocument:void 0,schDocuments:[],isLoaded:!0,components:[],nets:[],layers:[],projectTypeName:"Altium Designer",primitives:[],primitivesMap:new Map}}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),function(t){t[t.Fitted=0]="Fitted",t[t.NotFitted=1]="NotFitted",t[t.Alternate=2]="Alternate"}(r||(r={})),function(t){t[t.ROTATE_0=0]="ROTATE_0",t[t.ROTATE_90=1]="ROTATE_90",t[t.ROTATE_180=2]="ROTATE_180",t[t.ROTATE_270=3]="ROTATE_270"}(o||(o={})),function(t){t[t.Pcb=1]="Pcb"}(i||(i={}))},,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(464),o=n(101),i=n(259),a=n(450);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=l(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(l,t);var e,n,r,s=d(l);function l(t,e,n,r,o,i,a){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),v(p(c=s.call(this,t,e,n,r,o,i,a)),"viewportZoom_",c.defZoom),v(p(c),"viewportCenter_",[0,0]),v(p(c),"viewportFlipped_",!1),c.viewport.SetZoom(c.viewportZoom),c.renderPath.SetGridAutoZoom(!1),c.renderPath.EnableGrid(!1),c.logger.LogInfo("".concat(i?"Overlay":"Main"," 2D [").concat(c.id,"] scene successfully initialized.")),c}return e=l,(n=[{key:"createOverlayScene",value:function(t,e,n){var r=Array.from(new Array(e.length).keys()).map((function(t){return new o.a(t,e[t].name,!1,0,!1,0)})),i=new l(null,e,n,r,void 0,this,t);return this.on("rendered",(function(t){return i.render()})),i}},{key:"viewport",get:function(){return u(m(l.prototype),"viewport",this)}},{key:"renderPath",get:function(){return u(m(l.prototype),"renderPath",this)}},{key:"createRenderPath",value:function(){return this.scene.CreateRenderPath2D()}},{key:"parentScene",get:function(){return u(m(l.prototype),"parentScene",this)}},{key:"addViewport",value:function(t){return this.scene.AddViewport2D(t)}},{key:"renderScene",value:function(){this.renderPath.SelectViewport(this.viewport),this.renderPath.Render(this.rootNode,this.renderOptions)}},{key:"viewportZoom",get:function(){return this.isRoot?this.viewportZoom_:this.parentScene.viewportZoom}},{key:"viewportCenter",get:function(){return this.isRoot?this.viewportCenter_:this.parentScene.viewportCenter}},{key:"viewportFlipped",get:function(){return this.isRoot?this.viewportFlipped_:this.parentScene.viewportFlipped}},{key:"setOptions",value:function(t){this.renderPath.SetOptions(t)}},{key:"enableGrid",value:function(t){this.renderPath.EnableGrid(t)}},{key:"setGridAutoZoom",value:function(t){this.renderPath.SetGridAutoZoom(t)}},{key:"setGridSize",value:function(t){this.renderPath.SetGridSize(t)}},{key:"setGridSteps",value:function(t,e){this.renderPath.SetGridSteps(t,e)}},{key:"setGridColors",value:function(t,e,n){this.renderPath.SetGridColors(t,e,n)}},{key:"getNodeItemsAtPoint",value:function(t,e){if(0==e.length)return new Array;var n=[];if("number"==typeof e[0])n=e;else for(var r=e,o=0;o<r.length;o++){var i=this.layerMap.GetLayer(r[o].layer);!i||i.is_cutout||i.is_keepout||n.push(r[o].layer)}return this.rootNodeData.GetNodeItemsAtPoint(t,n)}},{key:"getCenter",value:function(){return this.viewport.GetCenter()}},{key:"setCenter",value:function(t,e){this.viewportCenter_="number"==typeof t?this.viewport.ViewportToWorld([t,e]):t,this.viewport.SetCenter(this.viewportCenter),this.emit("centerChanged",new i.a(this.viewportCenter[0],this.viewportCenter[1]))}},{key:"setCenterOffset",value:function(t,e){var n=this.viewport.GetRectangle(),r=[n[2],n[3]],o=r[0]/2+t,a=r[1]/2+e;this.viewportCenter_=this.viewport.ViewportToWorld([o,a]),this.viewport.SetCenter(this.viewportCenter),this.emit("centerChanged",new i.a(this.viewportCenter[0],this.viewportCenter[1]))}},{key:"flipped",get:function(){return this.viewport.GetFlipped()},set:function(t){this.viewport.GetFlipped()!=t&&(this.viewport.SetFlipped(t),this.viewport.SetDirty(!0))}},{key:"setZoom",value:function(t){t=this.defZoom/t,this.viewportZoom_=t,this.viewport.SetZoom(t)}},{key:"getZoom",value:function(){return this.viewport.GetZoom()}},{key:"pixelsToUnits",value:function(t){return 2*t*this.viewport.GetZoom()/this.viewport.GetRectangle()[3]}},{key:"worldToViewport",value:function(t){return this.viewport.WorldToViewport(t)}},{key:"viewportToWorld",value:function(t){return this.viewport.ViewportToWorld(t)}},{key:"setFitFixedView",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;if(n||(n=.8),null==t||null==e){var r=this.renderOptions.map((function(t){return t.layer})),o=this.rootNode.GetBoxForLayers(r);null==t&&(t=[o[0],o[1],o[2]]),null==e&&(e=[o[3],o[4],o[5]])}this.viewport.FitFixedView(t,e,n)}},{key:"zoomToFit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=this.getBoxForLayers();null==t&&(t=o.slice(0,3)),null==e&&(e=o.slice(3,6));var i=this.pixelsToUnits(1),s=function(t,e,n){t[n]!==e[n]&&(t[n]-=i,e[n]-=i)};s(t,e,0),s(t,e,1),this.viewport.FitFixedView(o.slice(0,3),o.slice(3,6),1);var c=this.viewport.GetZoom()*r;this.viewport.FitFixedView(t,e,n);var u=this.viewport.GetZoom();c>u&&this.viewport.SetZoom(c),this.emit("zoomToFitChanged",new a.a(t,e))}},{key:"setSelection",value:function(t){}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(r.a)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return a}));var a=o((function t(e,n,r,o,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"polygon",void 0),i(this,"position",void 0),i(this,"material",void 0),i(this,"z",void 0),i(this,"angle",void 0),i(this,"scale",void 0),this.polygon=e,this.position=n,this.material=r,this.z=o||[0,0],this.angle=a||0,this.scale=s||[1,1]}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return o}));var o=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=["./js/thenBy.js","./js/gl-matrix.js"],(n="urls")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,n,o;return e=t,(n=[{key:"registerLib",value:function(t){this.urls.push(t)}},{key:"loadLibByUrl",value:function(t){return new Promise((function(e,n){var r=window.__CORE__.createLogger("LibraryLoader"),o=document.createElement("script");o.src=t,o.async=!0,o.onload=function(){r.LogInfo("Loaded library: ".concat(t)),e(t)},o.onerror=function(e){r.LogError("Error loading library: ".concat(t),e),n(e)},document.getElementsByTagName("body")[0].appendChild(o)}))}},{key:"loadLibs",value:function(){return Promise.all(this.urls.map(this.loadLibByUrl))}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(18),o=n(44);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={where:function(t){return["Show"===t.type]},to:"SHOW"},p={where:function(t){return["Error"===t.type]},to:"CRASHED",error:!0},m={IDLE:[{where:function(t){return["Setup"===t.type]},to:"SETUP"}],SETUP:[{where:function(t){return["SetupComplete"===t.type]},to:"SETUP_COMPLETED"},p],SETUP_COMPLETED:[{where:function(t){return["Attach"===t.type]},to:"ATTACH"},p],ATTACH:[{where:function(t){return["AttachComplete"===t.type]},to:"ATTACH_COMPLETED"},p],ATTACH_COMPLETED:[h],SHOW:[{where:function(t){return["Close"===t.type]},to:"CLOSE"}],CLOSE:[h]},v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,t);var e,n,r,i=c(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),d(l(e=i.call(this,"IDLE",m)),"owner",void 0),d(l(e),"errorState",null),d(l(e),"onSetup",(function(t){try{var n=t.core;e.owner.doSetup(n),e.nextTick((function(){return e.dispatch({type:"SetupComplete"})}))}catch(t){e.nextTick((function(){return e.dispatch(new o.a(t.message,t))}))}})),d(l(e),"onAttachToWorkspace",(function(t){try{e.owner.doAttachToWorkspace(t.workspace),e.nextTick((function(){return e.dispatch({type:"AttachComplete"})}))}catch(t){e.nextTick((function(){return e.dispatch(new o.a(t.message,t))}))}})),d(l(e),"onShow",(function(){e.owner.doShow().catch((function(t){e.nextTick((function(){return e.dispatch(new o.a(t.message,t))}))}))})),d(l(e),"onClose",(function(){e.owner.doClose()})),e.owner=t,e.on("SETUP",e.onSetup),e.on("ATTACH",e.onAttachToWorkspace),e.on("SHOW",e.onShow),e.on("CLOSE",e.onClose),e}return e=u,(n=[{key:"goToSetup",value:function(t){var e=this;return new Promise((function(n,r){e.dispatch({type:"Setup",core:t})||"SETUP"===e.state?(e.on("SETUP_COMPLETED",(function(){n()})),e.on("CRASHED",(function(t){e.errorState=t,r(e.errorState)}))):"CRASHED"===e.state?r(e.errorState):n()}))}},{key:"goToAttach",value:function(t){var e=this;return new Promise((function(n,r){e.dispatch({type:"Attach",workspace:t})||"ATTACH"===e.state?(e.on("ATTACH_COMPLETED",(function(){n()})),e.on("CRASHED",(function(t){e.errorState=t,r(e.errorState)}))):"CRASHED"===e.state?r(e.errorState):n()}))}},{key:"goToShow",value:function(){var t=this;return new Promise((function(e,n){t.dispatch({type:"Show"})||"SHOW"===t.state?e():n("Cannot show. Wrong state [".concat(t.state,"]"))}))}},{key:"goToClose",value:function(){var t=this;return new Promise((function(e,n){t.dispatch({type:"Close"})||"CLOSE"===t.state?e():n("Cannot show. Wrong state [".concat(t.state,"]"))}))}},{key:"nextTick",value:function(t){setTimeout((function(){t()}))}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(r.a)},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return l}));var u=function(t){setTimeout((function(){t()}),0)},l=function(){function t(){var e=this;i(this,t),c(this,"workspace",void 0),c(this,"panEventArgs",{deltaX:0,deltaY:0}),c(this,"zoomEventArgs",{delta:0,x:0,y:0}),c(this,"userPanInteract",void 0),c(this,"userSelectInteract",void 0),c(this,"ee",void 0),c(this,"onContextMenu",(function(t){e.stopBubble(t)})),c(this,"onMouseEvent",(function(){e.workspace.focus()})),c(this,"onMouseWheel",(function(t){e.zoomEventArgs.delta=t.deltaY>0?10:-10,e.zoomEventArgs.x=t.clientX,e.zoomEventArgs.y=t.clientY,u((function(){return e.emit("zoom",e.zoomEventArgs)})),e.stopBubble(t)})),c(this,"onTouchStart",(function(t){2===t.touches.length&&(e.workspace.addEventListener("touchmove",e.onTouchMove),e.workspace.addEventListener("touchend",e.onTouchEnd),e.onGestureStart(t.touches[0].clientX,t.touches[0].clientY,t.touches[1].clientX,t.touches[1].clientY)),e.stopBubble(t)})),c(this,"onTouchEnd",(function(t){1===t.touches.length&&(e.workspace.removeEventListener("touchmove",e.onTouchMove),e.workspace.removeEventListener("touchend",e.onTouchEnd),e.onGestureEnd(t.touches[0].clientX,t.touches[0].clientY)),e.stopBubble(t)})),c(this,"onTouchMove",(function(t){if(2===t.touches.length){var n=t.touches[0],r=t.touches[1];e.onGesture(n.clientX,n.clientY,r.clientX,r.clientY)}e.stopBubble(t)})),c(this,"inputGesture",{count:0,position1:{x:0,y:0},position2:{x:0,y:0},centerPoint:{x:0,y:0},startDistance:0,currentPercent:0}),this.ee=window.__CORE__.createEventEmmiterInstance(),this.userPanInteract=new d,this.userPanInteract.on("panEnter",(function(){return e.emit("panEnter")})),this.userPanInteract.on("panLeave",(function(){return e.emit("panLeave")})),this.userPanInteract.on("panMove",(function(t){return e.emit("panMove",t)})),this.userSelectInteract=new f,this.userSelectInteract.on("select",(function(t){return e.emit("select",t)}))}return s(t,[{key:"once",value:function(t,e){return this.ee.once(t,e)}},{key:"on",value:function(t,e){return this.ee.on(t,e)}},{key:"off",value:function(t,e){return this.ee.off(t,e)}},{key:"eventNames",value:function(){return this.ee.eventNames()}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ee.emit(t,e)}},{key:"attachToWorkspace",value:function(t){this.workspace=t,this.initEvents(t),this.userPanInteract.attachToWorkspace(t),this.userSelectInteract.attachToWorkspace(t)}},{key:"destroy",value:function(){this.workspace&&(this.releaseEvents(this.workspace),this.userPanInteract.destroy(),this.userSelectInteract.destroy(),this.workspace=null)}},{key:"stopBubble",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"initEvents",value:function(t){t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("mouseenter",this.onMouseEvent),t.addEventListener("wheel",this.onMouseWheel),t.addEventListener("mousewheel",this.onMouseWheel),t.addEventListener("touchstart",this.onTouchStart)}},{key:"releaseEvents",value:function(t){t.removeEventListener("contextmenu",this.onContextMenu),t.removeEventListener("mouseenter",this.onMouseEvent),t.removeEventListener("wheel",this.onMouseWheel),t.removeEventListener("mousewheel",this.onMouseWheel),t.removeEventListener("touchstart",this.onTouchStart)}},{key:"updateGestureStartPoint",value:function(t,e,n,r){this.inputGesture.position1.x=t,this.inputGesture.position1.y=e,this.inputGesture.position2.x=n,this.inputGesture.position2.y=r;var o=n-t,i=r-e;this.inputGesture.startDistance=Math.sqrt(o*o+i*i),this.inputGesture.currentPercent=100,this.inputGesture.centerPoint.x=t>n?n+(t-n)/2:t+(n-t)/2,this.inputGesture.centerPoint.y=e>r?r+(e-r)/2:e+(r-e)/2}},{key:"onGestureStart",value:function(t,e,n,r){this.updateGestureStartPoint(t,e,n,r)}},{key:"onGesture",value:function(t,e,n,r){var o=this;if(2==this.inputGesture.count++){this.inputGesture.count=0;var i=t-this.inputGesture.position1.x,a=e-this.inputGesture.position1.y,s=n-this.inputGesture.position2.x,c=r-this.inputGesture.position2.y;if(i>0==s>0&&a>0==c>0)return this.panEventArgs.deltaX=Math.abs(i)<Math.abs(s)?i:s,this.panEventArgs.deltaY=Math.abs(a)<Math.abs(c)?a:c,u((function(){return o.emit("panMove",o.panEventArgs)})),void this.updateGestureStartPoint(t,e,n,r);var l=n-t,f=r-e,d=Math.sqrt(l*l+f*f),h=Math.round(this.inputGesture.startDistance/d*100);this.zoomEventArgs.delta=h-this.inputGesture.currentPercent,this.zoomEventArgs.x=this.inputGesture.centerPoint.x,this.zoomEventArgs.y=this.inputGesture.centerPoint.y,u((function(){return o.emit("zoom",o.zoomEventArgs)})),this.inputGesture.currentPercent=h}}},{key:"onGestureEnd",value:function(t,e){this.updateGestureStartPoint(0,0,0,0)}}]),t}(),f=function(){function t(){var e=this;i(this,t),c(this,"workspace",void 0),c(this,"initClientX",0),c(this,"initClientY",0),c(this,"ee",void 0),c(this,"onMouseDown",(function(t){0===t.button&&(e.initClientX=t.clientX,e.initClientY=t.clientY,e.workspace.addEventListener("mouseup",e.onMouseUp),e.workspace.addEventListener("mousemove",e.onMouseMove))})),c(this,"onMouseMove",(function(n){Math.abs(e.initClientX-n.clientX)<t.delta&&Math.abs(e.initClientY-n.clientY)<t.delta||(e.workspace.removeEventListener("mouseup",e.onMouseUp),e.workspace.removeEventListener("mousemove",e.onMouseMove))})),c(this,"onMouseUp",(function(t){e.workspace.removeEventListener("mouseup",e.onMouseUp),e.workspace.removeEventListener("mousemove",e.onMouseMove),e.emitSelect(t.currentTarget,t)})),c(this,"onTouchStart",(function(t){1===t.touches.length?(e.initClientX=t.touches[0].clientX,e.initClientY=t.touches[0].clientY,e.workspace.addEventListener("touchmove",e.onTouchMove),e.workspace.addEventListener("touchend",e.onTouchEnd)):2===t.touches.length&&(e.workspace.removeEventListener("touchmove",e.onTouchMove),e.workspace.removeEventListener("touchend",e.onTouchEnd))})),c(this,"onTouchMove",(function(n){Math.abs(e.initClientX-n.touches[0].clientX)<t.delta&&Math.abs(e.initClientY-n.touches[0].clientY)<t.delta||(e.workspace.removeEventListener("touchmove",e.onTouchMove),e.workspace.removeEventListener("touchend",e.onTouchEnd))})),c(this,"onTouchEnd",(function(t){e.emitSelect(t.currentTarget,t.changedTouches[0])})),this.ee=window.__CORE__.createEventEmmiterInstance()}return s(t,[{key:"once",value:function(t,e){return this.ee.once(t,e)}},{key:"on",value:function(t,e){return this.ee.on(t,e)}},{key:"off",value:function(t,e){return this.ee.off(t,e)}},{key:"eventNames",value:function(){return this.ee.eventNames()}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ee.emit(t,e)}},{key:"attachToWorkspace",value:function(t){this.workspace=t,this.initEvents(t)}},{key:"destroy",value:function(){this.workspace&&(this.releaseEvents(this.workspace),this.workspace=null)}},{key:"initEvents",value:function(t){t&&(t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("touchstart",this.onTouchStart))}},{key:"releaseEvents",value:function(t){t&&(t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("touchstart",this.onTouchStart))}},{key:"emitSelect",value:function(t,e){var n=this;t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),u((function(){n.emit("select",{x:e.clientX,y:e.clientY})}))}}]),t}();c(f,"delta",1);var d=function(){function t(){var e=this;i(this,t),c(this,"workspace",void 0),c(this,"isEnter",!1),c(this,"panEventArgs",{deltaX:0,deltaY:0,x:0,y:0}),c(this,"ee",void 0),c(this,"onMouseDown",(function(t){1!==t.buttons&&2!==t.buttons||(e.panEventArgs.deltaX=0,e.panEventArgs.deltaY=0,e.panEventArgs.x=t.clientX,e.panEventArgs.y=t.clientY,e.workspace.addEventListener("mouseup",e.onMouseUp),e.workspace.addEventListener("mouseleave",e.onMouseLeave),e.workspace.addEventListener("mousemove",e.onMouseMove),e.workspace.addEventListener("mouseenter",e.onMouseEnter))})),c(this,"onMouseEnter",(function(t){1===t.buttons||2===t.buttons?(e.panEventArgs.deltaX=0,e.panEventArgs.deltaY=0,e.panEventArgs.x=t.clientX,e.panEventArgs.y=t.clientY,e.workspace.addEventListener("mouseup",e.onMouseUp),e.workspace.addEventListener("mouseleave",e.onMouseLeave),e.workspace.addEventListener("mousemove",e.onMouseMove)):e.workspace.removeEventListener("mouseenter",e.onMouseEnter)})),c(this,"onMouseUp",(function(t){e.isEnter=!1,u((function(){return e.emit("panLeave")})),e.workspace.removeEventListener("mouseup",e.onMouseUp),e.workspace.removeEventListener("mouseleave",e.onMouseLeave),e.workspace.removeEventListener("mousemove",e.onMouseMove),e.workspace.removeEventListener("mouseenter",e.onMouseEnter)})),c(this,"onMouseLeave",(function(t){e.isEnter=!1,u((function(){return e.emit("panLeave")})),e.workspace.removeEventListener("mouseup",e.onMouseUp),e.workspace.removeEventListener("mouseleave",e.onMouseLeave),e.workspace.removeEventListener("mousemove",e.onMouseMove)})),c(this,"onMouseMove",(function(n){if(!(Math.abs(e.panEventArgs.x-n.clientX)<t.delta&&Math.abs(e.panEventArgs.y-n.clientY)<t.delta)){e.isEnter||(e.isEnter=!0,u((function(){return e.emit("panEnter")}))),e.panEventArgs.deltaX=n.clientX-e.panEventArgs.x,e.panEventArgs.deltaY=n.clientY-e.panEventArgs.y,e.panEventArgs.x=n.clientX,e.panEventArgs.y=n.clientY;var r=o({},e.panEventArgs);u((function(){return e.emit("panMove",r)}))}})),c(this,"onTouchStart",(function(t){1===t.touches.length?(e.panEventArgs.deltaX=0,e.panEventArgs.deltaY=0,e.panEventArgs.x=t.touches[0].clientX,e.panEventArgs.y=t.touches[0].clientY,e.workspace.addEventListener("touchmove",e.onTouchMove),e.workspace.addEventListener("touchend",e.onTouchEnd)):2===t.touches.length&&(e.workspace.removeEventListener("touchmove",e.onTouchMove),e.workspace.removeEventListener("touchend",e.onTouchEnd))})),c(this,"onTouchMove",(function(n){if(!(Math.abs(e.panEventArgs.x-n.touches[0].clientX)<t.delta&&Math.abs(e.panEventArgs.y-n.touches[0].clientY)<t.delta)){e.isEnter||(e.isEnter=!0,u((function(){return e.emit("panEnter")}))),e.panEventArgs.deltaX=n.touches[0].clientX-e.panEventArgs.x,e.panEventArgs.deltaY=n.touches[0].clientY-e.panEventArgs.y,e.panEventArgs.x=n.touches[0].clientX,e.panEventArgs.y=n.touches[0].clientY;var r=o({},e.panEventArgs);u((function(){return e.emit("panMove",r)}))}})),c(this,"onTouchEnd",(function(t){1===t.touches.length?(e.panEventArgs.deltaX=0,e.panEventArgs.deltaY=0,e.panEventArgs.x=t.touches[0].clientX,e.panEventArgs.y=t.touches[0].clientY,e.workspace.addEventListener("touchmove",e.onTouchMove),e.workspace.addEventListener("touchend",e.onTouchEnd)):0===t.touches.length&&(e.isEnter=!1,u((function(){return e.emit("panLeave")})),e.workspace.removeEventListener("touchmove",e.onTouchMove),e.workspace.removeEventListener("touchend",e.onTouchEnd))})),this.ee=window.__CORE__.createEventEmmiterInstance()}return s(t,[{key:"once",value:function(t,e){return this.ee.once(t,e)}},{key:"on",value:function(t,e){return this.ee.on(t,e)}},{key:"off",value:function(t,e){return this.ee.off(t,e)}},{key:"eventNames",value:function(){return this.ee.eventNames()}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ee.emit(t,e)}},{key:"attachToWorkspace",value:function(t){this.workspace=t,this.initEvents(t)}},{key:"destroy",value:function(){this.workspace&&(this.releaseEvents(this.workspace),this.workspace=null)}},{key:"initEvents",value:function(t){t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("touchstart",this.onTouchStart)}},{key:"releaseEvents",value:function(t){t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("touchstart",this.onTouchStart)}}]),t}();c(d,"delta",1)},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(18);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={where:function(t){return["Attach"===t.type]},to:"DOCUMENT_ATTACH"},h={IDLE:[{where:function(t){return["Setup"===t.type]},to:"SETUP"}],SETUP:[d],CRASHED:[d],DOCUMENT_ATTACH:[{where:function(t){return["Dettach"===t.type]},to:"DOCUMENT_DETTACH"},{where:function(t){return["Error"===t.type]},to:"CRASHED",error:!0}],DOCUMENT_DETTACH:[d]},p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(c,t);var e,n,r,o=s(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),f(u(e=o.call(this,"IDLE",h)),"owner",void 0),f(u(e),"onSetup",(function(t){e.owner.doAttachToWorkspace(t.workspace)})),f(u(e),"onAttach",(function(t){e.owner.doAttachDocument(t.document)})),f(u(e),"onDettach",(function(){e.owner.doDettachDocument()})),e.on("SETUP",e.onSetup),e.on("DOCUMENT_ATTACH",e.onAttach),e.on("DOCUMENT_DETTACH",e.onDettach),e.owner=t,e}return e=c,(n=[{key:"setup",value:function(t){this.dispatch({type:"Setup",workspace:t})}},{key:"attachDocument",value:function(t){this.dispatch({type:"Attach",document:t})}},{key:"dettachDocument",value:function(){this.dispatch({type:"Dettach"})}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(r.a)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"workspace",void 0),o(this,"size",{width:0,height:0}),o(this,"displayed",!1),o(this,"ee",void 0),o(this,"onWindowResize",(function(){var t=n.size.width,e=n.size.height;if(0===n.workspace.clientHeight||0===n.workspace.clientWidth)n.displayed=!1,n.emit("hidden");else{if(n.size.width=n.workspace.clientWidth,n.size.height=n.workspace.clientHeight,!n.displayed&&(n.displayed=!0,n.emit("shown"),e===n.size.height&&t===n.size.width))return;0!==t&&n.emit("didSizeChange",n.size.width/t)}})),this.ee=window.__CORE__.createEventEmmiterInstance(),this.workspace=e,this.initEvents(e),(this.workspace.clientHeight>0||this.workspace.clientWidth>0)&&(this.size.height=this.workspace.clientHeight,this.size.width=this.workspace.clientWidth,this.displayed=!0)}var e,n,i;return e=t,(n=[{key:"once",value:function(t,e){return this.ee.once(t,e)}},{key:"on",value:function(t,e){return this.ee.on(t,e)}},{key:"off",value:function(t,e){return this.ee.off(t,e)}},{key:"eventNames",value:function(){return this.ee.eventNames()}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ee.emit(t,e)}},{key:"destroy",value:function(){this.workspace&&(this.releaseEvents(this.workspace),this.workspace=null)}},{key:"initEvents",value:function(t){t&&window.addEventListener("resize",this.onWindowResize)}},{key:"releaseEvents",value:function(t){t&&window.removeEventListener("resize",this.onWindowResize)}}])&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var r=n(452),o=n(30),i=n(67);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(a,t);var e,n,r,o=l(a);function a(){var t;s(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p(d(t=o.call.apply(o,[this].concat(n))),"fpsRequestId",-1),t}return e=a,(n=[{key:"startFpsMeter",value:function(t){this.stopFpsMeter();var e=performance.now();this.requestAnimationFrame(e,e,0,0,t)}},{key:"stopFpsMeter",value:function(){window.cancelAnimationFrame(this.fpsRequestId),this.fpsRequestId=-1}},{key:"requestAnimationFrame",value:function(t,e,n,r,o){this.fpsRequestId=window.requestAnimationFrame(this.calculateFps.bind(this,t,e,n,r,o))}},{key:"calculateFps",value:function(t,e,n,r,o){var a=this,s=performance.now(),c=s-t;if(n+=c?Math.round(1e3/c):60,r++,s-e>o&&(e=s,r>0)){var u=Math.round(n/r);n=0,r=0,Object(i.a)((function(){return a.emit("aggregateFps",u)}))}this.requestAnimationFrame(s,e,n,r,o)}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.a),v=n(146);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k=function(){function t(e){S(this,t),E(this,"canvas",void 0),E(this,"make",!1),this.canvas=this.initCanvas(e)}return C(t,[{key:"initCanvas",value:function(t){var e=this,n=t.canvas;return n.addEventListener("do-screenshot",(function(){e.make=!0,t.invalidate()})),n}},{key:"do",value:function(){if(this.make){this.make=!1;try{try{var t=this.canvas.toDataURL();this.canvas.dispatchEvent(new CustomEvent("did-screenshot",{detail:{data:t,error:null}}))}catch(t){this.canvas.dispatchEvent(new CustomEvent("did-screenshot",{detail:{data:null,error:t}}))}}catch(t){console.log("Dispatch [user_screenshot] event error. "+t.message)}}}}]),t}(),T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(n,t);var e=b(n);function n(t,o){var i;return S(this,n),E(_(i=e.call(this)),"canvas",void 0),E(_(i),"resized",new r.a),E(_(i),"containerId",void 0),E(_(i),"peformanceMonitor",void 0),E(_(i),"documentFileSize",void 0),E(_(i),"invalidated",!1),E(_(i),"module",void 0),E(_(i),"requestId",-1),E(_(i),"renderBind",i.render.bind(_(i))),E(_(i),"backgroundColor",void 0),E(_(i),"screenshot",void 0),E(_(i),"logger",void 0),i.logger=window.__CORE__.createLogger("CanvasControl"),i.backgroundColor=o,"string"==typeof t||t instanceof HTMLDivElement?(i.canvas=document.createElement("canvas"),i.initControl(t)):i.canvas=t,i.canvas.style.position="absolute",i.initEvents(),i.module=window.GraphiteResolverInstance.module,i.module.canvas=i.canvas,i.screenshot=new k(_(i)),i.peformanceMonitor=new m,i}return C(n,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}},{key:"setBackground",value:function(t){this.canvas.style.background=v.a.rgbaToHex(t)}},{key:"initControl",value:function(t){var e=t instanceof HTMLDivElement?t:document.getElementById(t);if(null==e)throw new Error("Parent with id ".concat(t," did not found at DOM."));var n=this.canvas;n.id=t+"_graphic_document_viewer_canvas",n.tabIndex=0,n.oncontextmenu=function(){return!1},n.style.opacity="1",e.appendChild(this.canvas)}},{key:"initEvents",value:function(){var t=this,e=this.canvas,n=e.parentElement;window.addEventListener("resize",(function(){0!==n.clientWidth&&0!==n.clientHeight?(e.width=n.clientWidth,e.height=n.clientHeight,t.resized.emit(t)):t.logger.LogDebug("Canvas control resize")}))}},{key:"invalidate",value:function(){this.emit("invalidate"),this.invalidated=!0,this.scheduleNextRender()}},{key:"render",value:function(){if(this.invalidated){var t=performance.now();this.onPaint(this.canvas),this.peformanceMonitor.emit("renderTime",performance.now()-t,this.documentFileSize),this.screenshot.do(),this.scheduleNextRender(),this.invalidated=this.needRender,this.needRender||window.cancelAnimationFrame(this.requestId)}else this.scheduleNextRender()}},{key:"scheduleNextRender",value:function(){window.cancelAnimationFrame(this.requestId),this.requestId=window.requestAnimationFrame(this.renderBind)}},{key:"onPaint",value:function(t){}},{key:"needRender",get:function(){return!1}}]),n}(o.a)},function(t,e,n){"use strict";n(561),n(704),n(706),n(709),n(711),n(713),n(715),n(717),n(719),n(721),n(723),n(725),n(727),n(731)},function(t,e,n){n(562),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(591),n(592),n(593),n(594),n(595),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(608),n(609),n(610),n(611),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(625),n(626),n(627),n(628),n(629),n(630),n(631),n(632),n(633),n(634),n(635),n(636),n(637),n(638),n(639),n(640),n(641),n(643),n(644),n(646),n(647),n(648),n(649),n(650),n(651),n(652),n(654),n(655),n(656),n(657),n(658),n(659),n(660),n(661),n(662),n(663),n(664),n(665),n(666),n(408),n(667),n(486),n(668),n(487),n(669),n(670),n(671),n(672),n(488),n(675),n(676),n(677),n(678),n(679),n(680),n(681),n(682),n(683),n(684),n(685),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(694),n(695),n(696),n(697),n(698),n(699),n(700),n(701),n(702),n(703),t.exports=n(89)},function(t,e,n){"use strict";var r=n(57),o=n(141),i=n(94),a=n(11),s=n(123),c=n(189).KEY,u=n(58),l=n(320),f=n(249),d=n(228),h=n(70),p=n(389),m=n(467),v=n(564),y=n(323),g=n(59),b=n(60),w=n(113),_=n(143),O=n(188),S=n(227),x=n(232),C=n(470),E=n(158),k=n(322),T=n(95),P=n(230),j=E.f,A=T.f,M=C.f,L=r.Symbol,I=r.JSON,D=I&&I.stringify,R=h("_hidden"),N=h("toPrimitive"),B={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),$=l("op-symbols"),G=Object.prototype,V="function"==typeof L&&!!k.f,z=r.QObject,H=!z||!z.prototype||!z.prototype.findChild,W=i&&u((function(){return 7!=x(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=j(G,e);r&&delete G[e],A(t,e,n),r&&t!==G&&A(G,e,r)}:A,Y=function(t){var e=U[t]=x(L.prototype);return e._k=t,e},q=V&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},X=function(t,e,n){return t===G&&X($,e,n),g(t),e=O(e,!0),g(n),o(U,e)?(n.enumerable?(o(t,R)&&t[R][e]&&(t[R][e]=!1),n=x(n,{enumerable:S(0,!1)})):(o(t,R)||A(t,R,S(1,{})),t[R][e]=!0),W(t,e,n)):A(t,e,n)},Z=function(t,e){g(t);for(var n,r=v(e=_(e)),o=0,i=r.length;i>o;)X(t,n=r[o++],e[n]);return t},K=function(t){var e=B.call(this,t=O(t,!0));return!(this===G&&o(U,t)&&!o($,t))&&(!(e||!o(this,t)||!o(U,t)||o(this,R)&&this[R][t])||e)},J=function(t,e){if(t=_(t),e=O(e,!0),t!==G||!o(U,e)||o($,e)){var n=j(t,e);return!n||!o(U,e)||o(t,R)&&t[R][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=M(_(t)),r=[],i=0;n.length>i;)o(U,e=n[i++])||e==R||e==c||r.push(e);return r},tt=function(t){for(var e,n=t===G,r=M(n?$:_(t)),i=[],a=0;r.length>a;)!o(U,e=r[a++])||n&&!o(G,e)||i.push(U[e]);return i};V||(s((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===G&&e.call($,n),o(this,R)&&o(this[R],t)&&(this[R][t]=!1),W(this,t,S(1,n))};return i&&H&&W(G,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",(function(){return this._k})),E.f=J,T.f=X,n(233).f=C.f=Q,n(264).f=K,k.f=tt,i&&!n(229)&&s(G,"propertyIsEnumerable",K,!0),p.f=function(t){return Y(h(t))}),a(a.G+a.W+a.F*!V,{Symbol:L});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)h(et[nt++]);for(var rt=P(h.store),ot=0;rt.length>ot;)m(rt[ot++]);a(a.S+a.F*!V,"Symbol",{for:function(t){return o(F,t+="")?F[t]:F[t]=L(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!V,"Object",{create:function(t,e){return void 0===e?x(t):Z(x(t),e)},defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:tt});var it=u((function(){k.f(1)}));a(a.S+a.F*it,"Object",{getOwnPropertySymbols:function(t){return k.f(w(t))}}),I&&a(a.S+a.F*(!V||u((function(){var t=L();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(b(e)||void 0!==t)&&!q(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!q(e))return e}),r[1]=e,D.apply(I,r)}}),L.prototype[N]||n(142)(L.prototype,N,L.prototype.valueOf),f(L,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){t.exports=n(320)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(230),o=n(322),i=n(264);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var a,s=n(t),c=i.f,u=0;s.length>u;)c.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,n){var r=n(11);r(r.S,"Object",{create:n(232)})},function(t,e,n){var r=n(11);r(r.S+r.F*!n(94),"Object",{defineProperty:n(95).f})},function(t,e,n){var r=n(11);r(r.S+r.F*!n(94),"Object",{defineProperties:n(469)})},function(t,e,n){var r=n(143),o=n(158).f;n(159)("getOwnPropertyDescriptor",(function(){return function(t,e){return o(r(t),e)}}))},function(t,e,n){var r=n(113),o=n(234);n(159)("getPrototypeOf",(function(){return function(t){return o(r(t))}}))},function(t,e,n){var r=n(113),o=n(230);n(159)("keys",(function(){return function(t){return o(r(t))}}))},function(t,e,n){n(159)("getOwnPropertyNames",(function(){return n(470).f}))},function(t,e,n){var r=n(60),o=n(189).onFreeze;n(159)("freeze",(function(t){return function(e){return t&&r(e)?t(o(e)):e}}))},function(t,e,n){var r=n(60),o=n(189).onFreeze;n(159)("seal",(function(t){return function(e){return t&&r(e)?t(o(e)):e}}))},function(t,e,n){var r=n(60),o=n(189).onFreeze;n(159)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(o(e)):e}}))},function(t,e,n){var r=n(60);n(159)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(60);n(159)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(60);n(159)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},function(t,e,n){var r=n(11);r(r.S+r.F,"Object",{assign:n(471)})},function(t,e,n){var r=n(11);r(r.S,"Object",{is:n(472)})},function(t,e,n){var r=n(11);r(r.S,"Object",{setPrototypeOf:n(393).set})},function(t,e,n){"use strict";var r=n(265),o={};o[n(70)("toStringTag")]="z",o+""!="[object z]"&&n(123)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(t,e,n){var r=n(11);r(r.P,"Function",{bind:n(473)})},function(t,e,n){var r=n(95).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(94)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(60),o=n(234),i=n(70)("hasInstance"),a=Function.prototype;i in a||n(95).f(a,i,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(11),o=n(475);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(t,e,n){var r=n(11),o=n(476);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(t,e,n){"use strict";var r=n(57),o=n(141),i=n(174),a=n(395),s=n(188),c=n(58),u=n(233).f,l=n(158).f,f=n(95).f,d=n(250).trim,h=r.Number,p=h,m=h.prototype,v="Number"==i(n(232)(m)),y="trim"in String.prototype,g=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,i=(e=y?e.trim():d(e,3)).charCodeAt(0);if(43===i||45===i){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var a,c=e.slice(2),u=0,l=c.length;u<l;u++)if((a=c.charCodeAt(u))<48||a>o)return NaN;return parseInt(c,r)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(v?c((function(){m.valueOf.call(n)})):"Number"!=i(n))?a(new p(g(e)),n,h):g(e)};for(var b,w=n(94)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)o(p,b=w[_])&&!o(h,b)&&f(h,b,l(p,b));h.prototype=m,m.constructor=h,n(123)(r,"Number",h)}},function(t,e,n){"use strict";var r=n(11),o=n(157),i=n(477),a=n(396),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*u[n],u[n]=r%1e7,r=c(r/1e7)},d=function(t){for(var e=6,n=0;--e>=0;)n+=u[e],u[e]=c(n/t),n=n%t*1e7},h=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var n=String(u[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},p=function(t,e,n){return 0===e?n:e%2==1?p(t,e-1,n*t):p(t*t,e/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(58)((function(){s.call({})}))),"Number",{toFixed:function(t){var e,n,r,s,c=i(this,l),u=o(t),m="",v="0";if(u<0||u>20)throw RangeError(l);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(c*p(2,69,1))-69)<0?c*p(2,-e,1):c/p(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=u;r>=7;)f(1e7,0),r-=7;for(f(p(10,r,1),0),r=e-1;r>=23;)d(1<<23),r-=23;d(1<<r),f(1,1),d(2),v=h()}else f(0,n),f(1<<-e,0),v=h()+a.call("0",u);return v=u>0?m+((s=v.length)<=u?"0."+a.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u)):m+v}})},function(t,e,n){"use strict";var r=n(11),o=n(58),i=n(477),a=1..toPrecision;r(r.P+r.F*(o((function(){return"1"!==a.call(1,void 0)}))||!o((function(){a.call({})}))),"Number",{toPrecision:function(t){var e=i(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(11);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(11),o=n(57).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,n){var r=n(11);r(r.S,"Number",{isInteger:n(478)})},function(t,e,n){var r=n(11);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(11),o=n(478),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return o(t)&&i(t)<=9007199254740991}})},function(t,e,n){var r=n(11);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(11);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(11),o=n(476);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(t,e,n){var r=n(11),o=n(475);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(t,e,n){var r=n(11),o=n(479),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+i(t-1)*i(t+1))}})},function(t,e,n){var r=n(11),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(11),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(11),o=n(397);r(r.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(11);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(11),o=Math.exp;r(r.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,n){var r=n(11),o=n(398);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(t,e,n){var r=n(11);r(r.S,"Math",{fround:n(607)})},function(t,e,n){var r=n(397),o=Math.pow,i=o(2,-52),a=o(2,-23),s=o(2,127)*(2-a),c=o(2,-126);t.exports=Math.fround||function(t){var e,n,o=Math.abs(t),u=r(t);return o<c?u*(o/c/a+1/i-1/i)*c*a:(n=(e=(1+a/i)*o)-(e-o))>s||n!=n?u*(1/0):u*n}},function(t,e,n){var r=n(11),o=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,i=0,a=0,s=arguments.length,c=0;a<s;)c<(n=o(arguments[a++]))?(i=i*(r=c/n)*r+1,c=n):i+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,e,n){var r=n(11),o=Math.imul;r(r.S+r.F*n(58)((function(){return-5!=o(4294967295,5)||2!=o.length})),"Math",{imul:function(t,e){var n=+t,r=+e,o=65535&n,i=65535&r;return 0|o*i+((65535&n>>>16)*i+o*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(11);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(11);r(r.S,"Math",{log1p:n(479)})},function(t,e,n){var r=n(11);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(11);r(r.S,"Math",{sign:n(397)})},function(t,e,n){var r=n(11),o=n(398),i=Math.exp;r(r.S+r.F*n(58)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(i(t-1)-i(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(11),o=n(398),i=Math.exp;r(r.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(i(t)+i(-t))}})},function(t,e,n){var r=n(11);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(11),o=n(231),i=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?i(e):i(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(11),o=n(143),i=n(79);r(r.S,"String",{raw:function(t){for(var e=o(t.raw),n=i(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(250)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,n){"use strict";var r=n(399)(!0);n(400)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";var r=n(11),o=n(399)(!1);r(r.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(11),o=n(79),i=n(401),a="".endsWith;r(r.P+r.F*n(403)("endsWith"),"String",{endsWith:function(t){var e=i(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(e.length),s=void 0===n?r:Math.min(o(n),r),c=String(t);return a?a.call(e,c,s):e.slice(s-c.length,s)===c}})},function(t,e,n){"use strict";var r=n(11),o=n(401);r(r.P+r.F*n(403)("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(11);r(r.P,"String",{repeat:n(396)})},function(t,e,n){"use strict";var r=n(11),o=n(79),i=n(401),a="".startsWith;r(r.P+r.F*n(403)("startsWith"),"String",{startsWith:function(t){var e=i(this,t,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(124)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,n){"use strict";n(124)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,n){"use strict";n(124)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,n){"use strict";n(124)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,n){"use strict";n(124)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,n){"use strict";n(124)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,n){"use strict";n(124)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,n){"use strict";n(124)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,n){"use strict";n(124)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,n){"use strict";n(124)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,n){"use strict";n(124)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,n){"use strict";n(124)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,n){"use strict";n(124)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,n){var r=n(11);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(11),o=n(113),i=n(188);r(r.P+r.F*n(58)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=o(this),n=i(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(11),o=n(642);r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(t,e,n){"use strict";var r=n(58),o=Date.prototype.getTime,i=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-50000000000001))}))||!r((function(){i.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:i},function(t,e,n){var r=Date.prototype,o=r.toString,i=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(123)(r,"toString",(function(){var t=i.call(this);return t==t?o.call(this):"Invalid Date"}))},function(t,e,n){var r=n(70)("toPrimitive"),o=Date.prototype;r in o||n(142)(o,r,n(645))},function(t,e,n){"use strict";var r=n(59),o=n(188);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(r(this),"number"!=t)}},function(t,e,n){var r=n(11);r(r.S,"Array",{isArray:n(323)})},function(t,e,n){"use strict";var r=n(155),o=n(11),i=n(113),a=n(481),s=n(404),c=n(79),u=n(405),l=n(406);o(o.S+o.F*!n(324)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,o,f,d=i(t),h="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,y=0,g=l(d);if(v&&(m=r(m,p>2?arguments[2]:void 0,2)),null==g||h==Array&&s(g))for(n=new h(e=c(d.length));e>y;y++)u(n,y,v?m(d[y],y):d[y]);else for(f=g.call(d),n=new h;!(o=f.next()).done;y++)u(n,y,v?a(f,m,[o.value,y],!0):o.value);return n.length=y,n}})},function(t,e,n){"use strict";var r=n(11),o=n(405);r(r.S+r.F*n(58)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(11),o=n(143),i=[].join;r(r.P+r.F*(n(263)!=Object||!n(150)(i)),"Array",{join:function(t){return i.call(o(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(11),o=n(392),i=n(174),a=n(231),s=n(79),c=[].slice;r(r.P+r.F*n(58)((function(){o&&c.call(o)})),"Array",{slice:function(t,e){var n=s(this.length),r=i(this);if(e=void 0===e?n:e,"Array"==r)return c.call(this,t,e);for(var o=a(t,n),u=a(e,n),l=s(u-o),f=new Array(l),d=0;d<l;d++)f[d]="String"==r?this.charAt(o+d):this[o+d];return f}})},function(t,e,n){"use strict";var r=n(11),o=n(156),i=n(113),a=n(58),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n(150)(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),o(t))}})},function(t,e,n){"use strict";var r=n(11),o=n(160)(0),i=n(150)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,n){var r=n(60),o=n(323),i=n(70)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(11),o=n(160)(1);r(r.P+r.F*!n(150)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(11),o=n(160)(2);r(r.P+r.F*!n(150)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(11),o=n(160)(3);r(r.P+r.F*!n(150)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(11),o=n(160)(4);r(r.P+r.F*!n(150)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(11),o=n(483);r(r.P+r.F*!n(150)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(11),o=n(483);r(r.P+r.F*!n(150)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(11),o=n(321)(!1),i=[].indexOf,a=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(150)(i)),"Array",{indexOf:function(t){return a?i.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(11),o=n(143),i=n(157),a=n(79),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(150)(s)),"Array",{lastIndexOf:function(t){if(c)return s.apply(this,arguments)||0;var e=o(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(11);r(r.P,"Array",{copyWithin:n(484)}),n(235)("copyWithin")},function(t,e,n){var r=n(11);r(r.P,"Array",{fill:n(407)}),n(235)("fill")},function(t,e,n){"use strict";var r=n(11),o=n(160)(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(235)("find")},function(t,e,n){"use strict";var r=n(11),o=n(160)(6),i="findIndex",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(235)(i)},function(t,e,n){n(252)("Array")},function(t,e,n){var r=n(57),o=n(395),i=n(95).f,a=n(233).f,s=n(402),c=n(325),u=r.RegExp,l=u,f=u.prototype,d=/a/g,h=/a/g,p=new u(d)!==d;if(n(94)&&(!p||n(58)((function(){return h[n(70)("match")]=!1,u(d)!=d||u(h)==h||"/a/i"!=u(d,"i")})))){u=function(t,e){var n=this instanceof u,r=s(t),i=void 0===e;return!n&&r&&t.constructor===u&&i?t:o(p?new l(r&&!i?t.source:t,e):l((r=t instanceof u)?t.source:t,r&&i?c.call(t):e),n?this:f,u)};for(var m=function(t){t in u||i(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=a(l),y=0;v.length>y;)m(v[y++]);f.constructor=u,u.prototype=f,n(123)(r,"RegExp",u)}n(252)("RegExp")},function(t,e,n){"use strict";n(487);var r=n(59),o=n(325),i=n(94),a=/./.toString,s=function(t){n(123)(RegExp.prototype,"toString",t,!0)};n(58)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(t,e,n){"use strict";var r=n(59),o=n(79),i=n(410),a=n(326);n(327)("match",1,(function(t,e,n,s){return[function(n){var r=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var c=r(t),u=String(this);if(!c.global)return a(c,u);var l=c.unicode;c.lastIndex=0;for(var f,d=[],h=0;null!==(f=a(c,u));){var p=String(f[0]);d[h]=p,""===p&&(c.lastIndex=i(u,o(c.lastIndex),l)),h++}return 0===h?null:d}]}))},function(t,e,n){"use strict";var r=n(59),o=n(113),i=n(79),a=n(157),s=n(410),c=n(326),u=Math.max,l=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(327)("replace",2,(function(t,e,n,p){return[function(r,o){var i=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},function(t,e){var o=p(n,t,this,e);if(o.done)return o.value;var f=r(t),d=String(this),h="function"==typeof e;h||(e=String(e));var v=f.global;if(v){var y=f.unicode;f.lastIndex=0}for(var g=[];;){var b=c(f,d);if(null===b)break;if(g.push(b),!v)break;""===String(b[0])&&(f.lastIndex=s(d,i(f.lastIndex),y))}for(var w,_="",O=0,S=0;S<g.length;S++){b=g[S];for(var x=String(b[0]),C=u(l(a(b.index),d.length),0),E=[],k=1;k<b.length;k++)E.push(void 0===(w=b[k])?w:String(w));var T=b.groups;if(h){var P=[x].concat(E,C,d);void 0!==T&&P.push(T);var j=String(e.apply(void 0,P))}else j=m(x,d,C,E,T,e);C>=O&&(_+=d.slice(O,C)+j,O=C+x.length)}return _+d.slice(O)}];function m(t,e,r,i,a,s){var c=r+t.length,u=i.length,l=h;return void 0!==a&&(a=o(a),l=d),n.call(s,l,(function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return n;if(l>u){var d=f(l/10);return 0===d?n:d<=u?void 0===i[d-1]?o.charAt(1):i[d-1]+o.charAt(1):n}s=i[l-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var r=n(59),o=n(472),i=n(326);n(327)("search",1,(function(t,e,n,a){return[function(n){var r=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=r(t),c=String(this),u=s.lastIndex;o(u,0)||(s.lastIndex=0);var l=i(s,c);return o(s.lastIndex,u)||(s.lastIndex=u),null===l?-1:l.index}]}))},function(t,e,n){"use strict";var r=n(402),o=n(59),i=n(266),a=n(410),s=n(79),c=n(326),u=n(409),l=n(58),f=Math.min,d=[].push,h="length",p=!l((function(){RegExp(4294967295,"y")}));n(327)("split",2,(function(t,e,n,l){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(o,t,e);for(var i,a,s,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,p=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,l+"g");(i=u.call(m,o))&&!((a=m.lastIndex)>f&&(c.push(o.slice(f,i.index)),i[h]>1&&i.index<o[h]&&d.apply(c,i.slice(1)),s=i[0][h],f=a,c[h]>=p));)m.lastIndex===i.index&&m.lastIndex++;return f===o[h]?!s&&m.test("")||c.push(""):c.push(o.slice(f)),c[h]>p?c.slice(0,p):c}:"0".split(void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var o=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):m.call(String(o),n,r)},function(t,e){var r=l(m,t,this,e,m!==n);if(r.done)return r.value;var u=o(t),d=String(this),h=i(u,RegExp),v=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),g=new h(p?u:"^(?:"+u.source+")",y),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===d.length)return null===c(g,d)?[d]:[];for(var w=0,_=0,O=[];_<d.length;){g.lastIndex=p?_:0;var S,x=c(g,p?d:d.slice(_));if(null===x||(S=f(s(g.lastIndex+(p?0:_)),d.length))===w)_=a(d,_,v);else{if(O.push(d.slice(w,_)),O.length===b)return O;for(var C=1;C<=x.length-1;C++)if(O.push(x[C]),O.length===b)return O;_=w=S}}return O.push(d.slice(w)),O}]}))},function(t,e,n){var r=n(57),o=n(411).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(174)(a);t.exports=function(){var t,e,n,u=function(){var r,o;for(c&&(r=a.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){o.call(r,u)};else{var f=!0,d=document.createTextNode("");new i(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){"use strict";var r=n(491),o=n(236);t.exports=n(330)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(o(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(491),o=n(236);t.exports=n(330)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(o(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,o=n(57),i=n(160)(0),a=n(123),s=n(189),c=n(471),u=n(492),l=n(60),f=n(236),d=n(236),h=!o.ActiveXObject&&"ActiveXObject"in o,p=s.getWeak,m=Object.isExtensible,v=u.ufstore,y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(l(t)){var e=p(t);return!0===e?v(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},b=t.exports=n(330)("WeakMap",y,g,u,!0,!0);d&&h&&(c((r=u.getConstructor(y,"WeakMap")).prototype,g),s.NEED=!0,i(["delete","has","get","set"],(function(t){var e=b.prototype,n=e[t];a(e,t,(function(e,o){if(l(e)&&!m(e)){this._f||(this._f=new r);var i=this._f[t](e,o);return"set"==t?this:i}return n.call(this,e,o)}))})))},function(t,e,n){"use strict";var r=n(492),o=n(236);n(330)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(o(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(11),o=n(331),i=n(412),a=n(59),s=n(231),c=n(79),u=n(60),l=n(57).ArrayBuffer,f=n(266),d=i.ArrayBuffer,h=i.DataView,p=o.ABV&&l.isView,m=d.prototype.slice,v=o.VIEW;r(r.G+r.W+r.F*(l!==d),{ArrayBuffer:d}),r(r.S+r.F*!o.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||u(t)&&v in t}}),r(r.P+r.U+r.F*n(58)((function(){return!new d(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),o=s(void 0===e?n:e,n),i=new(f(this,d))(c(o-r)),u=new h(this),l=new h(i),p=0;r<o;)l.setUint8(p++,u.getUint8(r++));return i}}),n(252)("ArrayBuffer")},function(t,e,n){var r=n(11);r(r.G+r.W+r.F*!n(331).ABV,{DataView:n(412).DataView})},function(t,e,n){n(176)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(176)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(176)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){n(176)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(176)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(176)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(176)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(176)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(176)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(11),o=n(156),i=n(59),a=(n(57).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(58)((function(){a((function(){}))})),"Reflect",{apply:function(t,e,n){var r=o(t),c=i(n);return a?a(r,e,c):s.call(r,e,c)}})},function(t,e,n){var r=n(11),o=n(232),i=n(156),a=n(59),s=n(60),c=n(58),u=n(473),l=(n(57).Reflect||{}).construct,f=c((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),d=!c((function(){l((function(){}))}));r(r.S+r.F*(f||d),"Reflect",{construct:function(t,e){i(t),a(e);var n=arguments.length<3?t:i(arguments[2]);if(d&&!f)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(t,r))}var c=n.prototype,h=o(s(c)?c:Object.prototype),p=Function.apply.call(t,h,e);return s(p)?p:h}})},function(t,e,n){var r=n(95),o=n(11),i=n(59),a=n(188);o(o.S+o.F*n(58)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){i(t),e=a(e,!0),i(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(11),o=n(158).f,i=n(59);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=o(i(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(11),o=n(59),i=function(t){this._t=o(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(480)(i,"Object",(function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new i(t)}})},function(t,e,n){var r=n(158),o=n(234),i=n(141),a=n(11),s=n(60),c=n(59);a(a.S,"Reflect",{get:function t(e,n){var a,u,l=arguments.length<3?e:arguments[2];return c(e)===l?e[n]:(a=r.f(e,n))?i(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(u=o(e))?t(u,n,l):void 0}})},function(t,e,n){var r=n(158),o=n(11),i=n(59);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(i(t),e)}})},function(t,e,n){var r=n(11),o=n(234),i=n(59);r(r.S,"Reflect",{getPrototypeOf:function(t){return o(i(t))}})},function(t,e,n){var r=n(11);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(11),o=n(59),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return o(t),!i||i(t)}})},function(t,e,n){var r=n(11);r(r.S,"Reflect",{ownKeys:n(494)})},function(t,e,n){var r=n(11),o=n(59),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){o(t);try{return i&&i(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(95),o=n(158),i=n(234),a=n(141),s=n(11),c=n(227),u=n(59),l=n(60);s(s.S,"Reflect",{set:function t(e,n,s){var f,d,h=arguments.length<4?e:arguments[3],p=o.f(u(e),n);if(!p){if(l(d=i(e)))return t(d,n,s,h);p=c(0)}if(a(p,"value")){if(!1===p.writable||!l(h))return!1;if(f=o.f(h,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(h,n,f)}else r.f(h,n,c(0,s));return!0}return void 0!==p.set&&(p.set.call(h,s),!0)}})},function(t,e,n){var r=n(11),o=n(393);o&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){n(705),t.exports=n(89).Array.includes},function(t,e,n){"use strict";var r=n(11),o=n(321)(!0);r(r.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(235)("includes")},function(t,e,n){n(707),t.exports=n(89).Array.flatMap},function(t,e,n){"use strict";var r=n(11),o=n(708),i=n(113),a=n(79),s=n(156),c=n(482);r(r.P,"Array",{flatMap:function(t){var e,n,r=i(this);return s(t),e=a(r.length),n=c(r,0),o(n,r,r,e,0,1,t,arguments[1]),n}}),n(235)("flatMap")},function(t,e,n){"use strict";var r=n(323),o=n(60),i=n(79),a=n(155),s=n(70)("isConcatSpreadable");t.exports=function t(e,n,c,u,l,f,d,h){for(var p,m,v=l,y=0,g=!!d&&a(d,h,3);y<u;){if(y in c){if(p=g?g(c[y],y,n):c[y],m=!1,o(p)&&(m=void 0!==(m=p[s])?!!m:r(p)),m&&f>0)v=t(e,n,p,i(p.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=p}v++}y++}return v}},function(t,e,n){n(710),t.exports=n(89).String.padStart},function(t,e,n){"use strict";var r=n(11),o=n(495),i=n(329),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*a,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){n(712),t.exports=n(89).String.padEnd},function(t,e,n){"use strict";var r=n(11),o=n(495),i=n(329),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*a,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){n(714),t.exports=n(89).String.trimLeft},function(t,e,n){"use strict";n(250)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,n){n(716),t.exports=n(89).String.trimRight},function(t,e,n){"use strict";n(250)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,n){n(718),t.exports=n(389).f("asyncIterator")},function(t,e,n){n(467)("asyncIterator")},function(t,e,n){n(720),t.exports=n(89).Object.getOwnPropertyDescriptors},function(t,e,n){var r=n(11),o=n(494),i=n(143),a=n(158),s=n(405);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=i(t),c=a.f,u=o(r),l={},f=0;u.length>f;)void 0!==(n=c(r,e=u[f++]))&&s(l,e,n);return l}})},function(t,e,n){n(722),t.exports=n(89).Object.values},function(t,e,n){var r=n(11),o=n(496)(!1);r(r.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){n(724),t.exports=n(89).Object.entries},function(t,e,n){var r=n(11),o=n(496)(!0);r(r.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){"use strict";n(488),n(726),t.exports=n(89).Promise.finally},function(t,e,n){"use strict";var r=n(11),o=n(89),i=n(57),a=n(266),s=n(490);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,o.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){n(728),n(729),n(730),t.exports=n(89)},function(t,e,n){var r=n(57),o=n(11),i=n(329),a=[].slice,s=/MSIE .\./.test(i),c=function(t){return function(e,n){var r=arguments.length>2,o=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,n)}};o(o.G+o.B+o.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(t,e,n){var r=n(11),o=n(411);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){for(var r=n(408),o=n(230),i=n(123),a=n(57),s=n(142),c=n(251),u=n(70),l=u("iterator"),f=u("toStringTag"),d=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=o(h),m=0;m<p.length;m++){var v,y=p[m],g=h[y],b=a[y],w=b&&b.prototype;if(w&&(w[l]||s(w,l,d),w[f]||s(w,f,y),c[y]=d,g))for(v in r)w[v]||i(w,v,r[v],!0)}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function d(){}function h(){}var p={};p[o]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=y.constructor=h,h.constructor=d,d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){n(733),t.exports=n(497).global},function(t,e,n){var r=n(734);r(r.G,{global:n(413)})},function(t,e,n){var r=n(413),o=n(497),i=n(735),a=n(737),s=n(744),c=function(t,e,n){var u,l,f,d=t&c.F,h=t&c.G,p=t&c.S,m=t&c.P,v=t&c.B,y=t&c.W,g=h?o:o[e]||(o[e]={}),b=g.prototype,w=h?r:p?r[e]:(r[e]||{}).prototype;for(u in h&&(n=e),n)(l=!d&&w&&void 0!==w[u])&&s(g,u)||(f=l?w[u]:n[u],g[u]=h&&"function"!=typeof w[u]?n[u]:v&&l?i(f,r):y&&w[u]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):m&&"function"==typeof f?i(Function.call,f):f,m&&((g.virtual||(g.virtual={}))[u]=f,t&c.R&&b&&!b[u]&&a(b,u,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(736);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(738),o=n(743);t.exports=n(415)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(739),o=n(740),i=n(742),a=Object.defineProperty;e.f=n(415)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(414);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(415)&&!n(498)((function(){return 7!=Object.defineProperty(n(741)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(414),o=n(413).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(414);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(746),o=n(747),i=n(748);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),o=(t=s(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):d(t,e);if("Buffer"===e.type&&i(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|h(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,o);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,o){var i,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=n;i<s;i++)if(u(t,i)===u(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var f=!0,d=0;d<c;d++)if(u(t,i+d)!==u(e,d)){f=!1;break}if(f)return i}return-1}function b(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return G(U(e,t.length-n),t,n,r)}function _(t,e,n,r){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function O(t,e,n,r){return _(t,e,n,r)}function S(t,e,n,r){return G($(e),t,n,r)}function x(t,e,n,r){return G(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,s,c,u=t[o],l=null,f=u>239?4:u>223?3:u>191?2:1;if(o+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(i=t[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):m.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,o){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(i,a),u=this.slice(r,o),l=t.slice(e,n),f=0;f<s;++f)if(u[f]!==l[f]){i=u[f],a=l[f];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return O(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=F(t[i]);return o}function j(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function I(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function D(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,r,i){return i||D(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,i){return i||D(t,0,n,8),o.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var o=e-t;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},c.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);M(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);M(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=c.isBuffer(t)?t:U(new c(t,r).toString()),s=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function $(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(64))},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),a=r[0],s=r[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;2===s&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,c[l++]=255&e);1===s&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(l(t,a,a+16383>s?s:a+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?o-1:0,d=n?-1:1,h=t[e+f];for(f+=d,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+t[e+f],f+=d,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=d,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=u}return(h?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,f=l>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*c-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[n+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[n+h]=255&a,h+=p,a/=256,u-=8);t[n+h-p]|=128*m}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},,function(t,e,n){"use strict";n(560);var r,o=(r=n(732))&&r.__esModule?r:{default:r};o.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),o.default._babelPolyfill=!0}]]);